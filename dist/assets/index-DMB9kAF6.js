function KT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function QT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zy={exports:{}},mc={},By={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wo=Symbol.for("react.element"),XT=Symbol.for("react.portal"),YT=Symbol.for("react.fragment"),JT=Symbol.for("react.strict_mode"),ZT=Symbol.for("react.profiler"),eS=Symbol.for("react.provider"),tS=Symbol.for("react.context"),nS=Symbol.for("react.forward_ref"),rS=Symbol.for("react.suspense"),iS=Symbol.for("react.memo"),sS=Symbol.for("react.lazy"),Km=Symbol.iterator;function oS(t){return t===null||typeof t!="object"?null:(t=Km&&t[Km]||t["@@iterator"],typeof t=="function"?t:null)}var $y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qy=Object.assign,Wy={};function us(t,e,n){this.props=t,this.context=e,this.refs=Wy,this.updater=n||$y}us.prototype.isReactComponent={};us.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};us.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hy(){}Hy.prototype=us.prototype;function Uh(t,e,n){this.props=t,this.context=e,this.refs=Wy,this.updater=n||$y}var Fh=Uh.prototype=new Hy;Fh.constructor=Uh;qy(Fh,us.prototype);Fh.isPureReactComponent=!0;var Qm=Array.isArray,Gy=Object.prototype.hasOwnProperty,zh={current:null},Ky={key:!0,ref:!0,__self:!0,__source:!0};function Qy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Gy.call(e,r)&&!Ky.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Wo,type:t,key:s,ref:o,props:i,_owner:zh.current}}function aS(t,e){return{$$typeof:Wo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wo}function lS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xm=/\/+/g;function Pu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lS(""+t.key):e.toString(36)}function rl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wo:case XT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Pu(o,0):r,Qm(i)?(n="",t!=null&&(n=t.replace(Xm,"$&/")+"/"),rl(i,e,n,"",function(d){return d})):i!=null&&(Bh(i)&&(i=aS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Xm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Qm(t))for(var c=0;c<t.length;c++){s=t[c];var u=r+Pu(s,c);o+=rl(s,e,n,u,i)}else if(u=oS(t),typeof u=="function")for(t=u.call(t),c=0;!(s=t.next()).done;)s=s.value,u=r+Pu(s,c++),o+=rl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ka(t,e,n){if(t==null)return t;var r=[],i=0;return rl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function cS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},il={transition:null},uS={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:il,ReactCurrentOwner:zh};function Xy(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:ka,forEach:function(t,e,n){ka(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ka(t,function(){e++}),e},toArray:function(t){return ka(t,function(e){return e})||[]},only:function(t){if(!Bh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=us;re.Fragment=YT;re.Profiler=ZT;re.PureComponent=Uh;re.StrictMode=JT;re.Suspense=rS;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uS;re.act=Xy;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qy({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=zh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Gy.call(e,u)&&!Ky.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Wo,type:t.type,key:i,ref:s,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:tS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eS,_context:t},t.Consumer=t};re.createElement=Qy;re.createFactory=function(t){var e=Qy.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:nS,render:t}};re.isValidElement=Bh;re.lazy=function(t){return{$$typeof:sS,_payload:{_status:-1,_result:t},_init:cS}};re.memo=function(t,e){return{$$typeof:iS,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=il.transition;il.transition={};try{t()}finally{il.transition=e}};re.unstable_act=Xy;re.useCallback=function(t,e){return _t.current.useCallback(t,e)};re.useContext=function(t){return _t.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};re.useEffect=function(t,e){return _t.current.useEffect(t,e)};re.useId=function(){return _t.current.useId()};re.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return _t.current.useMemo(t,e)};re.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};re.useRef=function(t){return _t.current.useRef(t)};re.useState=function(t){return _t.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return _t.current.useTransition()};re.version="18.3.1";By.exports=re;var j=By.exports;const Yy=QT(j),dS=KT({__proto__:null,default:Yy},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hS=j,fS=Symbol.for("react.element"),pS=Symbol.for("react.fragment"),mS=Object.prototype.hasOwnProperty,gS=hS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vS={key:!0,ref:!0,__self:!0,__source:!0};function Jy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mS.call(e,r)&&!vS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fS,type:t,key:s,ref:o,props:i,_owner:gS.current}}mc.Fragment=pS;mc.jsx=Jy;mc.jsxs=Jy;zy.exports=mc;var a=zy.exports,vd={},Zy={exports:{}},Lt={},e_={exports:{}},t_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,G){var Z=z.length;z.push(G);e:for(;0<Z;){var Te=Z-1>>>1,pe=z[Te];if(0<i(pe,G))z[Te]=G,z[Z]=pe,Z=Te;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],Z=z.pop();if(Z!==G){z[0]=Z;e:for(var Te=0,pe=z.length,be=pe>>>1;Te<be;){var yn=2*(Te+1)-1,_n=z[yn],wn=yn+1,En=z[wn];if(0>i(_n,Z))wn<pe&&0>i(En,_n)?(z[Te]=En,z[wn]=Z,Te=wn):(z[Te]=_n,z[yn]=Z,Te=yn);else if(wn<pe&&0>i(En,Z))z[Te]=En,z[wn]=Z,Te=wn;else break e}}return G}function i(z,G){var Z=z.sortIndex-G.sortIndex;return Z!==0?Z:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,p=3,v=!1,x=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(z){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=z)r(d),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(d)}}function I(z){if(E=!1,w(z),!x)if(n(u)!==null)x=!0,ee(O);else{var G=n(d);G!==null&&le(I,G.startTime-z)}}function O(z,G){x=!1,E&&(E=!1,y(_),_=-1),v=!0;var Z=p;try{for(w(G),m=n(u);m!==null&&(!(m.expirationTime>G)||z&&!R());){var Te=m.callback;if(typeof Te=="function"){m.callback=null,p=m.priorityLevel;var pe=Te(m.expirationTime<=G);G=t.unstable_now(),typeof pe=="function"?m.callback=pe:m===n(u)&&r(u),w(G)}else r(u);m=n(u)}if(m!==null)var be=!0;else{var yn=n(d);yn!==null&&le(I,yn.startTime-G),be=!1}return be}finally{m=null,p=Z,v=!1}}var b=!1,N=null,_=-1,C=5,P=-1;function R(){return!(t.unstable_now()-P<C)}function D(){if(N!==null){var z=t.unstable_now();P=z;var G=!0;try{G=N(!0,z)}finally{G?k():(b=!1,N=null)}}else b=!1}var k;if(typeof T=="function")k=function(){T(D)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Mt=de.port2;de.port1.onmessage=D,k=function(){Mt.postMessage(null)}}else k=function(){A(D,0)};function ee(z){N=z,b||(b=!0,k())}function le(z,G){_=A(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,ee(O))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var Z=p;p=G;try{return z()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=p;p=z;try{return G()}finally{p=Z}},t.unstable_scheduleCallback=function(z,G,Z){var Te=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Te+Z:Te):Z=Te,z){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Z+pe,z={id:f++,callback:G,priorityLevel:z,startTime:Z,expirationTime:pe,sortIndex:-1},Z>Te?(z.sortIndex=Z,e(d,z),n(u)===null&&z===n(d)&&(E?(y(_),_=-1):E=!0,le(I,Z-Te))):(z.sortIndex=pe,e(u,z),x||v||(x=!0,ee(O))),z},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(z){var G=p;return function(){var Z=p;p=G;try{return z.apply(this,arguments)}finally{p=Z}}}})(t_);e_.exports=t_;var yS=e_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _S=j,Ot=yS;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n_=new Set,go={};function ci(t,e){Qi(t,e),Qi(t+"Capture",e)}function Qi(t,e){for(go[t]=e,t=0;t<e.length;t++)n_.add(e[t])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yd=Object.prototype.hasOwnProperty,wS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ym={},Jm={};function ES(t){return yd.call(Jm,t)?!0:yd.call(Ym,t)?!1:wS.test(t)?Jm[t]=!0:(Ym[t]=!0,!1)}function xS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TS(t,e,n,r){if(e===null||typeof e>"u"||xS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var $h=/[\-:]([a-z])/g;function qh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($h,qh);Je[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($h,qh);Je[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($h,qh);Je[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wh(t,e,n,r){var i=Je.hasOwnProperty(e)?Je[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TS(e,n,i,r)&&(n=null),r||i===null?ES(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $n=_S.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ja=Symbol.for("react.element"),Ii=Symbol.for("react.portal"),Ni=Symbol.for("react.fragment"),Hh=Symbol.for("react.strict_mode"),_d=Symbol.for("react.profiler"),r_=Symbol.for("react.provider"),i_=Symbol.for("react.context"),Gh=Symbol.for("react.forward_ref"),wd=Symbol.for("react.suspense"),Ed=Symbol.for("react.suspense_list"),Kh=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),s_=Symbol.for("react.offscreen"),Zm=Symbol.iterator;function Ds(t){return t===null||typeof t!="object"?null:(t=Zm&&t[Zm]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,ku;function Hs(t){if(ku===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ku=e&&e[1]||""}return`
`+ku+t}var ju=!1;function bu(t,e){if(!t||ju)return"";ju=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,c=s.length-1;1<=o&&0<=c&&i[o]!==s[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==s[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==s[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{ju=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Hs(t):""}function SS(t){switch(t.tag){case 5:return Hs(t.type);case 16:return Hs("Lazy");case 13:return Hs("Suspense");case 19:return Hs("SuspenseList");case 0:case 2:case 15:return t=bu(t.type,!1),t;case 11:return t=bu(t.type.render,!1),t;case 1:return t=bu(t.type,!0),t;default:return""}}function xd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ni:return"Fragment";case Ii:return"Portal";case _d:return"Profiler";case Hh:return"StrictMode";case wd:return"Suspense";case Ed:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case i_:return(t.displayName||"Context")+".Consumer";case r_:return(t._context.displayName||"Context")+".Provider";case Gh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kh:return e=t.displayName||null,e!==null?e:xd(t.type)||"Memo";case Xn:e=t._payload,t=t._init;try{return xd(t(e))}catch{}}return null}function IS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xd(e);case 8:return e===Hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function o_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NS(t){var e=o_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ba(t){t._valueTracker||(t._valueTracker=NS(t))}function a_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=o_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Il(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Td(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function eg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l_(t,e){e=e.checked,e!=null&&Wh(t,"checked",e,!1)}function Sd(t,e){l_(t,e);var n=Tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Id(t,e.type,n):e.hasOwnProperty("defaultValue")&&Id(t,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Id(t,e,n){(e!=="number"||Il(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gs=Array.isArray;function Mi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Nd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ng(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Gs(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tr(n)}}function c_(t,e){var n=Tr(e.value),r=Tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function u_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?u_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Da,d_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CS=["Webkit","ms","Moz","O"];Object.keys(eo).forEach(function(t){CS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eo[e]=eo[t]})});function h_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eo.hasOwnProperty(t)&&eo[t]?(""+e).trim():e+"px"}function f_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=h_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var AS=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ad(t,e){if(e){if(AS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Rd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pd=null;function Qh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kd=null,Ui=null,Fi=null;function ig(t){if(t=Ko(t)){if(typeof kd!="function")throw Error(F(280));var e=t.stateNode;e&&(e=wc(e),kd(t.stateNode,t.type,e))}}function p_(t){Ui?Fi?Fi.push(t):Fi=[t]:Ui=t}function m_(){if(Ui){var t=Ui,e=Fi;if(Fi=Ui=null,ig(t),e)for(t=0;t<e.length;t++)ig(e[t])}}function g_(t,e){return t(e)}function v_(){}var Du=!1;function y_(t,e,n){if(Du)return t(e,n);Du=!0;try{return g_(t,e,n)}finally{Du=!1,(Ui!==null||Fi!==null)&&(v_(),m_())}}function yo(t,e){var n=t.stateNode;if(n===null)return null;var r=wc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var jd=!1;if(bn)try{var Os={};Object.defineProperty(Os,"passive",{get:function(){jd=!0}}),window.addEventListener("test",Os,Os),window.removeEventListener("test",Os,Os)}catch{jd=!1}function RS(t,e,n,r,i,s,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var to=!1,Nl=null,Cl=!1,bd=null,PS={onError:function(t){to=!0,Nl=t}};function kS(t,e,n,r,i,s,o,c,u){to=!1,Nl=null,RS.apply(PS,arguments)}function jS(t,e,n,r,i,s,o,c,u){if(kS.apply(this,arguments),to){if(to){var d=Nl;to=!1,Nl=null}else throw Error(F(198));Cl||(Cl=!0,bd=d)}}function ui(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function __(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sg(t){if(ui(t)!==t)throw Error(F(188))}function bS(t){var e=t.alternate;if(!e){if(e=ui(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return sg(i),t;if(s===r)return sg(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function w_(t){return t=bS(t),t!==null?E_(t):null}function E_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=E_(t);if(e!==null)return e;t=t.sibling}return null}var x_=Ot.unstable_scheduleCallback,og=Ot.unstable_cancelCallback,DS=Ot.unstable_shouldYield,OS=Ot.unstable_requestPaint,Oe=Ot.unstable_now,LS=Ot.unstable_getCurrentPriorityLevel,Xh=Ot.unstable_ImmediatePriority,T_=Ot.unstable_UserBlockingPriority,Al=Ot.unstable_NormalPriority,VS=Ot.unstable_LowPriority,S_=Ot.unstable_IdlePriority,gc=null,un=null;function MS(t){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(gc,t,void 0,(t.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:zS,US=Math.log,FS=Math.LN2;function zS(t){return t>>>=0,t===0?32:31-(US(t)/FS|0)|0}var Oa=64,La=4194304;function Ks(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=Ks(c):(s&=o,s!==0&&(r=Ks(s)))}else o=n&~i,o!==0?r=Ks(o):s!==0&&(r=Ks(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zt(e),i=1<<n,r|=t[n],e&=~i;return r}function BS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $S(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Zt(s),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=BS(c,e)):u<=e&&(t.expiredLanes|=c),s&=~c}}function Dd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function I_(){var t=Oa;return Oa<<=1,!(Oa&4194240)&&(Oa=64),t}function Ou(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zt(e),t[e]=n}function qS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var he=0;function N_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var C_,Jh,A_,R_,P_,Od=!1,Va=[],ur=null,dr=null,hr=null,_o=new Map,wo=new Map,Jn=[],WS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ag(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":_o.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(e.pointerId)}}function Ls(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ko(e),e!==null&&Jh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function HS(t,e,n,r,i){switch(e){case"focusin":return ur=Ls(ur,t,e,n,r,i),!0;case"dragenter":return dr=Ls(dr,t,e,n,r,i),!0;case"mouseover":return hr=Ls(hr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _o.set(s,Ls(_o.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wo.set(s,Ls(wo.get(s)||null,t,e,n,r,i)),!0}return!1}function k_(t){var e=qr(t.target);if(e!==null){var n=ui(e);if(n!==null){if(e=n.tag,e===13){if(e=__(n),e!==null){t.blockedOn=e,P_(t.priority,function(){A_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ld(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Pd=r,n.target.dispatchEvent(r),Pd=null}else return e=Ko(n),e!==null&&Jh(e),t.blockedOn=n,!1;e.shift()}return!0}function lg(t,e,n){sl(t)&&n.delete(e)}function GS(){Od=!1,ur!==null&&sl(ur)&&(ur=null),dr!==null&&sl(dr)&&(dr=null),hr!==null&&sl(hr)&&(hr=null),_o.forEach(lg),wo.forEach(lg)}function Vs(t,e){t.blockedOn===e&&(t.blockedOn=null,Od||(Od=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,GS)))}function Eo(t){function e(i){return Vs(i,t)}if(0<Va.length){Vs(Va[0],t);for(var n=1;n<Va.length;n++){var r=Va[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ur!==null&&Vs(ur,t),dr!==null&&Vs(dr,t),hr!==null&&Vs(hr,t),_o.forEach(e),wo.forEach(e),n=0;n<Jn.length;n++)r=Jn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jn.length&&(n=Jn[0],n.blockedOn===null);)k_(n),n.blockedOn===null&&Jn.shift()}var zi=$n.ReactCurrentBatchConfig,Pl=!0;function KS(t,e,n,r){var i=he,s=zi.transition;zi.transition=null;try{he=1,Zh(t,e,n,r)}finally{he=i,zi.transition=s}}function QS(t,e,n,r){var i=he,s=zi.transition;zi.transition=null;try{he=4,Zh(t,e,n,r)}finally{he=i,zi.transition=s}}function Zh(t,e,n,r){if(Pl){var i=Ld(t,e,n,r);if(i===null)Wu(t,e,r,kl,n),ag(t,r);else if(HS(i,t,e,n,r))r.stopPropagation();else if(ag(t,r),e&4&&-1<WS.indexOf(t)){for(;i!==null;){var s=Ko(i);if(s!==null&&C_(s),s=Ld(t,e,n,r),s===null&&Wu(t,e,r,kl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wu(t,e,r,null,n)}}var kl=null;function Ld(t,e,n,r){if(kl=null,t=Qh(r),t=qr(t),t!==null)if(e=ui(t),e===null)t=null;else if(n=e.tag,n===13){if(t=__(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kl=t,null}function j_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LS()){case Xh:return 1;case T_:return 4;case Al:case VS:return 16;case S_:return 536870912;default:return 16}default:return 16}}var sr=null,ef=null,ol=null;function b_(){if(ol)return ol;var t,e=ef,n=e.length,r,i="value"in sr?sr.value:sr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ol=i.slice(t,1<r?1-r:void 0)}function al(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ma(){return!0}function cg(){return!1}function Vt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ma:cg,this.isPropagationStopped=cg,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),e}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tf=Vt(ds),Go=Ne({},ds,{view:0,detail:0}),XS=Vt(Go),Lu,Vu,Ms,vc=Ne({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ms&&(Ms&&t.type==="mousemove"?(Lu=t.screenX-Ms.screenX,Vu=t.screenY-Ms.screenY):Vu=Lu=0,Ms=t),Lu)},movementY:function(t){return"movementY"in t?t.movementY:Vu}}),ug=Vt(vc),YS=Ne({},vc,{dataTransfer:0}),JS=Vt(YS),ZS=Ne({},Go,{relatedTarget:0}),Mu=Vt(ZS),eI=Ne({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),tI=Vt(eI),nI=Ne({},ds,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rI=Vt(nI),iI=Ne({},ds,{data:0}),dg=Vt(iI),sI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aI[t])?!!e[t]:!1}function nf(){return lI}var cI=Ne({},Go,{key:function(t){if(t.key){var e=sI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=al(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nf,charCode:function(t){return t.type==="keypress"?al(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?al(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uI=Vt(cI),dI=Ne({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hg=Vt(dI),hI=Ne({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nf}),fI=Vt(hI),pI=Ne({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),mI=Vt(pI),gI=Ne({},vc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vI=Vt(gI),yI=[9,13,27,32],rf=bn&&"CompositionEvent"in window,no=null;bn&&"documentMode"in document&&(no=document.documentMode);var _I=bn&&"TextEvent"in window&&!no,D_=bn&&(!rf||no&&8<no&&11>=no),fg=" ",pg=!1;function O_(t,e){switch(t){case"keyup":return yI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ci=!1;function wI(t,e){switch(t){case"compositionend":return L_(e);case"keypress":return e.which!==32?null:(pg=!0,fg);case"textInput":return t=e.data,t===fg&&pg?null:t;default:return null}}function EI(t,e){if(Ci)return t==="compositionend"||!rf&&O_(t,e)?(t=b_(),ol=ef=sr=null,Ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return D_&&e.locale!=="ko"?null:e.data;default:return null}}var xI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xI[t.type]:e==="textarea"}function V_(t,e,n,r){p_(r),e=jl(e,"onChange"),0<e.length&&(n=new tf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ro=null,xo=null;function TI(t){K_(t,0)}function yc(t){var e=Pi(t);if(a_(e))return t}function SI(t,e){if(t==="change")return e}var M_=!1;if(bn){var Uu;if(bn){var Fu="oninput"in document;if(!Fu){var gg=document.createElement("div");gg.setAttribute("oninput","return;"),Fu=typeof gg.oninput=="function"}Uu=Fu}else Uu=!1;M_=Uu&&(!document.documentMode||9<document.documentMode)}function vg(){ro&&(ro.detachEvent("onpropertychange",U_),xo=ro=null)}function U_(t){if(t.propertyName==="value"&&yc(xo)){var e=[];V_(e,xo,t,Qh(t)),y_(TI,e)}}function II(t,e,n){t==="focusin"?(vg(),ro=e,xo=n,ro.attachEvent("onpropertychange",U_)):t==="focusout"&&vg()}function NI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yc(xo)}function CI(t,e){if(t==="click")return yc(e)}function AI(t,e){if(t==="input"||t==="change")return yc(e)}function RI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tn=typeof Object.is=="function"?Object.is:RI;function To(t,e){if(tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yd.call(e,i)||!tn(t[i],e[i]))return!1}return!0}function yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _g(t,e){var n=yg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yg(n)}}function F_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?F_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function z_(){for(var t=window,e=Il();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Il(t.document)}return e}function sf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function PI(t){var e=z_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&F_(n.ownerDocument.documentElement,n)){if(r!==null&&sf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_g(n,s);var o=_g(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kI=bn&&"documentMode"in document&&11>=document.documentMode,Ai=null,Vd=null,io=null,Md=!1;function wg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Md||Ai==null||Ai!==Il(r)||(r=Ai,"selectionStart"in r&&sf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),io&&To(io,r)||(io=r,r=jl(Vd,"onSelect"),0<r.length&&(e=new tf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ai)))}function Ua(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ri={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionend:Ua("Transition","TransitionEnd")},zu={},B_={};bn&&(B_=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function _c(t){if(zu[t])return zu[t];if(!Ri[t])return t;var e=Ri[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in B_)return zu[t]=e[n];return t}var $_=_c("animationend"),q_=_c("animationiteration"),W_=_c("animationstart"),H_=_c("transitionend"),G_=new Map,Eg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){G_.set(t,e),ci(e,[t])}for(var Bu=0;Bu<Eg.length;Bu++){var $u=Eg[Bu],jI=$u.toLowerCase(),bI=$u[0].toUpperCase()+$u.slice(1);Pr(jI,"on"+bI)}Pr($_,"onAnimationEnd");Pr(q_,"onAnimationIteration");Pr(W_,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(H_,"onTransitionEnd");Qi("onMouseEnter",["mouseout","mouseover"]);Qi("onMouseLeave",["mouseout","mouseover"]);Qi("onPointerEnter",["pointerout","pointerover"]);Qi("onPointerLeave",["pointerout","pointerover"]);ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qs));function xg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jS(r,e,void 0,t),t.currentTarget=null}function K_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==s&&i.isPropagationStopped())break e;xg(i,c,d),s=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==s&&i.isPropagationStopped())break e;xg(i,c,d),s=u}}}if(Cl)throw t=bd,Cl=!1,bd=null,t}function ye(t,e){var n=e[$d];n===void 0&&(n=e[$d]=new Set);var r=t+"__bubble";n.has(r)||(Q_(e,t,2,!1),n.add(r))}function qu(t,e,n){var r=0;e&&(r|=4),Q_(n,t,r,e)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function So(t){if(!t[Fa]){t[Fa]=!0,n_.forEach(function(n){n!=="selectionchange"&&(DI.has(n)||qu(n,!1,t),qu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fa]||(e[Fa]=!0,qu("selectionchange",!1,e))}}function Q_(t,e,n,r){switch(j_(e)){case 1:var i=KS;break;case 4:i=QS;break;default:i=Zh}n=i.bind(null,e,n,t),i=void 0,!jd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=qr(c),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}c=c.parentNode}}r=r.return}y_(function(){var d=s,f=Qh(n),m=[];e:{var p=G_.get(t);if(p!==void 0){var v=tf,x=t;switch(t){case"keypress":if(al(n)===0)break e;case"keydown":case"keyup":v=uI;break;case"focusin":x="focus",v=Mu;break;case"focusout":x="blur",v=Mu;break;case"beforeblur":case"afterblur":v=Mu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=JS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=fI;break;case $_:case q_:case W_:v=tI;break;case H_:v=mI;break;case"scroll":v=XS;break;case"wheel":v=vI;break;case"copy":case"cut":case"paste":v=rI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=hg}var E=(e&4)!==0,A=!E&&t==="scroll",y=E?p!==null?p+"Capture":null:p;E=[];for(var T=d,w;T!==null;){w=T;var I=w.stateNode;if(w.tag===5&&I!==null&&(w=I,y!==null&&(I=yo(T,y),I!=null&&E.push(Io(T,I,w)))),A)break;T=T.return}0<E.length&&(p=new v(p,x,null,n,f),m.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==Pd&&(x=n.relatedTarget||n.fromElement)&&(qr(x)||x[Dn]))break e;if((v||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=d,x=x?qr(x):null,x!==null&&(A=ui(x),x!==A||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=d),v!==x)){if(E=ug,I="onMouseLeave",y="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(E=hg,I="onPointerLeave",y="onPointerEnter",T="pointer"),A=v==null?p:Pi(v),w=x==null?p:Pi(x),p=new E(I,T+"leave",v,n,f),p.target=A,p.relatedTarget=w,I=null,qr(f)===d&&(E=new E(y,T+"enter",x,n,f),E.target=w,E.relatedTarget=A,I=E),A=I,v&&x)t:{for(E=v,y=x,T=0,w=E;w;w=wi(w))T++;for(w=0,I=y;I;I=wi(I))w++;for(;0<T-w;)E=wi(E),T--;for(;0<w-T;)y=wi(y),w--;for(;T--;){if(E===y||y!==null&&E===y.alternate)break t;E=wi(E),y=wi(y)}E=null}else E=null;v!==null&&Tg(m,p,v,E,!1),x!==null&&A!==null&&Tg(m,A,x,E,!0)}}e:{if(p=d?Pi(d):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var O=SI;else if(mg(p))if(M_)O=AI;else{O=NI;var b=II}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=CI);if(O&&(O=O(t,d))){V_(m,O,n,f);break e}b&&b(t,p,d),t==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&Id(p,"number",p.value)}switch(b=d?Pi(d):window,t){case"focusin":(mg(b)||b.contentEditable==="true")&&(Ai=b,Vd=d,io=null);break;case"focusout":io=Vd=Ai=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,wg(m,n,f);break;case"selectionchange":if(kI)break;case"keydown":case"keyup":wg(m,n,f)}var N;if(rf)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ci?O_(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(D_&&n.locale!=="ko"&&(Ci||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ci&&(N=b_()):(sr=f,ef="value"in sr?sr.value:sr.textContent,Ci=!0)),b=jl(d,_),0<b.length&&(_=new dg(_,t,null,n,f),m.push({event:_,listeners:b}),N?_.data=N:(N=L_(n),N!==null&&(_.data=N)))),(N=_I?wI(t,n):EI(t,n))&&(d=jl(d,"onBeforeInput"),0<d.length&&(f=new dg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=N))}K_(m,e)})}function Io(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=yo(t,n),s!=null&&r.unshift(Io(t,s,i)),s=yo(t,e),s!=null&&r.push(Io(t,s,i))),t=t.return}return r}function wi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=yo(n,s),u!=null&&o.unshift(Io(n,u,c))):i||(u=yo(n,s),u!=null&&o.push(Io(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var OI=/\r\n?/g,LI=/\u0000|\uFFFD/g;function Sg(t){return(typeof t=="string"?t:""+t).replace(OI,`
`).replace(LI,"")}function za(t,e,n){if(e=Sg(e),Sg(t)!==e&&n)throw Error(F(425))}function bl(){}var Ud=null,Fd=null;function zd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bd=typeof setTimeout=="function"?setTimeout:void 0,VI=typeof clearTimeout=="function"?clearTimeout:void 0,Ig=typeof Promise=="function"?Promise:void 0,MI=typeof queueMicrotask=="function"?queueMicrotask:typeof Ig<"u"?function(t){return Ig.resolve(null).then(t).catch(UI)}:Bd;function UI(t){setTimeout(function(){throw t})}function Hu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Eo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Eo(e)}function fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ng(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hs=Math.random().toString(36).slice(2),ln="__reactFiber$"+hs,No="__reactProps$"+hs,Dn="__reactContainer$"+hs,$d="__reactEvents$"+hs,FI="__reactListeners$"+hs,zI="__reactHandles$"+hs;function qr(t){var e=t[ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dn]||n[ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ng(t);t!==null;){if(n=t[ln])return n;t=Ng(t)}return e}t=n,n=t.parentNode}return null}function Ko(t){return t=t[ln]||t[Dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function wc(t){return t[No]||null}var qd=[],ki=-1;function kr(t){return{current:t}}function we(t){0>ki||(t.current=qd[ki],qd[ki]=null,ki--)}function ge(t,e){ki++,qd[ki]=t.current,t.current=e}var Sr={},ut=kr(Sr),St=kr(!1),Zr=Sr;function Xi(t,e){var n=t.type.contextTypes;if(!n)return Sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function It(t){return t=t.childContextTypes,t!=null}function Dl(){we(St),we(ut)}function Cg(t,e,n){if(ut.current!==Sr)throw Error(F(168));ge(ut,e),ge(St,n)}function X_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,IS(t)||"Unknown",i));return Ne({},n,r)}function Ol(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sr,Zr=ut.current,ge(ut,t),ge(St,St.current),!0}function Ag(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=X_(t,e,Zr),r.__reactInternalMemoizedMergedChildContext=t,we(St),we(ut),ge(ut,t)):we(St),ge(St,n)}var In=null,Ec=!1,Gu=!1;function Y_(t){In===null?In=[t]:In.push(t)}function BI(t){Ec=!0,Y_(t)}function jr(){if(!Gu&&In!==null){Gu=!0;var t=0,e=he;try{var n=In;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}In=null,Ec=!1}catch(i){throw In!==null&&(In=In.slice(t+1)),x_(Xh,jr),i}finally{he=e,Gu=!1}}return null}var ji=[],bi=0,Ll=null,Vl=0,Ut=[],Ft=0,ei=null,Nn=1,Cn="";function zr(t,e){ji[bi++]=Vl,ji[bi++]=Ll,Ll=t,Vl=e}function J_(t,e,n){Ut[Ft++]=Nn,Ut[Ft++]=Cn,Ut[Ft++]=ei,ei=t;var r=Nn;t=Cn;var i=32-Zt(r)-1;r&=~(1<<i),n+=1;var s=32-Zt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Nn=1<<32-Zt(e)+i|n<<i|r,Cn=s+t}else Nn=1<<s|n<<i|r,Cn=t}function of(t){t.return!==null&&(zr(t,1),J_(t,1,0))}function af(t){for(;t===Ll;)Ll=ji[--bi],ji[bi]=null,Vl=ji[--bi],ji[bi]=null;for(;t===ei;)ei=Ut[--Ft],Ut[Ft]=null,Cn=Ut[--Ft],Ut[Ft]=null,Nn=Ut[--Ft],Ut[Ft]=null}var Dt=null,kt=null,xe=!1,Jt=null;function Z_(t,e){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Rg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,kt=fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ei!==null?{id:Nn,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,kt=null,!0):!1;default:return!1}}function Wd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hd(t){if(xe){var e=kt;if(e){var n=e;if(!Rg(t,e)){if(Wd(t))throw Error(F(418));e=fr(n.nextSibling);var r=Dt;e&&Rg(t,e)?Z_(r,n):(t.flags=t.flags&-4097|2,xe=!1,Dt=t)}}else{if(Wd(t))throw Error(F(418));t.flags=t.flags&-4097|2,xe=!1,Dt=t}}}function Pg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function Ba(t){if(t!==Dt)return!1;if(!xe)return Pg(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zd(t.type,t.memoizedProps)),e&&(e=kt)){if(Wd(t))throw ew(),Error(F(418));for(;e;)Z_(t,e),e=fr(e.nextSibling)}if(Pg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kt=fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kt=null}}else kt=Dt?fr(t.stateNode.nextSibling):null;return!0}function ew(){for(var t=kt;t;)t=fr(t.nextSibling)}function Yi(){kt=Dt=null,xe=!1}function lf(t){Jt===null?Jt=[t]:Jt.push(t)}var $I=$n.ReactCurrentBatchConfig;function Us(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var c=i.refs;o===null?delete c[s]:c[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function $a(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kg(t){var e=t._init;return e(t._payload)}function tw(t){function e(y,T){if(t){var w=y.deletions;w===null?(y.deletions=[T],y.flags|=16):w.push(T)}}function n(y,T){if(!t)return null;for(;T!==null;)e(y,T),T=T.sibling;return null}function r(y,T){for(y=new Map;T!==null;)T.key!==null?y.set(T.key,T):y.set(T.index,T),T=T.sibling;return y}function i(y,T){return y=vr(y,T),y.index=0,y.sibling=null,y}function s(y,T,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<T?(y.flags|=2,T):w):(y.flags|=2,T)):(y.flags|=1048576,T)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function c(y,T,w,I){return T===null||T.tag!==6?(T=ed(w,y.mode,I),T.return=y,T):(T=i(T,w),T.return=y,T)}function u(y,T,w,I){var O=w.type;return O===Ni?f(y,T,w.props.children,I,w.key):T!==null&&(T.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xn&&kg(O)===T.type)?(I=i(T,w.props),I.ref=Us(y,T,w),I.return=y,I):(I=pl(w.type,w.key,w.props,null,y.mode,I),I.ref=Us(y,T,w),I.return=y,I)}function d(y,T,w,I){return T===null||T.tag!==4||T.stateNode.containerInfo!==w.containerInfo||T.stateNode.implementation!==w.implementation?(T=td(w,y.mode,I),T.return=y,T):(T=i(T,w.children||[]),T.return=y,T)}function f(y,T,w,I,O){return T===null||T.tag!==7?(T=Qr(w,y.mode,I,O),T.return=y,T):(T=i(T,w),T.return=y,T)}function m(y,T,w){if(typeof T=="string"&&T!==""||typeof T=="number")return T=ed(""+T,y.mode,w),T.return=y,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ja:return w=pl(T.type,T.key,T.props,null,y.mode,w),w.ref=Us(y,null,T),w.return=y,w;case Ii:return T=td(T,y.mode,w),T.return=y,T;case Xn:var I=T._init;return m(y,I(T._payload),w)}if(Gs(T)||Ds(T))return T=Qr(T,y.mode,w,null),T.return=y,T;$a(y,T)}return null}function p(y,T,w,I){var O=T!==null?T.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:c(y,T,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ja:return w.key===O?u(y,T,w,I):null;case Ii:return w.key===O?d(y,T,w,I):null;case Xn:return O=w._init,p(y,T,O(w._payload),I)}if(Gs(w)||Ds(w))return O!==null?null:f(y,T,w,I,null);$a(y,w)}return null}function v(y,T,w,I,O){if(typeof I=="string"&&I!==""||typeof I=="number")return y=y.get(w)||null,c(T,y,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ja:return y=y.get(I.key===null?w:I.key)||null,u(T,y,I,O);case Ii:return y=y.get(I.key===null?w:I.key)||null,d(T,y,I,O);case Xn:var b=I._init;return v(y,T,w,b(I._payload),O)}if(Gs(I)||Ds(I))return y=y.get(w)||null,f(T,y,I,O,null);$a(T,I)}return null}function x(y,T,w,I){for(var O=null,b=null,N=T,_=T=0,C=null;N!==null&&_<w.length;_++){N.index>_?(C=N,N=null):C=N.sibling;var P=p(y,N,w[_],I);if(P===null){N===null&&(N=C);break}t&&N&&P.alternate===null&&e(y,N),T=s(P,T,_),b===null?O=P:b.sibling=P,b=P,N=C}if(_===w.length)return n(y,N),xe&&zr(y,_),O;if(N===null){for(;_<w.length;_++)N=m(y,w[_],I),N!==null&&(T=s(N,T,_),b===null?O=N:b.sibling=N,b=N);return xe&&zr(y,_),O}for(N=r(y,N);_<w.length;_++)C=v(N,y,_,w[_],I),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?_:C.key),T=s(C,T,_),b===null?O=C:b.sibling=C,b=C);return t&&N.forEach(function(R){return e(y,R)}),xe&&zr(y,_),O}function E(y,T,w,I){var O=Ds(w);if(typeof O!="function")throw Error(F(150));if(w=O.call(w),w==null)throw Error(F(151));for(var b=O=null,N=T,_=T=0,C=null,P=w.next();N!==null&&!P.done;_++,P=w.next()){N.index>_?(C=N,N=null):C=N.sibling;var R=p(y,N,P.value,I);if(R===null){N===null&&(N=C);break}t&&N&&R.alternate===null&&e(y,N),T=s(R,T,_),b===null?O=R:b.sibling=R,b=R,N=C}if(P.done)return n(y,N),xe&&zr(y,_),O;if(N===null){for(;!P.done;_++,P=w.next())P=m(y,P.value,I),P!==null&&(T=s(P,T,_),b===null?O=P:b.sibling=P,b=P);return xe&&zr(y,_),O}for(N=r(y,N);!P.done;_++,P=w.next())P=v(N,y,_,P.value,I),P!==null&&(t&&P.alternate!==null&&N.delete(P.key===null?_:P.key),T=s(P,T,_),b===null?O=P:b.sibling=P,b=P);return t&&N.forEach(function(D){return e(y,D)}),xe&&zr(y,_),O}function A(y,T,w,I){if(typeof w=="object"&&w!==null&&w.type===Ni&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ja:e:{for(var O=w.key,b=T;b!==null;){if(b.key===O){if(O=w.type,O===Ni){if(b.tag===7){n(y,b.sibling),T=i(b,w.props.children),T.return=y,y=T;break e}}else if(b.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xn&&kg(O)===b.type){n(y,b.sibling),T=i(b,w.props),T.ref=Us(y,b,w),T.return=y,y=T;break e}n(y,b);break}else e(y,b);b=b.sibling}w.type===Ni?(T=Qr(w.props.children,y.mode,I,w.key),T.return=y,y=T):(I=pl(w.type,w.key,w.props,null,y.mode,I),I.ref=Us(y,T,w),I.return=y,y=I)}return o(y);case Ii:e:{for(b=w.key;T!==null;){if(T.key===b)if(T.tag===4&&T.stateNode.containerInfo===w.containerInfo&&T.stateNode.implementation===w.implementation){n(y,T.sibling),T=i(T,w.children||[]),T.return=y,y=T;break e}else{n(y,T);break}else e(y,T);T=T.sibling}T=td(w,y.mode,I),T.return=y,y=T}return o(y);case Xn:return b=w._init,A(y,T,b(w._payload),I)}if(Gs(w))return x(y,T,w,I);if(Ds(w))return E(y,T,w,I);$a(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,T!==null&&T.tag===6?(n(y,T.sibling),T=i(T,w),T.return=y,y=T):(n(y,T),T=ed(w,y.mode,I),T.return=y,y=T),o(y)):n(y,T)}return A}var Ji=tw(!0),nw=tw(!1),Ml=kr(null),Ul=null,Di=null,cf=null;function uf(){cf=Di=Ul=null}function df(t){var e=Ml.current;we(Ml),t._currentValue=e}function Gd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bi(t,e){Ul=t,cf=Di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(cf!==t)if(t={context:t,memoizedValue:e,next:null},Di===null){if(Ul===null)throw Error(F(308));Di=t,Ul.dependencies={lanes:0,firstContext:t}}else Di=Di.next=t;return e}var Wr=null;function hf(t){Wr===null?Wr=[t]:Wr.push(t)}function rw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hf(e)):(n.next=i.next,i.next=n),e.interleaved=n,On(t,r)}function On(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yn=!1;function ff(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,On(t,n)}return i=r.interleaved,i===null?(e.next=e,hf(r)):(e.next=i.next,i.next=e),r.interleaved=e,On(t,n)}function ll(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yh(t,n)}}function jg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fl(t,e,n,r){var i=t.updateQueue;Yn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,f=d=u=null,c=s;do{var p=c.lane,v=c.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var x=t,E=c;switch(p=e,v=n,E.tag){case 1:if(x=E.payload,typeof x=="function"){m=x.call(v,m,p);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=E.payload,p=typeof x=="function"?x.call(v,m,p):x,p==null)break e;m=Ne({},m,p);break e;case 2:Yn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[c]:p.push(c))}else v={eventTime:v,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=v,u=m):f=f.next=v,o|=p;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;p=c,c=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ni|=o,t.lanes=o,t.memoizedState=m}}function bg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var Qo={},dn=kr(Qo),Co=kr(Qo),Ao=kr(Qo);function Hr(t){if(t===Qo)throw Error(F(174));return t}function pf(t,e){switch(ge(Ao,e),ge(Co,t),ge(dn,Qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cd(e,t)}we(dn),ge(dn,e)}function Zi(){we(dn),we(Co),we(Ao)}function sw(t){Hr(Ao.current);var e=Hr(dn.current),n=Cd(e,t.type);e!==n&&(ge(Co,t),ge(dn,n))}function mf(t){Co.current===t&&(we(dn),we(Co))}var Se=kr(0);function zl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ku=[];function gf(){for(var t=0;t<Ku.length;t++)Ku[t]._workInProgressVersionPrimary=null;Ku.length=0}var cl=$n.ReactCurrentDispatcher,Qu=$n.ReactCurrentBatchConfig,ti=0,Ie=null,Fe=null,$e=null,Bl=!1,so=!1,Ro=0,qI=0;function it(){throw Error(F(321))}function vf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tn(t[n],e[n]))return!1;return!0}function yf(t,e,n,r,i,s){if(ti=s,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cl.current=t===null||t.memoizedState===null?KI:QI,t=n(r,i),so){s=0;do{if(so=!1,Ro=0,25<=s)throw Error(F(301));s+=1,$e=Fe=null,e.updateQueue=null,cl.current=XI,t=n(r,i)}while(so)}if(cl.current=$l,e=Fe!==null&&Fe.next!==null,ti=0,$e=Fe=Ie=null,Bl=!1,e)throw Error(F(300));return t}function _f(){var t=Ro!==0;return Ro=0,t}function an(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Ie.memoizedState=$e=t:$e=$e.next=t,$e}function Ht(){if(Fe===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=$e===null?Ie.memoizedState:$e.next;if(e!==null)$e=e,Fe=t;else{if(t===null)throw Error(F(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},$e===null?Ie.memoizedState=$e=t:$e=$e.next=t}return $e}function Po(t,e){return typeof e=="function"?e(t):e}function Xu(t){var e=Ht(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Fe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=o=null,u=null,d=s;do{var f=d.lane;if((ti&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,Ie.lanes|=f,ni|=f}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=c,tn(r,e.memoizedState)||(Tt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ie.lanes|=s,ni|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yu(t){var e=Ht(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);tn(s,e.memoizedState)||(Tt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ow(){}function aw(t,e){var n=Ie,r=Ht(),i=e(),s=!tn(r.memoizedState,i);if(s&&(r.memoizedState=i,Tt=!0),r=r.queue,wf(uw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,ko(9,cw.bind(null,n,r,i,e),void 0,null),We===null)throw Error(F(349));ti&30||lw(n,e,i)}return i}function lw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cw(t,e,n,r){e.value=n,e.getSnapshot=r,dw(e)&&hw(t)}function uw(t,e,n){return n(function(){dw(e)&&hw(t)})}function dw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tn(t,n)}catch{return!0}}function hw(t){var e=On(t,1);e!==null&&en(e,t,1,-1)}function Dg(t){var e=an();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:t},e.queue=t,t=t.dispatch=GI.bind(null,Ie,t),[e.memoizedState,t]}function ko(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fw(){return Ht().memoizedState}function ul(t,e,n,r){var i=an();Ie.flags|=t,i.memoizedState=ko(1|e,n,void 0,r===void 0?null:r)}function xc(t,e,n,r){var i=Ht();r=r===void 0?null:r;var s=void 0;if(Fe!==null){var o=Fe.memoizedState;if(s=o.destroy,r!==null&&vf(r,o.deps)){i.memoizedState=ko(e,n,s,r);return}}Ie.flags|=t,i.memoizedState=ko(1|e,n,s,r)}function Og(t,e){return ul(8390656,8,t,e)}function wf(t,e){return xc(2048,8,t,e)}function pw(t,e){return xc(4,2,t,e)}function mw(t,e){return xc(4,4,t,e)}function gw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vw(t,e,n){return n=n!=null?n.concat([t]):null,xc(4,4,gw.bind(null,e,t),n)}function Ef(){}function yw(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _w(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ww(t,e,n){return ti&21?(tn(n,e)||(n=I_(),Ie.lanes|=n,ni|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function WI(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=Qu.transition;Qu.transition={};try{t(!1),e()}finally{he=n,Qu.transition=r}}function Ew(){return Ht().memoizedState}function HI(t,e,n){var r=gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xw(t))Tw(e,n);else if(n=rw(t,e,n,r),n!==null){var i=vt();en(n,t,r,i),Sw(n,e,r)}}function GI(t,e,n){var r=gr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xw(t))Tw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,c=s(o,n);if(i.hasEagerState=!0,i.eagerState=c,tn(c,o)){var u=e.interleaved;u===null?(i.next=i,hf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=rw(t,e,i,r),n!==null&&(i=vt(),en(n,t,r,i),Sw(n,e,r))}}function xw(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function Tw(t,e){so=Bl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Sw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yh(t,n)}}var $l={readContext:Wt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},KI={readContext:Wt,useCallback:function(t,e){return an().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:Og,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ul(4194308,4,gw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ul(4194308,4,t,e)},useInsertionEffect:function(t,e){return ul(4,2,t,e)},useMemo:function(t,e){var n=an();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=an();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=HI.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=an();return t={current:t},e.memoizedState=t},useState:Dg,useDebugValue:Ef,useDeferredValue:function(t){return an().memoizedState=t},useTransition:function(){var t=Dg(!1),e=t[0];return t=WI.bind(null,t[1]),an().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,i=an();if(xe){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),We===null)throw Error(F(349));ti&30||lw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Og(uw.bind(null,r,s,t),[t]),r.flags|=2048,ko(9,cw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=an(),e=We.identifierPrefix;if(xe){var n=Cn,r=Nn;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ro++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QI={readContext:Wt,useCallback:yw,useContext:Wt,useEffect:wf,useImperativeHandle:vw,useInsertionEffect:pw,useLayoutEffect:mw,useMemo:_w,useReducer:Xu,useRef:fw,useState:function(){return Xu(Po)},useDebugValue:Ef,useDeferredValue:function(t){var e=Ht();return ww(e,Fe.memoizedState,t)},useTransition:function(){var t=Xu(Po)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:ow,useSyncExternalStore:aw,useId:Ew,unstable_isNewReconciler:!1},XI={readContext:Wt,useCallback:yw,useContext:Wt,useEffect:wf,useImperativeHandle:vw,useInsertionEffect:pw,useLayoutEffect:mw,useMemo:_w,useReducer:Yu,useRef:fw,useState:function(){return Yu(Po)},useDebugValue:Ef,useDeferredValue:function(t){var e=Ht();return Fe===null?e.memoizedState=t:ww(e,Fe.memoizedState,t)},useTransition:function(){var t=Yu(Po)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:ow,useSyncExternalStore:aw,useId:Ew,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Kd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tc={isMounted:function(t){return(t=t._reactInternals)?ui(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),i=gr(t),s=kn(r,i);s.payload=e,n!=null&&(s.callback=n),e=pr(t,s,i),e!==null&&(en(e,t,i,r),ll(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),i=gr(t),s=kn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=pr(t,s,i),e!==null&&(en(e,t,i,r),ll(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=gr(t),i=kn(n,r);i.tag=2,e!=null&&(i.callback=e),e=pr(t,i,r),e!==null&&(en(e,t,r,n),ll(e,t,r))}};function Lg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!To(n,r)||!To(i,s):!0}function Iw(t,e,n){var r=!1,i=Sr,s=e.contextType;return typeof s=="object"&&s!==null?s=Wt(s):(i=It(e)?Zr:ut.current,r=e.contextTypes,s=(r=r!=null)?Xi(t,i):Sr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Vg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tc.enqueueReplaceState(e,e.state,null)}function Qd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ff(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Wt(s):(s=It(e)?Zr:ut.current,i.context=Xi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Tc.enqueueReplaceState(i,i.state,null),Fl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function es(t,e){try{var n="",r=e;do n+=SS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ju(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YI=typeof WeakMap=="function"?WeakMap:Map;function Nw(t,e,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wl||(Wl=!0,oh=r),Xd(t,e)},n}function Cw(t,e,n){n=kn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xd(t,e),typeof r!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Mg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=dN.bind(null,t,e,n),e.then(t,t))}function Ug(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kn(-1,1),e.tag=2,pr(n,e,1))),n.lanes|=1),t)}var JI=$n.ReactCurrentOwner,Tt=!1;function gt(t,e,n,r){e.child=t===null?nw(e,null,n,r):Ji(e,t.child,n,r)}function zg(t,e,n,r,i){n=n.render;var s=e.ref;return Bi(e,i),r=yf(t,e,n,r,s,i),n=_f(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(xe&&n&&of(e),e.flags|=1,gt(t,e,r,i),e.child)}function Bg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Rf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Aw(t,e,s,r,i)):(t=pl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:To,n(o,r)&&t.ref===e.ref)return Ln(t,e,i)}return e.flags|=1,t=vr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Aw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(To(s,r)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Ln(t,e,i)}return Yd(t,e,n,r,i)}function Rw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Li,Pt),Pt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(Li,Pt),Pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ge(Li,Pt),Pt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ge(Li,Pt),Pt|=r;return gt(t,e,i,n),e.child}function Pw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yd(t,e,n,r,i){var s=It(n)?Zr:ut.current;return s=Xi(e,s),Bi(e,i),n=yf(t,e,n,r,s,i),r=_f(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(xe&&r&&of(e),e.flags|=1,gt(t,e,n,i),e.child)}function $g(t,e,n,r,i){if(It(n)){var s=!0;Ol(e)}else s=!1;if(Bi(e,i),e.stateNode===null)dl(t,e),Iw(e,n,r),Qd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Wt(d):(d=It(n)?Zr:ut.current,d=Xi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Vg(e,o,r,d),Yn=!1;var p=e.memoizedState;o.state=p,Fl(e,r,o,i),u=e.memoizedState,c!==r||p!==u||St.current||Yn?(typeof f=="function"&&(Kd(e,n,f,r),u=e.memoizedState),(c=Yn||Lg(e,n,c,r,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,iw(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Xt(e.type,c),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Wt(u):(u=It(n)?Zr:ut.current,u=Xi(e,u));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||p!==u)&&Vg(e,o,r,u),Yn=!1,p=e.memoizedState,o.state=p,Fl(e,r,o,i);var x=e.memoizedState;c!==m||p!==x||St.current||Yn?(typeof v=="function"&&(Kd(e,n,v,r),x=e.memoizedState),(d=Yn||Lg(e,n,d,r,p,x,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Jd(t,e,n,r,s,i)}function Jd(t,e,n,r,i,s){Pw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ag(e,n,!1),Ln(t,e,s);r=e.stateNode,JI.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ji(e,t.child,null,s),e.child=Ji(e,null,c,s)):gt(t,e,c,s),e.memoizedState=r.state,i&&Ag(e,n,!0),e.child}function kw(t){var e=t.stateNode;e.pendingContext?Cg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cg(t,e.context,!1),pf(t,e.containerInfo)}function qg(t,e,n,r,i){return Yi(),lf(i),e.flags|=256,gt(t,e,n,r),e.child}var Zd={dehydrated:null,treeContext:null,retryLane:0};function eh(t){return{baseLanes:t,cachePool:null,transitions:null}}function jw(t,e,n){var r=e.pendingProps,i=Se.current,s=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ge(Se,i&1),t===null)return Hd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Nc(o,r,0,null),t=Qr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=eh(n),e.memoizedState=Zd,t):xf(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return ZI(t,e,o,r,c,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=vr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=vr(c,s):(s=Qr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?eh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Zd,r}return s=t.child,t=s.sibling,r=vr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xf(t,e){return e=Nc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qa(t,e,n,r){return r!==null&&lf(r),Ji(e,t.child,null,n),t=xf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ju(Error(F(422))),qa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Nc({mode:"visible",children:r.children},i,0,null),s=Qr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ji(e,t.child,null,o),e.child.memoizedState=eh(o),e.memoizedState=Zd,s);if(!(e.mode&1))return qa(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(F(419)),r=Ju(s,r,void 0),qa(t,e,o,r)}if(c=(o&t.childLanes)!==0,Tt||c){if(r=We,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,On(t,i),en(r,t,i,-1))}return Af(),r=Ju(Error(F(421))),qa(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=hN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,kt=fr(i.nextSibling),Dt=e,xe=!0,Jt=null,t!==null&&(Ut[Ft++]=Nn,Ut[Ft++]=Cn,Ut[Ft++]=ei,Nn=t.id,Cn=t.overflow,ei=e),e=xf(e,r.children),e.flags|=4096,e)}function Wg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gd(t.return,e,n)}function Zu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function bw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(gt(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wg(t,n,e);else if(t.tag===19)Wg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Se,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&zl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&zl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zu(e,!0,n,null,s);break;case"together":Zu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ni|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eN(t,e,n){switch(e.tag){case 3:kw(e),Yi();break;case 5:sw(e);break;case 1:It(e.type)&&Ol(e);break;case 4:pf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ge(Ml,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?jw(t,e,n):(ge(Se,Se.current&1),t=Ln(t,e,n),t!==null?t.sibling:null);ge(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,Rw(t,e,n)}return Ln(t,e,n)}var Dw,th,Ow,Lw;Dw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};th=function(){};Ow=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Hr(dn.current);var s=null;switch(n){case"input":i=Td(t,i),r=Td(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=Nd(t,i),r=Nd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bl)}Ad(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(go.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(go.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ye("scroll",t),s||c===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};Lw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fs(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function st(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tN(t,e,n){var r=e.pendingProps;switch(af(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(e),null;case 1:return It(e.type)&&Dl(),st(e),null;case 3:return r=e.stateNode,Zi(),we(St),we(ut),gf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ba(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jt!==null&&(ch(Jt),Jt=null))),th(t,e),st(e),null;case 5:mf(e);var i=Hr(Ao.current);if(n=e.type,t!==null&&e.stateNode!=null)Ow(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return st(e),null}if(t=Hr(dn.current),Ba(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ln]=e,r[No]=s,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(i=0;i<Qs.length;i++)ye(Qs[i],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":eg(r,s),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ye("invalid",r);break;case"textarea":ng(r,s),ye("invalid",r)}Ad(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&za(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&za(r.textContent,c,t),i=["children",""+c]):go.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ye("scroll",r)}switch(n){case"input":ba(r),tg(r,s,!0);break;case"textarea":ba(r),rg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=bl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=u_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ln]=e,t[No]=r,Dw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Rd(n,r),n){case"dialog":ye("cancel",t),ye("close",t),i=r;break;case"iframe":case"object":case"embed":ye("load",t),i=r;break;case"video":case"audio":for(i=0;i<Qs.length;i++)ye(Qs[i],t);i=r;break;case"source":ye("error",t),i=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),i=r;break;case"details":ye("toggle",t),i=r;break;case"input":eg(t,r),i=Td(t,r),ye("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),ye("invalid",t);break;case"textarea":ng(t,r),i=Nd(t,r),ye("invalid",t);break;default:i=r}Ad(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var u=c[s];s==="style"?f_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&d_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&vo(t,u):typeof u=="number"&&vo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(go.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ye("scroll",t):u!=null&&Wh(t,s,u,o))}switch(n){case"input":ba(t),tg(t,r,!1);break;case"textarea":ba(t),rg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Mi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=bl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return st(e),null;case 6:if(t&&e.stateNode!=null)Lw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Hr(Ao.current),Hr(dn.current),Ba(e)){if(r=e.stateNode,n=e.memoizedProps,r[ln]=e,(s=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:za(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&za(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ln]=e,e.stateNode=r}return st(e),null;case 13:if(we(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&kt!==null&&e.mode&1&&!(e.flags&128))ew(),Yi(),e.flags|=98560,s=!1;else if(s=Ba(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[ln]=e}else Yi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;st(e),s=!1}else Jt!==null&&(ch(Jt),Jt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?ze===0&&(ze=3):Af())),e.updateQueue!==null&&(e.flags|=4),st(e),null);case 4:return Zi(),th(t,e),t===null&&So(e.stateNode.containerInfo),st(e),null;case 10:return df(e.type._context),st(e),null;case 17:return It(e.type)&&Dl(),st(e),null;case 19:if(we(Se),s=e.memoizedState,s===null)return st(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fs(s,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zl(t),o!==null){for(e.flags|=128,Fs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Se,Se.current&1|2),e.child}t=t.sibling}s.tail!==null&&Oe()>ts&&(e.flags|=128,r=!0,Fs(s,!1),e.lanes=4194304)}else{if(!r)if(t=zl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!xe)return st(e),null}else 2*Oe()-s.renderingStartTime>ts&&n!==1073741824&&(e.flags|=128,r=!0,Fs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Oe(),e.sibling=null,n=Se.current,ge(Se,r?n&1|2:n&1),e):(st(e),null);case 22:case 23:return Cf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pt&1073741824&&(st(e),e.subtreeFlags&6&&(e.flags|=8192)):st(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function nN(t,e){switch(af(e),e.tag){case 1:return It(e.type)&&Dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zi(),we(St),we(ut),gf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mf(e),null;case 13:if(we(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Yi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Se),null;case 4:return Zi(),null;case 10:return df(e.type._context),null;case 22:case 23:return Cf(),null;case 24:return null;default:return null}}var Wa=!1,lt=!1,rN=typeof WeakSet=="function"?WeakSet:Set,q=null;function Oi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function nh(t,e,n){try{n()}catch(r){Re(t,e,r)}}var Hg=!1;function iN(t,e){if(Ud=Pl,t=z_(),sf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,p=null;t:for(;;){for(var v;m!==n||i!==0&&m.nodeType!==3||(c=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===t)break t;if(p===n&&++d===i&&(c=o),p===s&&++f===r&&(u=o),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fd={focusedElem:t,selectionRange:n},Pl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,A=x.memoizedState,y=e.stateNode,T=y.getSnapshotBeforeUpdate(e.elementType===e.type?E:Xt(e.type,E),A);y.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(I){Re(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return x=Hg,Hg=!1,x}function oo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&nh(e,n,s)}i=i.next}while(i!==r)}}function Sc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Vw(t){var e=t.alternate;e!==null&&(t.alternate=null,Vw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ln],delete e[No],delete e[$d],delete e[FI],delete e[zI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Mw(t){return t.tag===5||t.tag===3||t.tag===4}function Gg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ih(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bl));else if(r!==4&&(t=t.child,t!==null))for(ih(t,e,n),t=t.sibling;t!==null;)ih(t,e,n),t=t.sibling}function sh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sh(t,e,n),t=t.sibling;t!==null;)sh(t,e,n),t=t.sibling}var Ge=null,Yt=!1;function Kn(t,e,n){for(n=n.child;n!==null;)Uw(t,e,n),n=n.sibling}function Uw(t,e,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(gc,n)}catch{}switch(n.tag){case 5:lt||Oi(n,e);case 6:var r=Ge,i=Yt;Ge=null,Kn(t,e,n),Ge=r,Yt=i,Ge!==null&&(Yt?(t=Ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Yt?(t=Ge,n=n.stateNode,t.nodeType===8?Hu(t.parentNode,n):t.nodeType===1&&Hu(t,n),Eo(t)):Hu(Ge,n.stateNode));break;case 4:r=Ge,i=Yt,Ge=n.stateNode.containerInfo,Yt=!0,Kn(t,e,n),Ge=r,Yt=i;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&nh(n,e,o),i=i.next}while(i!==r)}Kn(t,e,n);break;case 1:if(!lt&&(Oi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Re(n,e,c)}Kn(t,e,n);break;case 21:Kn(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,Kn(t,e,n),lt=r):Kn(t,e,n);break;default:Kn(t,e,n)}}function Kg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rN),e.forEach(function(r){var i=fN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Ge=c.stateNode,Yt=!1;break e;case 3:Ge=c.stateNode.containerInfo,Yt=!0;break e;case 4:Ge=c.stateNode.containerInfo,Yt=!0;break e}c=c.return}if(Ge===null)throw Error(F(160));Uw(s,o,i),Ge=null,Yt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Re(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fw(e,t),e=e.sibling}function Fw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qt(e,t),on(t),r&4){try{oo(3,t,t.return),Sc(3,t)}catch(E){Re(t,t.return,E)}try{oo(5,t,t.return)}catch(E){Re(t,t.return,E)}}break;case 1:Qt(e,t),on(t),r&512&&n!==null&&Oi(n,n.return);break;case 5:if(Qt(e,t),on(t),r&512&&n!==null&&Oi(n,n.return),t.flags&32){var i=t.stateNode;try{vo(i,"")}catch(E){Re(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&l_(i,s),Rd(c,o);var d=Rd(c,s);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?f_(i,m):f==="dangerouslySetInnerHTML"?d_(i,m):f==="children"?vo(i,m):Wh(i,f,m,d)}switch(c){case"input":Sd(i,s);break;case"textarea":c_(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Mi(i,!!s.multiple,v,!1):p!==!!s.multiple&&(s.defaultValue!=null?Mi(i,!!s.multiple,s.defaultValue,!0):Mi(i,!!s.multiple,s.multiple?[]:"",!1))}i[No]=s}catch(E){Re(t,t.return,E)}}break;case 6:if(Qt(e,t),on(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){Re(t,t.return,E)}}break;case 3:if(Qt(e,t),on(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Eo(e.containerInfo)}catch(E){Re(t,t.return,E)}break;case 4:Qt(e,t),on(t);break;case 13:Qt(e,t),on(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(If=Oe())),r&4&&Kg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(d=lt)||f,Qt(e,t),lt=d):Qt(e,t),on(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(m=q=f;q!==null;){switch(p=q,v=p.child,p.tag){case 0:case 11:case 14:case 15:oo(4,p,p.return);break;case 1:Oi(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(E){Re(r,n,E)}}break;case 5:Oi(p,p.return);break;case 22:if(p.memoizedState!==null){Xg(m);continue}}v!==null?(v.return=p,q=v):Xg(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=h_("display",o))}catch(E){Re(t,t.return,E)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(E){Re(t,t.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Qt(e,t),on(t),r&4&&Kg(t);break;case 21:break;default:Qt(e,t),on(t)}}function on(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Mw(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vo(i,""),r.flags&=-33);var s=Gg(t);sh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Gg(t);ih(t,c,o);break;default:throw Error(F(161))}}catch(u){Re(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sN(t,e,n){q=t,zw(t)}function zw(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Wa;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||lt;c=Wa;var d=lt;if(Wa=o,(lt=u)&&!d)for(q=i;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Yg(i):u!==null?(u.return=o,q=u):Yg(i);for(;s!==null;)q=s,zw(s),s=s.sibling;q=i,Wa=c,lt=d}Qg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Qg(t)}}function Qg(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Sc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Eo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}lt||e.flags&512&&rh(e)}catch(p){Re(e,e.return,p)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Xg(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Yg(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sc(4,e)}catch(u){Re(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Re(e,i,u)}}var s=e.return;try{rh(e)}catch(u){Re(e,s,u)}break;case 5:var o=e.return;try{rh(e)}catch(u){Re(e,o,u)}}}catch(u){Re(e,e.return,u)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var oN=Math.ceil,ql=$n.ReactCurrentDispatcher,Tf=$n.ReactCurrentOwner,Bt=$n.ReactCurrentBatchConfig,ae=0,We=null,Me=null,Xe=0,Pt=0,Li=kr(0),ze=0,jo=null,ni=0,Ic=0,Sf=0,ao=null,Et=null,If=0,ts=1/0,Sn=null,Wl=!1,oh=null,mr=null,Ha=!1,or=null,Hl=0,lo=0,ah=null,hl=-1,fl=0;function vt(){return ae&6?Oe():hl!==-1?hl:hl=Oe()}function gr(t){return t.mode&1?ae&2&&Xe!==0?Xe&-Xe:$I.transition!==null?(fl===0&&(fl=I_()),fl):(t=he,t!==0||(t=window.event,t=t===void 0?16:j_(t.type)),t):1}function en(t,e,n,r){if(50<lo)throw lo=0,ah=null,Error(F(185));Ho(t,n,r),(!(ae&2)||t!==We)&&(t===We&&(!(ae&2)&&(Ic|=n),ze===4&&Zn(t,Xe)),Nt(t,r),n===1&&ae===0&&!(e.mode&1)&&(ts=Oe()+500,Ec&&jr()))}function Nt(t,e){var n=t.callbackNode;$S(t,e);var r=Rl(t,t===We?Xe:0);if(r===0)n!==null&&og(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&og(n),e===1)t.tag===0?BI(Jg.bind(null,t)):Y_(Jg.bind(null,t)),MI(function(){!(ae&6)&&jr()}),n=null;else{switch(N_(r)){case 1:n=Xh;break;case 4:n=T_;break;case 16:n=Al;break;case 536870912:n=S_;break;default:n=Al}n=Qw(n,Bw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Bw(t,e){if(hl=-1,fl=0,ae&6)throw Error(F(327));var n=t.callbackNode;if($i()&&t.callbackNode!==n)return null;var r=Rl(t,t===We?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gl(t,r);else{e=r;var i=ae;ae|=2;var s=qw();(We!==t||Xe!==e)&&(Sn=null,ts=Oe()+500,Kr(t,e));do try{cN();break}catch(c){$w(t,c)}while(!0);uf(),ql.current=s,ae=i,Me!==null?e=0:(We=null,Xe=0,e=ze)}if(e!==0){if(e===2&&(i=Dd(t),i!==0&&(r=i,e=lh(t,i))),e===1)throw n=jo,Kr(t,0),Zn(t,r),Nt(t,Oe()),n;if(e===6)Zn(t,r);else{if(i=t.current.alternate,!(r&30)&&!aN(i)&&(e=Gl(t,r),e===2&&(s=Dd(t),s!==0&&(r=s,e=lh(t,s))),e===1))throw n=jo,Kr(t,0),Zn(t,r),Nt(t,Oe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Br(t,Et,Sn);break;case 3:if(Zn(t,r),(r&130023424)===r&&(e=If+500-Oe(),10<e)){if(Rl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bd(Br.bind(null,t,Et,Sn),e);break}Br(t,Et,Sn);break;case 4:if(Zn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Zt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oN(r/1960))-r,10<r){t.timeoutHandle=Bd(Br.bind(null,t,Et,Sn),r);break}Br(t,Et,Sn);break;case 5:Br(t,Et,Sn);break;default:throw Error(F(329))}}}return Nt(t,Oe()),t.callbackNode===n?Bw.bind(null,t):null}function lh(t,e){var n=ao;return t.current.memoizedState.isDehydrated&&(Kr(t,e).flags|=256),t=Gl(t,e),t!==2&&(e=Et,Et=n,e!==null&&ch(e)),t}function ch(t){Et===null?Et=t:Et.push.apply(Et,t)}function aN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!tn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zn(t,e){for(e&=~Sf,e&=~Ic,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zt(e),r=1<<n;t[n]=-1,e&=~r}}function Jg(t){if(ae&6)throw Error(F(327));$i();var e=Rl(t,0);if(!(e&1))return Nt(t,Oe()),null;var n=Gl(t,e);if(t.tag!==0&&n===2){var r=Dd(t);r!==0&&(e=r,n=lh(t,r))}if(n===1)throw n=jo,Kr(t,0),Zn(t,e),Nt(t,Oe()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Br(t,Et,Sn),Nt(t,Oe()),null}function Nf(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(ts=Oe()+500,Ec&&jr())}}function ri(t){or!==null&&or.tag===0&&!(ae&6)&&$i();var e=ae;ae|=1;var n=Bt.transition,r=he;try{if(Bt.transition=null,he=1,t)return t()}finally{he=r,Bt.transition=n,ae=e,!(ae&6)&&jr()}}function Cf(){Pt=Li.current,we(Li)}function Kr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,VI(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(af(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dl();break;case 3:Zi(),we(St),we(ut),gf();break;case 5:mf(r);break;case 4:Zi();break;case 13:we(Se);break;case 19:we(Se);break;case 10:df(r.type._context);break;case 22:case 23:Cf()}n=n.return}if(We=t,Me=t=vr(t.current,null),Xe=Pt=e,ze=0,jo=null,Sf=Ic=ni=0,Et=ao=null,Wr!==null){for(e=0;e<Wr.length;e++)if(n=Wr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Wr=null}return t}function $w(t,e){do{var n=Me;try{if(uf(),cl.current=$l,Bl){for(var r=Ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bl=!1}if(ti=0,$e=Fe=Ie=null,so=!1,Ro=0,Tf.current=null,n===null||n.return===null){ze=1,jo=e,Me=null;break}e:{var s=t,o=n.return,c=n,u=e;if(e=Xe,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=Ug(o);if(v!==null){v.flags&=-257,Fg(v,o,c,s,e),v.mode&1&&Mg(s,d,e),e=v,u=d;var x=e.updateQueue;if(x===null){var E=new Set;E.add(u),e.updateQueue=E}else x.add(u);break e}else{if(!(e&1)){Mg(s,d,e),Af();break e}u=Error(F(426))}}else if(xe&&c.mode&1){var A=Ug(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Fg(A,o,c,s,e),lf(es(u,c));break e}}s=u=es(u,c),ze!==4&&(ze=2),ao===null?ao=[s]:ao.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Nw(s,u,e);jg(s,y);break e;case 1:c=u;var T=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(mr===null||!mr.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=Cw(s,c,e);jg(s,I);break e}}s=s.return}while(s!==null)}Hw(n)}catch(O){e=O,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function qw(){var t=ql.current;return ql.current=$l,t===null?$l:t}function Af(){(ze===0||ze===3||ze===2)&&(ze=4),We===null||!(ni&268435455)&&!(Ic&268435455)||Zn(We,Xe)}function Gl(t,e){var n=ae;ae|=2;var r=qw();(We!==t||Xe!==e)&&(Sn=null,Kr(t,e));do try{lN();break}catch(i){$w(t,i)}while(!0);if(uf(),ae=n,ql.current=r,Me!==null)throw Error(F(261));return We=null,Xe=0,ze}function lN(){for(;Me!==null;)Ww(Me)}function cN(){for(;Me!==null&&!DS();)Ww(Me)}function Ww(t){var e=Kw(t.alternate,t,Pt);t.memoizedProps=t.pendingProps,e===null?Hw(t):Me=e,Tf.current=null}function Hw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nN(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Me=null;return}}else if(n=tN(n,e,Pt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);ze===0&&(ze=5)}function Br(t,e,n){var r=he,i=Bt.transition;try{Bt.transition=null,he=1,uN(t,e,n,r)}finally{Bt.transition=i,he=r}return null}function uN(t,e,n,r){do $i();while(or!==null);if(ae&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(qS(t,s),t===We&&(Me=We=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ha||(Ha=!0,Qw(Al,function(){return $i(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Bt.transition,Bt.transition=null;var o=he;he=1;var c=ae;ae|=4,Tf.current=null,iN(t,n),Fw(n,t),PI(Fd),Pl=!!Ud,Fd=Ud=null,t.current=n,sN(n),OS(),ae=c,he=o,Bt.transition=s}else t.current=n;if(Ha&&(Ha=!1,or=t,Hl=i),s=t.pendingLanes,s===0&&(mr=null),MS(n.stateNode),Nt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,t=oh,oh=null,t;return Hl&1&&t.tag!==0&&$i(),s=t.pendingLanes,s&1?t===ah?lo++:(lo=0,ah=t):lo=0,jr(),null}function $i(){if(or!==null){var t=N_(Hl),e=Bt.transition,n=he;try{if(Bt.transition=null,he=16>t?16:t,or===null)var r=!1;else{if(t=or,or=null,Hl=0,ae&6)throw Error(F(331));var i=ae;for(ae|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var c=s.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:oo(8,f,s)}var m=f.child;if(m!==null)m.return=f,q=m;else for(;q!==null;){f=q;var p=f.sibling,v=f.return;if(Vw(f),f===d){q=null;break}if(p!==null){p.return=v,q=p;break}q=v}}}var x=s.alternate;if(x!==null){var E=x.child;if(E!==null){x.child=null;do{var A=E.sibling;E.sibling=null,E=A}while(E!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:oo(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,q=y;break e}q=s.return}}var T=t.current;for(q=T;q!==null;){o=q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,q=w;else e:for(o=T;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Sc(9,c)}}catch(O){Re(c,c.return,O)}if(c===o){q=null;break e}var I=c.sibling;if(I!==null){I.return=c.return,q=I;break e}q=c.return}}if(ae=i,jr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(gc,t)}catch{}r=!0}return r}finally{he=n,Bt.transition=e}}return!1}function Zg(t,e,n){e=es(n,e),e=Nw(t,e,1),t=pr(t,e,1),e=vt(),t!==null&&(Ho(t,1,e),Nt(t,e))}function Re(t,e,n){if(t.tag===3)Zg(t,t,n);else for(;e!==null;){if(e.tag===3){Zg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mr===null||!mr.has(r))){t=es(n,t),t=Cw(e,t,1),e=pr(e,t,1),t=vt(),e!==null&&(Ho(e,1,t),Nt(e,t));break}}e=e.return}}function dN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Xe&n)===n&&(ze===4||ze===3&&(Xe&130023424)===Xe&&500>Oe()-If?Kr(t,0):Sf|=n),Nt(t,e)}function Gw(t,e){e===0&&(t.mode&1?(e=La,La<<=1,!(La&130023424)&&(La=4194304)):e=1);var n=vt();t=On(t,e),t!==null&&(Ho(t,e,n),Nt(t,n))}function hN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Gw(t,n)}function fN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),Gw(t,n)}var Kw;Kw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,eN(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,xe&&e.flags&1048576&&J_(e,Vl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dl(t,e),t=e.pendingProps;var i=Xi(e,ut.current);Bi(e,n),i=yf(null,e,r,t,i,n);var s=_f();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(r)?(s=!0,Ol(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ff(e),i.updater=Tc,e.stateNode=i,i._reactInternals=e,Qd(e,r,t,n),e=Jd(null,e,r,!0,s,n)):(e.tag=0,xe&&s&&of(e),gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=mN(r),t=Xt(r,t),i){case 0:e=Yd(null,e,r,t,n);break e;case 1:e=$g(null,e,r,t,n);break e;case 11:e=zg(null,e,r,t,n);break e;case 14:e=Bg(null,e,r,Xt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),Yd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),$g(t,e,r,i,n);case 3:e:{if(kw(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,iw(t,e),Fl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=es(Error(F(423)),e),e=qg(t,e,r,n,i);break e}else if(r!==i){i=es(Error(F(424)),e),e=qg(t,e,r,n,i);break e}else for(kt=fr(e.stateNode.containerInfo.firstChild),Dt=e,xe=!0,Jt=null,n=nw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yi(),r===i){e=Ln(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return sw(e),t===null&&Hd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zd(r,i)?o=null:s!==null&&zd(r,s)&&(e.flags|=32),Pw(t,e),gt(t,e,o,n),e.child;case 6:return t===null&&Hd(e),null;case 13:return jw(t,e,n);case 4:return pf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ji(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),zg(t,e,r,i,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ge(Ml,r._currentValue),r._currentValue=o,s!==null)if(tn(s.value,o)){if(s.children===i.children&&!St.current){e=Ln(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=kn(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Gd(s.return,n,e),c.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(F(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Gd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bi(e,n),i=Wt(i),r=r(i),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,i=Xt(r,e.pendingProps),i=Xt(r.type,i),Bg(t,e,r,i,n);case 15:return Aw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),dl(t,e),e.tag=1,It(r)?(t=!0,Ol(e)):t=!1,Bi(e,n),Iw(e,r,i),Qd(e,r,i,n),Jd(null,e,r,!0,t,n);case 19:return bw(t,e,n);case 22:return Rw(t,e,n)}throw Error(F(156,e.tag))};function Qw(t,e){return x_(t,e)}function pN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,n,r){return new pN(t,e,n,r)}function Rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mN(t){if(typeof t=="function")return Rf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gh)return 11;if(t===Kh)return 14}return 2}function vr(t,e){var n=t.alternate;return n===null?(n=zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Rf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ni:return Qr(n.children,i,s,e);case Hh:o=8,i|=8;break;case _d:return t=zt(12,n,e,i|2),t.elementType=_d,t.lanes=s,t;case wd:return t=zt(13,n,e,i),t.elementType=wd,t.lanes=s,t;case Ed:return t=zt(19,n,e,i),t.elementType=Ed,t.lanes=s,t;case s_:return Nc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case r_:o=10;break e;case i_:o=9;break e;case Gh:o=11;break e;case Kh:o=14;break e;case Xn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=zt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Qr(t,e,n,r){return t=zt(7,t,r,e),t.lanes=n,t}function Nc(t,e,n,r){return t=zt(22,t,r,e),t.elementType=s_,t.lanes=n,t.stateNode={isHidden:!1},t}function ed(t,e,n){return t=zt(6,t,null,e),t.lanes=n,t}function td(t,e,n){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ou(0),this.expirationTimes=Ou(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ou(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pf(t,e,n,r,i,s,o,c,u){return t=new gN(t,e,n,c,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=zt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ff(s),t}function vN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ii,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Xw(t){if(!t)return Sr;t=t._reactInternals;e:{if(ui(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(It(n))return X_(t,n,e)}return e}function Yw(t,e,n,r,i,s,o,c,u){return t=Pf(n,r,!0,t,i,s,o,c,u),t.context=Xw(null),n=t.current,r=vt(),i=gr(n),s=kn(r,i),s.callback=e??null,pr(n,s,i),t.current.lanes=i,Ho(t,i,r),Nt(t,r),t}function Cc(t,e,n,r){var i=e.current,s=vt(),o=gr(i);return n=Xw(n),e.context===null?e.context=n:e.pendingContext=n,e=kn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pr(i,e,o),t!==null&&(en(t,i,o,s),ll(t,i,o)),o}function Kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ev(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kf(t,e){ev(t,e),(t=t.alternate)&&ev(t,e)}function yN(){return null}var Jw=typeof reportError=="function"?reportError:function(t){console.error(t)};function jf(t){this._internalRoot=t}Ac.prototype.render=jf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Cc(t,e,null,null)};Ac.prototype.unmount=jf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ri(function(){Cc(null,t,null,null)}),e[Dn]=null}};function Ac(t){this._internalRoot=t}Ac.prototype.unstable_scheduleHydration=function(t){if(t){var e=R_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jn.length&&e!==0&&e<Jn[n].priority;n++);Jn.splice(n,0,t),n===0&&k_(t)}};function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tv(){}function _N(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Kl(o);s.call(d)}}var o=Yw(e,r,t,0,null,!1,!1,"",tv);return t._reactRootContainer=o,t[Dn]=o.current,So(t.nodeType===8?t.parentNode:t),ri(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=Kl(u);c.call(d)}}var u=Pf(t,0,!1,null,null,!1,!1,"",tv);return t._reactRootContainer=u,t[Dn]=u.current,So(t.nodeType===8?t.parentNode:t),ri(function(){Cc(e,u,n,r)}),u}function Pc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var c=i;i=function(){var u=Kl(o);c.call(u)}}Cc(e,o,t,i)}else o=_N(n,e,t,i,r);return Kl(o)}C_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ks(e.pendingLanes);n!==0&&(Yh(e,n|1),Nt(e,Oe()),!(ae&6)&&(ts=Oe()+500,jr()))}break;case 13:ri(function(){var r=On(t,1);if(r!==null){var i=vt();en(r,t,1,i)}}),kf(t,1)}};Jh=function(t){if(t.tag===13){var e=On(t,134217728);if(e!==null){var n=vt();en(e,t,134217728,n)}kf(t,134217728)}};A_=function(t){if(t.tag===13){var e=gr(t),n=On(t,e);if(n!==null){var r=vt();en(n,t,e,r)}kf(t,e)}};R_=function(){return he};P_=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};kd=function(t,e,n){switch(e){case"input":if(Sd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wc(r);if(!i)throw Error(F(90));a_(r),Sd(r,i)}}}break;case"textarea":c_(t,n);break;case"select":e=n.value,e!=null&&Mi(t,!!n.multiple,e,!1)}};g_=Nf;v_=ri;var wN={usingClientEntryPoint:!1,Events:[Ko,Pi,wc,p_,m_,Nf]},zs={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EN={bundleType:zs.bundleType,version:zs.version,rendererPackageName:zs.rendererPackageName,rendererConfig:zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=w_(t),t===null?null:t.stateNode},findFiberByHostInstance:zs.findFiberByHostInstance||yN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ga.isDisabled&&Ga.supportsFiber)try{gc=Ga.inject(EN),un=Ga}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wN;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bf(e))throw Error(F(200));return vN(t,e,null,n)};Lt.createRoot=function(t,e){if(!bf(t))throw Error(F(299));var n=!1,r="",i=Jw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pf(t,1,!1,null,null,n,!1,r,i),t[Dn]=e.current,So(t.nodeType===8?t.parentNode:t),new jf(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=w_(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return ri(t)};Lt.hydrate=function(t,e,n){if(!Rc(e))throw Error(F(200));return Pc(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!bf(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Jw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Yw(e,null,t,1,n??null,i,!1,s,o),t[Dn]=e.current,So(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ac(e)};Lt.render=function(t,e,n){if(!Rc(e))throw Error(F(200));return Pc(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!Rc(t))throw Error(F(40));return t._reactRootContainer?(ri(function(){Pc(null,null,t,!1,function(){t._reactRootContainer=null,t[Dn]=null})}),!0):!1};Lt.unstable_batchedUpdates=Nf;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rc(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Pc(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function Zw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zw)}catch(t){console.error(t)}}Zw(),Zy.exports=Lt;var xN=Zy.exports,nv=xN;vd.createRoot=nv.createRoot,vd.hydrateRoot=nv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bo(){return bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bo.apply(this,arguments)}var ar;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ar||(ar={}));const rv="popstate";function TN(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:c="",hash:u=""}=di(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),uh("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof s=="string"?s:Ql(s))}function r(i,s){kc(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return IN(e,n,r,t)}function Le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SN(){return Math.random().toString(36).substr(2,8)}function iv(t,e){return{usr:t.state,key:t.key,idx:e}}function uh(t,e,n,r){return n===void 0&&(n=null),bo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?di(e):e,{state:n,key:e&&e.key||r||SN()})}function Ql(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function di(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function IN(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,c=ar.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(bo({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){c=ar.Pop;let A=f(),y=A==null?null:A-d;d=A,u&&u({action:c,location:E.location,delta:y})}function p(A,y){c=ar.Push;let T=uh(E.location,A,y);n&&n(T,A),d=f()+1;let w=iv(T,d),I=E.createHref(T);try{o.pushState(w,"",I)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(I)}s&&u&&u({action:c,location:E.location,delta:1})}function v(A,y){c=ar.Replace;let T=uh(E.location,A,y);n&&n(T,A),d=f();let w=iv(T,d),I=E.createHref(T);o.replaceState(w,"",I),s&&u&&u({action:c,location:E.location,delta:0})}function x(A){let y=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof A=="string"?A:Ql(A);return T=T.replace(/ $/,"%20"),Le(y,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,y)}let E={get action(){return c},get location(){return t(i,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(rv,m),u=A,()=>{i.removeEventListener(rv,m),u=null}},createHref(A){return e(i,A)},createURL:x,encodeLocation(A){let y=x(A);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:v,go(A){return o.go(A)}};return E}var sv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sv||(sv={}));function NN(t,e,n){return n===void 0&&(n="/"),CN(t,e,n)}function CN(t,e,n,r){let i=typeof e=="string"?di(e):e,s=Df(i.pathname||"/",n);if(s==null)return null;let o=eE(t);AN(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=FN(s);c=VN(o[u],d)}return c}function eE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Le(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=yr([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(Le(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),eE(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:ON(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,o);else for(let u of tE(s.path))i(s,o,u)}),e}function tE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=tE(r.join("/")),c=[];return c.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function AN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const RN=/^:[\w-]+$/,PN=3,kN=2,jN=1,bN=10,DN=-2,ov=t=>t==="*";function ON(t,e){let n=t.split("/"),r=n.length;return n.some(ov)&&(r+=DN),e&&(r+=kN),n.filter(i=>!ov(i)).reduce((i,s)=>i+(RN.test(s)?PN:s===""?jN:bN),r)}function LN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function VN(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",m=MN({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),p=u.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:yr([s,m.pathname]),pathnameBase:WN(yr([s,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(s=yr([s,m.pathnameBase]))}return o}function MN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=UN(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:p,isOptional:v}=f;if(p==="*"){let E=c[m]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const x=c[m];return v&&!x?d[p]=void 0:d[p]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function UN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),kc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function FN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Df(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const zN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BN=t=>zN.test(t);function $N(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?di(t):t,s;if(n)if(BN(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),kc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=av(n.substring(1),"/"):s=av(n,e)}else s=e;return{pathname:s,search:HN(r),hash:GN(i)}}function av(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function nd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Of(t,e){let n=qN(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Lf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=di(t):(i=bo({},t),Le(!i.pathname||!i.pathname.includes("?"),nd("?","pathname","search",i)),Le(!i.pathname||!i.pathname.includes("#"),nd("#","pathname","hash",i)),Le(!i.search||!i.search.includes("#"),nd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;i.pathname=p.join("/")}c=m>=0?e[m]:"/"}let u=$N(i,c),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const yr=t=>t.join("/").replace(/\/\/+/g,"/"),WN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,GN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nE=["post","put","patch","delete"];new Set(nE);const QN=["get",...nE];new Set(QN);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Do(){return Do=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Do.apply(this,arguments)}const Vf=j.createContext(null),XN=j.createContext(null),br=j.createContext(null),jc=j.createContext(null),qn=j.createContext({outlet:null,matches:[],isDataRoute:!1}),rE=j.createContext(null);function YN(t,e){let{relative:n}=e===void 0?{}:e;fs()||Le(!1);let{basename:r,navigator:i}=j.useContext(br),{hash:s,pathname:o,search:c}=sE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:yr([r,o])),i.createHref({pathname:u,search:c,hash:s})}function fs(){return j.useContext(jc)!=null}function ps(){return fs()||Le(!1),j.useContext(jc).location}function iE(t){j.useContext(br).static||j.useLayoutEffect(t)}function At(){let{isDataRoute:t}=j.useContext(qn);return t?uC():JN()}function JN(){fs()||Le(!1);let t=j.useContext(Vf),{basename:e,future:n,navigator:r}=j.useContext(br),{matches:i}=j.useContext(qn),{pathname:s}=ps(),o=JSON.stringify(Of(i,n.v7_relativeSplatPath)),c=j.useRef(!1);return iE(()=>{c.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=Lf(d,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:yr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,s,t])}function Mf(){let{matches:t}=j.useContext(qn),e=t[t.length-1];return e?e.params:{}}function sE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(br),{matches:i}=j.useContext(qn),{pathname:s}=ps(),o=JSON.stringify(Of(i,r.v7_relativeSplatPath));return j.useMemo(()=>Lf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function ZN(t,e){return eC(t,e)}function eC(t,e,n,r){fs()||Le(!1);let{navigator:i}=j.useContext(br),{matches:s}=j.useContext(qn),o=s[s.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=ps(),f;if(e){var m;let A=typeof e=="string"?di(e):e;u==="/"||(m=A.pathname)!=null&&m.startsWith(u)||Le(!1),f=A}else f=d;let p=f.pathname||"/",v=p;if(u!=="/"){let A=u.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(A.length).join("/")}let x=NN(t,{pathname:v}),E=sC(x&&x.map(A=>Object.assign({},A,{params:Object.assign({},c,A.params),pathname:yr([u,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?u:yr([u,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,n,r);return e&&E?j.createElement(jc.Provider,{value:{location:Do({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ar.Pop}},E):E}function tC(){let t=cC(),e=KN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:i},n):null,null)}const nC=j.createElement(tC,null);class rC extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(qn.Provider,{value:this.props.routeContext},j.createElement(rE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iC(t){let{routeContext:e,match:n,children:r}=t,i=j.useContext(Vf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(qn.Provider,{value:e},r)}function sC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let f=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||Le(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:p,errors:v}=n,x=m.route.loader&&p[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,p)=>{let v,x=!1,E=null,A=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,E=m.route.errorElement||nC,u&&(d<0&&p===0?(dC("route-fallback"),x=!0,A=null):d===p&&(x=!0,A=m.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,p+1)),T=()=>{let w;return v?w=E:x?w=A:m.route.Component?w=j.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=f,j.createElement(iC,{match:m,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:w})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?j.createElement(rC,{location:n.location,revalidation:n.revalidation,component:E,error:v,children:T(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):T()},null)}var oE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(oE||{}),aE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(aE||{});function oC(t){let e=j.useContext(Vf);return e||Le(!1),e}function aC(t){let e=j.useContext(XN);return e||Le(!1),e}function lC(t){let e=j.useContext(qn);return e||Le(!1),e}function lE(t){let e=lC(),n=e.matches[e.matches.length-1];return n.route.id||Le(!1),n.route.id}function cC(){var t;let e=j.useContext(rE),n=aC(),r=lE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function uC(){let{router:t}=oC(oE.UseNavigateStable),e=lE(aE.UseNavigateStable),n=j.useRef(!1);return iE(()=>{n.current=!0}),j.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Do({fromRouteId:e},s)))},[t,e])}const lv={};function dC(t,e,n){lv[t]||(lv[t]=!0)}function hC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function cv(t){let{to:e,replace:n,state:r,relative:i}=t;fs()||Le(!1);let{future:s,static:o}=j.useContext(br),{matches:c}=j.useContext(qn),{pathname:u}=ps(),d=At(),f=Lf(e,Of(c,s.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:i}),[d,m,i,n,r]),null}function mt(t){Le(!1)}function fC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ar.Pop,navigator:s,static:o=!1,future:c}=t;fs()&&Le(!1);let u=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:s,static:o,future:Do({v7_relativeSplatPath:!1},c)}),[u,c,s,o]);typeof r=="string"&&(r=di(r));let{pathname:f="/",search:m="",hash:p="",state:v=null,key:x="default"}=r,E=j.useMemo(()=>{let A=Df(f,u);return A==null?null:{location:{pathname:A,search:m,hash:p,state:v,key:x},navigationType:i}},[u,f,m,p,v,x,i]);return E==null?null:j.createElement(br.Provider,{value:d},j.createElement(jc.Provider,{children:n,value:E}))}function uv(t){let{children:e,location:n}=t;return ZN(dh(e),n)}new Promise(()=>{});function dh(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,i)=>{if(!j.isValidElement(r))return;let s=[...e,i];if(r.type===j.Fragment){n.push.apply(n,dh(r.props.children,s));return}r.type!==mt&&Le(!1),!r.props.index||!r.props.children||Le(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=dh(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hh(){return hh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hh.apply(this,arguments)}function pC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function mC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gC(t,e){return t.button===0&&(!e||e==="_self")&&!mC(t)}const vC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yC="6";try{window.__reactRouterVersion=yC}catch{}const _C="startTransition",dv=dS[_C];function wC(t){let{basename:e,children:n,future:r,window:i}=t,s=j.useRef();s.current==null&&(s.current=TN({window:i,v5Compat:!0}));let o=s.current,[c,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=j.useCallback(m=>{d&&dv?dv(()=>u(m)):u(m)},[u,d]);return j.useLayoutEffect(()=>o.listen(f),[o,f]),j.useEffect(()=>hC(r),[r]),j.createElement(fC,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const EC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hv=j.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,p=pC(e,vC),{basename:v}=j.useContext(br),x,E=!1;if(typeof d=="string"&&xC.test(d)&&(x=d,EC))try{let w=new URL(window.location.href),I=d.startsWith("//")?new URL(w.protocol+d):new URL(d),O=Df(I.pathname,v);I.origin===w.origin&&O!=null?d=O+I.search+I.hash:E=!0}catch{}let A=YN(d,{relative:i}),y=TC(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:m});function T(w){r&&r(w),w.defaultPrevented||y(w)}return j.createElement("a",hh({},p,{href:x||A,onClick:E||s?r:T,ref:n,target:u}))});var fv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fv||(fv={}));var pv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(pv||(pv={}));function TC(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:c}=e===void 0?{}:e,u=At(),d=ps(),f=sE(t,{relative:o});return j.useCallback(m=>{if(gC(m,n)){m.preventDefault();let p=r!==void 0?r:Ql(d)===Ql(f);u(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:c})}},[d,u,f,r,i,n,t,s,o,c])}const cE="zerosei_cart";function uE(){try{const t=localStorage.getItem(cE);if(t)return JSON.parse(t)}catch(t){console.error("Error loading cart:",t)}return{items:[],total:0}}function bc(t){try{localStorage.setItem(cE,JSON.stringify(t))}catch(e){console.error("Error saving cart:",e)}}function Dc(t){const e=t.modifications?t.modifications.reduce((n,r)=>n+r.price,0):0;return t.product.price+e}function Uf(t){return t.reduce((e,n)=>{const r=Dc(n);return e+r*n.quantity},0)}function mv(t){return!t||t.length===0?"":t.map(e=>e.id).sort().join("|")}function Ff(t,e,n=1,r,i){const s=mv(i),o=t.items.findIndex(d=>{const f=mv(d.modifications);return d.product.id===e.id&&f===s});let c;o>=0?(c=[...t.items],c[o]={...c[o],quantity:c[o].quantity+n,notes:r?c[o].notes?`${c[o].notes}, ${r}`:r:c[o].notes}):c=[...t.items,{product:e,quantity:n,notes:r,modifications:i}];const u={items:c,total:Uf(c)};return bc(u),u}function dE(t,e){const n=t.items.filter((i,s)=>s!==e),r={items:n,total:Uf(n)};return bc(r),r}function SC(t,e,n){if(n<=0)return dE(t,e);const r=t.items.map((s,o)=>o===e?{...s,quantity:n}:s),i={items:r,total:Uf(r)};return bc(i),i}function IC(){const t={items:[],total:0};return bc(t),t}function NC(t){return t.items.reduce((e,n)=>e+n.quantity,0)}var gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},CC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},fE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,m=(s&3)<<4|c>>4;let p=(c&15)<<2|d>>6,v=d&63;u||(v=64,o||(p=64)),r.push(n[f],n[m],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||m==null)throw new AC;const p=s<<2|c>>4;if(r.push(p),d!==64){const v=c<<4&240|d>>2;if(r.push(v),m!==64){const x=d<<6&192|m;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RC=function(t){const e=hE(t);return fE.encodeByteArray(e,!0)},Xl=function(t){return RC(t).replace(/\./g,"")},pE=function(t){try{return fE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=()=>PC().__FIREBASE_DEFAULTS__,jC=()=>{if(typeof process>"u"||typeof gv>"u")return;const t=gv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pE(t[1]);return e&&JSON.parse(e)},Oc=()=>{try{return kC()||jC()||bC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mE=t=>{var e,n;return(n=(e=Oc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zf=t=>{const e=mE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gE=()=>{var t;return(t=Oc())===null||t===void 0?void 0:t.config},vE=t=>{var e;return(e=Oc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xl(JSON.stringify(n)),Xl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function LC(){var t;const e=(t=Oc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FC(){const t=dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zC(){return!LC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BC(){try{return typeof indexedDB=="object"}catch{return!1}}function $C(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="FirebaseError";class sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qC,Object.setPrototypeOf(this,sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xo.prototype.create)}}class Xo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?WC(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new sn(i,c,r)}}function WC(t,e){return t.replace(HC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const HC=/\{\$([^}]+)}/g;function GC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(vv(s)&&vv(o)){if(!Yl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function vv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function KC(t,e){const n=new QC(t,e);return n.subscribe.bind(n)}class QC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=rd),i.error===void 0&&(i.error=rd),i.complete===void 0&&(i.complete=rd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){return t&&t._delegate?t._delegate:t}class Vn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZC(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JC(t){return t===$r?void 0:t}function ZC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const tA={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},nA=se.INFO,rA={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},iA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=rA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bf{constructor(e){this.name=e,this._logLevel=nA,this._logHandler=iA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const sA=(t,e)=>e.some(n=>t instanceof n);let yv,_v;function oA(){return yv||(yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aA(){return _v||(_v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _E=new WeakMap,fh=new WeakMap,wE=new WeakMap,id=new WeakMap,$f=new WeakMap;function lA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_r(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_E.set(n,t)}).catch(()=>{}),$f.set(e,t),e}function cA(t){if(fh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});fh.set(t,e)}let ph={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uA(t){ph=t(ph)}function dA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sd(this),e,...n);return wE.set(r,e.sort?e.sort():[e]),_r(r)}:aA().includes(t)?function(...e){return t.apply(sd(this),e),_r(_E.get(this))}:function(...e){return _r(t.apply(sd(this),e))}}function hA(t){return typeof t=="function"?dA(t):(t instanceof IDBTransaction&&cA(t),sA(t,oA())?new Proxy(t,ph):t)}function _r(t){if(t instanceof IDBRequest)return lA(t);if(id.has(t))return id.get(t);const e=hA(t);return e!==t&&(id.set(t,e),$f.set(e,t)),e}const sd=t=>$f.get(t);function fA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),c=_r(o);return r&&o.addEventListener("upgradeneeded",u=>{r(_r(o.result),u.oldVersion,u.newVersion,_r(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const pA=["get","getKey","getAll","getAllKeys","count"],mA=["put","add","delete","clear"],od=new Map;function wv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(od.get(e))return od.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=mA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pA.includes(n)))return;const s=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return od.set(e,s),s}uA(t=>({...t,get:(e,n,r)=>wv(e,n)||t.get(e,n,r),has:(e,n)=>!!wv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mh="@firebase/app",Ev="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new Bf("@firebase/app"),yA="@firebase/app-compat",_A="@firebase/analytics-compat",wA="@firebase/analytics",EA="@firebase/app-check-compat",xA="@firebase/app-check",TA="@firebase/auth",SA="@firebase/auth-compat",IA="@firebase/database",NA="@firebase/data-connect",CA="@firebase/database-compat",AA="@firebase/functions",RA="@firebase/functions-compat",PA="@firebase/installations",kA="@firebase/installations-compat",jA="@firebase/messaging",bA="@firebase/messaging-compat",DA="@firebase/performance",OA="@firebase/performance-compat",LA="@firebase/remote-config",VA="@firebase/remote-config-compat",MA="@firebase/storage",UA="@firebase/storage-compat",FA="@firebase/firestore",zA="@firebase/vertexai-preview",BA="@firebase/firestore-compat",$A="firebase",qA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="[DEFAULT]",WA={[mh]:"fire-core",[yA]:"fire-core-compat",[wA]:"fire-analytics",[_A]:"fire-analytics-compat",[xA]:"fire-app-check",[EA]:"fire-app-check-compat",[TA]:"fire-auth",[SA]:"fire-auth-compat",[IA]:"fire-rtdb",[NA]:"fire-data-connect",[CA]:"fire-rtdb-compat",[AA]:"fire-fn",[RA]:"fire-fn-compat",[PA]:"fire-iid",[kA]:"fire-iid-compat",[jA]:"fire-fcm",[bA]:"fire-fcm-compat",[DA]:"fire-perf",[OA]:"fire-perf-compat",[LA]:"fire-rc",[VA]:"fire-rc-compat",[MA]:"fire-gcs",[UA]:"fire-gcs-compat",[FA]:"fire-fst",[BA]:"fire-fst-compat",[zA]:"fire-vertex","fire-js":"fire-js",[$A]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Map,HA=new Map,vh=new Map;function xv(t,e){try{t.container.addComponent(e)}catch(n){Mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ir(t){const e=t.name;if(vh.has(e))return Mn.debug(`There were multiple attempts to register component ${e}.`),!1;vh.set(e,t);for(const n of Jl.values())xv(n,t);for(const n of HA.values())xv(n,t);return!0}function Jo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new Xo("app","Firebase",GA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=qA;function EE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw wr.create("bad-app-name",{appName:String(i)});if(n||(n=gE()),!n)throw wr.create("no-options");const s=Jl.get(i);if(s){if(Yl(n,s.options)&&Yl(r,s.config))return s;throw wr.create("duplicate-app",{appName:i})}const o=new eA(i);for(const u of vh.values())o.addComponent(u);const c=new KA(n,r,o);return Jl.set(i,c),c}function Lc(t=gh){const e=Jl.get(t);if(!e&&t===gh&&gE())return EE();if(!e)throw wr.create("no-app",{appName:t});return e}function $t(t,e,n){var r;let i=(r=WA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mn.warn(c.join(" "));return}Ir(new Vn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="firebase-heartbeat-database",XA=1,Oo="firebase-heartbeat-store";let ad=null;function xE(){return ad||(ad=fA(QA,XA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oo)}catch(n){console.warn(n)}}}}).catch(t=>{throw wr.create("idb-open",{originalErrorMessage:t.message})})),ad}async function YA(t){try{const n=(await xE()).transaction(Oo),r=await n.objectStore(Oo).get(TE(t));return await n.done,r}catch(e){if(e instanceof sn)Mn.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mn.warn(n.message)}}}async function Tv(t,e){try{const r=(await xE()).transaction(Oo,"readwrite");await r.objectStore(Oo).put(e,TE(t)),await r.done}catch(n){if(n instanceof sn)Mn.warn(n.message);else{const r=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mn.warn(r.message)}}}function TE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=1024,ZA=30*24*60*60*1e3;class eR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Sv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=ZA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Mn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sv(),{heartbeatsToSend:r,unsentEntries:i}=tR(this._heartbeatsCache.heartbeats),s=Xl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Mn.warn(n),""}}}function Sv(){return new Date().toISOString().substring(0,10)}function tR(t,e=JA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Iv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Iv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BC()?$C().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Iv(t){return Xl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){Ir(new Vn("platform-logger",e=>new gA(e),"PRIVATE")),Ir(new Vn("heartbeat",e=>new eR(e),"PRIVATE")),$t(mh,Ev,t),$t(mh,Ev,"esm2017"),$t("fire-js","")}rR("");var iR="firebase",sR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$t(iR,sR,"app");var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xr,SE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,_){function C(){}C.prototype=_.prototype,N.D=_.prototype,N.prototype=new C,N.prototype.constructor=N,N.C=function(P,R,D){for(var k=Array(arguments.length-2),de=2;de<arguments.length;de++)k[de-2]=arguments[de];return _.prototype[R].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,_,C){C||(C=0);var P=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)P[R]=_.charCodeAt(C++)|_.charCodeAt(C++)<<8|_.charCodeAt(C++)<<16|_.charCodeAt(C++)<<24;else for(R=0;16>R;++R)P[R]=_[C++]|_[C++]<<8|_[C++]<<16|_[C++]<<24;_=N.g[0],C=N.g[1],R=N.g[2];var D=N.g[3],k=_+(D^C&(R^D))+P[0]+3614090360&4294967295;_=C+(k<<7&4294967295|k>>>25),k=D+(R^_&(C^R))+P[1]+3905402710&4294967295,D=_+(k<<12&4294967295|k>>>20),k=R+(C^D&(_^C))+P[2]+606105819&4294967295,R=D+(k<<17&4294967295|k>>>15),k=C+(_^R&(D^_))+P[3]+3250441966&4294967295,C=R+(k<<22&4294967295|k>>>10),k=_+(D^C&(R^D))+P[4]+4118548399&4294967295,_=C+(k<<7&4294967295|k>>>25),k=D+(R^_&(C^R))+P[5]+1200080426&4294967295,D=_+(k<<12&4294967295|k>>>20),k=R+(C^D&(_^C))+P[6]+2821735955&4294967295,R=D+(k<<17&4294967295|k>>>15),k=C+(_^R&(D^_))+P[7]+4249261313&4294967295,C=R+(k<<22&4294967295|k>>>10),k=_+(D^C&(R^D))+P[8]+1770035416&4294967295,_=C+(k<<7&4294967295|k>>>25),k=D+(R^_&(C^R))+P[9]+2336552879&4294967295,D=_+(k<<12&4294967295|k>>>20),k=R+(C^D&(_^C))+P[10]+4294925233&4294967295,R=D+(k<<17&4294967295|k>>>15),k=C+(_^R&(D^_))+P[11]+2304563134&4294967295,C=R+(k<<22&4294967295|k>>>10),k=_+(D^C&(R^D))+P[12]+1804603682&4294967295,_=C+(k<<7&4294967295|k>>>25),k=D+(R^_&(C^R))+P[13]+4254626195&4294967295,D=_+(k<<12&4294967295|k>>>20),k=R+(C^D&(_^C))+P[14]+2792965006&4294967295,R=D+(k<<17&4294967295|k>>>15),k=C+(_^R&(D^_))+P[15]+1236535329&4294967295,C=R+(k<<22&4294967295|k>>>10),k=_+(R^D&(C^R))+P[1]+4129170786&4294967295,_=C+(k<<5&4294967295|k>>>27),k=D+(C^R&(_^C))+P[6]+3225465664&4294967295,D=_+(k<<9&4294967295|k>>>23),k=R+(_^C&(D^_))+P[11]+643717713&4294967295,R=D+(k<<14&4294967295|k>>>18),k=C+(D^_&(R^D))+P[0]+3921069994&4294967295,C=R+(k<<20&4294967295|k>>>12),k=_+(R^D&(C^R))+P[5]+3593408605&4294967295,_=C+(k<<5&4294967295|k>>>27),k=D+(C^R&(_^C))+P[10]+38016083&4294967295,D=_+(k<<9&4294967295|k>>>23),k=R+(_^C&(D^_))+P[15]+3634488961&4294967295,R=D+(k<<14&4294967295|k>>>18),k=C+(D^_&(R^D))+P[4]+3889429448&4294967295,C=R+(k<<20&4294967295|k>>>12),k=_+(R^D&(C^R))+P[9]+568446438&4294967295,_=C+(k<<5&4294967295|k>>>27),k=D+(C^R&(_^C))+P[14]+3275163606&4294967295,D=_+(k<<9&4294967295|k>>>23),k=R+(_^C&(D^_))+P[3]+4107603335&4294967295,R=D+(k<<14&4294967295|k>>>18),k=C+(D^_&(R^D))+P[8]+1163531501&4294967295,C=R+(k<<20&4294967295|k>>>12),k=_+(R^D&(C^R))+P[13]+2850285829&4294967295,_=C+(k<<5&4294967295|k>>>27),k=D+(C^R&(_^C))+P[2]+4243563512&4294967295,D=_+(k<<9&4294967295|k>>>23),k=R+(_^C&(D^_))+P[7]+1735328473&4294967295,R=D+(k<<14&4294967295|k>>>18),k=C+(D^_&(R^D))+P[12]+2368359562&4294967295,C=R+(k<<20&4294967295|k>>>12),k=_+(C^R^D)+P[5]+4294588738&4294967295,_=C+(k<<4&4294967295|k>>>28),k=D+(_^C^R)+P[8]+2272392833&4294967295,D=_+(k<<11&4294967295|k>>>21),k=R+(D^_^C)+P[11]+1839030562&4294967295,R=D+(k<<16&4294967295|k>>>16),k=C+(R^D^_)+P[14]+4259657740&4294967295,C=R+(k<<23&4294967295|k>>>9),k=_+(C^R^D)+P[1]+2763975236&4294967295,_=C+(k<<4&4294967295|k>>>28),k=D+(_^C^R)+P[4]+1272893353&4294967295,D=_+(k<<11&4294967295|k>>>21),k=R+(D^_^C)+P[7]+4139469664&4294967295,R=D+(k<<16&4294967295|k>>>16),k=C+(R^D^_)+P[10]+3200236656&4294967295,C=R+(k<<23&4294967295|k>>>9),k=_+(C^R^D)+P[13]+681279174&4294967295,_=C+(k<<4&4294967295|k>>>28),k=D+(_^C^R)+P[0]+3936430074&4294967295,D=_+(k<<11&4294967295|k>>>21),k=R+(D^_^C)+P[3]+3572445317&4294967295,R=D+(k<<16&4294967295|k>>>16),k=C+(R^D^_)+P[6]+76029189&4294967295,C=R+(k<<23&4294967295|k>>>9),k=_+(C^R^D)+P[9]+3654602809&4294967295,_=C+(k<<4&4294967295|k>>>28),k=D+(_^C^R)+P[12]+3873151461&4294967295,D=_+(k<<11&4294967295|k>>>21),k=R+(D^_^C)+P[15]+530742520&4294967295,R=D+(k<<16&4294967295|k>>>16),k=C+(R^D^_)+P[2]+3299628645&4294967295,C=R+(k<<23&4294967295|k>>>9),k=_+(R^(C|~D))+P[0]+4096336452&4294967295,_=C+(k<<6&4294967295|k>>>26),k=D+(C^(_|~R))+P[7]+1126891415&4294967295,D=_+(k<<10&4294967295|k>>>22),k=R+(_^(D|~C))+P[14]+2878612391&4294967295,R=D+(k<<15&4294967295|k>>>17),k=C+(D^(R|~_))+P[5]+4237533241&4294967295,C=R+(k<<21&4294967295|k>>>11),k=_+(R^(C|~D))+P[12]+1700485571&4294967295,_=C+(k<<6&4294967295|k>>>26),k=D+(C^(_|~R))+P[3]+2399980690&4294967295,D=_+(k<<10&4294967295|k>>>22),k=R+(_^(D|~C))+P[10]+4293915773&4294967295,R=D+(k<<15&4294967295|k>>>17),k=C+(D^(R|~_))+P[1]+2240044497&4294967295,C=R+(k<<21&4294967295|k>>>11),k=_+(R^(C|~D))+P[8]+1873313359&4294967295,_=C+(k<<6&4294967295|k>>>26),k=D+(C^(_|~R))+P[15]+4264355552&4294967295,D=_+(k<<10&4294967295|k>>>22),k=R+(_^(D|~C))+P[6]+2734768916&4294967295,R=D+(k<<15&4294967295|k>>>17),k=C+(D^(R|~_))+P[13]+1309151649&4294967295,C=R+(k<<21&4294967295|k>>>11),k=_+(R^(C|~D))+P[4]+4149444226&4294967295,_=C+(k<<6&4294967295|k>>>26),k=D+(C^(_|~R))+P[11]+3174756917&4294967295,D=_+(k<<10&4294967295|k>>>22),k=R+(_^(D|~C))+P[2]+718787259&4294967295,R=D+(k<<15&4294967295|k>>>17),k=C+(D^(R|~_))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+_&4294967295,N.g[1]=N.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+R&4294967295,N.g[3]=N.g[3]+D&4294967295}r.prototype.u=function(N,_){_===void 0&&(_=N.length);for(var C=_-this.blockSize,P=this.B,R=this.h,D=0;D<_;){if(R==0)for(;D<=C;)i(this,N,D),D+=this.blockSize;if(typeof N=="string"){for(;D<_;)if(P[R++]=N.charCodeAt(D++),R==this.blockSize){i(this,P),R=0;break}}else for(;D<_;)if(P[R++]=N[D++],R==this.blockSize){i(this,P),R=0;break}}this.h=R,this.o+=_},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var _=1;_<N.length-8;++_)N[_]=0;var C=8*this.o;for(_=N.length-8;_<N.length;++_)N[_]=C&255,C/=256;for(this.u(N),N=Array(16),_=C=0;4>_;++_)for(var P=0;32>P;P+=8)N[C++]=this.g[_]>>>P&255;return N};function s(N,_){var C=c;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=_(N)}function o(N,_){this.h=_;for(var C=[],P=!0,R=N.length-1;0<=R;R--){var D=N[R]|0;P&&D==_||(C[R]=D,P=!1)}this.g=C}var c={};function u(N){return-128<=N&&128>N?s(N,function(_){return new o([_|0],0>_?-1:0)}):new o([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return m;if(0>N)return A(d(-N));for(var _=[],C=1,P=0;N>=C;P++)_[P]=N/C|0,C*=4294967296;return new o(_,0)}function f(N,_){if(N.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(N.charAt(0)=="-")return A(f(N.substring(1),_));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=d(Math.pow(_,8)),P=m,R=0;R<N.length;R+=8){var D=Math.min(8,N.length-R),k=parseInt(N.substring(R,R+D),_);8>D?(D=d(Math.pow(_,D)),P=P.j(D).add(d(k))):(P=P.j(C),P=P.add(d(k)))}return P}var m=u(0),p=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-A(this).m();for(var N=0,_=1,C=0;C<this.g.length;C++){var P=this.i(C);N+=(0<=P?P:4294967296+P)*_,_*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(E(this))return"-"+A(this).toString(N);for(var _=d(Math.pow(N,6)),C=this,P="";;){var R=I(C,_).g;C=y(C,R.j(_));var D=((0<C.g.length?C.g[0]:C.h)>>>0).toString(N);if(C=R,x(C))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(var _=0;_<N.g.length;_++)if(N.g[_]!=0)return!1;return!0}function E(N){return N.h==-1}t.l=function(N){return N=y(this,N),E(N)?-1:x(N)?0:1};function A(N){for(var _=N.g.length,C=[],P=0;P<_;P++)C[P]=~N.g[P];return new o(C,~N.h).add(p)}t.abs=function(){return E(this)?A(this):this},t.add=function(N){for(var _=Math.max(this.g.length,N.g.length),C=[],P=0,R=0;R<=_;R++){var D=P+(this.i(R)&65535)+(N.i(R)&65535),k=(D>>>16)+(this.i(R)>>>16)+(N.i(R)>>>16);P=k>>>16,D&=65535,k&=65535,C[R]=k<<16|D}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(N,_){return N.add(A(_))}t.j=function(N){if(x(this)||x(N))return m;if(E(this))return E(N)?A(this).j(A(N)):A(A(this).j(N));if(E(N))return A(this.j(A(N)));if(0>this.l(v)&&0>N.l(v))return d(this.m()*N.m());for(var _=this.g.length+N.g.length,C=[],P=0;P<2*_;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<N.g.length;R++){var D=this.i(P)>>>16,k=this.i(P)&65535,de=N.i(R)>>>16,Mt=N.i(R)&65535;C[2*P+2*R]+=k*Mt,T(C,2*P+2*R),C[2*P+2*R+1]+=D*Mt,T(C,2*P+2*R+1),C[2*P+2*R+1]+=k*de,T(C,2*P+2*R+1),C[2*P+2*R+2]+=D*de,T(C,2*P+2*R+2)}for(P=0;P<_;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=_;P<2*_;P++)C[P]=0;return new o(C,0)};function T(N,_){for(;(N[_]&65535)!=N[_];)N[_+1]+=N[_]>>>16,N[_]&=65535,_++}function w(N,_){this.g=N,this.h=_}function I(N,_){if(x(_))throw Error("division by zero");if(x(N))return new w(m,m);if(E(N))return _=I(A(N),_),new w(A(_.g),A(_.h));if(E(_))return _=I(N,A(_)),new w(A(_.g),_.h);if(30<N.g.length){if(E(N)||E(_))throw Error("slowDivide_ only works with positive integers.");for(var C=p,P=_;0>=P.l(N);)C=O(C),P=O(P);var R=b(C,1),D=b(P,1);for(P=b(P,2),C=b(C,2);!x(P);){var k=D.add(P);0>=k.l(N)&&(R=R.add(C),D=k),P=b(P,1),C=b(C,1)}return _=y(N,R.j(_)),new w(R,_)}for(R=m;0<=N.l(_);){for(C=Math.max(1,Math.floor(N.m()/_.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=d(C),k=D.j(_);E(k)||0<k.l(N);)C-=P,D=d(C),k=D.j(_);x(D)&&(D=p),R=R.add(D),N=y(N,k)}return new w(R,N)}t.A=function(N){return I(this,N).h},t.and=function(N){for(var _=Math.max(this.g.length,N.g.length),C=[],P=0;P<_;P++)C[P]=this.i(P)&N.i(P);return new o(C,this.h&N.h)},t.or=function(N){for(var _=Math.max(this.g.length,N.g.length),C=[],P=0;P<_;P++)C[P]=this.i(P)|N.i(P);return new o(C,this.h|N.h)},t.xor=function(N){for(var _=Math.max(this.g.length,N.g.length),C=[],P=0;P<_;P++)C[P]=this.i(P)^N.i(P);return new o(C,this.h^N.h)};function O(N){for(var _=N.g.length+1,C=[],P=0;P<_;P++)C[P]=N.i(P)<<1|N.i(P-1)>>>31;return new o(C,N.h)}function b(N,_){var C=_>>5;_%=32;for(var P=N.g.length-C,R=[],D=0;D<P;D++)R[D]=0<_?N.i(D+C)>>>_|N.i(D+C+1)<<32-_:N.i(D+C);return new o(R,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,SE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Xr=o}).apply(typeof Nv<"u"?Nv:typeof self<"u"?self:typeof window<"u"?window:{});var Ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IE,Xs,NE,ml,yh,CE,AE,RE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,g){return l==Array.prototype||l==Object.prototype||(l[h]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ka=="object"&&Ka];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var g=r;l=l.split(".");for(var S=0;S<l.length-1;S++){var L=l[S];if(!(L in g))break e;g=g[L]}l=l[l.length-1],S=g[l],h=h(S),h!=S&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var g=0,S=!1,L={next:function(){if(!S&&g<l.length){var V=g++;return{value:h(V,l[V]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,g){return l.call.apply(l.bind,arguments)}function m(l,h,g){if(!l)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),l.apply(h,L)}}return function(){return l.apply(h,arguments)}}function p(l,h,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,p.apply(null,arguments)}function v(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function x(l,h){function g(){}g.prototype=h.prototype,l.aa=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(S,L,V){for(var B=Array(arguments.length-2),me=2;me<arguments.length;me++)B[me-2]=arguments[me];return h.prototype[L].apply(S,B)}}function E(l){const h=l.length;if(0<h){const g=Array(h);for(let S=0;S<h;S++)g[S]=l[S];return g}return[]}function A(l,h){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(u(S)){const L=l.length||0,V=S.length||0;l.length=L+V;for(let B=0;B<V;B++)l[L+B]=S[B]}else l.push(S)}}class y{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function T(l){return/^[\s\xa0]*$/.test(l)}function w(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function I(l){return I[" "](l),l}I[" "]=function(){};var O=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function b(l,h,g){for(const S in l)h.call(g,l[S],S,l)}function N(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function _(l){const h={};for(const g in l)h[g]=l[g];return h}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,h){let g,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(g in S)l[g]=S[g];for(let V=0;V<C.length;V++)g=C[V],Object.prototype.hasOwnProperty.call(S,g)&&(l[g]=S[g])}}function R(l){var h=1;l=l.split(":");const g=[];for(;0<h&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function D(l){c.setTimeout(()=>{throw l},0)}function k(){var l=G;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class de{constructor(){this.h=this.g=null}add(h,g){const S=Mt.get();S.set(h,g),this.h?this.h.next=S:this.g=S,this.h=S}}var Mt=new y(()=>new ee,l=>l.reset());class ee{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let le,z=!1,G=new de,Z=()=>{const l=c.Promise.resolve(void 0);le=()=>{l.then(Te)}};var Te=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(g){D(g)}var h=Mt;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}z=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var yn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};c.addEventListener("test",g,h),c.removeEventListener("test",g,h)}catch{}return l}();function _n(l,h){if(be.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(O){e:{try{I(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement);this.relatedTarget=h,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:wn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&_n.aa.h.call(this)}}x(_n,be);var wn={2:"touch",3:"pen",4:"mouse"};_n.prototype.h=function(){_n.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var En="closure_listenable_"+(1e6*Math.random()|0),vT=0;function yT(l,h,g,S,L){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!S,this.ha=L,this.key=++vT,this.da=this.fa=!1}function fa(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function pa(l){this.src=l,this.g={},this.h=0}pa.prototype.add=function(l,h,g,S,L){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var B=lu(l,h,S,L);return-1<B?(h=l[B],g||(h.fa=!1)):(h=new yT(h,this.src,V,!!S,L),h.fa=g,l.push(h)),h};function au(l,h){var g=h.type;if(g in l.g){var S=l.g[g],L=Array.prototype.indexOf.call(S,h,void 0),V;(V=0<=L)&&Array.prototype.splice.call(S,L,1),V&&(fa(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function lu(l,h,g,S){for(var L=0;L<l.length;++L){var V=l[L];if(!V.da&&V.listener==h&&V.capture==!!g&&V.ha==S)return L}return-1}var cu="closure_lm_"+(1e6*Math.random()|0),uu={};function Qp(l,h,g,S,L){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Qp(l,h[V],g,S,L);return null}return g=Jp(g),l&&l[En]?l.K(h,g,d(S)?!!S.capture:!1,L):_T(l,h,g,!1,S,L)}function _T(l,h,g,S,L,V){if(!h)throw Error("Invalid event type");var B=d(L)?!!L.capture:!!L,me=hu(l);if(me||(l[cu]=me=new pa(l)),g=me.add(h,g,S,B,V),g.proxy)return g;if(S=wT(),g.proxy=S,S.src=l,S.listener=g,l.addEventListener)yn||(L=B),L===void 0&&(L=!1),l.addEventListener(h.toString(),S,L);else if(l.attachEvent)l.attachEvent(Yp(h.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function wT(){function l(g){return h.call(l.src,l.listener,g)}const h=ET;return l}function Xp(l,h,g,S,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)Xp(l,h[V],g,S,L);else S=d(S)?!!S.capture:!!S,g=Jp(g),l&&l[En]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],g=lu(V,g,S,L),-1<g&&(fa(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=hu(l))&&(h=l.g[h.toString()],l=-1,h&&(l=lu(h,g,S,L)),(g=-1<l?h[l]:null)&&du(g))}function du(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[En])au(h.i,l);else{var g=l.type,S=l.proxy;h.removeEventListener?h.removeEventListener(g,S,l.capture):h.detachEvent?h.detachEvent(Yp(g),S):h.addListener&&h.removeListener&&h.removeListener(S),(g=hu(h))?(au(g,l),g.h==0&&(g.src=null,h[cu]=null)):fa(l)}}}function Yp(l){return l in uu?uu[l]:uu[l]="on"+l}function ET(l,h){if(l.da)l=!0;else{h=new _n(h,this);var g=l.listener,S=l.ha||l.src;l.fa&&du(l),l=g.call(S,h)}return l}function hu(l){return l=l[cu],l instanceof pa?l:null}var fu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jp(l){return typeof l=="function"?l:(l[fu]||(l[fu]=function(h){return l.handleEvent(h)}),l[fu])}function tt(){pe.call(this),this.i=new pa(this),this.M=this,this.F=null}x(tt,pe),tt.prototype[En]=!0,tt.prototype.removeEventListener=function(l,h,g,S){Xp(this,l,h,g,S)};function ht(l,h){var g,S=l.F;if(S)for(g=[];S;S=S.F)g.push(S);if(l=l.M,S=h.type||h,typeof h=="string")h=new be(h,l);else if(h instanceof be)h.target=h.target||l;else{var L=h;h=new be(S,l),P(h,L)}if(L=!0,g)for(var V=g.length-1;0<=V;V--){var B=h.g=g[V];L=ma(B,S,!0,h)&&L}if(B=h.g=l,L=ma(B,S,!0,h)&&L,L=ma(B,S,!1,h)&&L,g)for(V=0;V<g.length;V++)B=h.g=g[V],L=ma(B,S,!1,h)&&L}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var g=l.g[h],S=0;S<g.length;S++)fa(g[S]);delete l.g[h],l.h--}}this.F=null},tt.prototype.K=function(l,h,g,S){return this.i.add(String(l),h,!1,g,S)},tt.prototype.L=function(l,h,g,S){return this.i.add(String(l),h,!0,g,S)};function ma(l,h,g,S){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,V=0;V<h.length;++V){var B=h[V];if(B&&!B.da&&B.capture==g){var me=B.listener,He=B.ha||B.src;B.fa&&au(l.i,B),L=me.call(He,S)!==!1&&L}}return L&&!S.defaultPrevented}function Zp(l,h,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function em(l){l.g=Zp(()=>{l.g=null,l.i&&(l.i=!1,em(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class xT extends pe{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:em(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(l){pe.call(this),this.h=l,this.g={}}x(Es,pe);var tm=[];function nm(l){b(l.g,function(h,g){this.g.hasOwnProperty(g)&&du(h)},l),l.g={}}Es.prototype.N=function(){Es.aa.N.call(this),nm(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pu=c.JSON.stringify,TT=c.JSON.parse,ST=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function mu(){}mu.prototype.h=null;function rm(l){return l.h||(l.h=l.i())}function im(){}var xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gu(){be.call(this,"d")}x(gu,be);function vu(){be.call(this,"c")}x(vu,be);var Vr={},sm=null;function ga(){return sm=sm||new tt}Vr.La="serverreachability";function om(l){be.call(this,Vr.La,l)}x(om,be);function Ts(l){const h=ga();ht(h,new om(h))}Vr.STAT_EVENT="statevent";function am(l,h){be.call(this,Vr.STAT_EVENT,l),this.stat=h}x(am,be);function ft(l){const h=ga();ht(h,new am(h,l))}Vr.Ma="timingevent";function lm(l,h){be.call(this,Vr.Ma,l),this.size=h}x(lm,be);function Ss(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Is(){this.g=!0}Is.prototype.xa=function(){this.g=!1};function IT(l,h,g,S,L,V){l.info(function(){if(l.g)if(V)for(var B="",me=V.split("&"),He=0;He<me.length;He++){var ce=me[He].split("=");if(1<ce.length){var nt=ce[0];ce=ce[1];var rt=nt.split("_");B=2<=rt.length&&rt[1]=="type"?B+(nt+"="+ce+"&"):B+(nt+"=redacted&")}}else B=null;else B=V;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+h+`
`+g+`
`+B})}function NT(l,h,g,S,L,V,B){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+h+`
`+g+`
`+V+" "+B})}function gi(l,h,g,S){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+AT(l,g)+(S?" "+S:"")})}function CT(l,h){l.info(function(){return"TIMEOUT: "+h})}Is.prototype.info=function(){};function AT(l,h){if(!l.g)return h;if(!h)return null;try{var g=JSON.parse(h);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var S=g[l];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var B=1;B<L.length;B++)L[B]=""}}}}return pu(g)}catch{return h}}var va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yu;function ya(){}x(ya,mu),ya.prototype.g=function(){return new XMLHttpRequest},ya.prototype.i=function(){return{}},yu=new ya;function Wn(l,h,g,S){this.j=l,this.i=h,this.l=g,this.R=S||1,this.U=new Es(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new um}function um(){this.i=null,this.g="",this.h=!1}var dm={},_u={};function wu(l,h,g){l.L=1,l.v=xa(xn(h)),l.m=g,l.P=!0,hm(l,null)}function hm(l,h){l.F=Date.now(),_a(l),l.A=xn(l.v);var g=l.A,S=l.R;Array.isArray(S)||(S=[String(S)]),Nm(g.i,"t",S),l.C=0,g=l.j.J,l.h=new um,l.g=qm(l.j,g?h:null,!l.m),0<l.O&&(l.M=new xT(p(l.Y,l,l.g),l.O)),h=l.U,g=l.g,S=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(tm[0]=L.toString()),L=tm);for(var V=0;V<L.length;V++){var B=Qp(g,L[V],S||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Ts(),IT(l.i,l.u,l.A,l.l,l.R,l.m)}Wn.prototype.ca=function(l){l=l.target;const h=this.M;h&&Tn(l)==3?h.j():this.Y(l)},Wn.prototype.Y=function(l){try{if(l==this.g)e:{const rt=Tn(this.g);var h=this.g.Ba();const _i=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||bm(this.g)))){this.J||rt!=4||h==7||(h==8||0>=_i?Ts(3):Ts(2)),Eu(this);var g=this.g.Z();this.X=g;t:if(fm(this)){var S=bm(this.g);l="";var L=S.length,V=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mr(this),Ns(this);var B="";break t}this.h.i=new c.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,l+=this.h.i.decode(S[h],{stream:!(V&&h==L-1)});S.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=g==200,NT(this.i,this.u,this.A,this.l,this.R,rt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var me,He=this.g;if((me=He.g?He.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(me)){var ce=me;break t}}ce=null}if(g=ce)gi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xu(this,g);else{this.o=!1,this.s=3,ft(12),Mr(this),Ns(this);break e}}if(this.P){g=!0;let Kt;for(;!this.J&&this.C<B.length;)if(Kt=RT(this,B),Kt==_u){rt==4&&(this.s=4,ft(14),g=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==dm){this.s=4,ft(15),gi(this.i,this.l,B,"[Invalid Chunk]"),g=!1;break}else gi(this.i,this.l,Kt,null),xu(this,Kt);if(fm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||B.length!=0||this.h.h||(this.s=1,ft(16),g=!1),this.o=this.o&&g,!g)gi(this.i,this.l,B,"[Invalid Chunked Response]"),Mr(this),Ns(this);else if(0<B.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Au(nt),nt.M=!0,ft(11))}}else gi(this.i,this.l,B,null),xu(this,B);rt==4&&Mr(this),this.o&&!this.J&&(rt==4?Fm(this.j,this):(this.o=!1,_a(this)))}else HT(this.g),g==400&&0<B.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Mr(this),Ns(this)}}}catch{}finally{}};function fm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function RT(l,h){var g=l.C,S=h.indexOf(`
`,g);return S==-1?_u:(g=Number(h.substring(g,S)),isNaN(g)?dm:(S+=1,S+g>h.length?_u:(h=h.slice(S,S+g),l.C=S+g,h)))}Wn.prototype.cancel=function(){this.J=!0,Mr(this)};function _a(l){l.S=Date.now()+l.I,pm(l,l.I)}function pm(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ss(p(l.ba,l),h)}function Eu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Wn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(CT(this.i,this.A),this.L!=2&&(Ts(),ft(17)),Mr(this),this.s=2,Ns(this)):pm(this,this.S-l)};function Ns(l){l.j.G==0||l.J||Fm(l.j,l)}function Mr(l){Eu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,nm(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function xu(l,h){try{var g=l.j;if(g.G!=0&&(g.g==l||Tu(g.h,l))){if(!l.K&&Tu(g.h,l)&&g.G==3){try{var S=g.Da.g.parse(h)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Aa(g),Na(g);else break e;Cu(g),ft(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ss(p(g.Za,g),6e3));if(1>=vm(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Fr(g,11)}else if((l.K||g.g==l)&&Aa(g),!T(h))for(L=g.Da.g.parse(h),h=0;h<L.length;h++){let ce=L[h];if(g.T=ce[0],ce=ce[1],g.G==2)if(ce[0]=="c"){g.K=ce[1],g.ia=ce[2];const nt=ce[3];nt!=null&&(g.la=nt,g.j.info("VER="+g.la));const rt=ce[4];rt!=null&&(g.Aa=rt,g.j.info("SVER="+g.Aa));const _i=ce[5];_i!=null&&typeof _i=="number"&&0<_i&&(S=1.5*_i,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Kt=l.g;if(Kt){const Pa=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var V=S.h;V.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Su(V,V.h),V.h=null))}if(S.D){const Ru=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ru&&(S.ya=Ru,ve(S.I,S.D,Ru))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var B=l;if(S.qa=$m(S,S.J?S.ia:null,S.W),B.K){ym(S.h,B);var me=B,He=S.L;He&&(me.I=He),me.B&&(Eu(me),_a(me)),S.g=B}else Mm(S);0<g.i.length&&Ca(g)}else ce[0]!="stop"&&ce[0]!="close"||Fr(g,7);else g.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Fr(g,7):Nu(g):ce[0]!="noop"&&g.l&&g.l.ta(ce),g.v=0)}}Ts(4)}catch{}}var PT=class{constructor(l,h){this.g=l,this.map=h}};function mm(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function vm(l){return l.h?1:l.g?l.g.size:0}function Tu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Su(l,h){l.g?l.g.add(h):l.h=h}function ym(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}mm.prototype.cancel=function(){if(this.i=_m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function _m(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.D);return h}return E(l.i)}function kT(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],g=l.length,S=0;S<g;S++)h.push(l[S]);return h}h=[],g=0;for(S in l)h[g++]=l[S];return h}function jT(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var g=0;g<l;g++)h.push(g);return h}h=[],g=0;for(const S in l)h[g++]=S;return h}}}function wm(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var g=jT(l),S=kT(l),L=S.length,V=0;V<L;V++)h.call(void 0,S[V],g&&g[V],l)}var Em=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bT(l,h){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var S=l[g].indexOf("="),L=null;if(0<=S){var V=l[g].substring(0,S);L=l[g].substring(S+1)}else V=l[g];h(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ur(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ur){this.h=l.h,wa(this,l.j),this.o=l.o,this.g=l.g,Ea(this,l.s),this.l=l.l;var h=l.i,g=new Rs;g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),xm(this,g),this.m=l.m}else l&&(h=String(l).match(Em))?(this.h=!1,wa(this,h[1]||"",!0),this.o=Cs(h[2]||""),this.g=Cs(h[3]||"",!0),Ea(this,h[4]),this.l=Cs(h[5]||"",!0),xm(this,h[6]||"",!0),this.m=Cs(h[7]||"")):(this.h=!1,this.i=new Rs(null,this.h))}Ur.prototype.toString=function(){var l=[],h=this.j;h&&l.push(As(h,Tm,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(As(h,Tm,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(As(g,g.charAt(0)=="/"?LT:OT,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",As(g,MT)),l.join("")};function xn(l){return new Ur(l)}function wa(l,h,g){l.j=g?Cs(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Ea(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function xm(l,h,g){h instanceof Rs?(l.i=h,UT(l.i,l.h)):(g||(h=As(h,VT)),l.i=new Rs(h,l.h))}function ve(l,h,g){l.i.set(h,g)}function xa(l){return ve(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Cs(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function As(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,DT),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function DT(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Tm=/[#\/\?@]/g,OT=/[#\?:]/g,LT=/[#\?]/g,VT=/[#\?@]/g,MT=/#/g;function Rs(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Hn(l){l.g||(l.g=new Map,l.h=0,l.i&&bT(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=Rs.prototype,t.add=function(l,h){Hn(this),this.i=null,l=vi(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function Sm(l,h){Hn(l),h=vi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Im(l,h){return Hn(l),h=vi(l,h),l.g.has(h)}t.forEach=function(l,h){Hn(this),this.g.forEach(function(g,S){g.forEach(function(L){l.call(h,L,S,this)},this)},this)},t.na=function(){Hn(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),g=[];for(let S=0;S<h.length;S++){const L=l[S];for(let V=0;V<L.length;V++)g.push(h[S])}return g},t.V=function(l){Hn(this);let h=[];if(typeof l=="string")Im(this,l)&&(h=h.concat(this.g.get(vi(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)h=h.concat(l[g])}return h},t.set=function(l,h){return Hn(this),this.i=null,l=vi(this,l),Im(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Nm(l,h,g){Sm(l,h),0<g.length&&(l.i=null,l.g.set(vi(l,h),E(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var g=0;g<h.length;g++){var S=h[g];const V=encodeURIComponent(String(S)),B=this.V(S);for(S=0;S<B.length;S++){var L=V;B[S]!==""&&(L+="="+encodeURIComponent(String(B[S]))),l.push(L)}}return this.i=l.join("&")};function vi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function UT(l,h){h&&!l.j&&(Hn(l),l.i=null,l.g.forEach(function(g,S){var L=S.toLowerCase();S!=L&&(Sm(this,S),Nm(this,L,g))},l)),l.j=h}function FT(l,h){const g=new Is;if(c.Image){const S=new Image;S.onload=v(Gn,g,"TestLoadImage: loaded",!0,h,S),S.onerror=v(Gn,g,"TestLoadImage: error",!1,h,S),S.onabort=v(Gn,g,"TestLoadImage: abort",!1,h,S),S.ontimeout=v(Gn,g,"TestLoadImage: timeout",!1,h,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else h(!1)}function zT(l,h){const g=new Is,S=new AbortController,L=setTimeout(()=>{S.abort(),Gn(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:S.signal}).then(V=>{clearTimeout(L),V.ok?Gn(g,"TestPingServer: ok",!0,h):Gn(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),Gn(g,"TestPingServer: error",!1,h)})}function Gn(l,h,g,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(g)}catch{}}function BT(){this.g=new ST}function $T(l,h,g){const S=g||"";try{wm(l,function(L,V){let B=L;d(L)&&(B=pu(L)),h.push(S+V+"="+encodeURIComponent(B))})}catch(L){throw h.push(S+"type="+encodeURIComponent("_badmap")),L}}function Ta(l){this.l=l.Ub||null,this.j=l.eb||!1}x(Ta,mu),Ta.prototype.g=function(){return new Sa(this.l,this.j)},Ta.prototype.i=function(l){return function(){return l}}({});function Sa(l,h){tt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Sa,tt),t=Sa.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,ks(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ps(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ks(this)),this.g&&(this.readyState=3,ks(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ps(this):ks(this),this.readyState==3&&Cm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ps(this))},t.Qa=function(l){this.g&&(this.response=l,Ps(this))},t.ga=function(){this.g&&Ps(this)};function Ps(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ks(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function ks(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Am(l){let h="";return b(l,function(g,S){h+=S,h+=":",h+=g,h+=`\r
`}),h}function Iu(l,h,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=Am(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ve(l,h,g))}function Ae(l){tt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ae,tt);var qT=/^https?$/i,WT=["POST","PUT"];t=Ae.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yu.g(),this.v=this.o?rm(this.o):rm(yu),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){Rm(this,V);return}if(l=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)g.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const V of S.keys())g.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(WT,h,void 0))||S||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,B]of g)this.g.setRequestHeader(V,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jm(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Rm(this,V)}};function Rm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Pm(l),Ia(l)}function Pm(l){l.A||(l.A=!0,ht(l,"complete"),ht(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ht(this,"complete"),ht(this,"abort"),Ia(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ia(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?km(this):this.bb())},t.bb=function(){km(this)};function km(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Tn(l)!=4||l.Z()!=2)){if(l.u&&Tn(l)==4)Zp(l.Ea,0,l);else if(ht(l,"readystatechange"),Tn(l)==4){l.h=!1;try{const B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var S;if(S=B===0){var L=String(l.D).match(Em)[1]||null;!L&&c.self&&c.self.location&&(L=c.self.location.protocol.slice(0,-1)),S=!qT.test(L?L.toLowerCase():"")}g=S}if(g)ht(l,"complete"),ht(l,"success");else{l.m=6;try{var V=2<Tn(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",Pm(l)}}finally{Ia(l)}}}}function Ia(l,h){if(l.g){jm(l);const g=l.g,S=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||ht(l,"ready");try{g.onreadystatechange=S}catch{}}}function jm(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Tn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),TT(h)}};function bm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function HT(l){const h={};l=(l.g&&2<=Tn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(T(l[S]))continue;var g=R(l[S]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=h[L]||[];h[L]=V,V.push(g)}N(h,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function js(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function Dm(l){this.Aa=0,this.i=[],this.j=new Is,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=js("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=js("baseRetryDelayMs",5e3,l),this.cb=js("retryDelaySeedMs",1e4,l),this.Wa=js("forwardChannelMaxRetries",2,l),this.wa=js("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new mm(l&&l.concurrentRequestLimit),this.Da=new BT,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Dm.prototype,t.la=8,t.G=1,t.connect=function(l,h,g,S){ft(0),this.W=l,this.H=h||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=$m(this,null,this.W),Ca(this)};function Nu(l){if(Om(l),l.G==3){var h=l.U++,g=xn(l.I);if(ve(g,"SID",l.K),ve(g,"RID",h),ve(g,"TYPE","terminate"),bs(l,g),h=new Wn(l,l.j,h),h.L=2,h.v=xa(xn(g)),g=!1,c.navigator&&c.navigator.sendBeacon)try{g=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!g&&c.Image&&(new Image().src=h.v,g=!0),g||(h.g=qm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),_a(h)}Bm(l)}function Na(l){l.g&&(Au(l),l.g.cancel(),l.g=null)}function Om(l){Na(l),l.u&&(c.clearTimeout(l.u),l.u=null),Aa(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ca(l){if(!gm(l.h)&&!l.s){l.s=!0;var h=l.Ga;le||Z(),z||(le(),z=!0),G.add(h,l),l.B=0}}function GT(l,h){return vm(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ss(p(l.Ga,l,h),zm(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Wn(this,this.j,l);let V=this.o;if(this.S&&(V?(V=_(V),P(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(h+=S,4096<h){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=Vm(this,L,h),g=xn(this.I),ve(g,"RID",l),ve(g,"CVER",22),this.D&&ve(g,"X-HTTP-Session-Id",this.D),bs(this,g),V&&(this.O?h="headers="+encodeURIComponent(String(Am(V)))+"&"+h:this.m&&Iu(g,this.m,V)),Su(this.h,L),this.Ua&&ve(g,"TYPE","init"),this.P?(ve(g,"$req",h),ve(g,"SID","null"),L.T=!0,wu(L,g,null)):wu(L,g,h),this.G=2}}else this.G==3&&(l?Lm(this,l):this.i.length==0||gm(this.h)||Lm(this))};function Lm(l,h){var g;h?g=h.l:g=l.U++;const S=xn(l.I);ve(S,"SID",l.K),ve(S,"RID",g),ve(S,"AID",l.T),bs(l,S),l.m&&l.o&&Iu(S,l.m,l.o),g=new Wn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Vm(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Su(l.h,g),wu(g,S,h)}function bs(l,h){l.H&&b(l.H,function(g,S){ve(h,S,g)}),l.l&&wm({},function(g,S){ve(h,S,g)})}function Vm(l,h,g){g=Math.min(l.i.length,g);var S=l.l?p(l.l.Na,l.l,l):null;e:{var L=l.i;let V=-1;for(;;){const B=["count="+g];V==-1?0<g?(V=L[0].g,B.push("ofs="+V)):V=0:B.push("ofs="+V);let me=!0;for(let He=0;He<g;He++){let ce=L[He].g;const nt=L[He].map;if(ce-=V,0>ce)V=Math.max(0,L[He].g-100),me=!1;else try{$T(nt,B,"req"+ce+"_")}catch{S&&S(nt)}}if(me){S=B.join("&");break e}}}return l=l.i.splice(0,g),h.D=l,S}function Mm(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;le||Z(),z||(le(),z=!0),G.add(h,l),l.v=0}}function Cu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ss(p(l.Fa,l),zm(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Um(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ss(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Na(this),Um(this))};function Au(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Um(l){l.g=new Wn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=xn(l.qa);ve(h,"RID","rpc"),ve(h,"SID",l.K),ve(h,"AID",l.T),ve(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&ve(h,"TO",l.ja),ve(h,"TYPE","xmlhttp"),bs(l,h),l.m&&l.o&&Iu(h,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=xa(xn(h)),g.m=null,g.P=!0,hm(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Na(this),Cu(this),ft(19))};function Aa(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Fm(l,h){var g=null;if(l.g==h){Aa(l),Au(l),l.g=null;var S=2}else if(Tu(l.h,h))g=h.D,ym(l.h,h),S=1;else return;if(l.G!=0){if(h.o)if(S==1){g=h.m?h.m.length:0,h=Date.now()-h.F;var L=l.B;S=ga(),ht(S,new lm(S,g)),Ca(l)}else Mm(l);else if(L=h.s,L==3||L==0&&0<h.X||!(S==1&&GT(l,h)||S==2&&Cu(l)))switch(g&&0<g.length&&(h=l.h,h.i=h.i.concat(g)),L){case 1:Fr(l,5);break;case 4:Fr(l,10);break;case 3:Fr(l,6);break;default:Fr(l,2)}}}function zm(l,h){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*h}function Fr(l,h){if(l.j.info("Error code "+h),h==2){var g=p(l.fb,l),S=l.Xa;const L=!S;S=new Ur(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||wa(S,"https"),xa(S),L?FT(S.toString(),g):zT(S.toString(),g)}else ft(2);l.G=0,l.l&&l.l.sa(h),Bm(l),Om(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Bm(l){if(l.G=0,l.ka=[],l.l){const h=_m(l.h);(h.length!=0||l.i.length!=0)&&(A(l.ka,h),A(l.ka,l.i),l.h.i.length=0,E(l.i),l.i.length=0),l.l.ra()}}function $m(l,h,g){var S=g instanceof Ur?xn(g):new Ur(g);if(S.g!="")h&&(S.g=h+"."+S.g),Ea(S,S.s);else{var L=c.location;S=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var V=new Ur(null);S&&wa(V,S),h&&(V.g=h),L&&Ea(V,L),g&&(V.l=g),S=V}return g=l.D,h=l.ya,g&&h&&ve(S,g,h),ve(S,"VER",l.la),bs(l,S),S}function qm(l,h,g){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ae(new Ta({eb:g})):new Ae(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wm(){}t=Wm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ra(){}Ra.prototype.g=function(l,h){return new Rt(l,h)};function Rt(l,h){tt.call(this),this.g=new Dm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!T(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!T(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new yi(this)}x(Rt,tt),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){Nu(this.g)},Rt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=pu(l),l=g);h.i.push(new PT(h.Ya++,l)),h.G==3&&Ca(h)},Rt.prototype.N=function(){this.g.l=null,delete this.j,Nu(this.g),delete this.g,Rt.aa.N.call(this)};function Hm(l){gu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}x(Hm,gu);function Gm(){vu.call(this),this.status=1}x(Gm,vu);function yi(l){this.g=l}x(yi,Wm),yi.prototype.ua=function(){ht(this.g,"a")},yi.prototype.ta=function(l){ht(this.g,new Hm(l))},yi.prototype.sa=function(l){ht(this.g,new Gm)},yi.prototype.ra=function(){ht(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,RE=function(){return new Ra},AE=function(){return ga()},CE=Vr,yh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},va.NO_ERROR=0,va.TIMEOUT=8,va.HTTP_ERROR=6,ml=va,cm.COMPLETE="complete",NE=cm,im.EventType=xs,xs.OPEN="a",xs.CLOSE="b",xs.ERROR="c",xs.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Xs=im,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,IE=Ae}).apply(typeof Ka<"u"?Ka:typeof self<"u"?self:typeof window<"u"?window:{});const Cv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ms="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new Bf("@firebase/firestore");function Bs(){return ii.logLevel}function W(t,...e){if(ii.logLevel<=se.DEBUG){const n=e.map(qf);ii.debug(`Firestore (${ms}): ${t}`,...n)}}function Un(t,...e){if(ii.logLevel<=se.ERROR){const n=e.map(qf);ii.error(`Firestore (${ms}): ${t}`,...n)}}function ns(t,...e){if(ii.logLevel<=se.WARN){const n=e.map(qf);ii.warn(`Firestore (${ms}): ${t}`,...n)}}function qf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${ms}) INTERNAL ASSERTION FAILED: `+t;throw Un(e),new Error(e)}function fe(t,e){t||X()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class aR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lR{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new jn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new PE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new at(e)}}class cR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new cR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){fe(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.R=n.token,new dR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function rs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return te.fromMillis(Date.now())}static fromDate(e){return te.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new te(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new te(0,0))}static max(){return new Y(new te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Lo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _e extends Lo{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const pR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends Lo{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return pR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qe(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new $(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new $(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(_e.fromString(e))}static fromName(e){return new K(_e.fromString(e).popFirst(5))}static empty(){return new K(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new _e(e.slice()))}}function mR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new te(n+1,0):new te(n,r));return new Nr(i,K.empty(),e)}function gR(t){return new Nr(t.readTime,t.key,-1)}class Nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(Y.min(),K.empty(),-1)}static max(){return new Nr(Y.max(),K.empty(),-1)}}function vR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _R{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==yR)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function wR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ea(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wf.oe=-1;function Vc(t){return t==null}function Zl(t){return t===0&&1/t==-1/0}function ER(t){return typeof t=="number"&&Number.isInteger(t)&&!Zl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qa(this.root,e,this.comparator,!0)}}class Qa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=i??Ke.EMPTY,this.right=s??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ke(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ke.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rv(this.data.getIterator())}getIteratorFrom(e){return new Rv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class Rv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new jt([])}unionWith(e){let n=new Ye(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bE("Invalid base64 string: "+s):s}}(e);return new Ze(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const xR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(t){if(fe(!!t),typeof t=="string"){let e=0;const n=xR.exec(t);if(fe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function si(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gf(t){const e=t.mapValue.fields.__previous_value__;return Hf(e)?Gf(e):e}function Vo(t){const e=Cr(t.mapValue.fields.__local_write_time__.timestampValue);return new te(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,i,s,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Mo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa={mapValue:{}};function oi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hf(t)?4:IR(t)?9007199254740991:SR(t)?10:11:X()}function gn(t,e){if(t===e)return!0;const n=oi(t);if(n!==oi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vo(t).isEqual(Vo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Cr(i.timestampValue),c=Cr(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return si(i.bytesValue).isEqual(si(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=De(i.doubleValue),c=De(s.doubleValue);return o===c?Zl(o)===Zl(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return rs(t.arrayValue.values||[],e.arrayValue.values||[],gn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Av(o)!==Av(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!gn(o[u],c[u])))return!1;return!0}(t,e);default:return X()}}function Uo(t,e){return(t.values||[]).find(n=>gn(n,e))!==void 0}function is(t,e){if(t===e)return 0;const n=oi(t),r=oi(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=De(s.integerValue||s.doubleValue),u=De(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Pv(t.timestampValue,e.timestampValue);case 4:return Pv(Vo(t),Vo(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(s,o){const c=si(s),u=si(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ue(c[d],u[d]);if(f!==0)return f}return ue(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=ue(De(s.latitude),De(o.latitude));return c!==0?c:ue(De(s.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return kv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,d,f;const m=s.fields||{},p=o.fields||{},v=(c=m.value)===null||c===void 0?void 0:c.arrayValue,x=(u=p.value)===null||u===void 0?void 0:u.arrayValue,E=ue(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return E!==0?E:kv(v,x)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Xa.mapValue&&o===Xa.mapValue)return 0;if(s===Xa.mapValue)return 1;if(o===Xa.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const p=ue(u[m],f[m]);if(p!==0)return p;const v=is(c[u[m]],d[f[m]]);if(v!==0)return v}return ue(u.length,f.length)}(t.mapValue,e.mapValue);default:throw X()}}function Pv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Cr(t),r=Cr(e),i=ue(n.seconds,r.seconds);return i!==0?i:ue(n.nanos,r.nanos)}function kv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=is(n[i],r[i]);if(s)return s}return ue(n.length,r.length)}function ss(t){return _h(t)}function _h(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Cr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return si(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=_h(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${_h(n.fields[o])}`;return i+"}"}(t.mapValue):X()}function jv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wh(t){return!!t&&"integerValue"in t}function Kf(t){return!!t&&"arrayValue"in t}function bv(t){return!!t&&"nullValue"in t}function Dv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gl(t){return!!t&&"mapValue"in t}function SR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function co(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=co(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=co(t.arrayValue.values[n]);return e}return Object.assign({},t)}function IR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=co(n)}setAll(e){let n=Qe.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=co(o):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());gl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];gl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new xt(co(this.value))}}function DE(t){const e=[];return fi(t.fields,(n,r)=>{const i=new Qe([n]);if(gl(r)){const s=DE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ct(e,0,Y.min(),Y.min(),Y.min(),xt.empty(),0)}static newFoundDocument(e,n,r,i){return new ct(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new ct(e,2,n,Y.min(),Y.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,Y.min(),Y.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n){this.position=e,this.inclusive=n}}function Ov(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=is(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n="asc"){this.field=e,this.dir=n}}function NR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{}class Ue extends OE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AR(e,n,r):n==="array-contains"?new kR(e,r):n==="in"?new jR(e,r):n==="not-in"?new bR(e,r):n==="array-contains-any"?new DR(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RR(e,r):new PR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(is(n,this.value)):n!==null&&oi(this.value)===oi(n)&&this.matchesComparison(is(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends OE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new nn(e,n)}matches(e){return LE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function LE(t){return t.op==="and"}function VE(t){return CR(t)&&LE(t)}function CR(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function Eh(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+ss(t.value);if(VE(t))return t.filters.map(e=>Eh(e)).join(",");{const e=t.filters.map(n=>Eh(n)).join(",");return`${t.op}(${e})`}}function ME(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&gn(r.value,i.value)}(t,e):t instanceof nn?function(r,i){return i instanceof nn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&ME(o,i.filters[c]),!0):!1}(t,e):void X()}function UE(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${ss(n.value)}`}(t):t instanceof nn?function(n){return n.op.toString()+" {"+n.getFilters().map(UE).join(" ,")+"}"}(t):"Filter"}class AR extends Ue{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class RR extends Ue{constructor(e,n){super(e,"in",n),this.keys=FE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class PR extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=FE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class kR extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kf(n)&&Uo(n.arrayValue,this.value)}}class jR extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uo(this.value.arrayValue,n)}}class bR extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uo(this.value.arrayValue,n)}}class DR extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}}function Vv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new OR(t,e,n,r,i,s,o)}function Qf(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Eh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Vc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ss(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ss(r)).join(",")),e.ue=n}return e.ue}function Xf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ME(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lv(t.startAt,e.startAt)&&Lv(t.endAt,e.endAt)}function xh(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function LR(t,e,n,r,i,s,o,c){return new gs(t,e,n,r,i,s,o,c)}function Yf(t){return new gs(t)}function Mv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zE(t){return t.collectionGroup!==null}function uo(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ye(Qe.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Fo(s,r))}),n.has(Qe.keyField().canonicalString())||e.ce.push(new Fo(Qe.keyField(),r))}return e.ce}function hn(t){const e=J(t);return e.le||(e.le=VR(e,uo(t))),e.le}function VR(t,e){if(t.limitType==="F")return Vv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Fo(i.field,s)});const n=t.endAt?new ec(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ec(t.startAt.position,t.startAt.inclusive):null;return Vv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Th(t,e){const n=t.filters.concat([e]);return new gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tc(t,e,n){return new gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mc(t,e){return Xf(hn(t),hn(e))&&t.limitType===e.limitType}function BE(t){return`${Qf(hn(t))}|lt:${t.limitType}`}function xi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>UE(i)).join(", ")}]`),Vc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ss(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ss(i)).join(",")),`Target(${r})`}(hn(t))}; limitType=${t.limitType})`}function Uc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of uo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const d=Ov(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,uo(r),i)||r.endAt&&!function(o,c,u){const d=Ov(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,uo(r),i))}(t,e)}function MR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $E(t){return(e,n)=>{let r=!1;for(const i of uo(t)){const s=UR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function UR(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,c){const u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?is(u,d):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new Ce(K.comparator);function Fn(){return FR}const qE=new Ce(K.comparator);function Ys(...t){let e=qE;for(const n of t)e=e.insert(n.key,n);return e}function WE(t){let e=qE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gr(){return ho()}function HE(){return ho()}function ho(){return new vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const zR=new Ce(K.comparator),BR=new Ye(K.comparator);function ie(...t){let e=BR;for(const n of t)e=e.add(n);return e}const $R=new Ye(ue);function qR(){return $R}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zl(e)?"-0":e}}function GE(t){return{integerValue:""+t}}function WR(t,e){return ER(e)?GE(e):Jf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(){this._=void 0}}function HR(t,e,n){return t instanceof zo?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Hf(s)&&(s=Gf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Bo?QE(t,e):t instanceof $o?XE(t,e):function(i,s){const o=KE(i,s),c=Uv(o)+Uv(i.Pe);return wh(o)&&wh(i.Pe)?GE(c):Jf(i.serializer,c)}(t,e)}function GR(t,e,n){return t instanceof Bo?QE(t,e):t instanceof $o?XE(t,e):n}function KE(t,e){return t instanceof nc?function(r){return wh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class zo extends Fc{}class Bo extends Fc{constructor(e){super(),this.elements=e}}function QE(t,e){const n=YE(e);for(const r of t.elements)n.some(i=>gn(i,r))||n.push(r);return{arrayValue:{values:n}}}class $o extends Fc{constructor(e){super(),this.elements=e}}function XE(t,e){let n=YE(e);for(const r of t.elements)n=n.filter(i=>!gn(i,r));return{arrayValue:{values:n}}}class nc extends Fc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Uv(t){return De(t.integerValue||t.doubleValue)}function YE(t){return Kf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n){this.field=e,this.transform=n}}function QR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bo&&i instanceof Bo||r instanceof $o&&i instanceof $o?rs(r.elements,i.elements,gn):r instanceof nc&&i instanceof nc?gn(r.Pe,i.Pe):r instanceof zo&&i instanceof zo}(t.transform,e.transform)}class XR{constructor(e,n){this.version=e,this.transformResults=n}}class qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qt}static exists(e){return new qt(void 0,e)}static updateTime(e){return new qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zc{}function JE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zf(t.key,qt.none()):new ta(t.key,t.data,qt.none());{const n=t.data,r=xt.empty();let i=new Ye(Qe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Dr(t.key,r,new jt(i.toArray()),qt.none())}}function YR(t,e,n){t instanceof ta?function(i,s,o){const c=i.value.clone(),u=zv(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Dr?function(i,s,o){if(!vl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=zv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ZE(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fo(t,e,n,r){return t instanceof ta?function(s,o,c,u){if(!vl(s.precondition,o))return c;const d=s.value.clone(),f=Bv(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dr?function(s,o,c,u){if(!vl(s.precondition,o))return c;const d=Bv(s.fieldTransforms,u,o),f=o.data;return f.setAll(ZE(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,c){return vl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function JR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=KE(r.transform,i||null);s!=null&&(n===null&&(n=xt.empty()),n.set(r.field,s))}return n||null}function Fv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rs(r,i,(s,o)=>QR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ta extends zc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Dr extends zc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ZE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zv(t,e,n){const r=new Map;fe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,GR(o,c,n[i]))}return r}function Bv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,HR(s,o,e))}return r}class Zf extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZR extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&YR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=HE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;const u=JE(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&rs(this.mutations,e.mutations,(n,r)=>Fv(n,r))&&rs(this.baseMutations,e.baseMutations,(n,r)=>Fv(n,r))}}class ep{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){fe(e.mutations.length===r.length);let i=function(){return zR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ep(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,oe;function rP(t){switch(t){default:return X();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function ex(t){if(t===void 0)return Un("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ve.OK:return M.OK;case Ve.CANCELLED:return M.CANCELLED;case Ve.UNKNOWN:return M.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return M.INTERNAL;case Ve.UNAVAILABLE:return M.UNAVAILABLE;case Ve.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ve.NOT_FOUND:return M.NOT_FOUND;case Ve.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ve.ABORTED:return M.ABORTED;case Ve.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ve.DATA_LOSS:return M.DATA_LOSS;default:return X()}}(oe=Ve||(Ve={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=new Xr([4294967295,4294967295],0);function $v(t){const e=iP().encode(t),n=new SE;return n.update(e),new Uint8Array(n.digest())}function qv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xr([n,r],0),new Xr([i,s],0)]}class tp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Js(`Invalid padding: ${n}`);if(r<0)throw new Js(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Js(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Js(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Xr.fromNumber(r)));return i.compare(sP)===1&&(i=new Xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=$v(e),[r,i]=qv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new tp(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=$v(e),[r,i]=qv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Js extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,na.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bc(Y.min(),i,new Ce(ue),Fn(),ie())}}class na{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new na(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class tx{constructor(e,n){this.targetId=e,this.me=n}}class nx{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Wv{constructor(){this.fe=0,this.ge=Gv(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new na(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Gv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fn(),this.qe=Hv(),this.Qe=new Ce(ue)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(xh(s))if(r===0){const o=new K(s.path);this.Ue(n,o,ct.newNoDocument(o,Y.min()))}else fe(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,c;try{o=si(r).toUint8Array()}catch(u){if(u instanceof bE)return ns("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new tp(o,i,s)}catch(u){return ns(u instanceof Js?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const c=this.Je(o);if(c){if(s.current&&xh(c.target)){const u=new K(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ct.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ie();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Bc(e,n,this.Qe,this.ke,r);return this.ke=Fn(),this.qe=Hv(),this.Qe=new Ce(ue),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Wv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ye(ue),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Hv(){return new Ce(K.comparator)}function Gv(){return new Ce(K.comparator)}const aP={asc:"ASCENDING",desc:"DESCENDING"},lP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cP={and:"AND",or:"OR"};class uP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sh(t,e){return t.useProto3Json||Vc(e)?e:{value:e}}function rc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dP(t,e){return rc(t,e.toTimestamp())}function fn(t){return fe(!!t),Y.fromTimestamp(function(n){const r=Cr(n);return new te(r.seconds,r.nanos)}(t))}function np(t,e){return Ih(t,e).canonicalString()}function Ih(t,e){const n=function(i){return new _e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ix(t){const e=_e.fromString(t);return fe(cx(e)),e}function Nh(t,e){return np(t.databaseId,e.path)}function ld(t,e){const n=ix(e);if(n.get(1)!==t.databaseId.projectId)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(ox(n))}function sx(t,e){return np(t.databaseId,e)}function hP(t){const e=ix(t);return e.length===4?_e.emptyPath():ox(e)}function Ch(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ox(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Kv(t,e,n){return{name:Nh(t,e),fields:n.value.mapValue.fields}}function fP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(fe(f===void 0||typeof f=="string"),Ze.fromBase64String(f||"")):(fe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ze.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?M.UNKNOWN:ex(d.code);return new $(f,d.message||"")}(o);n=new nx(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ld(t,r.document.name),s=fn(r.document.updateTime),o=r.document.createTime?fn(r.document.createTime):Y.min(),c=new xt({mapValue:{fields:r.document.fields}}),u=ct.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new yl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ld(t,r.document),s=r.readTime?fn(r.readTime):Y.min(),o=ct.newNoDocument(i,s),c=r.removedTargetIds||[];n=new yl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ld(t,r.document),s=r.removedTargetIds||[];n=new yl([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new nP(i,s),c=r.targetId;n=new tx(c,o)}}return n}function pP(t,e){let n;if(e instanceof ta)n={update:Kv(t,e.key,e.value)};else if(e instanceof Zf)n={delete:Nh(t,e.key)};else if(e instanceof Dr)n={update:Kv(t,e.key,e.data),updateMask:TP(e.fieldMask)};else{if(!(e instanceof ZR))return X();n={verify:Nh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const c=o.transform;if(c instanceof zo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Bo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof $o)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof nc)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:dP(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function mP(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?fn(i.updateTime):fn(s);return o.isEqual(Y.min())&&(o=fn(s)),new XR(o,i.transformResults||[])}(n,e))):[]}function gP(t,e){return{documents:[sx(t,e.path)]}}function vP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sx(t,i);const s=function(d){if(d.length!==0)return lx(nn.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(f=>function(p){return{field:Ti(p.field),direction:wP(p.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Sh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function yP(t){let e=hP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fe(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(m){const p=ax(m);return p instanceof nn&&VE(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(x){return new Fo(Si(x.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(n.orderBy));let c=null;n.limit&&(c=function(m){let p;return p=typeof m=="object"?m.value:m,Vc(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,v=m.values||[];return new ec(v,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,v=m.values||[];return new ec(v,p)}(n.endAt)),LR(e,i,o,s,c,"F",u,d)}function _P(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ax(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Si(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Si(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Si(n.unaryFilter.field);return Ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Si(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(Si(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nn.create(n.compositeFilter.filters.map(r=>ax(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function wP(t){return aP[t]}function EP(t){return lP[t]}function xP(t){return cP[t]}function Ti(t){return{fieldPath:t.canonicalString()}}function Si(t){return Qe.fromServerFormat(t.fieldPath)}function lx(t){return t instanceof Ue?function(n){if(n.op==="=="){if(Dv(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NAN"}};if(bv(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dv(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NAN"}};if(bv(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ti(n.field),op:EP(n.op),value:n.value}}}(t):t instanceof nn?function(n){const r=n.getFilters().map(i=>lx(i));return r.length===1?r[0]:{compositeFilter:{op:xP(n.op),filters:r}}}(t):X()}function TP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n,r,i,s=Y.min(),o=Y.min(),c=Ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.ct=e}}function IP(t){const e=yP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.un=new CP}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Nr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class CP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(_e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new os(0)}static kn(){return new os(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(){this.changes=new vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&fo(r.mutation,i,jt.empty(),te.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const i=Gr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ys();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Gr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=Fn();const o=ho(),c=function(){return ho()}();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Dr)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),fo(f.mutation,d,f.mutation.getFieldMask(),te.now())):o.set(d.key,jt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return c.set(d,new RP(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=ho();let i=new Ce((o,c)=>o-c),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||jt.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(i.get(c.batchId)||ie()).add(u);i=i.insert(c.batchId,m)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=HE();f.forEach(p=>{if(!s.has(p)){const v=JE(n.get(p),r.get(p));v!==null&&m.set(p,v),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Gr());let c=-1,u=s;return o.next(d=>U.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(p=>{u=u.insert(f,p)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ie())).next(f=>({batchId:c,changes:WE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Ys();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ys();return this.indexManager.getCollectionParents(e,s).next(c=>U.forEach(c,u=>{const d=function(m,p){return new gs(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ct.newInvalidDocument(f)))});let c=Ys();return o.forEach((u,d)=>{const f=s.get(u);f!==void 0&&fo(f.mutation,d,jt.empty(),te.now()),Uc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:IP(i.bundledQuery),readTime:fn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.overlays=new Ce(K.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gr();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Gr(),s=n.length+1,o=new K(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ce((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=Gr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=Gr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return U.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tP(n,r));let s=this.Ir.get(n);s===void 0&&(s=ie(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this.Tr=new Ye(Be.Er),this.dr=new Ye(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new _e([])),r=new Be(n,e),i=new Be(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new _e([])),r=new Be(n,e),i=new Be(n,e+1);let s=ie();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||ue(e.wr,n.wr)}static Ar(e,n){return ue(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ye(Be.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new eP(s,n,r,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new Be(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),i=new Be(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const c=this.Dr(o.wr);s.push(c)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ue);return n.forEach(i=>{const s=new Be(i,0),o=new Be(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new Be(new K(s),0);let c=new Ye(ue);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),U.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new Be(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Be(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.Mr=e,this.docs=function(){return new Ce(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Fn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ct.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Fn();const o=n.path,c=new K(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||vR(gR(f),r)<=0||(i.has(f.key)||Uc(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LP(this)}getSize(e){return U.resolve(this.size)}}class LP extends AP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.persistence=e,this.Nr=new vs(n=>Qf(n),Xf),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rp,this.targetCount=0,this.kr=os.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new os(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wf(0),this.Kr=!1,this.Kr=!0,this.$r=new bP,this.referenceDelegate=e(this),this.Ur=new VP(this),this.indexManager=new NP,this.remoteDocumentCache=function(i){return new OP(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new SP(n),this.Gr=new kP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new DP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new UP(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class UP extends _R{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Jr=new rp,this.Yr=null}static Zr(e){return new ip(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=K.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ie(),i=ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new sp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zC()?8:wR(dt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new FP;return this.Xi(e,n,o).next(c=>{if(s.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Bs()<=se.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",xi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Bs()<=se.DEBUG&&W("QueryEngine","Query:",xi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Bs()<=se.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",xi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hn(n))):U.resolve())}Yi(e,n){if(Mv(n))return U.resolve(null);let r=hn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=tc(n,null,"F"),r=hn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ie(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,tc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return Mv(n)||i.isEqual(Y.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(Bs()<=se.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xi(n)),this.rs(e,o,n,mR(i,-1)).next(c=>c))})}ts(e,n){let r=new Ye($E(e));return n.forEach((i,s)=>{Uc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Bs()<=se.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",xi(n)),this.Ji.getDocumentsMatchingQuery(e,n,Nr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ce(ue),this._s=new vs(s=>Qf(s),Xf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function $P(t,e,n,r){return new BP(t,e,n,r)}async function ux(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let u=ie();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function qP(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,p=m.keys();let v=U.resolve();return p.forEach(x=>{v=v.next(()=>f.getEntry(u,x)).next(E=>{const A=d.docVersions.get(x);fe(A!==null),E.version.compareTo(A)<0&&(m.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),f.addEntry(E)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ie();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function dx(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function WP(t,e){const n=J(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((f,m)=>{const p=i.get(m);if(!p)return;c.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,m)));let v=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(Ze.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(m,v),function(E,A,y){return E.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,v,f)&&c.push(n.Ur.updateTargetData(s,v))});let u=Fn(),d=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(HP(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(Y.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return U.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.os=i,s))}function HP(t,e,n){let r=ie(),i=ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Fn();return n.forEach((c,u)=>{const d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):W("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function GP(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KP(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new cr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ah(t,e,n){const r=J(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ea(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Qv(t,e,n){const r=J(t);let i=Y.min(),s=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=J(u),p=m._s.get(f);return p!==void 0?U.resolve(m.os.get(p)):m.Ur.getTargetData(d,f)}(r,o,hn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ie())).next(c=>(QP(r,MR(e),c),{documents:c,Ts:s})))}function QP(t,e,n){let r=t.us.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Xv{constructor(){this.activeTargetIds=qR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XP{constructor(){this.so=new Xv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Xv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya=null;function cd(){return Ya===null?Ya=function(){return 268435456+Math.round(2147483648*Math.random())}():Ya++,"0x"+Ya.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class ek extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const c=cd(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(n,u,d,i).then(f=>(W("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw ns("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,c){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ms}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=JP[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=cd();return new Promise((o,c)=>{const u=new IE;u.setWithCredentials(!0),u.listenOnce(NE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ml.NO_ERROR:const f=u.getResponseJson();W(ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case ml.TIMEOUT:W(ot,`RPC '${e}' ${s} timed out`),c(new $(M.DEADLINE_EXCEEDED,"Request time out"));break;case ml.HTTP_ERROR:const m=u.getStatus();if(W(ot,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const x=function(A){const y=A.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(y)>=0?y:M.UNKNOWN}(v.status);c(new $(x,v.message))}else c(new $(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new $(M.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{W(ot,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);W(ot,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=cd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RE(),c=AE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");W(ot,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);let p=!1,v=!1;const x=new ZP({Io:A=>{v?W(ot,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(p||(W(ot,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),W(ot,`RPC '${e}' stream ${i} sending:`,A),m.send(A))},To:()=>m.close()}),E=(A,y,T)=>{A.listen(y,w=>{try{T(w)}catch(I){setTimeout(()=>{throw I},0)}})};return E(m,Xs.EventType.OPEN,()=>{v||(W(ot,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),E(m,Xs.EventType.CLOSE,()=>{v||(v=!0,W(ot,`RPC '${e}' stream ${i} transport closed`),x.So())}),E(m,Xs.EventType.ERROR,A=>{v||(v=!0,ns(ot,`RPC '${e}' stream ${i} transport errored:`,A),x.So(new $(M.UNAVAILABLE,"The operation could not be completed")))}),E(m,Xs.EventType.MESSAGE,A=>{var y;if(!v){const T=A.data[0];fe(!!T);const w=T,I=w.error||((y=w[0])===null||y===void 0?void 0:y.error);if(I){W(ot,`RPC '${e}' stream ${i} received error:`,I);const O=I.status;let b=function(C){const P=Ve[C];if(P!==void 0)return ex(P)}(O),N=I.message;b===void 0&&(b=M.INTERNAL,N="Unknown error status: "+O+" with message "+I.message),v=!0,x.So(new $(b,N)),m.close()}else W(ot,`RPC '${e}' stream ${i} received:`,T),x.bo(T)}}),E(c,CE.STAT_EVENT,A=>{A.stat===yh.PROXY?W(ot,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===yh.NOPROXY&&W(ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function ud(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){return new uP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new $(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tk extends fx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=fP(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?fn(o.readTime):Y.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ch(this.serializer),n.addTarget=function(s,o){let c;const u=o.target;if(c=xh(u)?{documents:gP(s,u)}:{query:vP(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=rx(s,o.resumeToken);const d=Sh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=rc(s,o.snapshotVersion.toTimestamp());const d=Sh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=_P(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ch(this.serializer),n.removeTarget=e,this.a_(n)}}class nk extends fx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=mP(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ch(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ih(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Ih(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ik{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Un(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{pi(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=J(u);d.L_.add(4),await ra(d),d.q_.set("Unknown"),d.L_.delete(4),await qc(d)}(this))})}),this.q_=new ik(r,i)}}async function qc(t){if(pi(t))for(const e of t.B_)await e(!0)}async function ra(t){for(const e of t.B_)await e(!1)}function px(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),cp(n)?lp(n):ys(n).r_()&&ap(n,e))}function op(t,e){const n=J(t),r=ys(n);n.N_.delete(e),r.r_()&&mx(n,e),n.N_.size===0&&(r.r_()?r.o_():pi(n)&&n.q_.set("Unknown"))}function ap(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ys(t).A_(e)}function mx(t,e){t.Q_.xe(e),ys(t).R_(e)}function lp(t){t.Q_=new oP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ys(t).start(),t.q_.v_()}function cp(t){return pi(t)&&!ys(t).n_()&&t.N_.size>0}function pi(t){return J(t).L_.size===0}function gx(t){t.Q_=void 0}async function ok(t){t.q_.set("Online")}async function ak(t){t.N_.forEach((e,n)=>{ap(t,e)})}async function lk(t,e){gx(t),cp(t)?(t.q_.M_(e),lp(t)):t.q_.set("Unknown")}async function ck(t,e,n){if(t.q_.set("Online"),e instanceof nx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ic(t,r)}else if(e instanceof yl?t.Q_.Ke(e):e instanceof tx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Y.min()))try{const r=await dx(t.localStore);n.compareTo(r)>=0&&await function(s,o){const c=s.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(Ze.EMPTY_BYTE_STRING,f.snapshotVersion)),mx(s,u);const m=new cr(f.target,u,d,f.sequenceNumber);ap(s,m)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await ic(t,r)}}async function ic(t,e,n){if(!ea(e))throw e;t.L_.add(1),await ra(t),t.q_.set("Offline"),n||(n=()=>dx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await qc(t)})}function vx(t,e){return e().catch(n=>ic(t,n,e))}async function Wc(t){const e=J(t),n=Ar(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;uk(e);)try{const i=await GP(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,dk(e,i)}catch(i){await ic(e,i)}yx(e)&&_x(e)}function uk(t){return pi(t)&&t.O_.length<10}function dk(t,e){t.O_.push(e);const n=Ar(t);n.r_()&&n.V_&&n.m_(e.mutations)}function yx(t){return pi(t)&&!Ar(t).n_()&&t.O_.length>0}function _x(t){Ar(t).start()}async function hk(t){Ar(t).p_()}async function fk(t){const e=Ar(t);for(const n of t.O_)e.m_(n.mutations)}async function pk(t,e,n){const r=t.O_.shift(),i=ep.from(r,e,n);await vx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Wc(t)}async function mk(t,e){e&&Ar(t).V_&&await async function(r,i){if(function(o){return rP(o)&&o!==M.ABORTED}(i.code)){const s=r.O_.shift();Ar(r).s_(),await vx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Wc(r)}}(t,e),yx(t)&&_x(t)}async function Jv(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=pi(n);n.L_.add(3),await ra(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await qc(n)}async function gk(t,e){const n=J(t);e?(n.L_.delete(2),await qc(n)):e||(n.L_.add(2),await ra(n),n.q_.set("Unknown"))}function ys(t){return t.K_||(t.K_=function(n,r,i){const s=J(n);return s.w_(),new tk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:ok.bind(null,t),Ro:ak.bind(null,t),mo:lk.bind(null,t),d_:ck.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),cp(t)?lp(t):t.q_.set("Unknown")):(await t.K_.stop(),gx(t))})),t.K_}function Ar(t){return t.U_||(t.U_=function(n,r,i){const s=J(n);return s.w_(),new nk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hk.bind(null,t),mo:mk.bind(null,t),f_:fk.bind(null,t),g_:pk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Wc(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,c=new up(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dp(t,e){if(Un("AsyncQueue",`${e}: ${t}`),ea(t))return new $(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Ys(),this.sortedSet=new Ce(this.comparator)}static emptySet(e){return new qi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.W_=new Ce(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class as{constructor(e,n,r,i,s,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new as(e,n,qi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class yk{constructor(){this.queries=ey(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=J(n),s=i.queries;i.queries=ey(),s.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new $(M.ABORTED,"Firestore shutting down"))}}function ey(){return new vs(t=>BE(t),Mc)}async function wx(t,e){const n=J(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new vk,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=dp(o,`Initialization of query '${xi(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&hp(n)}async function Ex(t,e){const n=J(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _k(t,e){const n=J(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&hp(n)}function wk(t,e,n){const r=J(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function hp(t){t.Y_.forEach(e=>{e.next()})}var Rh,ty;(ty=Rh||(Rh={})).ea="default",ty.Cache="cache";class xx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new as(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=as.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.key=e}}class Sx{constructor(e){this.key=e}}class Ek{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=$E(e),this.Ra=new qi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Zv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const p=i.get(f),v=Uc(this.query,m)?m:null,x=!!p&&this.mutatedKeys.has(p.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let A=!1;p&&v?p.data.isEqual(v.data)?x!==E&&(r.track({type:3,doc:v}),A=!0):this.ga(p,v)||(r.track({type:2,doc:v}),A=!0,(u&&this.Aa(v,u)>0||d&&this.Aa(v,d)<0)&&(c=!0)):!p&&v?(r.track({type:0,doc:v}),A=!0):p&&!v&&(r.track({type:1,doc:p}),A=!0,(u||d)&&(c=!0)),A&&(v?(o=o.add(v),s=E?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(v,x){const E=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return E(v)-E(x)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new as(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Zv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Sx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Tx(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return as.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class xk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Tk{constructor(e){this.key=e,this.va=!1}}class Sk{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new vs(c=>BE(c),Mc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ce(K.comparator),this.Na=new Map,this.La=new rp,this.Ba={},this.ka=new Map,this.qa=os.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Ik(t,e,n=!0){const r=Px(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Ix(r,e,n,!0),i}async function Nk(t,e){const n=Px(t);await Ix(n,e,!0,!1)}async function Ix(t,e,n,r){const i=await KP(t.localStore,hn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await Ck(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&px(t.remoteStore,i),c}async function Ck(t,e,n,r,i){t.Ka=(m,p,v)=>async function(E,A,y,T){let w=A.view.ma(y);w.ns&&(w=await Qv(E.localStore,A.query,!1).then(({documents:N})=>A.view.ma(N,w)));const I=T&&T.targetChanges.get(A.targetId),O=T&&T.targetMismatches.get(A.targetId)!=null,b=A.view.applyChanges(w,E.isPrimaryClient,I,O);return ry(E,A.targetId,b.wa),b.snapshot}(t,m,p,v);const s=await Qv(t.localStore,e,!0),o=new Ek(e,s.Ts),c=o.ma(s.documents),u=na.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);ry(t,n,d.wa);const f=new xk(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function Ak(t,e,n){const r=J(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Mc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ah(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&op(r.remoteStore,i.targetId),Ph(r,i.targetId)}).catch(Zo)):(Ph(r,i.targetId),await Ah(r.localStore,i.targetId,!0))}async function Rk(t,e){const n=J(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),op(n.remoteStore,r.targetId))}async function Pk(t,e,n){const r=Vk(t);try{const i=await function(o,c){const u=J(o),d=te.now(),f=c.reduce((v,x)=>v.add(x.key),ie());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=Fn(),E=ie();return u.cs.getEntries(v,f).next(A=>{x=A,x.forEach((y,T)=>{T.isValidDocument()||(E=E.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,x)).next(A=>{m=A;const y=[];for(const T of c){const w=JR(T,m.get(T.key).overlayedDocument);w!=null&&y.push(new Dr(T.key,w,DE(w.value.mapValue),qt.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,y,c)}).next(A=>{p=A;const y=A.applyToLocalDocumentSet(m,E);return u.documentOverlayCache.saveOverlays(v,A.batchId,y)})}).then(()=>({batchId:p.batchId,changes:WE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ce(ue)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,n),await ia(r,i.changes),await Wc(r.remoteStore)}catch(i){const s=dp(i,"Failed to persist write");n.reject(s)}}async function Nx(t,e){const n=J(t);try{const r=await WP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?fe(o.va):i.removedDocuments.size>0&&(fe(o.va),o.va=!1))}),await ia(n,r,e)}catch(r){await Zo(r)}}function ny(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=J(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const p of m.j_)p.Z_(c)&&(d=!0)}),d&&hp(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kk(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ce(K.comparator);o=o.insert(s,ct.newNoDocument(s,Y.min()));const c=ie().add(s),u=new Bc(Y.min(),new Map,new Ce(ue),o,c);await Nx(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),fp(r)}else await Ah(r.localStore,e,!1).then(()=>Ph(r,e,n)).catch(Zo)}async function jk(t,e){const n=J(t),r=e.batch.batchId;try{const i=await qP(n.localStore,e);Ax(n,r,null),Cx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ia(n,i)}catch(i){await Zo(i)}}async function bk(t,e,n){const r=J(t);try{const i=await function(o,c){const u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(fe(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);Ax(r,e,n),Cx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ia(r,i)}catch(i){await Zo(i)}}function Cx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ax(t,e,n){const r=J(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ph(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Rx(t,r)})}function Rx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(op(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),fp(t))}function ry(t,e,n){for(const r of n)r instanceof Tx?(t.La.addReference(r.key,e),Dk(t,r)):r instanceof Sx?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Rx(t,r.key)):X()}function Dk(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),fp(t))}function fp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(_e.fromString(e)),r=t.qa.next();t.Na.set(r,new Tk(n)),t.Oa=t.Oa.insert(n,r),px(t.remoteStore,new cr(hn(Yf(n.path)),r,"TargetPurposeLimboResolution",Wf.oe))}}async function ia(t,e,n){const r=J(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=sp.Wi(u.targetId,d);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,d){const f=J(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,p=>U.forEach(p.$i,v=>f.persistence.referenceDelegate.addReference(m,p.targetId,v)).next(()=>U.forEach(p.Ui,v=>f.persistence.referenceDelegate.removeReference(m,p.targetId,v)))))}catch(m){if(!ea(m))throw m;W("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const v=f.os.get(p),x=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(x);f.os=f.os.insert(p,E)}}}(r.localStore,s))}async function Ok(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await ux(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new $(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ia(n,r.hs)}}function Lk(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function Px(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kk.bind(null,e),e.Ca.d_=_k.bind(null,e.eventManager),e.Ca.$a=wk.bind(null,e.eventManager),e}function Vk(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bk.bind(null,e),e}class sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$c(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return $P(this.persistence,new zP,e.initialUser,this.serializer)}Ga(e){return new MP(ip.Zr,this.serializer)}Wa(e){return new XP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sc.provider={build:()=>new sc};class kh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ny(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ok.bind(null,this.syncEngine),await gk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yk}()}createDatastore(e){const n=$c(e.databaseInfo.databaseId),r=function(s){return new ek(s)}(e.databaseInfo);return function(s,o,c,u){return new rk(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new sk(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>ny(this.syncEngine,n,0),function(){return Yv.D()?new Yv:new YP}())}createSyncEngine(e,n){return function(i,s,o,c,u,d,f){const m=new Sk(i,s,o,c,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=J(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ra(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}kh.provider={build:()=>new kh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=at.UNAUTHENTICATED,this.clientId=kE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dd(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ux(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Uk(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Jv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Jv(e.remoteStore,i)),t._onlineComponents=e}async function Uk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await dd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ns("Error using user provided cache. Falling back to memory cache: "+n),await dd(t,new sc)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await dd(t,new sc);return t._offlineComponents}async function jx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await iy(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await iy(t,new kh))),t._onlineComponents}function Fk(t){return jx(t).then(e=>e.syncEngine)}async function bx(t){const e=await jx(t),n=e.eventManager;return n.onListen=Ik.bind(null,e.syncEngine),n.onUnlisten=Ak.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Nk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Rk.bind(null,e.syncEngine),n}function zk(t,e,n={}){const r=new jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const f=new kx({next:p=>{f.Za(),o.enqueueAndForget(()=>Ex(s,m));const v=p.docs.has(c);!v&&p.fromCache?d.reject(new $(M.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&u&&u.source==="server"?d.reject(new $(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new xx(Yf(c.path),f,{includeMetadataChanges:!0,_a:!0});return wx(s,m)}(await bx(t),t.asyncQueue,e,n,r)),r.promise}function Bk(t,e,n={}){const r=new jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const f=new kx({next:p=>{f.Za(),o.enqueueAndForget(()=>Ex(s,m)),p.fromCache&&u.source==="server"?d.reject(new $(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new xx(c,f,{includeMetadataChanges:!0,_a:!0});return wx(s,m)}(await bx(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t,e,n){if(!n)throw new $(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $k(t,e,n,r){if(e===!0&&r===!0)throw new $(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function oy(t){if(!K.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ay(t){if(K.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hc(t);throw new $(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$k("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ly({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ly(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oR;switch(r.type){case"firstParty":return new uR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sy.get(n);r&&(W("ComponentProvider","Removing Datastore"),sy.delete(n),r.terminate())}(this),Promise.resolve()}}function qk(t,e,n,r={}){var i;const s=(t=rn(t,Gc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=at.MOCK_USER;else{c=yE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new $(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new at(d)}t._authCredentials=new aR(new PE(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class yt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yt(this.firestore,e,this._key)}}class Er extends Or{constructor(e,n,r){super(e,n,Yf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new K(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function Ee(t,e,...n){if(t=Pe(t),Ox("collection","path",e),t instanceof Gc){const r=_e.fromString(e,...n);return ay(r),new Er(t,null,r)}{if(!(t instanceof yt||t instanceof Er))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return ay(r),new Er(t.firestore,null,r)}}function ne(t,e,...n){if(t=Pe(t),arguments.length===1&&(e=kE.newId()),Ox("doc","path",e),t instanceof Gc){const r=_e.fromString(e,...n);return oy(r),new yt(t,null,new K(r))}{if(!(t instanceof yt||t instanceof Er))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return oy(r),new yt(t.firestore,t instanceof Er?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hx(this,"async_queue_retry"),this.Vu=()=>{const r=ud();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ud();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ud();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new jn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ea(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Un("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=up.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class mi extends Gc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new cy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cy(e),this._firestoreClient=void 0,await e}}}function Wk(t,e){const n=typeof t=="object"?t:Lc(),r=typeof t=="string"?t:"(default)",i=Jo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=zf("firestore");s&&qk(i,...s)}return i}function pp(t){if(t._terminated)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Hk(t),t._firestoreClient}function Hk(t){var e,n,r;const i=t._freezeSettings(),s=function(c,u,d,f){return new TR(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Dx(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Mk(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ls(Ze.fromBase64String(e))}catch(n){throw new $(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ls(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=/^__.*__$/;class Kk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ta(e,this.data,n,this.fieldTransforms)}}class Lx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Vx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class vp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return oc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Vx(this.Cu)&&Gk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Qk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$c(e)}Qu(e,n,r,i=!1){return new vp({Cu:e,methodName:n,qu:r,path:Qe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xc(t){const e=t._freezeSettings(),n=$c(t._databaseId);return new Qk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Mx(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);_p("Data must be an object, but it was:",o,r);const c=Ux(r,o);let u,d;if(s.merge)u=new jt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const p=jh(e,m,n);if(!o.contains(p))throw new $(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);zx(f,p)||f.push(p)}u=new jt(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new Kk(new xt(c),u,d)}class Yc extends Qc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yc}}class yp extends Qc{_toFieldTransform(e){return new KR(e.path,new zo)}isEqual(e){return e instanceof yp}}function Xk(t,e,n,r){const i=t.Qu(1,e,n);_p("Data must be an object, but it was:",i,r);const s=[],o=xt.empty();fi(r,(u,d)=>{const f=wp(e,u,n);d=Pe(d);const m=i.Nu(f);if(d instanceof Yc)s.push(f);else{const p=sa(d,m);p!=null&&(s.push(f),o.set(f,p))}});const c=new jt(s);return new Lx(o,c,i.fieldTransforms)}function Yk(t,e,n,r,i,s){const o=t.Qu(1,e,n),c=[jh(e,r,n)],u=[i];if(s.length%2!=0)throw new $(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)c.push(jh(e,s[p])),u.push(s[p+1]);const d=[],f=xt.empty();for(let p=c.length-1;p>=0;--p)if(!zx(d,c[p])){const v=c[p];let x=u[p];x=Pe(x);const E=o.Nu(v);if(x instanceof Yc)d.push(v);else{const A=sa(x,E);A!=null&&(d.push(v),f.set(v,A))}}const m=new jt(d);return new Lx(f,m,o.fieldTransforms)}function Jk(t,e,n,r=!1){return sa(n,t.Qu(r?4:3,e))}function sa(t,e){if(Fx(t=Pe(t)))return _p("Unsupported field value:",e,t),Ux(t,e);if(t instanceof Qc)return function(r,i){if(!Vx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const c of r){let u=sa(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=te.fromDate(r);return{timestampValue:rc(i.serializer,s)}}if(r instanceof te){const s=new te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rc(i.serializer,s)}}if(r instanceof mp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ls)return{bytesValue:rx(i.serializer,r._byteString)};if(r instanceof yt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:np(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gp)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Jf(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Hc(r)}`)}(t,e)}function Ux(t,e){const n={};return jE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fi(t,(r,i)=>{const s=sa(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Fx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof te||t instanceof mp||t instanceof ls||t instanceof yt||t instanceof Qc||t instanceof gp)}function _p(t,e,n){if(!Fx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Hc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function jh(t,e,n){if((e=Pe(e))instanceof Kc)return e._internalPath;if(typeof e=="string")return wp(t,e);throw oc("Field path arguments must be of type string or ",t,!1,void 0,n)}const Zk=new RegExp("[~\\*/\\[\\]]");function wp(t,e,n){if(e.search(Zk)>=0)throw oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kc(...e.split("."))._internalPath}catch{throw oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function oc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new $(M.INVALID_ARGUMENT,c+t+u)}function zx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ej(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ej extends Bx{data(){return super.data()}}function Jc(t,e){return typeof e=="string"?wp(t,e):e instanceof Kc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ep{}class xp extends Ep{}function Ct(t,e,...n){let r=[];e instanceof Ep&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Tp).length,c=s.filter(u=>u instanceof Zc).length;if(o>1||o>0&&c>0)throw new $(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Zc extends xp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zc(e,n,r)}_apply(e){const n=this._parse(e);return $x(e._query,n),new Or(e.firestore,e.converter,Th(e._query,n))}_parse(e){const n=Xc(e.firestore);return function(s,o,c,u,d,f,m){let p;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){dy(m,f);const v=[];for(const x of m)v.push(uy(u,s,x));p={arrayValue:{values:v}}}else p=uy(u,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||dy(m,f),p=Jk(c,o,m,f==="in"||f==="not-in");return Ue.create(d,f,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qe(t,e,n){const r=e,i=Jc("where",t);return Zc._create(i,r,n)}class Tp extends Ep{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Tp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const u of c)$x(o,u),o=Th(o,u)}(e._query,n),new Or(e.firestore,e.converter,Th(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sp extends xp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sp(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fo(s,o)}(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new gs(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function eu(t,e="asc"){const n=e,r=Jc("orderBy",t);return Sp._create(r,n)}class Ip extends xp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ip(e,n,r)}_apply(e){return new Or(e.firestore,e.converter,tc(e._query,this._limit,this._limitType))}}function nj(t){return Ip._create("limit",t,"F")}function uy(t,e,n){if(typeof(n=Pe(n))=="string"){if(n==="")throw new $(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zE(e)&&n.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_e.fromString(n));if(!K.isDocumentKey(r))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jv(t,new K(r))}if(n instanceof yt)return jv(t,n._key);throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hc(n)}.`)}function dy(t,e){if(!Array.isArray(t)||t.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $x(t,e){const n=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rj{convertValue(e,n="none"){switch(oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>De(o.doubleValue));return new gp(s)}convertGeoPoint(e){return new mp(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vo(e));default:return null}}convertTimestamp(e){const n=Cr(e);return new te(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);fe(cx(r));const i=new Mo(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||Un(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wx extends Bx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _l(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _l extends Wx{data(e={}){return super.data(e)}}class ij{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _l(this._firestore,this._userDataWriter,r.key,r,new Zs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new _l(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Zs(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const u=new _l(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Zs(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:sj(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function sj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){t=rn(t,yt);const e=rn(t.firestore,mi);return zk(pp(e),t._key).then(n=>oj(e,t,n))}class Hx extends rj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ls(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}}function et(t){t=rn(t,Or);const e=rn(t.firestore,mi),n=pp(e),r=new Hx(e);return tj(t._query),Bk(n,t._query).then(i=>new ij(e,r,t,i))}function Rr(t,e,n){t=rn(t,yt);const r=rn(t.firestore,mi),i=qx(t.converter,e,n);return tu(r,[Mx(Xc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,qt.none())])}function vn(t,e,n,...r){t=rn(t,yt);const i=rn(t.firestore,mi),s=Xc(i);let o;return o=typeof(e=Pe(e))=="string"||e instanceof Kc?Yk(s,"updateDoc",t._key,e,n,r):Xk(s,"updateDoc",t._key,e),tu(i,[o.toMutation(t._key,qt.exists(!0))])}function _s(t){return tu(rn(t.firestore,mi),[new Zf(t._key,qt.none())])}function Lr(t,e){const n=rn(t.firestore,mi),r=ne(t),i=qx(t.converter,e);return tu(n,[Mx(Xc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,qt.exists(!1))]).then(()=>r)}function tu(t,e){return function(r,i){const s=new jn;return r.asyncQueue.enqueueAndForget(async()=>Pk(await Fk(r),i,s)),s.promise}(pp(t),e)}function oj(t,e,n){const r=n.docs.get(e._key),i=new Hx(t);return new Wx(t,i,e._key,r,new Zs(n.hasPendingWrites,n.fromCache),e.converter)}function Gx(){return new yp("serverTimestamp")}(function(e,n=!0){(function(i){ms=i})(hi),Ir(new Vn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),c=new mi(new lR(r.getProvider("auth-internal")),new hR(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),$t(Cv,"4.7.3",e),$t(Cv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="firebasestorage.googleapis.com",Qx="storageBucket",aj=2*60*1e3,lj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je extends sn{constructor(e,n,r=0){super(hd(e),`Firebase Storage: ${n} (${hd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ke;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ke||(ke={}));function hd(t){return"storage/"+t}function Np(){const t="An unknown error occurred, please check the error payload for server response.";return new je(ke.UNKNOWN,t)}function cj(t){return new je(ke.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function uj(t){return new je(ke.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new je(ke.UNAUTHENTICATED,t)}function hj(){return new je(ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fj(t){return new je(ke.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function pj(){return new je(ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mj(){return new je(ke.CANCELED,"User canceled the upload/download.")}function gj(t){return new je(ke.INVALID_URL,"Invalid URL '"+t+"'.")}function vj(t){return new je(ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yj(){return new je(ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qx+"' property when initializing the app?")}function _j(){return new je(ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wj(){return new je(ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ej(t){return new je(ke.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function bh(t){return new je(ke.INVALID_ARGUMENT,t)}function Xx(){return new je(ke.APP_DELETED,"The Firebase app was deleted.")}function xj(t){return new je(ke.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function po(t,e){return new je(ke.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function $s(t){throw new je(ke.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=bt.makeFromUrl(e,n)}catch{return new bt(e,"")}if(r.path==="")return r;throw vj(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(I){I.path_=decodeURIComponent(I.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${f}/b/${i}/o${p}`,"i"),x={bucket:1,path:3},E=n===Kx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",y=new RegExp(`^https?://${E}/${i}/${A}`,"i"),w=[{regex:c,indices:u,postModify:s},{regex:v,indices:x,postModify:d},{regex:y,indices:{bucket:1,path:2},postModify:d}];for(let I=0;I<w.length;I++){const O=w[I],b=O.regex.exec(e);if(b){const N=b[O.indices.bucket];let _=b[O.indices.path];_||(_=""),r=new bt(N,_),O.postModify(r);break}}if(r==null)throw gj(e);return r}}class Tj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(t,e,n){let r=1,i=null,s=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...A){d||(d=!0,e.apply(null,A))}function m(A){i=setTimeout(()=>{i=null,t(v,u())},A)}function p(){s&&clearTimeout(s)}function v(A,...y){if(d){p();return}if(A){p(),f.call(null,A,...y);return}if(u()||o){p(),f.call(null,A,...y);return}r<64&&(r*=2);let w;c===1?(c=2,w=0):w=(r+Math.random())*1e3,m(w)}let x=!1;function E(A){x||(x=!0,p(),!d&&(i!==null?(A||(c=2),clearTimeout(i),m(0)):A||(c=1)))}return m(0),s=setTimeout(()=>{o=!0,E(!0)},n),E}function Ij(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t){return t!==void 0}function Cj(t){return typeof t=="object"&&!Array.isArray(t)}function Cp(t){return typeof t=="string"||t instanceof String}function hy(t){return Ap()&&t instanceof Blob}function Ap(){return typeof Blob<"u"}function fy(t,e,n,r){if(r<e)throw bh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw bh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Yx(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Yr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Yr||(Yr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n,r,i,s,o,c,u,d,f,m,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,x)=>{this.resolve_=v,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ja(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===Yr.NO_ERROR,u=s.getStatus();if(!c||Aj(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Yr.ABORT;r(!1,new Ja(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Ja(d,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());Nj(u)?s(u):s()}catch(u){o(u)}else if(c!==null){const u=Np();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Xx():mj();o(u)}else{const u=pj();o(u)}};this.canceled_?n(!1,new Ja(!1,null,!0)):this.backoffId_=Sj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ij(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ja{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Pj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function bj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Dj(t,e,n,r,i,s,o=!0){const c=Yx(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return jj(d,e),Pj(d,n),kj(d,s),bj(d,r),new Rj(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Lj(...t){const e=Oj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Ap())return new Blob(t);throw new je(ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Vj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t){if(typeof atob>"u")throw Ej("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fd{constructor(e,n){this.data=e,this.contentType=n||null}}function Uj(t,e){switch(t){case cn.RAW:return new fd(Jx(e));case cn.BASE64:case cn.BASE64URL:return new fd(Zx(t,e));case cn.DATA_URL:return new fd(zj(e),Bj(e))}throw Np()}function Jx(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Fj(t){let e;try{e=decodeURIComponent(t)}catch{throw po(cn.DATA_URL,"Malformed data URL.")}return Jx(e)}function Zx(t,e){switch(t){case cn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw po(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case cn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw po(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Mj(e)}catch(i){throw i.message.includes("polyfill")?i:po(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class e0{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw po(cn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=$j(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function zj(t){const e=new e0(t);return e.base64?Zx(cn.BASE64,e.rest):Fj(e.rest)}function Bj(t){return new e0(t).contentType}function $j(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n){let r=0,i="";hy(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(hy(this.data_)){const r=this.data_,i=Vj(r,e,n);return i===null?null:new er(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new er(r,!0)}}static getBlob(...e){if(Ap()){const n=e.map(r=>r instanceof er?r.data_:r);return new er(Lj.apply(null,n))}else{const n=e.map(o=>Cp(o)?Uj(cn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)i[s++]=o[c]}),new er(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t){let e;try{e=JSON.parse(t)}catch{return null}return Cj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Wj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function n0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t,e){return e}class pt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Hj}}let Za=null;function Gj(t){return!Cp(t)||t.length<2?t:n0(t)}function r0(){if(Za)return Za;const t=[];t.push(new pt("bucket")),t.push(new pt("generation")),t.push(new pt("metageneration")),t.push(new pt("name","fullPath",!0));function e(s,o){return Gj(o)}const n=new pt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new pt("size");return i.xform=r,t.push(i),t.push(new pt("timeCreated")),t.push(new pt("updated")),t.push(new pt("md5Hash",null,!0)),t.push(new pt("cacheControl",null,!0)),t.push(new pt("contentDisposition",null,!0)),t.push(new pt("contentEncoding",null,!0)),t.push(new pt("contentLanguage",null,!0)),t.push(new pt("contentType",null,!0)),t.push(new pt("metadata","customMetadata",!0)),Za=t,Za}function Kj(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new bt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Qj(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Kj(r,t),r}function i0(t,e,n){const r=t0(e);return r===null?null:Qj(t,r,n)}function Xj(t,e,n,r){const i=t0(e);if(i===null||!Cp(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const f=t.bucket,m=t.fullPath,p="/b/"+o(f)+"/o/"+o(m),v=Rp(p,n,r),x=Yx({alt:"media",token:d});return v+x})[0]}function Yj(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class s0{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t){if(!t)throw Np()}function Jj(t,e){function n(r,i){const s=i0(t,i,e);return o0(s!==null),s}return n}function Zj(t,e){function n(r,i){const s=i0(t,i,e);return o0(s!==null),Xj(s,i,t.host,t._protocol)}return n}function a0(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=hj():i=dj():n.getStatus()===402?i=uj(t.bucket):n.getStatus()===403?i=fj(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function e1(t){const e=a0(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=cj(t.path)),s.serverResponse=i.serverResponse,s}return n}function t1(t,e,n){const r=e.fullServerUrl(),i=Rp(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new s0(i,s,Zj(t,n),o);return c.errorHandler=e1(e),c}function n1(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function r1(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=n1(null,e)),r}function i1(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let w="";for(let I=0;I<2;I++)w=w+Math.random().toString().slice(2);return w}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=r1(e,r,i),f=Yj(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",v=er.getBlob(m,r,p);if(v===null)throw _j();const x={name:d.fullPath},E=Rp(s,t.host,t._protocol),A="POST",y=t.maxUploadRetryTime,T=new s0(E,A,Jj(t,n),y);return T.urlParams=x,T.headers=o,T.body=v.uploadData(),T.errorHandler=a0(e),T}class s1{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw $s("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $s("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $s("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $s("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $s("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class o1 extends s1{initXhr(){this.xhr_.responseType="text"}}function l0(){return new o1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){this._service=e,n instanceof bt?this._location=n:this._location=bt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ai(e,n)}get root(){const e=new bt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return n0(this._location.path)}get storage(){return this._service}get parent(){const e=qj(this._location.path);if(e===null)return null;const n=new bt(this._location.bucket,e);return new ai(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xj(e)}}function a1(t,e,n){t._throwIfRoot("uploadBytes");const r=i1(t.storage,t._location,r0(),new er(e,!0),n);return t.storage.makeRequestWithTokens(r,l0).then(i=>({metadata:i,ref:t}))}function l1(t){t._throwIfRoot("getDownloadURL");const e=t1(t.storage,t._location,r0());return t.storage.makeRequestWithTokens(e,l0).then(n=>{if(n===null)throw wj();return n})}function c1(t,e){const n=Wj(t._location.path,e),r=new bt(t._location.bucket,n);return new ai(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){return/^[A-Za-z]+:\/\//.test(t)}function d1(t,e){return new ai(t,e)}function c0(t,e){if(t instanceof Pp){const n=t;if(n._bucket==null)throw yj();const r=new ai(n,n._bucket);return e!=null?c0(r,e):r}else return e!==void 0?c1(t,e):t}function h1(t,e){if(e&&u1(e)){if(t instanceof Pp)return d1(t,e);throw bh("To use ref(service, url), the first argument must be a Storage instance.")}else return c0(t,e)}function py(t,e){const n=e==null?void 0:e[Qx];return n==null?null:bt.makeFromBucketSpec(n,t)}function f1(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:yE(i,t.app.options.projectId))}class Pp{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Kx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aj,this._maxUploadRetryTime=lj,this._requests=new Set,i!=null?this._bucket=bt.makeFromBucketSpec(i,this._host):this._bucket=py(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bt.makeFromBucketSpec(this._url,e):this._bucket=py(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ai(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Tj(Xx());{const o=Dj(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const my="@firebase/storage",gy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="storage";function oa(t,e,n){return t=Pe(t),a1(t,e,n)}function aa(t){return t=Pe(t),l1(t)}function la(t,e){return t=Pe(t),h1(t,e)}function kp(t=Lc(),e){t=Pe(t);const r=Jo(t,u0).getImmediate({identifier:e}),i=zf("storage");return i&&p1(r,...i),r}function p1(t,e,n,r={}){f1(t,e,n,r)}function m1(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Pp(n,r,i,e,hi)}function g1(){Ir(new Vn(u0,m1,"PUBLIC").setMultipleInstances(!0)),$t(my,gy,""),$t(my,gy,"esm2017")}g1();function jp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function d0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v1=d0,h0=new Xo("auth","Firebase",d0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Bf("@firebase/auth");function y1(t,...e){ac.logLevel<=se.WARN&&ac.warn(`Auth (${hi}): ${t}`,...e)}function wl(t,...e){ac.logLevel<=se.ERROR&&ac.error(`Auth (${hi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,...e){throw bp(t,...e)}function pn(t,...e){return bp(t,...e)}function f0(t,e,n){const r=Object.assign(Object.assign({},v1()),{[e]:n});return new Xo("auth","Firebase",r).create(e,{appName:t.name})}function Jr(t){return f0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return h0.create(t,...e)}function Q(t,e,...n){if(!t)throw bp(e,...n)}function An(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wl(e),new Error(e)}function Bn(t,e){t||An(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _1(){return vy()==="http:"||vy()==="https:"}function vy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_1()||MC()||"connection"in navigator)?navigator.onLine:!0}function E1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bn(n>e,"Short delay should be less than long delay!"),this.isMobile=OC()||UC()}get(){return w1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t,e){Bn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;An("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;An("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;An("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new ca(3e4,6e4);function Op(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ws(t,e,n,r,i={}){return m0(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const c=Yo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},s);return VC()||(d.referrerPolicy="no-referrer"),p0.fetch()(g0(t,t.config.apiHost,n,c),d)})}async function m0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},x1),e);try{const i=new I1(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw el(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw el(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw el(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw el(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw f0(t,f,d);zn(t,f)}}catch(i){if(i instanceof sn)throw i;zn(t,"network-request-failed",{message:String(i)})}}async function S1(t,e,n,r,i={}){const s=await ws(t,e,n,r,i);return"mfaPendingCredential"in s&&zn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function g0(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Dp(t.config,i):`${t.config.apiScheme}://${i}`}class I1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),T1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function el(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=pn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(t,e){return ws(t,"POST","/v1/accounts:delete",e)}async function v0(t,e){return ws(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function C1(t,e=!1){const n=Pe(t),r=await n.getIdToken(e),i=Lp(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:mo(pd(i.auth_time)),issuedAtTime:mo(pd(i.iat)),expirationTime:mo(pd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function pd(t){return Number(t)*1e3}function Lp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wl("JWT malformed, contained fewer than 3 sections"),null;try{const i=pE(n);return i?JSON.parse(i):(wl("Failed to decode base64 JWT payload"),null)}catch(i){return wl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yy(t){const e=Lp(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sn&&A1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function A1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mo(this.lastLoginAt),this.creationTime=mo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await qo(t,v0(n,{idToken:r}));Q(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?y0(s.providerUserInfo):[],c=k1(t.providerData,o),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Oh(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function P1(t){const e=Pe(t);await lc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function k1(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function y0(t){return t.map(e=>{var{providerId:n}=e,r=jp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(t,e){const n=await m0(t,{},async()=>{const r=Yo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=g0(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",p0.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function b1(t,e){return ws(t,"POST","/v2/accounts:revokeToken",Op(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=yy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await j1(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Wi;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wi,this.toJSON())}_performRefresh(){return An("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=jp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new R1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Oh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await qo(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return C1(this,e)}reload(){return P1(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Jr(this.auth));const e=await this.getIdToken();return await qo(this,N1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(c=n.tenantId)!==null&&c!==void 0?c:void 0,A=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=n.createdAt)!==null&&d!==void 0?d:void 0,T=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:w,emailVerified:I,isAnonymous:O,providerData:b,stsTokenManager:N}=n;Q(w&&N,e,"internal-error");const _=Wi.fromJSON(this.name,N);Q(typeof w=="string",e,"internal-error"),Qn(m,e.name),Qn(p,e.name),Q(typeof I=="boolean",e,"internal-error"),Q(typeof O=="boolean",e,"internal-error"),Qn(v,e.name),Qn(x,e.name),Qn(E,e.name),Qn(A,e.name),Qn(y,e.name),Qn(T,e.name);const C=new Rn({uid:w,auth:e,email:p,emailVerified:I,displayName:m,isAnonymous:O,photoURL:x,phoneNumber:v,tenantId:E,stsTokenManager:_,createdAt:y,lastLoginAt:T});return b&&Array.isArray(b)&&(C.providerData=b.map(P=>Object.assign({},P))),A&&(C._redirectEventId=A),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Wi;i.updateFromServerResponse(n);const s=new Rn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await lc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Q(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?y0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Wi;c.updateFromIdToken(r);const u=new Rn({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Oh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=new Map;function Pn(t){Bn(t instanceof Function,"Expected a class definition");let e=_y.get(t);return e?(Bn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_y.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_0.type="NONE";const wy=_0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t,e,n){return`firebase:${t}:${e}:${n}`}class Hi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=El(this.userKey,i.apiKey,s),this.fullPersistenceKey=El("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hi(Pn(wy),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Pn(wy);const o=El(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){const m=Rn._fromJSON(e,f);d!==s&&(c=m),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Hi(s,e,r):(s=u[0],c&&await s._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Hi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(I0(e))return"Blackberry";if(N0(e))return"Webos";if(E0(e))return"Safari";if((e.includes("chrome/")||x0(e))&&!e.includes("edge/"))return"Chrome";if(S0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function w0(t=dt()){return/firefox\//i.test(t)}function E0(t=dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function x0(t=dt()){return/crios\//i.test(t)}function T0(t=dt()){return/iemobile/i.test(t)}function S0(t=dt()){return/android/i.test(t)}function I0(t=dt()){return/blackberry/i.test(t)}function N0(t=dt()){return/webos/i.test(t)}function Vp(t=dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D1(t=dt()){var e;return Vp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function O1(){return FC()&&document.documentMode===10}function C0(t=dt()){return Vp(t)||S0(t)||N0(t)||I0(t)||/windows phone/i.test(t)||T0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t,e=[]){let n;switch(t){case"Browser":n=Ey(dt());break;case"Worker":n=`${Ey(dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,c)=>{try{const u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(t,e={}){return ws(t,"GET","/v2/passwordPolicy",Op(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=6;class U1{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:M1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xy(this),this.idTokenSubscription=new xy(this),this.beforeStateQueue=new L1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Hi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await v0(this,{idToken:e}),r=await Rn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(lr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=E1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Jr(this));const n=e?Pe(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await V1(this),n=new U1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await b1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Hi.create(this,[Pn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=A0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&y1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Mp(t){return Pe(t)}class xy{constructor(e){this.auth=e,this.observer=null,this.addObserver=KC(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Up={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z1(t){Up=t}function B1(t){return Up.loadJS(t)}function $1(){return Up.gapiScript}function q1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e){const n=Jo(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Yl(s,e??{}))return i;zn(i,"already-initialized")}return n.initialize({options:e})}function H1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function G1(t,e,n){const r=Mp(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=R0(e),{host:o,port:c}=K1(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Q1()}function R0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function K1(t){const e=R0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ty(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ty(o)}}}function Ty(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Q1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return An("not implemented")}_getIdTokenResponse(e){return An("not implemented")}_linkToIdToken(e,n){return An("not implemented")}_getReauthenticationResolver(e){return An("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(t,e){return S1(t,"POST","/v1/accounts:signInWithIdp",Op(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="http://localhost";class li extends P0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new li(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=jp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new li(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gi(e,n)}buildRequest(){const e={requestUri:X1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends k0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends ua{constructor(){super("facebook.com")}static credential(e){return li._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends ua{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return li._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return nr.credential(n,r)}catch{return null}}}nr.GOOGLE_SIGN_IN_METHOD="google.com";nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends ua{constructor(){super("github.com")}static credential(e){return li._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends ua{constructor(){super("twitter.com")}static credential(e,n){return li._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Rn._fromIdTokenResponse(e,r,i),o=Sy(r);return new cs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Sy(r);return new cs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Sy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends sn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new cc(e,n,r,i)}}function j0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cc._fromErrorAndOperation(t,s,e,r):s})}async function Y1(t,e,n=!1){const r=await qo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return cs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(t,e,n=!1){const{auth:r}=t;if(lr(r.app))return Promise.reject(Jr(r));const i="reauthenticate";try{const s=await qo(t,j0(r,i,e,t),n);Q(s.idToken,r,"internal-error");const o=Lp(s.idToken);Q(o,r,"internal-error");const{sub:c}=o;return Q(t.uid===c,r,"user-mismatch"),cs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&zn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(t,e,n=!1){if(lr(t.app))return Promise.reject(Jr(t));const r="signIn",i=await j0(t,r,e),s=await cs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function eb(t,e,n,r){return Pe(t).onIdTokenChanged(e,n,r)}function tb(t,e,n){return Pe(t).beforeAuthStateChanged(e,n)}const uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uc,"1"),this.storage.removeItem(uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=1e3,rb=10;class D0 extends b0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=C0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);O1()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,rb):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}D0.type="LOCAL";const ib=D0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0 extends b0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}O0.type="SESSION";const L0=O0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new nu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,s)),u=await sb(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{const d=Fp("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(p.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return window}function ab(t){mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}async function lb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ub(){return V0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="firebaseLocalStorageDb",db=1,dc="firebaseLocalStorage",U0="fbase_key";class da{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ru(t,e){return t.transaction([dc],e?"readwrite":"readonly").objectStore(dc)}function hb(){const t=indexedDB.deleteDatabase(M0);return new da(t).toPromise()}function Lh(){const t=indexedDB.open(M0,db);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(dc,{keyPath:U0})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(dc)?e(r):(r.close(),await hb(),e(await Lh()))})})}async function Iy(t,e,n){const r=ru(t,!0).put({[U0]:e,value:n});return new da(r).toPromise()}async function fb(t,e){const n=ru(t,!1).get(e),r=await new da(n).toPromise();return r===void 0?null:r.value}function Ny(t,e){const n=ru(t,!0).delete(e);return new da(n).toPromise()}const pb=800,mb=3;class F0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return V0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nu._getInstance(ub()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lb(),!this.activeServiceWorker)return;this.sender=new ob(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lh();return await Iy(e,uc,"1"),await Ny(e,uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Iy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fb(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ny(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ru(i,!1).getAll();return new da(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F0.type="LOCAL";const gb=F0;new ca(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t,e){return e?Pn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends P0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yb(t){return Z1(t.auth,new zp(t),t.bypassAuthState)}function _b(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),J1(n,new zp(t),t.bypassAuthState)}async function wb(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),Y1(n,new zp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yb;case"linkViaPopup":case"linkViaRedirect":return wb;case"reauthViaPopup":case"reauthViaRedirect":return _b;default:zn(this.auth,"internal-error")}}resolve(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new ca(2e3,1e4);class Vi extends z0{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Vi.currentPopupAction&&Vi.currentPopupAction.cancel(),Vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Bn(this.filter.length===1,"Popup operations only handle one event");const e=Fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Eb.get())};e()}}Vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="pendingRedirect",xl=new Map;class Tb extends z0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xl.get(this.auth._key());if(!e){try{const r=await Sb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xl.set(this.auth._key(),e)}return this.bypassAuthState||xl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sb(t,e){const n=Cb(e),r=Nb(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Ib(t,e){xl.set(t._key(),e)}function Nb(t){return Pn(t._redirectPersistence)}function Cb(t){return El(xb,t.config.apiKey,t.name)}async function Ab(t,e,n=!1){if(lr(t.app))return Promise.reject(Jr(t));const r=Mp(t),i=vb(r,e),o=await new Tb(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=10*60*1e3;class Pb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!B0(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Rb&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cy(e))}saveEventToCache(e){this.cachedEventUids.add(Cy(e)),this.lastProcessedEventTime=Date.now()}}function Cy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function B0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return B0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(t,e={}){return ws(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Db=/^https?/;async function Ob(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jb(t);for(const n of e)try{if(Lb(n))return}catch{}zn(t,"unauthorized-domain")}function Lb(t){const e=Dh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Db.test(n))return!1;if(bb.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=new ca(3e4,6e4);function Ay(){const t=mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Mb(t){return new Promise((e,n)=>{var r,i,s;function o(){Ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ay(),n(pn(t,"network-request-failed"))},timeout:Vb.get()})}if(!((i=(r=mn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=mn().gapi)===null||s===void 0)&&s.load)o();else{const c=q1("iframefcb");return mn()[c]=()=>{gapi.load?o():n(pn(t,"network-request-failed"))},B1(`${$1()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Tl=null,e})}let Tl=null;function Ub(t){return Tl=Tl||Mb(t),Tl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=new ca(5e3,15e3),zb="__/auth/iframe",Bb="emulator/auth/iframe",$b={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wb(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Dp(e,Bb):`https://${t.config.authDomain}/${zb}`,r={apiKey:e.apiKey,appName:t.name,v:hi},i=qb.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Yo(r).slice(1)}`}async function Hb(t){const e=await Ub(t),n=mn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:Wb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$b,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=pn(t,"network-request-failed"),c=mn().setTimeout(()=>{s(o)},Fb.get());function u(){mn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Kb=500,Qb=600,Xb="_blank",Yb="http://localhost";class Ry{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Jb(t,e,n,r=Kb,i=Qb){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Gb),{width:r.toString(),height:i.toString(),top:s,left:o}),d=dt().toLowerCase();n&&(c=x0(d)?Xb:n),w0(d)&&(e=e||Yb,u.scrollbars="yes");const f=Object.entries(u).reduce((p,[v,x])=>`${p}${v}=${x},`,"");if(D1(d)&&c!=="_self")return Zb(e||"",c),new Ry(null);const m=window.open(e||"",c,f);Q(m,t,"popup-blocked");try{m.focus()}catch{}return new Ry(m)}function Zb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="__/auth/handler",tD="emulator/auth/handler",nD=encodeURIComponent("fac");async function Py(t,e,n,r,i,s){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hi,eventId:i};if(e instanceof k0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",GC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof ua){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${nD}=${encodeURIComponent(u)}`:"";return`${rD(t)}?${Yo(c).slice(1)}${d}`}function rD({config:t}){return t.emulator?Dp(t,tD):`https://${t.authDomain}/${eD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="webStorageSupport";class iD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L0,this._completeRedirectFn=Ab,this._overrideRedirectResult=Ib}async _openPopup(e,n,r,i){var s;Bn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Py(e,n,r,Dh(),i);return Jb(e,o,Fp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Py(e,n,r,Dh(),i);return ab(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Bn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Hb(e),r=new Pb(e);return n.register("authEvent",i=>(Q(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(md,{type:md},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[md];o!==void 0&&n(!!o),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ob(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return C0()||E0()||Vp()}}const sD=iD;var ky="@firebase/auth",jy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lD(t){Ir(new Vn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A0(t)},d=new F1(r,i,s,u);return H1(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ir(new Vn("auth-internal",e=>{const n=Mp(e.getProvider("auth").getImmediate());return(r=>new oD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$t(ky,jy,aD(t)),$t(ky,jy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=5*60,uD=vE("authIdTokenMaxAge")||cD;let by=null;const dD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uD)return;const i=n==null?void 0:n.token;by!==i&&(by=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hD(t=Lc()){const e=Jo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=W1(t,{popupRedirectResolver:sD,persistence:[gb,ib,L0]}),r=vE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=dD(s.toString());tb(n,o,()=>o(n.currentUser)),eb(n,c=>o(c))}}const i=mE("auth");return i&&G1(n,`http://${i}`),n}function fD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}z1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=pn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",fD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lD("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="type.googleapis.com/google.protobuf.Int64Value",mD="type.googleapis.com/google.protobuf.UInt64Value";function $0(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Vh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Vh(e));if(typeof t=="function"||typeof t=="object")return $0(t,e=>Vh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function hc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case pD:case mD:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>hc(e)):typeof t=="function"||typeof t=="object"?$0(t,e=>hc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ki extends sn{constructor(e,n,r){super(`${Bp}/${e}`,n||""),this.details=r}}function gD(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function vD(t,e){let n=gD(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!Dy[o])return new Ki("internal","internal");n=Dy[o],r=o}const c=s.message;typeof c=="string"&&(r=c),i=s.details,i!==void 0&&(i=hc(i))}}catch{}return n==="ok"?null:new Ki(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="us-central1";function _D(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Ki("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class wD{constructor(e,n,r,i,s=Mh,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new yD(n,r,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(s);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Mh}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function ED(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function xD(t,e,n){return r=>SD(t,e,r,{})}async function TD(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function SD(t,e,n,r){const i=t._url(e);return ID(t,i,n,r)}async function ID(t,e,n,r){n=Vh(n);const i={data:n},s={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=o.appCheckToken);const c=r.timeout||7e4,u=_D(c),d=await Promise.race([TD(e,i,s,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!d)throw new Ki("cancelled","Firebase Functions instance was deleted.");const f=vD(d.status,d.json);if(f)throw f;if(!d.json)throw new Ki("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new Ki("internal","Response is missing data field.");return{data:hc(m)}}const Oy="@firebase/functions",Ly="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND="auth-internal",CD="app-check-internal",AD="messaging-internal";function RD(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(ND),c=r.getProvider(AD),u=r.getProvider(CD);return new wD(s,o,c,u,i,t)};Ir(new Vn(Bp,n,"PUBLIC").setMultipleInstances(!0)),$t(Oy,Ly,e),$t(Oy,Ly,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t=Lc(),e=Mh){const r=Jo(Pe(t),Bp).getImmediate({identifier:e}),i=zf("functions");return i&&PD(r,...i),r}function PD(t,e,n){ED(Pe(t),e,n)}function iu(t,e,n){return xD(Pe(t),e)}RD(fetch.bind(self));const kD={apiKey:"AIzaSyDf7bTYBUCJiVj8L-7nKxuWU8ueGdXc1W0",authDomain:"app-zerosei-pizza.firebaseapp.com",projectId:"app-zerosei-pizza",storageBucket:"app-zerosei-pizza.firebasestorage.app",messagingSenderId:"912128427084",appId:"1:912128427084:web:9f99ba64f9bd2c97f520e9"},ha=EE(kD),H=Wk(ha),$p=kp(ha);hD(ha);const jD=q0(ha);async function W0(){const t=Ee(H,"products"),e=Ct(t,qe("available","==",!0));return(await et(e)).docs.map(r=>{var i,s;return{id:r.id,...r.data(),createdAt:(i=r.data().createdAt)==null?void 0:i.toDate(),updatedAt:(s=r.data().updatedAt)==null?void 0:s.toDate()}})}async function qp(){const t=Ee(H,"products");return(await et(t)).docs.map(n=>{var r,i;return{id:n.id,...n.data(),createdAt:(r=n.data().createdAt)==null?void 0:r.toDate(),updatedAt:(i=n.data().updatedAt)==null?void 0:i.toDate()}})}async function Wp(t){const e=Ee(H,"products"),n=Ct(e,qe("category","==",t),qe("available","==",!0));return(await et(n)).docs.map(i=>{var s,o;return{id:i.id,...i.data(),createdAt:(s=i.data().createdAt)==null?void 0:s.toDate(),updatedAt:(o=i.data().updatedAt)==null?void 0:o.toDate()}})}async function H0(t){var r,i;const e=ne(H,"products",t),n=await Gt(e);return n.exists()?{id:n.id,...n.data(),createdAt:(r=n.data().createdAt)==null?void 0:r.toDate(),updatedAt:(i=n.data().updatedAt)==null?void 0:i.toDate()}:null}async function G0(t){const e=Ee(H,"products");return(await Lr(e,{...t,createdAt:te.now(),updatedAt:te.now()})).id}async function K0(t,e){const n=ne(H,"products",t);await vn(n,{...e,updatedAt:te.now()})}async function Q0(t){const e=ne(H,"products",t);await _s(e)}async function bD(t,e){const n=kp(),r=la(n,`product_images/${e}/${t.name}`),i=await oa(r,t);return await aa(i.ref)}async function DD(t){const e=await W0(),n=t.toLowerCase();return e.filter(r=>{var i,s;return r.name.toLowerCase().includes(n)||((i=r.description)==null?void 0:i.toLowerCase().includes(n))||(((s=r.ingredients)==null?void 0:s.some(o=>o.toLowerCase().includes(n)))??!1)})}async function Hp(){const t=Ee(H,"categories"),e=Ct(t,eu("order","asc"));return(await et(e)).docs.map(r=>({id:r.id,...r.data()}))}async function X0(t){const e=Ee(H,"categories");return(await Lr(e,t)).id}async function Y0(t,e){const n=ne(H,"categories",t);await vn(n,e)}async function J0(t){const e=ne(H,"categories",t);await _s(e)}const xr=t=>{if(t)return typeof t.toDate=="function"?t.toDate():t instanceof Date?t:new Date(t)};async function OD(t){const e=ne(H,"users",t),n=await Gt(e);if(!n.exists())return null;const r=n.data();return{id:n.id,...r,createdAt:xr(r.createdAt),updatedAt:xr(r.updatedAt)}}async function Z0(t){const e=Ee(H,"users");return(await Lr(e,{...t,createdAt:te.now(),updatedAt:te.now()})).id}async function fc(t,e){const n=ne(H,"users",t),r={...e,updatedAt:te.now()};if(e.createdAt){const i=xr(e.createdAt);i&&(r.createdAt=te.fromDate(i))}await Rr(n,r,{merge:!0})}async function eT(t){const e=Ee(H,"users"),n=Ct(e,qe("phone","==",t),nj(1)),r=await et(n);if(r.empty)return null;const i=r.docs[0],s=i.data();return{id:i.id,...s,createdAt:xr(s.createdAt),updatedAt:xr(s.updatedAt)}}async function tT(){const t=Ee(H,"users");try{const e=await et(t);return console.log(`Fetched ${e.size} users`),e.docs.map(n=>{const r=n.data();return{id:n.id,...r,createdAt:xr(r.createdAt),updatedAt:xr(r.updatedAt),lastAccess:xr(r.lastAccess)}})}catch(e){return console.error("Error fetching users:",e),[]}}async function pc(t){const e=Ee(H,"orders");return(await Lr(e,{...t,createdAt:te.now(),updatedAt:te.now()})).id}async function LD(t){var r,i;const e=ne(H,"orders",t),n=await Gt(e);return n.exists()?{id:n.id,...n.data(),createdAt:(r=n.data().createdAt)==null?void 0:r.toDate(),updatedAt:(i=n.data().updatedAt)==null?void 0:i.toDate()}:null}async function VD(t){const e=Ee(H,"orders"),n=Ct(e,qe("userId","==",t),eu("createdAt","desc"));return(await et(n)).docs.map(i=>{var s,o;return{id:i.id,...i.data(),createdAt:(s=i.data().createdAt)==null?void 0:s.toDate(),updatedAt:(o=i.data().updatedAt)==null?void 0:o.toDate()}})}async function nT(){const t=Ee(H,"orders"),e=Ct(t,eu("createdAt","desc"));return(await et(e)).docs.map(r=>{var i,s;return{id:r.id,...r.data(),createdAt:(i=r.data().createdAt)==null?void 0:i.toDate(),updatedAt:(s=r.data().updatedAt)==null?void 0:s.toDate()}})}async function rT(t,e){const n=ne(H,"orders",t);await vn(n,{status:e,updatedAt:te.now()})}async function MD(){const t=Ee(H,"modifications"),e=Ct(t,qe("available","==",!0));return(await et(e)).docs.map(r=>({id:r.id,...r.data()}))}async function UD(t){const e=Ee(H,"modifications");return(await Lr(e,t)).id}async function FD(t,e){const n=ne(H,"modifications",t);await vn(n,e)}async function zD(t){const e=ne(H,"modifications",t);await _s(e)}async function BD(){const t=Ee(H,"promotions"),e=te.now(),n=Ct(t,qe("active","==",!0),qe("validFrom","<=",e),qe("validTo",">=",e));return(await et(n)).docs.map(i=>{var s,o,c,u;return{id:i.id,...i.data(),validFrom:(s=i.data().validFrom)==null?void 0:s.toDate(),validTo:(o=i.data().validTo)==null?void 0:o.toDate(),createdAt:(c=i.data().createdAt)==null?void 0:c.toDate(),updatedAt:(u=i.data().updatedAt)==null?void 0:u.toDate()}})}async function su(){const t=Ee(H,"promotions"),e=Ct(t,eu("createdAt","desc"));return(await et(e)).docs.map(r=>{var i,s,o,c;return{id:r.id,...r.data(),validFrom:(i=r.data().validFrom)==null?void 0:i.toDate(),validTo:(s=r.data().validTo)==null?void 0:s.toDate(),createdAt:(o=r.data().createdAt)==null?void 0:o.toDate(),updatedAt:(c=r.data().updatedAt)==null?void 0:c.toDate()}})}async function iT(t){const e=Ee(H,"promotions");return(await Lr(e,{...t,validFrom:te.fromDate(t.validFrom),validTo:te.fromDate(t.validTo),createdAt:te.now(),updatedAt:te.now()})).id}async function sT(t,e){const n=ne(H,"promotions",t),r={...e,updatedAt:te.now()};e.validFrom&&(r.validFrom=te.fromDate(e.validFrom)),e.validTo&&(r.validTo=te.fromDate(e.validTo)),await vn(n,r)}async function oT(t){const e=ne(H,"promotions",t);await _s(e)}async function aT(t){const e=kp(),n=Date.now(),r=t.name.replace(/[^a-zA-Z0-9.]/g,"_"),i=la(e,`promotion_images/${n}_${r}`),s=await oa(i,t);return await aa(s.ref)}async function lT(t,e,n,r){const i=Ee(H,"favorites");return(await Lr(i,{userId:t,product:e,modifications:n,notes:r,createdAt:te.now()})).id}async function cT(t){const e=ne(H,"favorites",t);await _s(e)}async function uT(t,e,n){const r=ne(H,"favorites",t);await vn(r,{modifications:e,notes:n,updatedAt:te.now()})}async function dT(t){const e=Ee(H,"favorites"),n=Ct(e,qe("userId","==",t));return(await et(n)).docs.map(i=>{var s;return{id:i.id,...i.data(),createdAt:(s=i.data().createdAt)==null?void 0:s.toDate()}}).sort((i,s)=>{var u,d;const o=((u=i.createdAt)==null?void 0:u.getTime())||0;return(((d=s.createdAt)==null?void 0:d.getTime())||0)-o})}const gd=Object.freeze(Object.defineProperty({__proto__:null,addFavorite:lT,createCategory:X0,createModification:UD,createOrder:pc,createProduct:G0,createPromotion:iT,createUserProfile:Z0,deleteCategory:J0,deleteModification:zD,deleteProduct:Q0,deletePromotion:oT,getActivePromotions:BD,getAllCategories:Hp,getAllModifications:MD,getAllOrders:nT,getAllProducts:W0,getAllProductsForAdmin:qp,getAllPromotions:su,getAllUsers:tT,getFavoritesByUser:dT,getOrderById:LD,getOrdersByUser:VD,getProductById:H0,getProductsByCategory:Wp,getUserByPhone:eT,getUserProfile:OD,removeFavorite:cT,searchProducts:DD,updateCategory:Y0,updateFavorite:uT,updateModification:FD,updateOrderStatus:rT,updateProduct:K0,updatePromotion:sT,updateUserProfile:fc,uploadProductImage:bD,uploadPromotionImage:aT},Symbol.toStringTag,{value:"Module"}));function $D(){const[t,e]=j.useState(null),[n,r]=j.useState(!1);j.useEffect(()=>{i()},[]);const i=async()=>{try{const u=(await su()).filter(d=>d.active&&d.showAsPopup&&s(d));if(u.length>0){const d=u[0];JSON.parse(localStorage.getItem("seenPromotions")||"[]").includes(d.id)||(e(d),r(!0))}}catch(c){console.error("Error loading popup promotion:",c)}},s=c=>{const u=new Date;return u>=new Date(c.validFrom)&&u<=new Date(c.validTo)},o=(c=!1)=>{if(c&&t){const u=JSON.parse(localStorage.getItem("seenPromotions")||"[]");u.push(t.id),localStorage.setItem("seenPromotions",JSON.stringify(u))}r(!1)};return!n||!t?null:a.jsx("div",{className:"promotion-popup-overlay",onClick:()=>o(!1),children:a.jsxs("div",{className:"promotion-popup",onClick:c=>c.stopPropagation(),children:[a.jsx("button",{className:"popup-close",onClick:()=>o(!1),children:""}),t.imageUrl&&a.jsx("div",{className:"popup-image",children:a.jsx("img",{src:t.imageUrl,alt:t.title})}),a.jsxs("div",{className:"popup-content",children:[a.jsx("h2",{children:t.title}),a.jsx("p",{children:t.description}),a.jsxs("div",{className:"popup-actions",children:[a.jsx("button",{className:"btn btn-primary",onClick:()=>o(!1),children:"Ho capito!"}),a.jsx("button",{className:"btn btn-text",onClick:()=>o(!0),children:"Non mostrare pi"})]})]})]})})}function qD({children:t,cart:e}){const[n,r]=j.useState(!1),[i,s]=j.useState(""),[o,c]=j.useState(60),u=At(),d=NC(e);j.useEffect(()=>{(async()=>{try{const x=ne(H,"config","general"),E=await Gt(x);E.exists()&&(E.data().logoUrl&&s(E.data().logoUrl),E.data().logoSize&&c(E.data().logoSize))}catch(x){console.error("Error loading logo:",x)}})()},[]);const f=()=>r(!n),m=()=>r(!1),p=[{path:"/",label:"Home",icon:""},{path:"/menu",label:"Men",icon:""},{path:"/favorites",label:"I Miei Preferiti",icon:""},{path:"/news",label:"Novit e Offerte",icon:""},{path:"/fidelity",label:"Fidelity Card",icon:""},{path:"/profile",label:"Profilo",icon:""}];return a.jsxs("div",{className:"layout",children:[a.jsx("header",{className:"header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"menu-btn",onClick:f,"aria-label":"Menu",children:a.jsx("span",{className:"menu-icon",children:""})}),a.jsx(hv,{to:"/",className:"logo",children:i?a.jsx("img",{src:i,alt:"ZeroSei Pizza",className:"logo-image",style:{height:`${o}px`,objectFit:"contain"}}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"logo-text",children:"ZeroSei"}),a.jsx("span",{className:"logo-emoji",children:""})]})}),a.jsxs("button",{className:"cart-btn",onClick:()=>u("/cart"),"aria-label":"Carrello",children:[a.jsx("span",{className:"cart-icon",children:""}),d>0&&a.jsx("span",{className:"cart-badge",children:d})]})]})}),a.jsx("div",{className:`sidebar-overlay ${n?"active":""}`,onClick:m}),a.jsxs("aside",{className:`sidebar ${n?"open":""}`,children:[a.jsxs("div",{className:"sidebar-header",children:[a.jsx("h2",{children:"Menu"}),a.jsx("button",{className:"close-btn",onClick:m,children:""})]}),a.jsx("nav",{className:"sidebar-nav",children:p.map(v=>a.jsxs(hv,{to:v.path,className:"sidebar-link",onClick:m,children:[a.jsx("span",{className:"sidebar-icon",children:v.icon}),a.jsx("span",{children:v.label})]},v.path))}),a.jsx("div",{className:"sidebar-footer",children:a.jsxs("div",{className:"social-links",children:[a.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Instagram"}),a.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Facebook"}),a.jsx("a",{href:"https://zerosei.it",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Sito Web"})]})})]}),a.jsx("main",{className:"main-content",children:t}),a.jsx("footer",{className:"footer",children:a.jsx("div",{className:"footer-content",children:a.jsx("p",{children:" 2025 ZeroSei Pizza. Tutti i diritti riservati."})})}),a.jsx($D,{})]})}const hT="+390456180120";function WD(){return`tel:${hT}`}async function fT(t,e,n){try{if(console.log("Saving phone order..."),!t||t.items.length===0){const r={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Cliente",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"Telefonico",phone:(e==null?void 0:e.phone)||"",email:""},items:[],total:0,status:"pending",source:"phone",notes:"Chiamata telefonica avviata da app"};await pc(r),console.log("Phone call event saved to Firestore")}else{const r=t.items.map(s=>({productId:s.product.id,productName:s.product.name,quantity:s.quantity,price:s.product.price,notes:s.notes,modifications:s.modifications})),i={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Cliente",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"Telefonico",phone:(e==null?void 0:e.phone)||"",email:""},items:r,total:t.total,status:"pending",source:"phone",notes:(n==null?void 0:n.notes)||"Ordine telefonico da app",deliveryAddress:(n==null?void 0:n.deliveryType)==="delivery"&&(n!=null&&n.deliveryAddress)?`${n.deliveryAddress.street}, ${n.deliveryAddress.city} - ${n.deliveryAddress.doorbell}`:null};await pc(i),console.log("Phone order saved to Firestore with cart data")}}catch(r){console.error("Error saving phone order:",r)}window.location.href=WD()}function HD(){return hT.replace(/(\+\d{2})(\d{3})(\d{3})(\d{4})/,"$1 $2 $3 $4")}const GD="393792407433";function KD(t,e,n){let r=` *Nuovo Ordine ZeroSei Pizza*

`;if(e&&(r+=` *Cliente:* ${e.name}
`,r+=` *Telefono:* ${e.phone}

`),n&&(n.deliveryType==="pickup"?(r+=` *Ritiro in Pizzeria*
`,n.pickupTime&&(r+=` *Orario preferito:* ${n.pickupTime}
`),r+=`
`):(r+=` *Consegna a Domicilio*
`,n.deliveryAddress&&(r+=` *Indirizzo:* ${n.deliveryAddress.street}, ${n.deliveryAddress.city}
`,r+=` *Campanello:* ${n.deliveryAddress.doorbell}
`),n.pickupTime&&(r+=` *Orario preferito:* ${n.pickupTime}
`),r+=`
`)),r+=`*Prodotti:*
`,t.items.forEach((i,s)=>{const o=Dc(i);r+=`${s+1}. *${i.product.name}* x${i.quantity}
`,i.modifications&&i.modifications.length>0&&(r+=`    ${i.modifications.map(c=>c.name).join(", ")}
`),r+=`    ${(o*i.quantity).toFixed(2)}
`,i.notes&&(r+=`    Note: ${i.notes}
`)}),r+=`
*Totale: ${t.total.toFixed(2)}*
`,(n==null?void 0:n.deliveryType)==="delivery"&&(r+=`_(escluse eventuali spese di trasporto)_
`),r+=`
`,n){let i="";switch(n.paymentMethod){case"cash":i="Contanti";break;case"pos":i="POS";break;case"satispay":i="Satispay";break}r+=` *Pagamento:* ${i}
`}return n!=null&&n.notes&&(r+=`
 *Note:* ${n.notes}`),r}function QD(t,e,n){const r=KD(t,e,n),i=encodeURIComponent(r);return`https://wa.me/${GD}?text=${i}`}async function Gp(t,e,n){const r=QD(t,e,n);window.open(r,"_blank");try{const i={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Guest",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"",phone:(e==null?void 0:e.phone)||"",email:""},items:t.items.map(s=>({productId:s.product.id,productName:s.product.name,quantity:s.quantity,price:Dc(s),notes:s.notes,modifications:s.modifications})),total:t.total,status:"pending",source:"whatsapp",deliveryAddress:n!=null&&n.deliveryAddress?`${n.deliveryAddress.street}, ${n.deliveryAddress.city} (Campanello: ${n.deliveryAddress.doorbell})`:null,notes:(n==null?void 0:n.notes)||null};await pc(i),console.log("Order saved to Firestore")}catch(i){console.error("Error saving order to Firestore:",i)}}const Ei={heroTitle:"Benvenuto da ZeroSei ",heroSubtitle:"La migliore pizza napoletana d'asporto della citt",featuresTitle:"Perch scegliere ZeroSei?",features:[{id:"feature1",icon:"",title:"Forno a Legna",description:"Pizza cotta nel tradizionale forno a legna"},{id:"feature2",icon:"",title:"Ingredienti Freschi",description:"Solo ingredienti di prima qualit"},{id:"feature3",icon:"",title:"Servizio Veloce",description:"Pronta in 15-20 minuti"},{id:"feature4",icon:"",title:"Ricetta Napoletana",description:"Autentica tradizione partenopea"}],buttons:[{id:"menu",icon:"",title:"Men",description:"Scopri le nostre pizze",color:"#E74C3C",visible:!0,order:1},{id:"phone",icon:"",title:"Chiama Ora",description:HD(),color:"#27AE60",visible:!0,order:2},{id:"whatsapp",icon:"",title:"Ordina su WhatsApp",description:"Ordine rapido e facile",color:"#25D366",visible:!0,order:3},{id:"fidelity",icon:"",title:"Fidelity Card",description:"I tuoi punti fedelt",color:"#F39C12",visible:!0,order:4},{id:"favorites",icon:"",title:"I Miei Preferiti",description:"Le tue pizze salvate",color:"#FFFFFF",visible:!0,order:5}]};function XD(){const t=At(),[e,n]=j.useState(Ei),[r,i]=j.useState(!0);j.useEffect(()=>{s()},[]);const s=async()=>{try{const f=ne(H,"config","home"),m=await Gt(f);if(m.exists()){const p=m.data();let v=p.buttons||Ei.buttons;const x=Ei.buttons.find(A=>A.id==="favorites");x&&!v.find(A=>A.id==="favorites")&&v.push(x);const E=Ei.buttons.find(A=>A.id==="menu");E&&!v.find(A=>A.id==="menu")&&v.push(E),n({...Ei,...p,buttons:v})}}catch(f){console.error("Error loading home config:",f)}i(!1)},o=()=>{const f=uE(),m=localStorage.getItem("user_profile");let p;if(m){const v=JSON.parse(m);p={name:`${v.firstName} ${v.lastName}`,phone:v.phone}}Gp(f,p)},c=()=>{fT()},u=f=>{switch(f){case"menu":t("/menu");break;case"phone":c();break;case"whatsapp":o();break;case"fidelity":t("/fidelity");break;case"news":t("/news");break;case"favorites":t("/favorites");break}};if(r)return a.jsx("div",{className:"home-screen fade-in",children:a.jsx("div",{className:"loading",children:"Caricamento..."})});const d=e.buttons.filter(f=>f.visible).sort((f,m)=>f.order-m.order);return a.jsxs("div",{className:"home-screen fade-in",children:[a.jsx("section",{className:"hero",children:a.jsxs("div",{className:"hero-content",children:[a.jsx("h1",{className:"hero-title",children:e.heroTitle}),a.jsx("p",{className:"hero-subtitle",children:e.heroSubtitle})]})}),a.jsx("section",{className:"cta-section",children:a.jsx("div",{className:"cta-grid",children:d.map(f=>a.jsxs("button",{className:"cta-card",style:{background:`linear-gradient(135deg, ${f.color} 0%, ${f.color}dd 100%)`,borderColor:f.color},onClick:()=>u(f.id),children:[f.imageUrl?a.jsx("img",{src:f.imageUrl,alt:f.title,className:"cta-icon-image"}):a.jsx("span",{className:"cta-icon",children:f.icon}),a.jsx("h3",{children:f.title}),a.jsx("p",{children:f.description})]},f.id))})}),a.jsxs("section",{className:"info-section",children:[a.jsx("h2",{children:e.featuresTitle||"Perch scegliere ZeroSei?"}),a.jsx("div",{className:"features-grid",children:(e.features||Ei.features||[]).map(f=>a.jsxs("div",{className:"feature",children:[a.jsx("span",{className:"feature-icon",children:f.icon}),a.jsx("h4",{children:f.title}),a.jsx("p",{children:f.description})]},f.id))})]}),a.jsxs("section",{className:"social-section",children:[a.jsx("h3",{children:"Seguici sui social"}),a.jsxs("div",{className:"social-buttons",children:[a.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"social-btn instagram",children:" Instagram"}),a.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"social-btn facebook",children:" Facebook"}),a.jsx("a",{href:"https://www.zeroseilapizzadasporto.it",target:"_blank",rel:"noopener noreferrer",className:"social-btn website",children:" Sito Web"})]})]})]})}function YD(){const t=At(),[e,n]=j.useState([]),[r,i]=j.useState(!0);j.useEffect(()=>{s()},[]);const s=async()=>{try{const u=await Hp();n(u)}catch(u){console.error("Error loading categories:",u)}i(!1)},o=u=>{const d=["var(--color-primary)","#9B59B6","var(--color-secondary)","var(--color-accent)","#3498DB","#F1C40F","#E74C3C","#1ABC9C"];return d[u%d.length]},c=u=>({"Pizze Veraci":"pizze-veraci","Pizze Classiche":"pizze-classiche","Le Nostre Proposte":"proposte",Proposte:"proposte",Calzoni:"calzoni",Bevande:"bevande",Birre:"birre"})[u]||u.toLowerCase().replace(/\s+/g,"-");return r?a.jsxs("div",{className:"menu-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Nostro Men"}),a.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Caricamento categorie..."})]}):a.jsxs("div",{className:"menu-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Nostro Men"}),a.jsx("div",{className:"categories-grid",children:e.map((u,d)=>a.jsxs("button",{className:"category-card",onClick:()=>t(`/menu/${c(u.name)}`),style:{"--category-color":o(d)},children:[a.jsx("div",{className:"category-icon",children:u.icon||""}),a.jsxs("div",{className:"category-content",children:[a.jsx("h3",{children:u.name}),a.jsx("p",{children:u.description||""})]}),a.jsx("div",{className:"category-arrow",children:""})]},u.id))})]})}function JD({cart:t,setCart:e}){const{category:n}=Mf(),r=At(),[i,s]=j.useState([]),[o,c]=j.useState(""),[u,d]=j.useState(!0);j.useEffect(()=>{f()},[n]);const f=async()=>{d(!0),console.log(" ProductListScreen: Loading products for category:",n);try{if(n){const x=await Wp(n);console.log(" ProductListScreen: Products loaded:",x.length,x),s(x)}else console.log(" ProductListScreen: No category specified")}catch(x){console.error(" ProductListScreen: Error loading products:",x)}d(!1)},m=i.filter(x=>{var E,A;return x.name.toLowerCase().includes(o.toLowerCase())||(((E=x.ingredients)==null?void 0:E.some(y=>y.toLowerCase().includes(o.toLowerCase())))??!1)||(((A=x.description)==null?void 0:A.toLowerCase().includes(o.toLowerCase()))??!1)}).sort((x,E)=>E.price-x.price),p=x=>{switch(x){case"pizze-veraci":return"Pizze Veraci";case"pizze-classiche":return"Pizze Classiche";case"proposte":return"Le Nostre Proposte";case"calzoni":return"Calzoni";case"bevande":return"Bevande";case"birre":return"Birre";default:return"Prodotti"}},v=(x,E)=>{x.stopPropagation();const A=Ff(t,E,1);e(A)};return a.jsxs("div",{className:"product-list-screen fade-in",children:[a.jsxs("div",{className:"list-header",children:[a.jsx("button",{className:"back-btn",onClick:()=>r("/menu"),children:" Indietro"}),a.jsx("h1",{children:p(n)})]}),a.jsxs("div",{className:"search-bar",children:[a.jsx("span",{className:"search-icon",children:""}),a.jsx("input",{type:"text",placeholder:"Cerca pizze o ingredienti...",value:o,onChange:x=>c(x.target.value)})]}),u?a.jsx("div",{className:"loading",children:"Caricamento..."}):a.jsxs("div",{className:"products-grid",children:[m.map(x=>{var A,y,T;const E=((A=x.imageUrl)!=null&&A.startsWith("http")?x.imageUrl:null)||((y=x.image)!=null&&y.startsWith("http")?x.image:null)||x.imageUrl||x.image;return a.jsxs("div",{className:"product-card",onClick:()=>r(`/product/${x.id}`),children:[E&&a.jsx("div",{className:"product-list-image-container",children:a.jsx("img",{src:E,alt:x.name,className:"product-list-image",onError:w=>w.currentTarget.style.display="none"})}),a.jsxs("div",{className:"product-info",children:[a.jsx("h3",{children:x.name}),a.jsx("p",{className:"ingredients",children:x.description||((T=x.ingredients)==null?void 0:T.join(", "))||""}),a.jsxs("p",{className:"price",children:["",x.price.toFixed(2)]})]}),a.jsx("button",{className:"add-btn",onClick:w=>v(w,x),children:"+"})]},x.id)}),m.length===0&&a.jsx("div",{className:"no-results",children:a.jsx("p",{children:"Nessun prodotto trovato."})})]})]})}const ou="modifications";async function pT(){try{const t=await et(Ee(H,ou)),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e}catch(t){return console.error("Error loading modifications:",t),[]}}async function ZD(t){try{console.log("Saving modification:",t);const e=ne(H,ou,t.id),n={name:t.name,price:t.price,type:t.type,available:t.available,category:t.category};console.log("Data to save:",n),await Rr(e,n),console.log("Modification saved successfully")}catch(e){throw console.error("Error saving modification:",e),e}}async function eO(t){try{await _s(ne(H,ou,t))}catch(e){throw console.error("Error deleting modification:",e),e}}async function tO(t,e){try{const n=ne(H,ou,t);await vn(n,{available:e})}catch(n){throw console.error("Error updating modification availability:",n),n}}function nO({cart:t,setCart:e}){var Mt;const{id:n}=Mf(),r=At(),i=ps(),{favoriteId:s,initialModifications:o,initialNotes:c}=i.state||{},[u,d]=j.useState(null),[f,m]=j.useState(1),[p,v]=j.useState(c||""),[x,E]=j.useState(o||[]),[A,y]=j.useState([]),[T,w]=j.useState(!0);j.useEffect(()=>{O(),I()},[n]);const I=async()=>{const ee=await pT();y(ee)},O=async()=>{if(n){try{const ee=await H0(n);d(ee)}catch(ee){console.error("Error loading product:",ee)}w(!1)}},b=ee=>{const le=f+ee;le>=1&&m(le)},N=ee=>{E(le=>le.find(G=>G.id===ee.id)?le.filter(G=>G.id!==ee.id):[...le,ee])},_=()=>x.reduce((ee,le)=>ee+le.price,0),C=()=>u?(u.price+_())*f:0,P=()=>{if(u){const ee=Ff(t,u,f,p,x);e(ee),r(-1)}},R=()=>{if(u){const ee={items:[{product:u,quantity:f,notes:p,modifications:x}],total:C()},le=localStorage.getItem("user_profile");let z;if(le){const G=JSON.parse(le);z={name:`${G.firstName} ${G.lastName}`,phone:G.phone}}Gp(ee,z)}},D=async()=>{const ee=localStorage.getItem("user_profile");if(!ee){alert("Devi aver creato un profilo per salvare i preferiti!"),r("/profile");return}if(u)try{const le=JSON.parse(ee);if(!le.id){alert("Errore: Profilo incompleto. Prova a ricaricare la pagina o aggiornare il profilo.");return}s?(await uT(s,x,p),alert("Preferito aggiornato! "),r("/favorites")):(await lT(le.id,u,x,p),alert("Pizza aggiunta ai tuoi Preferiti! "))}catch(le){console.error("Error saving favorite:",le),alert("Errore durante il salvataggio nei preferiti.")}};if(T)return a.jsx("div",{className:"loading",children:"Caricamento..."});if(!u)return a.jsx("div",{className:"error",children:"Prodotto non trovato"});const de=u.imageUrl&&u.imageUrl.startsWith("http")?u.imageUrl:u.image&&u.image.startsWith("http")?u.image:u.imageUrl||u.image;return a.jsxs("div",{className:"product-detail-screen fade-in",children:[a.jsx("button",{className:"back-btn-floating",onClick:()=>r(-1),children:""}),a.jsxs("div",{className:"product-image-container",children:[de?a.jsx("img",{src:de,alt:u.name,className:"product-image",onError:ee=>{var le;console.error("Error loading image:",de),ee.currentTarget.style.display="none",(le=ee.currentTarget.nextElementSibling)==null||le.classList.remove("hidden")}}):a.jsx("div",{className:"product-image-placeholder",children:""}),a.jsx("div",{className:"product-image-placeholder hidden",children:""})]}),a.jsxs("div",{className:"product-details-content",children:[a.jsxs("div",{className:"product-header",children:[a.jsx("h1",{children:u.name}),a.jsxs("span",{className:"product-price",children:["",u.price.toFixed(2)]})]}),a.jsx("p",{className:"product-ingredients",children:u.description||((Mt=u.ingredients)==null?void 0:Mt.join(", "))||"Nessuna descrizione disponibile"}),!u.category.includes("bevande")&&!u.category.includes("birre")&&a.jsxs("div",{className:"modifications-section",children:[a.jsx("h3",{children:"Aggiungi ingredienti"}),["Formaggi","Salumi","Verdure","Altro"].map(ee=>{const le=A.filter(z=>z.category===ee&&z.available);return le.length===0?null:a.jsxs("div",{className:"modification-category",children:[a.jsx("h4",{children:ee}),a.jsx("div",{className:"modification-grid",children:le.map(z=>a.jsxs("button",{className:`modification-btn ${x.find(G=>G.id===z.id)?"selected":""}`,onClick:()=>N(z),children:[a.jsx("span",{className:"mod-name",children:z.name}),a.jsxs("span",{className:"mod-price",children:["+",z.price.toFixed(2)]})]},z.id))})]},ee)})]}),a.jsxs("div",{className:"notes-section",children:[a.jsx("label",{htmlFor:"notes",children:"Note per la cucina"}),a.jsx("textarea",{id:"notes",placeholder:"Es: Ben cotta, no basilico...",value:p,onChange:ee=>v(ee.target.value),rows:3})]}),a.jsxs("div",{className:"quantity-selector",children:[a.jsx("button",{className:"qty-btn",onClick:()=>b(-1),disabled:f<=1,children:"-"}),a.jsx("span",{className:"qty-value",children:f}),a.jsx("button",{className:"qty-btn",onClick:()=>b(1),children:"+"})]}),a.jsxs("div",{className:"action-buttons",children:[a.jsxs("button",{className:"btn btn-primary add-to-cart-btn",onClick:P,children:["Aggiungi al carrello - ",C().toFixed(2)]}),a.jsx("button",{className:"btn btn-whatsapp order-now-btn",onClick:R,children:"Ordina subito su WhatsApp"}),a.jsx("button",{className:"btn btn-favorite save-favorite-btn",onClick:D,children:s?" Aggiorna Preferito":" Salva nei Preferiti"})]})]})]})}function rO({cart:t,setCart:e,userProfile:n}){const r=At(),[i,s]=j.useState(""),[o,c]=j.useState(""),[u,d]=j.useState("pickup"),[f,m]=j.useState(""),[p,v]=j.useState(""),[x,E]=j.useState(""),[A,y]=j.useState(""),[T,w]=j.useState("cash"),[I,O]=j.useState(""),b=(R,D)=>{const k=SC(t,R,D);e(k)},N=R=>{const D=dE(t,R);e(D)},_=()=>{if(window.confirm("Sei sicuro di voler svuotare il carrello?")){const R=IC();e(R)}},C=()=>{console.log("WhatsApp order button clicked");let R;if(n)R={name:`${n.firstName} ${n.lastName}`,phone:n.phone};else if(i&&o)R={name:i,phone:o};else{alert("Per favore inserisci il tuo nome e numero di telefono o accedi al profilo.");return}if(u==="delivery"){if(!p||!x||!A){alert("Per favore compila tutti i campi dell'indirizzo di consegna.");return}if(!f){alert("Per favore seleziona un orario di consegna.");return}}const D={deliveryType:u,pickupTime:f,deliveryAddress:u==="delivery"?{street:p,city:x,doorbell:A}:void 0,paymentMethod:T,notes:I};console.log("Opening WhatsApp with:",{cart:t,userInfo:R,orderDetails:D}),Gp(t,R,D)},P=()=>{console.log("Phone call button clicked");let R;n?R={name:`${n.firstName} ${n.lastName}`,phone:n.phone}:i&&o&&(R={name:i,phone:o});const D={deliveryType:u,pickupTime:f,deliveryAddress:u==="delivery"?{street:p,city:x,doorbell:A}:void 0,paymentMethod:T,notes:I};console.log("Calling pizzeria with:",{cart:t,userInfo:R,orderDetails:D}),fT(t,R,D)};return t.items.length===0?a.jsx("div",{className:"cart-screen empty fade-in",children:a.jsxs("div",{className:"empty-state",children:[a.jsx("span",{className:"empty-icon",children:""}),a.jsx("h2",{children:"Il tuo carrello  vuoto"}),a.jsx("p",{children:"Aggiungi qualche pizza deliziosa!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>r("/menu"),children:"Vai al Men"})]})}):a.jsxs("div",{className:"cart-screen fade-in",children:[a.jsxs("div",{className:"cart-header",children:[a.jsx("h1",{children:"Il tuo Ordine"}),a.jsx("button",{className:"clear-btn",onClick:_,children:"Svuota"})]}),a.jsx("div",{className:"cart-items",children:t.items.map((R,D)=>{const k=Dc(R);return a.jsxs("div",{className:"cart-item",children:[a.jsxs("div",{className:"item-info",children:[a.jsx("h3",{children:R.product.name}),a.jsxs("p",{className:"item-price",children:["",k.toFixed(2)," cad."]}),R.modifications&&R.modifications.length>0&&a.jsx("div",{className:"item-modifications",children:R.modifications.map(de=>a.jsxs("span",{className:"mod-tag",children:["+ ",de.name]},de.id))}),R.notes&&a.jsxs("p",{className:"item-notes",children:[" ",R.notes]})]}),a.jsxs("div",{className:"item-actions",children:[a.jsxs("div",{className:"qty-control",children:[a.jsx("button",{onClick:()=>b(D,R.quantity-1),children:"-"}),a.jsx("span",{children:R.quantity}),a.jsx("button",{onClick:()=>b(D,R.quantity+1),children:"+"})]}),a.jsxs("div",{className:"item-total",children:["",(k*R.quantity).toFixed(2)]}),a.jsx("button",{className:"remove-btn",onClick:()=>N(D),children:""})]})]},`${R.product.id}-${D}`)})}),a.jsxs("div",{className:"cart-summary",children:[a.jsxs("div",{className:"summary-row total",children:[a.jsx("span",{children:"Totale"}),a.jsxs("span",{children:["",t.total.toFixed(2)]})]}),a.jsx("p",{className:"total-disclaimer",children:"* Il totale potrebbe subire variazioni dovute a spese di consegna, ingredienti extra o altre modifiche non calcolate dall'app."})]}),a.jsxs("div",{className:"quick-order-section",children:[a.jsxs("p",{className:"quick-order-hint",children:[" ",a.jsx("strong",{children:"Ordine veloce?"})," Chiama direttamente!"]}),a.jsxs("button",{className:"btn btn-secondary full-width",onClick:P,children:[a.jsx("span",{className:"icon",children:""})," Chiama Ora - 045 618 0120"]})]}),a.jsxs("div",{className:"whatsapp-order-section",children:[a.jsx("h3",{children:"Ordina su WhatsApp"}),a.jsx("p",{className:"section-hint",children:"Compila i dettagli per ricevere il riepilogo completo"}),!n&&a.jsxs("div",{className:"guest-info-inline",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"guestName",children:"Nome e Cognome *"}),a.jsx("input",{type:"text",id:"guestName",className:"input",placeholder:"Nome e Cognome",value:i,onChange:R=>s(R.target.value)})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"guestPhone",children:"Telefono *"}),a.jsx("input",{type:"tel",id:"guestPhone",className:"input",placeholder:"Numero di Telefono",value:o,onChange:R=>c(R.target.value)})]})]}),a.jsxs("div",{className:"delivery-options-wrapper",children:[a.jsx("label",{className:"section-label",children:"Modalit di Ritiro *"}),a.jsxs("div",{className:"delivery-options",children:[a.jsxs("button",{className:`delivery-option ${u==="pickup"?"active":""}`,onClick:()=>d("pickup"),children:[a.jsx("span",{className:"option-icon",children:""}),a.jsx("span",{className:"option-label",children:"Ritiro in Pizzeria"})]}),a.jsxs("button",{className:`delivery-option ${u==="delivery"?"active":""}`,onClick:()=>d("delivery"),children:[a.jsx("span",{className:"option-icon",children:""}),a.jsx("span",{className:"option-label",children:"Consegna a Domicilio"})]})]}),u==="pickup"&&a.jsxs("div",{className:"pickup-details",children:[a.jsx("label",{htmlFor:"pickupTime",children:"Orario Preferito (opzionale)"}),a.jsx("input",{type:"time",id:"pickupTime",className:"input",value:f,onChange:R=>m(R.target.value)})]}),u==="delivery"&&a.jsxs("div",{className:"delivery-details",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"street",children:"Via e Numero Civico *"}),a.jsx("input",{type:"text",id:"street",className:"input",placeholder:"Es: Via Roma, 123",value:p,onChange:R=>v(R.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"city",children:"Paese/Citt *"}),a.jsx("input",{type:"text",id:"city",className:"input",placeholder:"Es: Verona",value:x,onChange:R=>E(R.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"doorbell",children:"Nome sul Campanello *"}),a.jsx("input",{type:"text",id:"doorbell",className:"input",placeholder:"Nome e Cognome",value:A,onChange:R=>y(R.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"deliveryTime",children:"Orario di Consegna *"}),a.jsx("input",{type:"time",id:"deliveryTime",className:"input",value:f,onChange:R=>m(R.target.value),required:!0})]}),a.jsx("label",{className:"section-label",children:"Metodo di Pagamento *"}),a.jsxs("div",{className:"payment-options",children:[a.jsx("button",{className:`payment-option ${T==="cash"?"active":""}`,onClick:()=>w("cash"),children:" Contanti"}),a.jsx("button",{className:`payment-option ${T==="pos"?"active":""}`,onClick:()=>w("pos"),children:" POS"}),a.jsx("button",{className:`payment-option ${T==="satispay"?"active":""}`,onClick:()=>w("satispay"),children:" Satispay"})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"orderNotes",children:"Note Aggiuntive (opzionale)"}),a.jsx("textarea",{id:"orderNotes",className:"input",placeholder:"Es: Suonare al citofono, non al campanello...",value:I,onChange:R=>O(R.target.value),rows:2})]})]}),a.jsxs("button",{className:"btn btn-whatsapp full-width",onClick:C,children:[a.jsx("span",{className:"icon",children:""})," Invia Ordine su WhatsApp"]}),!n&&a.jsxs("p",{className:"profile-hint",children:[" ",a.jsx("span",{onClick:()=>r("/profile"),className:"link",children:"Crea un profilo"})," per salvare i tuoi dati"]})]})]})}function iO({userProfile:t,setUserProfile:e}){const[n,r]=j.useState({firstName:"",lastName:"",phone:"",email:""}),[i,s]=j.useState(!1),[o,c]=j.useState(null),[u,d]=j.useState(!1),[f,m]=j.useState(null);j.useEffect(()=>{t?r({firstName:t.firstName,lastName:t.lastName,phone:t.phone,email:t.email}):s(!0)},[t]);const p=E=>{const{name:A,value:y}=E.target;r(T=>({...T,[A]:y}))},v=async()=>{if(t){d(!0),m(null);try{console.log("Invoking searchAndSyncFidelityPoints...");const A=await iu(jD,"searchAndSyncFidelityPoints")({email:t.email,firstName:t.firstName,lastName:t.lastName,phone:t.phone});console.log("Sync result:",A.data);const y=A.data;if(y.success){const T=ne(H,"users",t.id);await vn(T,{cassaCloudId:y.customerId,loyaltyPoints:y.points,loyaltyPointsLastSync:new Date().toISOString()}),e&&e({...t,cassaCloudId:y.customerId,loyaltyPoints:y.points,loyaltyPointsLastSync:new Date().toISOString()}),c({type:"success",text:`Fidelity Card collegata! Punti: ${y.points}`})}else m(y.message||"Errore durante la ricerca"),y.code==="CUSTOMER_NOT_FOUND"&&c({type:"error",text:"Nessuna Fidelity Card trovata. Chiedi in cassa!"})}catch(E){console.error("Sync error:",E),m("Errore di connessione. Riprova pi tardi."),c({type:"error",text:"Errore di connessione durante la sincronizzazione."})}finally{d(!1)}}},x=async E=>{if(E.preventDefault(),!n.firstName||!n.lastName||!n.phone){c({type:"error",text:"Per favore compila tutti i campi obbligatori."});return}try{const A={id:(t==null?void 0:t.id)||"",firstName:n.firstName,lastName:n.lastName,phone:n.phone,email:n.email,loyaltyPoints:(t==null?void 0:t.loyaltyPoints)||0,createdAt:t!=null&&t.createdAt?new Date(t.createdAt):new Date,updatedAt:new Date};if(t!=null&&t.id){const{id:y,...T}=A;await fc(t.id,T)}else{const y=await eT(n.phone);if(y){A.id=y.id,A.loyaltyPoints=y.loyaltyPoints,A.createdAt=y.createdAt;const{id:T,...w}=A;await fc(y.id,w)}else{const{id:T,...w}=A,I=await Z0(w);A.id=I}}localStorage.setItem("user_profile",JSON.stringify(A)),e(A),s(!1),c({type:"success",text:"Profilo salvato con successo!"})}catch(A){console.error("Error saving profile:",A),c({type:"error",text:`Errore: ${A.message||"Errore sconosciuto"}. Codice: ${A.code||"N/A"}`})}setTimeout(()=>c(null),3e3)};return a.jsxs("div",{className:"profile-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Tuo Profilo"}),o&&a.jsx("div",{className:`message ${o.type}`,children:o.text}),a.jsxs("div",{className:"profile-card",children:[a.jsxs("div",{className:"profile-header",children:[a.jsx("div",{className:"avatar-circle",children:n.firstName?n.firstName[0].toUpperCase():""}),!i&&a.jsxs("div",{className:"profile-summary",children:[a.jsxs("h2",{children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]}),a.jsx("p",{children:t==null?void 0:t.phone})]})]}),a.jsxs("form",{onSubmit:x,className:"profile-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"firstName",children:"Nome *"}),a.jsx("input",{type:"text",id:"firstName",name:"firstName",value:n.firstName,onChange:p,disabled:!i,placeholder:"Il tuo nome",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"lastName",children:"Cognome *"}),a.jsx("input",{type:"text",id:"lastName",name:"lastName",value:n.lastName,onChange:p,disabled:!i,placeholder:"Il tuo cognome",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"phone",children:"Telefono *"}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:p,disabled:!i,placeholder:"Il tuo numero di cellulare",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:p,disabled:!i,placeholder:"La tua email (opzionale)",className:"input"})]}),a.jsx("div",{className:"form-actions",children:i?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>s(!1),disabled:!t,children:"Annulla"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Salva Profilo"})]}):a.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>s(!0),children:"Modifica Dati"})})]})]}),t&&!i&&a.jsxs("div",{className:"profile-card",children:[a.jsx("h3",{children:" Fidelity Card ZeroSei"}),t.cassaCloudId?a.jsxs("div",{className:"fidelity-info",children:[a.jsxs("div",{className:"points-display",children:[a.jsx("span",{className:"points-label",children:"I tuoi Punti:"}),a.jsx("span",{className:"points-value",children:t.loyaltyPoints||0})]}),a.jsx("p",{className:"last-sync",style:{fontSize:"0.8rem",color:"#666",marginTop:"5px"},children:t.loyaltyPointsLastSync?`Aggiornato: ${new Date(t.loyaltyPointsLastSync).toLocaleString("it-IT")}`:""}),a.jsx("button",{onClick:v,disabled:u,className:"btn btn-secondary",style:{marginTop:"10px",width:"100%"},children:u?" Sincronizzazione...":" Aggiorna Punti"})]}):a.jsxs("div",{className:"fidelity-connect",children:[a.jsx("p",{children:"Per collegare la tua Fidelity Card e vedere i punti, comunica alla pizzeria l'email usata nel tuo profilo app. Una volta inserita nel gestionale, premi il pulsante qui sotto."}),a.jsx("button",{onClick:v,disabled:u,className:"btn btn-primary",style:{marginTop:"10px",width:"100%"},children:u?" Ricerca in corso...":" Collega Fidelity Card"}),f&&a.jsx("p",{className:"error-text",style:{color:"red",marginTop:"10px",fontSize:"0.9rem"},children:f})]})]}),a.jsxs("div",{className:"info-box",children:[a.jsx("h3",{children:" Perch serve il profilo?"}),a.jsx("p",{children:"I tuoi dati servono solo per pre-compilare i messaggi WhatsApp per gli ordini e per associare la tua Fidelity Card. Non vengono inviati a server esterni se non quando invii un ordine o usi la Fidelity Card."})]})]})}function sO(){const t=At(),[e,n]=j.useState([]),[r,i]=j.useState(!0);j.useEffect(()=>{s()},[]);const s=async()=>{try{const d=(await su()).filter(f=>f.active);n(d)}catch(u){console.error("Error loading promotions:",u)}i(!1)},o=u=>new Date(u).toLocaleDateString("it-IT",{day:"numeric",month:"short",year:"numeric"}),c=u=>{const d=new Date;return d>=new Date(u.validFrom)&&d<=new Date(u.validTo)};return r?a.jsxs("div",{className:"news-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Novit e Offerte"}),a.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Caricamento offerte..."})]}):a.jsxs("div",{className:"news-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Novit e Offerte"}),e.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:[a.jsx("p",{children:"Nessuna offerta disponibile al momento."}),a.jsx("p",{style:{fontSize:"0.9rem",marginTop:"8px"},children:"Torna presto per scoprire le nostre promozioni!"})]}):a.jsx("div",{className:"news-grid",children:e.map(u=>a.jsxs("div",{className:"news-card clickable",onClick:()=>t(`/offer/${u.id}`),children:[u.imageUrl?a.jsx("img",{src:u.imageUrl,alt:u.title,className:"news-image"}):a.jsx("div",{className:"news-icon",children:""}),a.jsxs("div",{className:"news-content",children:[a.jsxs("span",{className:"news-date",children:[o(u.validFrom)," - ",o(u.validTo)]}),!c(u)&&a.jsx("span",{className:"news-badge expired",children:"Scaduta"}),a.jsx("h3",{children:u.title}),a.jsx("p",{children:u.description})]})]},u.id))})]})}function oO({cart:t,setCart:e}){const n=At(),[r,i]=j.useState([]),[s,o]=j.useState(!0);j.useEffect(()=>{c()},[]);const c=async()=>{const m=localStorage.getItem("user_profile");if(!m){o(!1);return}try{const p=JSON.parse(m);if(p.id){const v=await dT(p.id);i(v)}}catch(p){console.error("Error loading favorites:",p)}o(!1)},u=async(m,p)=>{if(p.stopPropagation(),confirm("Rimuovere questo preferito?"))try{await cT(m),i(v=>v.filter(x=>x.id!==m))}catch(v){console.error("Error removing favorite:",v)}},d=(m,p)=>{p.stopPropagation();const v=Ff(t,m.product,1,m.notes,m.modifications);e(v),alert("Aggiunto al carrello! ")};return s?a.jsx("div",{className:"favorites-screen",children:a.jsx("div",{className:"loading",children:"Caricamento..."})}):localStorage.getItem("user_profile")?a.jsxs("div",{className:"favorites-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"I Miei Preferiti "}),r.length===0?a.jsxs("div",{className:"empty-favorites",children:[a.jsx("p",{children:"Non hai ancora salvato nessun preferito."}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/menu"),children:"Vai al Men"})]}):a.jsx("div",{className:"favorites-list",children:r.map(m=>a.jsxs("div",{className:"favorite-card",children:[a.jsxs("div",{className:"favorite-header",children:[a.jsx("h3",{children:m.product.name}),a.jsx("button",{className:"remove-btn",onClick:p=>u(m.id,p),"aria-label":"Rimuovi",children:""})]}),a.jsxs("div",{className:"favorite-details",children:[m.modifications&&m.modifications.length>0&&a.jsxs("div",{className:"favorite-mods",children:[a.jsx("strong",{children:"Modifiche:"}),a.jsx("ul",{children:m.modifications.map(p=>a.jsxs("li",{children:["+ ",p.name]},p.id))})]}),m.notes&&a.jsxs("div",{className:"favorite-notes",children:[a.jsx("strong",{children:"Note:"})," ",m.notes]})]}),a.jsxs("div",{className:"favorite-actions",children:[a.jsx("button",{className:"btn btn-secondary edit-fav-btn",onClick:p=>{p.stopPropagation(),n(`/product/${m.product.id}`,{state:{favoriteId:m.id,initialModifications:m.modifications,initialNotes:m.notes}})},children:" Modifica"}),a.jsx("button",{className:"btn btn-primary add-fav-to-cart",onClick:p=>d(m,p),children:"Aggiungi al Carrello"})]})]},m.id))})]}):a.jsx("div",{className:"favorites-screen fade-in",children:a.jsxs("div",{className:"login-prompt",children:[a.jsx("span",{className:"lock-icon",children:""}),a.jsx("h2",{children:"Accedi per vedere i tuoi Preferiti"}),a.jsx("p",{children:"Salva le tue pizze preferite per ordinarle velocemente!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>n("/profile"),children:"Accedi / Registrati"})]})})}function aO({userProfile:t}){const{id:e}=Mf(),n=At(),[r,i]=j.useState(null),[s,o]=j.useState(!0),[c,u]=j.useState(!1),[d,f]=j.useState(null),[m,p]=j.useState(null),[v,x]=j.useState(null),[E,A]=j.useState(!1);j.useEffect(()=>{y()},[e,t]),j.useEffect(()=>{(async()=>{if(t){console.log("[DEBUG] Controllo limite giornaliero per user:",t.id);const C=await w(t.id);console.log("[DEBUG] Limite raggiunto?",C),A(C)}else console.log("[DEBUG] userProfile non disponibile, skip controllo")})()},[t]);const y=async()=>{var _,C,P,R;if(e){try{const D=ne(H,"promotions",e),k=await Gt(D);if(k.exists()){const de=k.data(),Mt={id:k.id,title:de.title,description:de.description,imageUrl:de.imageUrl,validFrom:((_=de.validFrom)==null?void 0:_.toDate())||new Date,validTo:((C=de.validTo)==null?void 0:C.toDate())||new Date,active:de.active,showAsPopup:de.showAsPopup,createdAt:((P=de.createdAt)==null?void 0:P.toDate())||new Date,updatedAt:((R=de.updatedAt)==null?void 0:R.toDate())||new Date};if(i(Mt),t){const ee=await T(t.id,k.id);ee&&(p(ee),ee.status==="active"&&f(ee.code))}}else x("Offerta non trovata")}catch(D){console.error("Error loading offer:",D),x("Errore nel caricamento dell'offerta")}o(!1)}},T=async(_,C)=>{try{const P=Ee(H,"GeneratedCoupons"),R=Ct(P,qe("userId","==",_),qe("offerId","==",C)),D=await et(R);return D.size>0?{...D.docs[0].data(),id:D.docs[0].id}:null}catch(P){return console.error("Error checking offer activation:",P),null}},w=async _=>{try{const C=new Date;C.setHours(0,0,0,0),console.log("[DEBUG] checkDailyGlobalLimit - Controllo coupon creati oggi per user:",_),console.log("[DEBUG] Data oggi (00:00):",C);const P=Ee(H,"GeneratedCoupons"),R=Ct(P,qe("userId","==",_),qe("createdAt",">=",C)),D=await et(R);return console.log("[DEBUG] Coupon trovati oggi:",D.size),D.size>0}catch(C){return console.error("Error checking daily global limit:",C),!1}},I=()=>{const _="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let C="";for(let P=0;P<6;P++)C+=_.charAt(Math.floor(Math.random()*_.length));return C},O=async()=>{if(!t){x("Devi essere loggato per attivare un'offerta");return}if(r){u(!0),x(null);try{const _=await T(t.id,r.id);if(_){_.status==="active"?(f(_.code),p(_)):(x("Hai gi utilizzato questa offerta."),p(_)),u(!1);return}if(await w(t.id)){x(" Puoi attivare solo un'offerta al giorno. Torna domani!"),u(!1);return}const P=I(),R={userId:t.id,offerId:r.id,offerTitle:r.title,code:P,status:"active",createdAt:Gx()};await Lr(Ee(H,"GeneratedCoupons"),R),f(P),p({...R,code:P})}catch(_){console.error("Error activating offer:",_),x("Errore nell'attivazione dell'offerta. Riprova.")}u(!1)}},b=_=>new Date(_).toLocaleDateString("it-IT",{day:"numeric",month:"long",year:"numeric"});if(!t)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsxs("div",{className:"login-prompt",children:[a.jsx("span",{className:"lock-icon",children:""}),a.jsx("h2",{children:"Accedi per attivare le offerte"}),a.jsx("p",{children:"Crea un profilo per ricevere codici sconto esclusivi!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>n("/profile"),children:"Crea Profilo"})]})});if(s)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsx("div",{style:{textAlign:"center",padding:"40px"},children:"Caricamento..."})});if(v&&!r)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsxs("div",{className:"error-message",children:[a.jsx("p",{children:v}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/news"),children:"Torna alle offerte"})]})});if(!r)return null;const N=new Date>=new Date(r.validFrom)&&new Date<=new Date(r.validTo);return a.jsxs("div",{className:"offer-detail-screen fade-in",children:[a.jsx("button",{className:"back-button",onClick:()=>n("/news"),children:" Torna alle offerte"}),a.jsxs("div",{className:"offer-detail-card",children:[r.imageUrl&&a.jsx("img",{src:r.imageUrl,alt:r.title,className:"offer-detail-image"}),a.jsxs("div",{className:"offer-detail-content",children:[a.jsx("h1",{className:"offer-title",children:r.title}),a.jsxs("div",{className:"offer-validity",children:[a.jsx("span",{className:`validity-badge ${N?"valid":"expired"}`,children:N?" Offerta Valida":" Offerta Scaduta"}),a.jsxs("p",{className:"validity-dates",children:["Dal ",b(r.validFrom)," al ",b(r.validTo)]})]}),a.jsx("p",{className:"offer-description",children:r.description}),m&&m.status==="redeemed"&&a.jsxs("div",{className:"alert alert-warning",children:[a.jsx("strong",{children:" Offerta gi utilizzata"}),a.jsx("p",{children:"Hai gi riscattato questa offerta. Non puoi riattivarla."})]}),d&&(!m||m.status==="active")&&a.jsx("div",{className:"coupon-generated",children:a.jsxs("div",{className:"coupon-box",children:[a.jsx("h2",{children:" Offerta Attivata!"}),a.jsxs("div",{className:"coupon-code",children:[a.jsx("span",{className:"code-label",children:"Il tuo codice :"}),a.jsx("span",{className:"code-value",children:d})]}),a.jsxs("p",{className:"coupon-instructions",children:[" ",a.jsx("strong",{children:"Mostra questo codice in cassa"})," per ricevere lo sconto"]})]})}),!m&&N&&a.jsxs("div",{className:"activation-section",children:[E&&a.jsxs("div",{className:"alert alert-error",children:[" ",a.jsx("strong",{children:"Limite raggiunto!"}),a.jsx("br",{}),"Hai gi attivato un'offerta oggi. Torna domani per attivarne un'altra!"]}),v&&!E&&a.jsx("div",{className:"alert alert-error",children:v}),a.jsx("button",{className:"btn btn-primary btn-large",onClick:O,disabled:c||E,children:c?"Attivazione in corso...":" ATTIVA QUESTA OFFERTA"}),!E&&a.jsx("p",{className:"help-text",children:"Attiva l'offerta per ricevere il tuo codice sconto personale"})]}),!N&&a.jsx("div",{className:"alert alert-warning",children:"Questa offerta non  pi valida"})]})]})]})}const lO="modulepreload",cO=function(t){return"/app-zerosei-pizza/"+t},Vy={},Sl=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=cO(u),u in Vy)return;Vy[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":lO,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((p,v)=>{m.addEventListener("load",p),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},Kp=q0(ha);let tl=null,My=0;async function uO(){try{if(tl&&Date.now()<My)return tl;const n=(await iu(Kp,"getAccessToken")({})).data;if(n.success)return tl=n.accessToken,My=Date.now()+(n.expiresIn-600)*1e3,tl;throw new Error("Risposta API non valida (success=false)")}catch(t){throw console.error("Error getting access token via Cloud Function:",t),new Error(t.message||"Errore sconosciuto nel recupero del token")}}async function mT(t){try{const e=await uO();if(!e)return console.warn("Could not obtain access token"),{customerId:t,points:0,tier:"Member",lastUpdated:new Date};const i=(await iu(Kp,"getLoyaltyPoints")({accessToken:e,customerId:t})).data;return i.success?{customerId:i.customerId,points:i.points,tier:i.tier,lastUpdated:new Date(i.lastUpdated)}:{customerId:t,points:0,tier:"Member",lastUpdated:new Date}}catch(e){return console.error("Error fetching loyalty points via Cloud Function:",e),{customerId:t,points:0,tier:"Member",lastUpdated:new Date}}}async function dO(t){if(t.cassaCloudId)return t.cassaCloudId;try{const r=(await iu(Kp,"searchAndSyncFidelityPoints")({email:t.email,firstName:t.firstName,lastName:t.lastName,phone:t.phone})).data;return r.success&&r.customerId?(console.log("[linkCustomerProfile] Found customer:",r.customerId,"with",r.points,"points"),r.customerId):(console.log("[linkCustomerProfile] Customer not found in Cassa in Cloud"),null)}catch(e){return console.error("[linkCustomerProfile] Error:",e),null}}const hO=Object.freeze(Object.defineProperty({__proto__:null,getLoyaltyPoints:mT,linkCustomerProfile:dO},Symbol.toStringTag,{value:"Module"}));function fO({userProfile:t}){const e=At(),[n,r]=j.useState(null),[i,s]=j.useState([]),[o,c]=j.useState(!1),[u,d]=j.useState(!0);j.useEffect(()=>{f()},[]),j.useEffect(()=>{t&&(c(!0),(async()=>{let p=t.cassaCloudId;if(console.log("Initial customerId from profile:",p),!p)try{console.log("Searching for customer profile with:",t.email,t.phone);const{linkCustomerProfile:v}=await Sl(async()=>{const{linkCustomerProfile:E}=await Promise.resolve().then(()=>hO);return{linkCustomerProfile:E}},void 0),x=await v(t);if(console.log("Search result foundId:",x),x)if(p=x,t.id)try{const E=ne(H,"users",t.id);await vn(E,{cassaCloudId:x,loyaltyPointsLastSync:new Date().toISOString()}),console.log(" Saved Cassa in Cloud ID to Firestore:",p)}catch(E){console.error(" Error saving cassaCloudId to Firestore:",E)}else console.warn(" User profile not saved yet, skipping cassaCloudId save");else console.warn("Customer not found in Cassa in Cloud")}catch(v){console.error("Error linking profile:",v)}p?(console.log("Fetching points for customerId:",p),mT(p).then(v=>{r(v),c(!1)})):(console.log("No customerId available, skipping points fetch"),c(!1))})())},[t]);const f=async()=>{d(!0);try{const m=ne(H,"config","rewards"),p=await Gt(m);if(p.exists()){const x=(p.data().rewards||[]).filter(E=>E.available);s(x)}else s([])}catch(m){console.error("Error loading rewards:",m),s([])}d(!1)};return t?a.jsxs("div",{className:"fidelity-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Fidelity Card"}),a.jsx("div",{className:"card-container",children:a.jsx("div",{className:"digital-card",children:a.jsxs("div",{className:"card-front",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("span",{className:"card-logo",children:"ZeroSei "}),a.jsx("span",{className:"card-tier",children:(n==null?void 0:n.tier)||"Member"})]}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"points-display",children:[a.jsx("span",{className:"points-value",children:o?a.jsx("div",{className:"spinner","aria-label":"Caricamento punti"}):(n==null?void 0:n.points)||0}),a.jsx("span",{className:"points-label",children:"Punti"})]}),!o&&(()=>{var x;const m=(n==null?void 0:n.points)||0,p=[...i].sort((E,A)=>E.pointsRequired-A.pointsRequired),v=p.find(E=>E.pointsRequired>m);if(v){const E=v.pointsRequired-m,A=((x=p.filter(I=>I.pointsRequired<=m).pop())==null?void 0:x.pointsRequired)||0,y=v.pointsRequired-A,T=m-A,w=Math.min(100,Math.max(5,T/y*100));return a.jsxs("div",{className:"gamification-container fade-in",children:[a.jsxs("div",{className:"progress-message",children:["Ti mancano solo ",a.jsxs("strong",{children:[E," punti"]})," per ",a.jsx("strong",{children:v.name}),"! "]}),a.jsx("div",{className:"progress-bar-container",children:a.jsx("div",{className:"progress-bar-fill",style:{width:`${w}%`}})})]})}else if(i.length>0)return a.jsxs("div",{className:"gamification-container fade-in",children:[a.jsx("div",{className:"progress-message",children:"Hai raggiunto il livello massimo! Goditi i tuoi premi! "}),a.jsx("div",{className:"progress-bar-container",children:a.jsx("div",{className:"progress-bar-fill",style:{width:"100%"}})})]});return null})()]}),a.jsxs("div",{className:"card-footer",children:[a.jsxs("span",{className:"card-holder",children:[t.firstName," ",t.lastName]}),a.jsxs("span",{className:"card-id",children:["ID: ",t.phone]})]})]})})}),a.jsxs("div",{className:"rewards-section",children:[a.jsx("h2",{children:"Premi Disponibili"}),u?a.jsx("div",{className:"loading-rewards",children:"Caricamento premi..."}):i.length===0?a.jsx("div",{className:"no-rewards",children:a.jsx("p",{children:"Nessun premio disponibile al momento."})}):a.jsx("div",{className:"rewards-list",children:i.map(m=>a.jsxs("div",{className:"reward-item",children:[a.jsx("div",{className:"reward-icon",children:m.imageUrl||""}),a.jsxs("div",{className:"reward-info",children:[a.jsx("h3",{children:m.name}),a.jsx("p",{children:m.description}),a.jsxs("p",{className:"reward-points-required",children:[m.pointsRequired," Punti"]})]})]},m.id))})]}),a.jsx("div",{className:"info-box mt-xl",children:a.jsx("p",{children:"I punti vengono aggiornati automaticamente dopo ogni acquisto in cassa."})})]}):a.jsx("div",{className:"fidelity-screen fade-in",children:a.jsxs("div",{className:"login-prompt",children:[a.jsx("span",{className:"lock-icon",children:""}),a.jsx("h2",{children:"Accedi per vedere la tua Fidelity Card"}),a.jsx("p",{children:"Crea un profilo per accumulare punti e ricevere premi!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>e("/profile"),children:"Crea Profilo"})]})})}const pO="zerosei2024";function mO({onLogin:t}){const[e,n]=j.useState(""),[r,i]=j.useState(""),s=At(),o=c=>{c.preventDefault(),e===pO?(localStorage.setItem("admin_authenticated","true"),t(),s("/admin/dashboard")):(i("Password non corretta"),n(""))};return a.jsx("div",{className:"admin-login-screen",children:a.jsxs("div",{className:"admin-login-container",children:[a.jsxs("div",{className:"admin-login-header",children:[a.jsx("h1",{children:" ZeroSei Pizza"}),a.jsx("h2",{children:"Pannello Amministratore"})]}),a.jsxs("form",{onSubmit:o,className:"admin-login-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:e,onChange:c=>{n(c.target.value),i("")},placeholder:"Inserisci la password admin",autoFocus:!0})]}),r&&a.jsx("div",{className:"error-message",children:r}),a.jsx("button",{type:"submit",className:"btn-login",children:"Accedi"})]}),a.jsx("button",{className:"btn-back",onClick:()=>s("/"),children:" Torna al sito"})]})})}function gO(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[i,s]=j.useState(!1),[o,c]=j.useState(null),[u,d]=j.useState(""),[f,m]=j.useState(!1),[p,v]=j.useState({name:"",description:"",price:0,category:"pizze-veraci",image:"/placeholder-pizza.jpg",available:!0});j.useEffect(()=>{x()},[]);const x=async()=>{r(!0);try{const b=await qp();e(b)}catch(b){console.error("Error loading products:",b),alert("Errore nel caricamento dei prodotti")}r(!1)},E=async b=>{b.preventDefault();try{const N={...p,imageUrl:p.image};o?(await K0(o.id,N),alert("Prodotto aggiornato con successo!")):(await G0(N),alert("Prodotto creato con successo!")),w(),x()}catch(N){console.error("Error saving product:",N),alert("Errore nel salvataggio del prodotto")}},A=b=>{c(b),v({name:b.name,description:b.description||"",price:b.price,category:b.category,image:b.image||"/placeholder-pizza.jpg",available:b.available}),s(!0)},y=async b=>{if(confirm(`Sei sicuro di voler eliminare "${b.name}"?`))try{await Q0(b.id),alert("Prodotto eliminato con successo!"),x()}catch(N){console.error("Error deleting product:",N),alert("Errore nell'eliminazione del prodotto")}},T=async b=>{var _;const N=(_=b.target.files)==null?void 0:_[0];if(N){m(!0);try{const C=la($p,`products/${Date.now()}_${N.name}`);await oa(C,N);const P=await aa(C);v(R=>({...R,image:P}))}catch(C){console.error("Error uploading image:",C),alert("Errore durante il caricamento dell'immagine")}finally{m(!1)}}},w=()=>{v({name:"",description:"",price:0,category:"pizze-veraci",image:"/placeholder-pizza.jpg",available:!0}),c(null),s(!1)},I=t.filter(b=>{var N;return b.name.toLowerCase().includes(u.toLowerCase())||((N=b.description)==null?void 0:N.toLowerCase().includes(u.toLowerCase()))}),O=b=>({"pizze-veraci":"Pizze Veraci","pizze-classiche":"Pizze Classiche",proposte:"Le Nostre Proposte",calzoni:"Calzoni",bevande:"Bevande",birre:"Birre"})[b];return n?a.jsx("div",{className:"loading",children:"Caricamento prodotti..."}):a.jsxs("div",{className:"product-management",children:[a.jsxs("div",{className:"pm-header",children:[a.jsx("h2",{children:"Gestione Prodotti"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>s(!i),children:i?" Chiudi":"+ Nuovo Prodotto"})]}),i&&a.jsxs("div",{className:"product-form-container",children:[a.jsx("h3",{children:o?"Modifica Prodotto":"Nuovo Prodotto"}),a.jsxs("form",{onSubmit:E,className:"product-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:p.name,onChange:b=>v({...p,name:b.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Prezzo () *"}),a.jsx("input",{type:"number",step:"0.01",value:p.price,onChange:b=>v({...p,price:parseFloat(b.target.value)}),required:!0})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("textarea",{value:p.description,onChange:b=>v({...p,description:b.target.value}),rows:3})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Categoria *"}),a.jsxs("select",{value:p.category,onChange:b=>v({...p,category:b.target.value}),required:!0,children:[a.jsx("option",{value:"pizze-veraci",children:"Pizze Veraci"}),a.jsx("option",{value:"pizze-classiche",children:"Pizze Classiche"}),a.jsx("option",{value:"proposte",children:"Le Nostre Proposte"}),a.jsx("option",{value:"calzoni",children:"Calzoni"}),a.jsx("option",{value:"bevande",children:"Bevande"}),a.jsx("option",{value:"birre",children:"Birre"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Immagine prodotto"}),a.jsxs("div",{className:"image-upload-container",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:T,disabled:f,className:"file-input"}),f&&a.jsx("span",{className:"upload-status",children:"Caricamento in corso..."}),p.image&&p.image!=="/placeholder-pizza.jpg"&&a.jsx("div",{className:"image-preview",children:a.jsx("img",{src:p.image,alt:"Anteprima",style:{height:"50px",objectFit:"cover",marginTop:"10px",borderRadius:"4px"}})})]}),a.jsx("input",{type:"text",placeholder:"O incolla URL immagine",value:p.image,onChange:b=>v({...p,image:b.target.value}),style:{marginTop:"10px"}})]})]}),a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:p.available,onChange:b=>v({...p,available:b.target.checked})})," ","Disponibile"]})}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:f,children:[o?"Aggiorna":"Crea"," Prodotto"]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:w,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"pm-search",children:[a.jsx("input",{type:"text",placeholder:"Cerca prodotti...",value:u,onChange:b=>d(b.target.value)}),a.jsxs("span",{className:"product-count",children:[I.length," prodotti"]})]}),a.jsxs("div",{className:"products-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Nome"}),a.jsx("th",{children:"Categoria"}),a.jsx("th",{children:"Prezzo"}),a.jsx("th",{children:"Stato"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:I.map(b=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("strong",{children:b.name}),b.description&&a.jsx("div",{className:"product-desc",children:b.description})]}),a.jsx("td",{children:a.jsx("span",{className:"category-badge",children:O(b.category)})}),a.jsxs("td",{className:"price-cell",children:["",b.price.toFixed(2)]}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${b.available?"available":"unavailable"}`,children:b.available?"Disponibile":"Non disponibile"})}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>A(b),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>y(b),title:"Elimina",children:""})]})]},b.id))})]}),I.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun prodotto trovato"})})]})]})}function vO(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[i,s]=j.useState(!1),[o,c]=j.useState(null),[u,d]=j.useState({name:"",description:"",icon:"",order:0,imageUrl:""});j.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const E=await Hp();e(E)}catch(E){console.error("Error loading categories:",E),alert("Errore nel caricamento delle categorie")}r(!1)},m=async E=>{E.preventDefault();try{o?(await Y0(o.id,u),alert("Categoria aggiornata con successo!")):(await X0(u),alert("Categoria creata con successo!")),x(),f()}catch(A){console.error("Error saving category:",A),alert("Errore nel salvataggio della categoria")}},p=E=>{c(E),d({name:E.name,description:E.description||"",icon:E.icon||"",order:E.order,imageUrl:E.imageUrl||""}),s(!0)},v=async E=>{if(confirm(`Sei sicuro di voler eliminare la categoria "${E.name}"?`))try{await J0(E.id),alert("Categoria eliminata con successo!"),f()}catch(A){console.error("Error deleting category:",A),alert("Errore nell'eliminazione della categoria")}},x=()=>{d({name:"",description:"",icon:"",order:0,imageUrl:""}),c(null),s(!1)};return n?a.jsx("div",{className:"loading",children:"Caricamento categorie..."}):a.jsxs("div",{className:"category-management",children:[a.jsxs("div",{className:"cm-header",children:[a.jsx("h2",{children:"Gestione Categorie"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>s(!i),children:i?" Chiudi":"+ Nuova Categoria"})]}),i&&a.jsxs("div",{className:"category-form-container",children:[a.jsx("h3",{children:o?"Modifica Categoria":"Nuova Categoria"}),a.jsxs("form",{onSubmit:m,className:"category-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:u.name,onChange:E=>d({...u,name:E.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Ordine *"}),a.jsx("input",{type:"number",value:u.order,onChange:E=>d({...u,order:parseInt(E.target.value)}),required:!0}),a.jsx("small",{style:{color:"#666",fontSize:"0.85rem"},children:"Ordine di visualizzazione nel menu"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("textarea",{value:u.description,onChange:E=>d({...u,description:E.target.value}),rows:3})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",placeholder:"es. ",value:u.icon,onChange:E=>d({...u,icon:E.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"URL Immagine"}),a.jsx("input",{type:"text",placeholder:"URL dell'immagine della categoria",value:u.imageUrl,onChange:E=>d({...u,imageUrl:E.target.value})})]})]}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[o?"Aggiorna":"Crea"," Categoria"]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:x,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"categories-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Ordine"}),a.jsx("th",{children:"Nome"}),a.jsx("th",{children:"Descrizione"}),a.jsx("th",{children:"Icona"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:t.map(E=>a.jsxs("tr",{children:[a.jsx("td",{className:"order-cell",children:E.order}),a.jsx("td",{children:a.jsx("strong",{children:E.name})}),a.jsx("td",{children:a.jsx("div",{className:"category-desc",children:E.description||"-"})}),a.jsx("td",{className:"icon-cell",children:E.icon||"-"}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>p(E),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>v(E),title:"Elimina",children:""})]})]},E.id))})]}),t.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessuna categoria trovata"})})]})]})}function Uy({mode:t="promotion"}){const[e,n]=j.useState([]),[r,i]=j.useState(!0),[s,o]=j.useState(!1),[c,u]=j.useState(null),[d,f]=j.useState({title:"",description:"",imageUrl:"",validFrom:new Date,validTo:new Date(Date.now()+7*24*60*60*1e3),active:!0,showAsPopup:!1});j.useEffect(()=>{m()},[t]);const m=async()=>{i(!0);try{const I=(await su()).filter(O=>(O.type||"promotion")===t);n(I)}catch(w){console.error("Error loading items:",w),alert("Errore nel caricamento")}i(!1)},p=async w=>{w.preventDefault();try{const I={...d,type:t};c?(await sT(c.id,I),alert(`${t==="news"?"Novit":"Promozione"} aggiornata con successo!`)):(await iT(I),alert(`${t==="news"?"Novit":"Promozione"} creata con successo!`)),E(),m()}catch(I){console.error("Error saving item:",I),alert("Errore nel salvataggio")}},v=w=>{u(w),f({title:w.title,description:w.description,imageUrl:w.imageUrl||"",validFrom:w.validFrom,validTo:w.validTo,active:w.active,showAsPopup:w.showAsPopup||!1}),o(!0)},x=async w=>{if(confirm(`Sei sicuro di voler eliminare "${w.title}"?`))try{await oT(w.id),alert("Elemento eliminato con successo!"),m()}catch(I){console.error("Error deleting item:",I),alert("Errore nell'eliminazione")}},E=()=>{f({title:"",description:"",imageUrl:"",validFrom:new Date,validTo:new Date(Date.now()+7*24*60*60*1e3),active:!0,showAsPopup:!1}),u(null),o(!1)},A=w=>new Date(w).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"}),y=w=>{const I=new Date(w),O=I.getFullYear(),b=String(I.getMonth()+1).padStart(2,"0"),N=String(I.getDate()).padStart(2,"0");return`${O}-${b}-${N}`};if(r)return a.jsx("div",{className:"loading",children:"Caricamento..."});const T=t==="news"?"Novit":"Promozione";return a.jsxs("div",{className:"promotion-management",children:[a.jsxs("div",{className:"pm-header",children:[a.jsxs("h2",{children:["Gestione ",t==="news"?"Novit":"Promozioni"]}),a.jsx("button",{className:"btn btn-primary",onClick:()=>o(!s),children:s?" Chiudi":`+ Nuova ${T}`})]}),s&&a.jsxs("div",{className:"promotion-form-container",children:[a.jsx("h3",{children:c?`Modifica ${T}`:`Nuova ${T}`}),a.jsxs("form",{onSubmit:p,className:"promotion-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Titolo *"}),a.jsx("input",{type:"text",value:d.title,onChange:w=>f({...d,title:w.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione *"}),a.jsx("textarea",{value:d.description,onChange:w=>f({...d,description:w.target.value}),rows:4,required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Immagine"}),a.jsxs("div",{className:"image-upload-container",children:[a.jsx("input",{type:"text",placeholder:"URL dell'immagine (o carica file sotto)",value:d.imageUrl,onChange:w=>f({...d,imageUrl:w.target.value})}),a.jsxs("div",{className:"file-upload-wrapper",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:async w=>{var O;const I=(O=w.target.files)==null?void 0:O[0];if(I)try{const b=await aT(I);f(N=>({...N,imageUrl:b}))}catch(b){console.error("Error uploading image:",b),alert("Errore nel caricamento dell'immagine")}},style:{marginTop:"8px"}}),a.jsx("small",{style:{display:"block",color:"#666",marginTop:"4px"},children:"Carica un'immagine dal tuo dispositivo (JPG, PNG)"})]}),d.imageUrl&&a.jsx("div",{className:"image-preview",style:{marginTop:"10px"},children:a.jsx("img",{src:d.imageUrl,alt:"Preview",style:{maxHeight:"100px",borderRadius:"4px",border:"1px solid #ddd"},onError:w=>w.currentTarget.style.display="none"})})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Valida dal *"}),a.jsx("input",{type:"date",value:y(d.validFrom),onChange:w=>f({...d,validFrom:new Date(w.target.value)}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Valida fino al *"}),a.jsx("input",{type:"date",value:y(d.validTo),onChange:w=>f({...d,validTo:new Date(w.target.value)}),required:!0})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:d.active,onChange:w=>f({...d,active:w.target.checked})})," ","Attiva"]})}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:d.showAsPopup,onChange:w=>f({...d,showAsPopup:w.target.checked})})," ","Mostra come Popup"]}),a.jsxs("small",{style:{color:"#666",fontSize:"0.85rem",marginTop:"4px"},children:[t==="news"?"La novit":"La promozione"," apparir come popup all'apertura dell'app"]})]})]}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[c?"Aggiorna":"Crea"," ",T]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:E,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"promotions-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Titolo"}),a.jsx("th",{children:"Periodo"}),a.jsx("th",{children:"Stato"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:e.map(w=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("strong",{children:w.title}),a.jsx("div",{className:"promotion-desc",children:w.description})]}),a.jsx("td",{children:a.jsxs("div",{className:"date-range",children:[A(w.validFrom)," - ",A(w.validTo)]})}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${w.active?"active":"inactive"}`,children:w.active?"Attiva":"Non attiva"})}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>v(w),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>x(w),title:"Elimina",children:""})]})]},w.id))})]}),e.length===0&&a.jsx("div",{className:"empty-state",children:a.jsxs("p",{children:["Nessuna ",t==="news"?"novit":"promozione"," trovata"]})})]})]})}function Fy(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[i,s]=j.useState("all"),[o,c]=j.useState(null);j.useEffect(()=>{u()},[]);const u=async()=>{r(!0);try{const y=await nT();e(y)}catch(y){console.error("Error loading orders:",y),alert("Errore nel caricamento degli ordini")}r(!1)},d=async(y,T)=>{try{await rT(y,T),e(t.map(w=>w.id===y?{...w,status:T}:w)),o&&o.id===y&&c({...o,status:T})}catch(w){console.error("Error updating order status:",w),alert("Errore nell'aggiornamento dello stato")}},f=y=>{switch(y){case"pending":return"In Attesa";case"confirmed":return"Confermato";case"preparing":return"In Preparazione";case"ready":return"Pronto";case"delivered":return"Consegnato";case"cancelled":return"Annullato";default:return y}},m=y=>{switch(y){case"pending":return"#ff9800";case"confirmed":return"#2196f3";case"preparing":return"#9c27b0";case"ready":return"#009688";case"delivered":return"#4caf50";case"cancelled":return"#f44336";default:return"#9e9e9e"}},p=y=>{switch(y){case"whatsapp":return"";case"phone":return"";case"web":return"";default:return""}},v=i==="all"?t:t.filter(y=>y.status===i),x=new Date;x.setHours(0,0,0,0);const E=t.filter(y=>{const T=new Date(y.createdAt);return T.setHours(0,0,0,0),T.getTime()===x.getTime()}),A={totalToday:E.length,whatsappToday:E.filter(y=>y.source==="whatsapp").length,phoneToday:E.filter(y=>y.source==="phone").length,revenueToday:E.reduce((y,T)=>y+(T.total||0),0)};return n?a.jsx("div",{className:"loading",children:"Caricamento ordini..."}):a.jsxs("div",{className:"order-management",children:[a.jsxs("div",{className:"om-header",children:[a.jsx("h2",{children:"Gestione Ordini"}),a.jsx("button",{className:"btn btn-outline",onClick:u,children:" Aggiorna"})]}),a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Ordini Oggi"}),a.jsx("p",{className:"stat-value",children:A.totalToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"WhatsApp"}),a.jsx("p",{className:"stat-value",children:A.whatsappToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Telefono"}),a.jsx("p",{className:"stat-value",children:A.phoneToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Incasso Oggi"}),a.jsxs("p",{className:"stat-value",children:["",A.revenueToday.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"om-content",children:[a.jsxs("div",{className:"orders-list-container",children:[a.jsx("div",{className:"filters",children:a.jsxs("select",{value:i,onChange:y=>s(y.target.value),className:"status-filter",children:[a.jsx("option",{value:"all",children:"Tutti gli stati"}),a.jsx("option",{value:"pending",children:"In Attesa"}),a.jsx("option",{value:"confirmed",children:"Confermati"}),a.jsx("option",{value:"preparing",children:"In Preparazione"}),a.jsx("option",{value:"ready",children:"Pronti"}),a.jsx("option",{value:"delivered",children:"Consegnati"}),a.jsx("option",{value:"cancelled",children:"Annullati"})]})}),a.jsx("div",{className:"orders-list",children:v.length===0?a.jsx("div",{className:"empty-state",children:"Nessun ordine trovato"}):v.map(y=>a.jsxs("div",{className:`order-card ${(o==null?void 0:o.id)===y.id?"selected":""}`,onClick:()=>c(y),children:[a.jsxs("div",{className:"order-card-header",children:[a.jsx("span",{className:"order-source",title:y.source,children:p(y.source)}),a.jsx("span",{className:"order-date",children:new Date(y.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),a.jsx("span",{className:"order-status-badge",style:{backgroundColor:m(y.status)},children:f(y.status)})]}),a.jsxs("div",{className:"order-card-body",children:[a.jsxs("h4",{children:[y.userProfile.firstName," ",y.userProfile.lastName]}),a.jsxs("p",{className:"order-total",children:["",y.total.toFixed(2)]})]})]},y.id))})]}),o?a.jsxs("div",{className:"order-details-panel",children:[a.jsxs("div",{className:"od-header",children:[a.jsx("h3",{children:"Dettaglio Ordine"}),a.jsx("button",{className:"close-details",onClick:()=>c(null),children:""})]}),a.jsxs("div",{className:"od-content",children:[a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Cliente"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Nome:"})," ",o.userProfile.firstName," ",o.userProfile.lastName]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Telefono:"})," ",o.userProfile.phone]}),o.deliveryAddress&&a.jsxs("p",{children:[a.jsx("strong",{children:"Indirizzo:"})," ",o.deliveryAddress]})]}),a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Prodotti"}),a.jsx("ul",{className:"od-items",children:o.items.map((y,T)=>a.jsxs("li",{children:[a.jsxs("div",{className:"od-item-main",children:[a.jsxs("span",{children:[y.quantity,"x ",y.productName]}),a.jsxs("span",{children:["",(y.price*y.quantity).toFixed(2)]})]}),y.modifications&&y.modifications.length>0&&a.jsx("div",{className:"od-item-mods",children:y.modifications.map(w=>`+ ${w.name}`).join(", ")}),y.notes&&a.jsxs("div",{className:"od-item-notes",children:[" ",y.notes]})]},T))}),a.jsxs("div",{className:"od-total",children:[a.jsx("span",{children:"Totale"}),a.jsxs("span",{children:["",o.total.toFixed(2)]})]})]}),o.notes&&a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Note Ordine"}),a.jsx("p",{children:o.notes})]}),a.jsxs("div",{className:"od-actions",children:[a.jsx("h4",{children:"Aggiorna Stato"}),a.jsxs("div",{className:"status-buttons",children:[a.jsx("button",{className:`btn-status ${o.status==="confirmed"?"active":""}`,onClick:()=>d(o.id,"confirmed"),style:{borderColor:"#2196f3",color:"#2196f3"},children:"Conferma"}),a.jsx("button",{className:`btn-status ${o.status==="preparing"?"active":""}`,onClick:()=>d(o.id,"preparing"),style:{borderColor:"#9c27b0",color:"#9c27b0"},children:"In Prep."}),a.jsx("button",{className:`btn-status ${o.status==="ready"?"active":""}`,onClick:()=>d(o.id,"ready"),style:{borderColor:"#009688",color:"#009688"},children:"Pronto"}),a.jsx("button",{className:`btn-status ${o.status==="delivered"?"active":""}`,onClick:()=>d(o.id,"delivered"),style:{borderColor:"#4caf50",color:"#4caf50"},children:"Consegnato"}),a.jsx("button",{className:`btn-status ${o.status==="cancelled"?"active":""}`,onClick:()=>d(o.id,"cancelled"),style:{borderColor:"#f44336",color:"#f44336"},children:"Annulla"})]})]})]})]}):a.jsx("div",{className:"order-details-placeholder",children:a.jsx("p",{children:"Seleziona un ordine per visualizzare i dettagli"})})]})]})}function yO(){return a.jsxs("div",{className:"cassa-cloud-settings",children:[a.jsx("h2",{children:" Configurazione Cassa in Cloud"}),a.jsxs("div",{className:"info-section",style:{padding:"20px",backgroundColor:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107"},children:[a.jsx("h3",{children:" Configurazione Spostata nel Backend"}),a.jsx("p",{children:"Per motivi di sicurezza, l'API Key di Cassa in Cloud non viene pi configurata nel frontend dell'app."}),a.jsx("p",{style:{marginTop:"15px"},children:a.jsx("strong",{children:"La configurazione  ora gestita tramite Firebase Functions:"})}),a.jsxs("ol",{style:{marginTop:"10px",marginLeft:"20px"},children:[a.jsx("li",{children:"Apri il terminale nella cartella del progetto"}),a.jsxs("li",{children:["Esegui il comando:",a.jsx("code",{style:{display:"block",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px",marginTop:"5px",fontFamily:"monospace"},children:'firebase functions:config:set cassanova.api_key="TUA_API_KEY"'})]}),a.jsxs("li",{children:["Deploy delle functions:",a.jsx("code",{style:{display:"block",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px",marginTop:"5px",fontFamily:"monospace"},children:"firebase deploy --only functions"})]})]}),a.jsx("p",{style:{marginTop:"15px",fontSize:"0.9em",color:"#666"},children:" Questa modifica garantisce che l'API Key non sia mai esposta al codice frontend e quindi non sia visibile agli utenti."})]}),a.jsxs("div",{className:"api-info",style:{marginTop:"20px"},children:[a.jsx("h3",{children:" Informazioni Tecniche"}),a.jsxs("div",{className:"info-grid",children:[a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"Program ID ZeroSei 24/25:"}),a.jsx("code",{children:"3159"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"URL Base API:"}),a.jsx("code",{children:"https://api.cassanova.com"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"API Version:"}),a.jsx("code",{children:"2.0.0"})]})]})]})]})}const qs={colorPrimary:"#E74C3C",colorPrimaryDark:"#C0392B",colorPrimaryLight:"#EC7063",colorSecondary:"#27AE60",colorSecondaryDark:"#229954",colorSecondaryLight:"#58D68D",colorAccent:"#F39C12",colorAccentDark:"#D68910",colorBg:"#FFFFFF",colorBgSecondary:"#F8F9FA",colorBgTertiary:"#ECF0F1",colorText:"#2C3E50",colorTextSecondary:"#7F8C8D",colorTextLight:"#95A5A6",colorBorder:"#E0E0E0",fontSizeBase:"1rem",fontSizeSm:"0.875rem",fontSizeLg:"1.125rem",fontSizeXl:"1.25rem",fontSize2xl:"1.5rem",fontSize3xl:"2rem",fontSize4xl:"2.5rem",spacingSm:"0.5rem",spacingMd:"1rem",spacingLg:"1.5rem",spacingXl:"2rem",spacing2xl:"3rem",radiusSm:"0.25rem",radiusMd:"0.5rem",radiusLg:"1rem",radiusXl:"1.5rem",iconOrders:"",iconProducts:"",iconIngredients:"",iconCategories:"",iconPromotions:"",iconCustomers:"",iconSettings:"",statusBarColor:"#000000",statusBarStyle:"black"};function _O(){const[t,e]=j.useState(qs),[n,r]=j.useState(!0),[i,s]=j.useState(!1),[o,c]=j.useState("colors");j.useEffect(()=>{u()},[]),j.useEffect(()=>{d(t)},[t]);const u=async()=>{r(!0);try{const v=ne(H,"config","theme"),x=await Gt(v);if(x.exists()){const E={...qs,...x.data()};e(E),d(E)}}catch(v){console.error("Error loading theme:",v)}r(!1)},d=v=>{const x=document.documentElement;x.style.setProperty("--color-primary",v.colorPrimary),x.style.setProperty("--color-primary-dark",v.colorPrimaryDark),x.style.setProperty("--color-primary-light",v.colorPrimaryLight),x.style.setProperty("--color-secondary",v.colorSecondary),x.style.setProperty("--color-secondary-dark",v.colorSecondaryDark),x.style.setProperty("--color-secondary-light",v.colorSecondaryLight),x.style.setProperty("--color-accent",v.colorAccent),x.style.setProperty("--color-accent-dark",v.colorAccentDark),x.style.setProperty("--color-bg",v.colorBg),x.style.setProperty("--color-bg-secondary",v.colorBgSecondary),x.style.setProperty("--color-bg-tertiary",v.colorBgTertiary),x.style.setProperty("--color-text",v.colorText),x.style.setProperty("--color-text-secondary",v.colorTextSecondary),x.style.setProperty("--color-text-light",v.colorTextLight),x.style.setProperty("--color-border",v.colorBorder),x.style.setProperty("--font-size-base",v.fontSizeBase),x.style.setProperty("--font-size-sm",v.fontSizeSm),x.style.setProperty("--font-size-lg",v.fontSizeLg),x.style.setProperty("--font-size-xl",v.fontSizeXl),x.style.setProperty("--font-size-2xl",v.fontSize2xl),x.style.setProperty("--font-size-3xl",v.fontSize3xl),x.style.setProperty("--font-size-4xl",v.fontSize4xl),x.style.setProperty("--spacing-sm",v.spacingSm),x.style.setProperty("--spacing-md",v.spacingMd),x.style.setProperty("--spacing-lg",v.spacingLg),x.style.setProperty("--spacing-xl",v.spacingXl),x.style.setProperty("--spacing-2xl",v.spacing2xl),x.style.setProperty("--radius-sm",v.radiusSm),x.style.setProperty("--radius-md",v.radiusMd),x.style.setProperty("--radius-lg",v.radiusLg),x.style.setProperty("--radius-xl",v.radiusXl)},f=async()=>{s(!0);try{await Rr(ne(H,"config","theme"),{...t,updatedAt:new Date}),alert("Tema salvato con successo! ")}catch(v){console.error("Error saving theme:",v),alert("Errore nel salvataggio del tema")}s(!1)},m=async()=>{if(confirm("Sei sicuro di voler ripristinare il tema predefinito?")){e(qs),d(qs);try{await Rr(ne(H,"config","theme"),{...qs,updatedAt:new Date}),alert("Tema ripristinato! ")}catch(v){console.error("Error resetting theme:",v)}}},p=(v,x)=>{e(E=>({...E,[v]:x}))};return n?a.jsx("div",{className:"loading",children:"Caricamento tema..."}):a.jsxs("div",{className:"theme-customizer",children:[a.jsxs("div",{className:"theme-header",children:[a.jsx("h2",{children:" Personalizzazione Tema"}),a.jsx("p",{className:"theme-description",children:"Personalizza tutti gli aspetti estetici dell'applicazione"})]}),a.jsxs("div",{className:"theme-tabs",children:[a.jsx("button",{className:`theme-tab ${o==="colors"?"active":""}`,onClick:()=>c("colors"),children:" Colori"}),a.jsx("button",{className:`theme-tab ${o==="typography"?"active":""}`,onClick:()=>c("typography"),children:" Tipografia"}),a.jsx("button",{className:`theme-tab ${o==="spacing"?"active":""}`,onClick:()=>c("spacing"),children:" Spaziature"}),a.jsx("button",{className:`theme-tab ${o==="radius"?"active":""}`,onClick:()=>c("radius"),children:" Arrotondamenti"}),a.jsx("button",{className:`theme-tab ${o==="icons"?"active":""}`,onClick:()=>c("icons"),children:" Icone Admin"})]}),a.jsxs("div",{className:"theme-content",children:[o==="colors"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Colori Primari"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Primario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimary,onChange:v=>p("colorPrimary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimary,onChange:v=>p("colorPrimary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Primario Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimaryDark,onChange:v=>p("colorPrimaryDark",v.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimaryDark,onChange:v=>p("colorPrimaryDark",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Primario Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimaryLight,onChange:v=>p("colorPrimaryLight",v.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimaryLight,onChange:v=>p("colorPrimaryLight",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Secondari"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondary,onChange:v=>p("colorSecondary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondary,onChange:v=>p("colorSecondary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Secondario Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondaryDark,onChange:v=>p("colorSecondaryDark",v.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondaryDark,onChange:v=>p("colorSecondaryDark",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Secondario Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondaryLight,onChange:v=>p("colorSecondaryLight",v.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondaryLight,onChange:v=>p("colorSecondaryLight",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Accent"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Accent"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorAccent,onChange:v=>p("colorAccent",v.target.value)}),a.jsx("input",{type:"text",value:t.colorAccent,onChange:v=>p("colorAccent",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Accent Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorAccentDark,onChange:v=>p("colorAccentDark",v.target.value)}),a.jsx("input",{type:"text",value:t.colorAccentDark,onChange:v=>p("colorAccentDark",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Sfondo"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Principale"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBg,onChange:v=>p("colorBg",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBg,onChange:v=>p("colorBg",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBgSecondary,onChange:v=>p("colorBgSecondary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBgSecondary,onChange:v=>p("colorBgSecondary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Terziario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBgTertiary,onChange:v=>p("colorBgTertiary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBgTertiary,onChange:v=>p("colorBgTertiary",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Testo"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Principale"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorText,onChange:v=>p("colorText",v.target.value)}),a.jsx("input",{type:"text",value:t.colorText,onChange:v=>p("colorText",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorTextSecondary,onChange:v=>p("colorTextSecondary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorTextSecondary,onChange:v=>p("colorTextSecondary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorTextLight,onChange:v=>p("colorTextLight",v.target.value)}),a.jsx("input",{type:"text",value:t.colorTextLight,onChange:v=>p("colorTextLight",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Altri Colori"}),a.jsx("div",{className:"color-grid",children:a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Bordi"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBorder,onChange:v=>p("colorBorder",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBorder,onChange:v=>p("colorBorder",v.target.value),className:"color-text-input"})]})]})}),a.jsx("h3",{children:" Status Bar Mobile"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Status Bar"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.statusBarColor||"#000000",onChange:v=>p("statusBarColor",v.target.value)}),a.jsx("input",{type:"text",value:t.statusBarColor||"#000000",onChange:v=>p("statusBarColor",v.target.value),className:"color-text-input"})]}),a.jsx("p",{className:"hint",children:" Colore della barra superiore del telefono"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Stile Status Bar iOS"}),a.jsxs("select",{value:t.statusBarStyle||"black",onChange:v=>p("statusBarStyle",v.target.value),className:"select-input",children:[a.jsx("option",{value:"default",children:"Default (bianco)"}),a.jsx("option",{value:"black",children:"Black (nero)"}),a.jsx("option",{value:"black-translucent",children:"Black Translucent"})]}),a.jsx("p",{className:"hint",children:" Stile per iPhone/iPad"})]})]})]}),o==="typography"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Dimensioni Font"}),a.jsxs("div",{className:"typography-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Base (16px default)"}),a.jsx("input",{type:"text",value:t.fontSizeBase,onChange:v=>p("fontSizeBase",v.target.value),placeholder:"1rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Small"}),a.jsx("input",{type:"text",value:t.fontSizeSm,onChange:v=>p("fontSizeSm",v.target.value),placeholder:"0.875rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Large"}),a.jsx("input",{type:"text",value:t.fontSizeLg,onChange:v=>p("fontSizeLg",v.target.value),placeholder:"1.125rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font XL"}),a.jsx("input",{type:"text",value:t.fontSizeXl,onChange:v=>p("fontSizeXl",v.target.value),placeholder:"1.25rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 2XL"}),a.jsx("input",{type:"text",value:t.fontSize2xl,onChange:v=>p("fontSize2xl",v.target.value),placeholder:"1.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 3XL"}),a.jsx("input",{type:"text",value:t.fontSize3xl,onChange:v=>p("fontSize3xl",v.target.value),placeholder:"2rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 4XL"}),a.jsx("input",{type:"text",value:t.fontSize4xl,onChange:v=>p("fontSize4xl",v.target.value),placeholder:"2.5rem"})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 1rem, 1.5rem) o px (es: 16px, 24px)"})]}),o==="spacing"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Spaziature"}),a.jsxs("div",{className:"spacing-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Small"}),a.jsx("input",{type:"text",value:t.spacingSm,onChange:v=>p("spacingSm",v.target.value),placeholder:"0.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Medium"}),a.jsx("input",{type:"text",value:t.spacingMd,onChange:v=>p("spacingMd",v.target.value),placeholder:"1rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Large"}),a.jsx("input",{type:"text",value:t.spacingLg,onChange:v=>p("spacingLg",v.target.value),placeholder:"1.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing XL"}),a.jsx("input",{type:"text",value:t.spacingXl,onChange:v=>p("spacingXl",v.target.value),placeholder:"2rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing 2XL"}),a.jsx("input",{type:"text",value:t.spacing2xl,onChange:v=>p("spacing2xl",v.target.value),placeholder:"3rem"})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 1rem, 2rem) o px (es: 16px, 32px)"})]}),o==="radius"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Arrotondamenti Bordi"}),a.jsxs("div",{className:"radius-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Small"}),a.jsx("input",{type:"text",value:t.radiusSm,onChange:v=>p("radiusSm",v.target.value),placeholder:"0.25rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusSm}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Medium"}),a.jsx("input",{type:"text",value:t.radiusMd,onChange:v=>p("radiusMd",v.target.value),placeholder:"0.5rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusMd}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Large"}),a.jsx("input",{type:"text",value:t.radiusLg,onChange:v=>p("radiusLg",v.target.value),placeholder:"1rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusLg}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius XL"}),a.jsx("input",{type:"text",value:t.radiusXl,onChange:v=>p("radiusXl",v.target.value),placeholder:"1.5rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusXl}})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 0.5rem, 1rem) o px (es: 8px, 16px)"})]}),o==="icons"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Icone Sidebar Admin"}),a.jsxs("div",{className:"icons-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Ordini"}),a.jsx("input",{type:"text",value:t.iconOrders,onChange:v=>p("iconOrders",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconOrders})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Prodotti"}),a.jsx("input",{type:"text",value:t.iconProducts,onChange:v=>p("iconProducts",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconProducts})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Ingredienti"}),a.jsx("input",{type:"text",value:t.iconIngredients,onChange:v=>p("iconIngredients",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconIngredients})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Categorie"}),a.jsx("input",{type:"text",value:t.iconCategories,onChange:v=>p("iconCategories",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconCategories})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Promozioni"}),a.jsx("input",{type:"text",value:t.iconPromotions,onChange:v=>p("iconPromotions",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconPromotions})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Clienti"}),a.jsx("input",{type:"text",value:t.iconCustomers,onChange:v=>p("iconCustomers",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconCustomers})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Impostazioni"}),a.jsx("input",{type:"text",value:t.iconSettings,onChange:v=>p("iconSettings",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconSettings})]})]}),a.jsx("p",{className:"hint",children:" Usa emoji o caratteri speciali (max 2 caratteri)"})]})]}),a.jsxs("div",{className:"theme-actions",children:[a.jsx("button",{className:"btn-reset",onClick:m,disabled:i,children:" Ripristina Default"}),a.jsx("button",{className:"btn-save",onClick:f,disabled:i,children:i?" Salvataggio...":" Salva Modifiche"})]})]})}const Ws={heroTitle:"Benvenuto da ZeroSei ",heroSubtitle:"La migliore pizza napoletana d'asporto della citt",featuresTitle:"Perch scegliere ZeroSei?",features:[{id:"feature1",icon:"",title:"Forno a Legna",description:"Pizza cotta nel tradizionale forno a legna"},{id:"feature2",icon:"",title:"Ingredienti Freschi",description:"Solo ingredienti di prima qualit"},{id:"feature3",icon:"",title:"Servizio Veloce",description:"Pronta in 15-20 minuti"},{id:"feature4",icon:"",title:"Ricetta Napoletana",description:"Autentica tradizione partenopea"}],buttons:[{id:"menu",icon:"",title:"Men",description:"Scopri le nostre pizze",color:"#E74C3C",visible:!0,order:1},{id:"phone",icon:"",title:"Chiama Ora",description:"Contattaci telefonicamente",color:"#27AE60",visible:!0,order:2},{id:"whatsapp",icon:"",title:"Ordina su WhatsApp",description:"Ordine rapido e facile",color:"#25D366",visible:!0,order:3},{id:"fidelity",icon:"",title:"Fidelity Card",description:"I tuoi punti fedelt",color:"#F39C12",visible:!0,order:4},{id:"news",icon:"",title:"Novit e Offerte",description:"Scopri le ultime promozioni",color:"#9B59B6",visible:!0,order:5}]};function wO(){const[t,e]=j.useState(Ws),[n,r]=j.useState(!0),[i,s]=j.useState(!1),[o,c]=j.useState(null);j.useEffect(()=>{u()},[]);const u=async()=>{var I;r(!0);try{const O=ne(H,"config","home"),b=await Gt(O);if(b.exists()){const N=b.data(),_=new Set(((I=N.buttons)==null?void 0:I.map(R=>R.id))||[]),C=Ws.buttons.filter(R=>!_.has(R.id)),P=[...N.buttons||[],...C];e({...Ws,...N,buttons:P})}}catch(O){console.error("Error loading home config:",O)}r(!1)},d=async()=>{s(!0);try{const I=t.buttons.map(O=>{const b={...O};return Object.keys(b).forEach(N=>{b[N]===void 0&&delete b[N]}),b});await Rr(ne(H,"config","home"),{heroTitle:t.heroTitle,heroSubtitle:t.heroSubtitle,featuresTitle:t.featuresTitle,features:t.features,buttons:I,updatedAt:new Date}),alert(" Modifiche salvate con successo!")}catch(I){console.error("Error saving config:",I),alert(" Errore nel salvataggio")}s(!1)},f=async()=>{if(confirm("Sei sicuro di voler ripristinare le impostazioni predefinite?")){e(Ws);try{await Rr(ne(H,"config","home"),{...Ws,updatedAt:new Date}),alert(" Impostazioni ripristinate!")}catch(I){console.error("Error resetting:",I)}}},m=I=>{e(O=>({...O,heroTitle:I}))},p=I=>{e(O=>({...O,heroSubtitle:I}))},v=I=>{e(O=>({...O,featuresTitle:I}))},x=(I,O,b)=>{e(N=>({...N,features:(N.features||[]).map(_=>_.id===I?{..._,[O]:b}:_)}))},E=(I,O,b)=>{e(N=>({...N,buttons:N.buttons.map(_=>_.id===I?{..._,[O]:b}:_)}))},A=I=>{e(O=>({...O,buttons:O.buttons.map(b=>b.id===I?{...b,visible:!b.visible}:b)}))},y=(I,O)=>{const b=[...t.buttons],N=b.findIndex(_=>_.id===I);O==="up"&&N>0?[b[N],b[N-1]]=[b[N-1],b[N]]:O==="down"&&N<b.length-1&&([b[N],b[N+1]]=[b[N+1],b[N]]),b.forEach((_,C)=>{_.order=C+1}),e(_=>({..._,buttons:b}))},T=async(I,O)=>{var N;const b=(N=O.target.files)==null?void 0:N[0];if(b){c(I);try{const _=la($p,`home-buttons/${I}_${Date.now()}_${b.name}`);await oa(_,b);const C=await aa(_);E(I,"imageUrl",C),alert(" Immagine caricata con successo!")}catch(_){console.error("Error uploading image:",_),alert(" Errore nel caricamento dell'immagine")}c(null)}},w=I=>{confirm("Vuoi rimuovere l'immagine e tornare all'icona emoji?")&&E(I,"imageUrl",void 0)};return n?a.jsx("div",{className:"loading",children:"Caricamento..."}):a.jsxs("div",{className:"home-customizer",children:[a.jsxs("div",{className:"customizer-header",children:[a.jsx("h2",{children:" Personalizza Pagina Home"}),a.jsx("p",{className:"customizer-description",children:"Modifica testi, colori e visibilit dei bottoni della home page"})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:" Testi Principali"}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo Principale"}),a.jsx("input",{type:"text",value:t.heroTitle,onChange:I=>m(I.target.value),placeholder:"Benvenuto da ZeroSei "})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Sottotitolo"}),a.jsx("input",{type:"text",value:t.heroSubtitle,onChange:I=>p(I.target.value),placeholder:"La migliore pizza napoletana..."})]})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:" Bottoni Home"}),a.jsx("p",{className:"section-hint",children:"Personalizza i bottoni della home page. Puoi modificare testi, colori, icone e decidere quali mostrare."}),a.jsx("div",{className:"buttons-list",children:t.buttons.map((I,O)=>a.jsxs("div",{className:`button-card ${I.visible?"":"disabled"}`,children:[a.jsxs("div",{className:"button-card-header",children:[a.jsxs("div",{className:"button-preview",style:{backgroundColor:I.color},children:[I.imageUrl?a.jsx("img",{src:I.imageUrl,alt:I.title,className:"preview-image"}):a.jsx("span",{className:"preview-icon",children:I.icon}),a.jsxs("div",{className:"preview-text",children:[a.jsx("strong",{children:I.title}),a.jsx("small",{children:I.description})]})]}),a.jsxs("div",{className:"button-controls",children:[a.jsx("button",{className:"control-btn",onClick:()=>y(I.id,"up"),disabled:O===0,title:"Sposta su",children:""}),a.jsx("button",{className:"control-btn",onClick:()=>y(I.id,"down"),disabled:O===t.buttons.length-1,title:"Sposta gi",children:""}),a.jsx("button",{className:`control-btn ${I.visible?"visible":"hidden"}`,onClick:()=>A(I.id),title:I.visible?"Nascondi":"Mostra",children:I.visible?"":""})]})]}),a.jsxs("div",{className:"button-card-body",children:[a.jsxs("div",{className:"input-row",children:[a.jsxs("div",{className:"input-group small",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",value:I.icon,onChange:b=>E(I.id,"icon",b.target.value),maxLength:2})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo"}),a.jsx("input",{type:"text",value:I.title,onChange:b=>E(I.id,"title",b.target.value)})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:I.description,onChange:b=>E(I.id,"description",b.target.value)})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Immagine Personalizzata"}),I.imageUrl?a.jsxs("div",{className:"image-preview-container",children:[a.jsx("img",{src:I.imageUrl,alt:I.title,className:"uploaded-image-preview"}),a.jsx("button",{type:"button",className:"btn-remove-image",onClick:()=>w(I.id),children:" Rimuovi Immagine"})]}):a.jsxs("label",{className:"upload-image-btn",children:[o===I.id?" Caricamento...":" Carica Immagine",a.jsx("input",{type:"file",accept:"image/*",onChange:b=>T(I.id,b),disabled:o===I.id,hidden:!0})]}),a.jsx("small",{className:"hint-text",children:I.imageUrl?"L'immagine sostituisce l'icona emoji":"Carica un'immagine per sostituire l'emoji"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Colore"}),a.jsxs("div",{className:"color-picker-group",children:[a.jsx("input",{type:"color",value:I.color,onChange:b=>E(I.id,"color",b.target.value)}),a.jsx("input",{type:"text",value:I.color,onChange:b=>E(I.id,"color",b.target.value),className:"color-text"}),a.jsxs("div",{className:"color-presets",children:[a.jsx("button",{className:"preset-color",style:{backgroundColor:"#E74C3C"},onClick:()=>E(I.id,"color","#E74C3C"),title:"Rosso"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#27AE60"},onClick:()=>E(I.id,"color","#27AE60"),title:"Verde"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#25D366"},onClick:()=>E(I.id,"color","#25D366"),title:"WhatsApp"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#F39C12"},onClick:()=>E(I.id,"color","#F39C12"),title:"Arancione"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#3498DB"},onClick:()=>E(I.id,"color","#3498DB"),title:"Blu"})]})]})]})]})]},I.id))})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:' Sezione "Perch scegliere ZeroSei"'}),a.jsx("p",{className:"section-hint",children:"Personalizza il titolo e le 4 card che mostrano i punti di forza della pizzeria."}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo Sezione"}),a.jsx("input",{type:"text",value:t.featuresTitle||"",onChange:I=>v(I.target.value),placeholder:"Perch scegliere ZeroSei?"})]}),a.jsx("div",{className:"features-list",children:(t.features||[]).map(I=>a.jsxs("div",{className:"feature-card-edit",children:[a.jsxs("div",{className:"input-row",children:[a.jsxs("div",{className:"input-group small",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",value:I.icon,onChange:O=>x(I.id,"icon",O.target.value),maxLength:2})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo"}),a.jsx("input",{type:"text",value:I.title,onChange:O=>x(I.id,"title",O.target.value)})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:I.description,onChange:O=>x(I.id,"description",O.target.value)})]})]},I.id))})]}),a.jsxs("div",{className:"customizer-actions",children:[a.jsx("button",{className:"btn-reset",onClick:f,disabled:i,children:" Ripristina Default"}),a.jsx("button",{className:"btn-save",onClick:d,disabled:i,children:i?" Salvataggio...":" Salva Modifiche"})]})]})}function EO(){const[t,e]=j.useState("general"),[n,r]=j.useState(""),[i,s]=j.useState(60),[o,c]=j.useState(!1),[u,d]=j.useState(!0);j.useEffect(()=>{m()},[]),j.useEffect(()=>{n&&f(n)},[n]);const f=E=>{let A=document.querySelector("link[rel='icon']");A||(A=document.createElement("link"),A.rel="icon",document.head.appendChild(A)),A.href=E;let y=document.querySelector("link[rel='apple-touch-icon']");y||(y=document.createElement("link"),y.rel="apple-touch-icon",document.head.appendChild(y)),y.href=E},m=async()=>{d(!0);try{const E=ne(H,"config","general"),A=await Gt(E);A.exists()&&(r(A.data().logoUrl||""),s(A.data().logoSize||60))}catch(E){console.error("Error loading settings:",E)}d(!1)},p=async E=>{var y;const A=(y=E.target.files)==null?void 0:y[0];if(A){c(!0);try{const T=la($p,`config/logo_${Date.now()}_${A.name}`);await oa(T,A);const w=await aa(T);r(w),f(w),await v(w,i)}catch(T){console.error("Error uploading image:",T),alert("Errore durante il caricamento dell'immagine")}c(!1)}},v=async(E,A)=>{try{await Rr(ne(H,"config","general"),{logoUrl:E,logoSize:A,updatedAt:new Date}),alert(" Impostazioni salvate!")}catch(y){console.error("Error saving settings:",y),alert(" Errore nel salvataggio")}},x=async E=>{s(E),n&&await v(n,E)};return u?a.jsx("div",{className:"settings-container",children:a.jsx("div",{className:"loading",children:"Caricamento..."})}):a.jsxs("div",{className:"settings-container",children:[a.jsx("h2",{className:"settings-title",children:" Impostazioni"}),a.jsxs("div",{className:"settings-tabs",children:[a.jsx("button",{className:`settings-tab ${t==="general"?"active":""}`,onClick:()=>e("general"),children:" Generale"}),a.jsx("button",{className:`settings-tab ${t==="home"?"active":""}`,onClick:()=>e("home"),children:" Pagina Home"}),a.jsx("button",{className:`settings-tab ${t==="theme"?"active":""}`,onClick:()=>e("theme"),children:" Tema Globale"})]}),a.jsxs("div",{className:"settings-tab-content",children:[t==="general"&&a.jsxs("div",{className:"tab-panel",children:[a.jsxs("div",{className:"settings-section",children:[a.jsx("h3",{children:" Logo Pizzeria"}),a.jsxs("div",{className:"logo-upload-container",children:[n&&a.jsx("div",{className:"logo-preview",children:a.jsx("img",{src:n,alt:"Logo",style:{height:`${i}px`}})}),a.jsxs("label",{className:"upload-button",children:[o?" Caricamento...":" Carica Logo",a.jsx("input",{type:"file",accept:"image/*",onChange:p,disabled:o,hidden:!0})]})]}),n&&a.jsxs("div",{className:"logo-size-control",children:[a.jsxs("label",{children:["Dimensione Logo: ",i,"px"]}),a.jsx("input",{type:"range",min:"30",max:"150",value:i,onChange:E=>x(Number(E.target.value))})]})]}),a.jsx(yO,{})]}),t==="home"&&a.jsx("div",{className:"tab-panel",children:a.jsx(wO,{})}),t==="theme"&&a.jsx("div",{className:"tab-panel",children:a.jsx(_O,{})})]})]})}function xO(){const[t,e]=j.useState([]),[n,r]=j.useState(null),[i,s]=j.useState(!1),[o,c]=j.useState(!0),[u,d]=j.useState({name:"",price:0,type:"add",available:!0,category:"Altro"});j.useEffect(()=>{f()},[]);const f=async()=>{c(!0);const y=await pT();e(y),c(!1)},m=y=>{r(y),d(y),s(!1)},p=()=>{s(!0),r(null),d({id:`m${Date.now()}`,name:"",price:0,type:"add",available:!0,category:"Altro"})},v=async()=>{if(!u.name||u.price===void 0){alert("Compila tutti i campi obbligatori");return}const y={id:u.id||`m${Date.now()}`,name:u.name,price:u.price,type:u.type||"add",available:u.available??!0,category:u.category||"Altro"};try{await ZD(y),await f(),alert("Ingrediente salvato con successo!"),E()}catch(T){console.error("Error saving modification:",T),alert("Errore nel salvare l'ingrediente")}},x=async y=>{if(confirm("Sei sicuro di voler eliminare questo ingrediente?"))try{await eO(y),await f(),alert("Ingrediente eliminato con successo!")}catch(T){console.error("Error deleting modification:",T),alert("Errore nell'eliminare l'ingrediente")}},E=()=>{r(null),s(!1),d({name:"",price:0,type:"add",available:!0,category:"Altro"})},A=async y=>{const T=t.find(w=>w.id===y);if(T)try{await tO(y,!T.available),await f()}catch(w){console.error("Error toggling availability:",w),alert("Errore nell'aggiornare la disponibilit")}};return o?a.jsx("div",{className:"modification-management",children:a.jsx("p",{children:"Caricamento..."})}):a.jsxs("div",{className:"modification-management",children:[a.jsxs("div",{className:"management-header",children:[a.jsx("h2",{children:"Gestione Ingredienti Extra"}),a.jsx("button",{className:"btn btn-primary",onClick:p,children:"+ Aggiungi Ingrediente"})]}),(i||n)&&a.jsxs("div",{className:"modification-form",children:[a.jsx("h3",{children:i?"Nuovo Ingrediente":"Modifica Ingrediente"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:u.name,onChange:y=>d({...u,name:y.target.value}),placeholder:"Es: Mozzarella di Bufala"})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Prezzo () *"}),a.jsx("input",{type:"number",step:"0.50",min:"0",value:u.price,onChange:y=>d({...u,price:parseFloat(y.target.value)})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Categoria *"}),a.jsxs("select",{value:u.category,onChange:y=>d({...u,category:y.target.value}),children:[a.jsx("option",{value:"Formaggi",children:"Formaggi"}),a.jsx("option",{value:"Salumi",children:"Salumi"}),a.jsx("option",{value:"Verdure",children:"Verdure"}),a.jsx("option",{value:"Altro",children:"Altro"})]})]})]}),a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:u.available,onChange:y=>d({...u,available:y.target.checked})}),"Disponibile"]})}),a.jsxs("div",{className:"form-actions",children:[a.jsx("button",{className:"btn btn-secondary",onClick:E,children:"Annulla"}),a.jsx("button",{className:"btn btn-primary",onClick:v,children:"Salva"})]})]}),a.jsx("div",{className:"modifications-list",children:["Formaggi","Salumi","Verdure","Altro"].map(y=>{const T=t.filter(w=>w.category===y);return T.length===0?null:a.jsxs("div",{className:"category-section",children:[a.jsx("h3",{children:y}),a.jsx("div",{className:"modifications-grid",children:T.map(w=>a.jsxs("div",{className:`modification-card ${w.available?"":"unavailable"}`,children:[a.jsxs("div",{className:"mod-info",children:[a.jsx("h4",{children:w.name}),a.jsxs("p",{className:"mod-price",children:["",w.price.toFixed(2)]}),a.jsx("span",{className:`availability-badge ${w.available?"available":"unavailable"}`,children:w.available?"Disponibile":"Non disponibile"})]}),a.jsxs("div",{className:"mod-actions",children:[a.jsx("button",{className:"btn-icon",onClick:()=>A(w.id),title:w.available?"Disabilita":"Abilita",children:w.available?"":""}),a.jsx("button",{className:"btn-icon",onClick:()=>m(w),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon delete",onClick:()=>x(w.id),title:"Elimina",children:""})]})]},w.id))})]},y)})})]})}function TO(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[i,s]=j.useState("");j.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await tT();e(d)}catch(d){console.error("Error loading customers:",d),alert("Errore nel caricamento dei clienti")}finally{r(!1)}},c=t.filter(d=>{var E,A,y;const f=i.toLowerCase(),m=((E=d.firstName)==null?void 0:E.toLowerCase())||"",p=((A=d.lastName)==null?void 0:A.toLowerCase())||"",v=d.phone||"",x=((y=d.email)==null?void 0:y.toLowerCase())||"";return m.includes(f)||p.includes(f)||v.includes(i)||x.includes(f)}),u=t.reduce((d,f)=>d+(f.loyaltyPoints||0),0);return n?a.jsx("div",{className:"customer-management",children:a.jsxs("div",{className:"loading-state",children:[a.jsx("span",{className:"loading-spinner",children:""}),a.jsx("p",{children:"Caricamento clienti..."})]})}):a.jsxs("div",{className:"customer-management fade-in",children:[a.jsxs("div",{className:"customer-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("h2",{children:"Gestione Clienti"}),a.jsx("button",{onClick:o,className:"btn-icon",title:"Ricarica lista",children:""})]}),a.jsxs("div",{className:"customer-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-value",children:t.length}),a.jsx("span",{className:"stat-label",children:"Clienti Totali"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-value",children:u}),a.jsx("span",{className:"stat-label",children:"Punti Emessi"})]})]})]}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Cerca per nome, telefono o email...",value:i,onChange:d=>s(d.target.value),className:"search-input"})}),a.jsx("div",{className:"customers-table-container",children:c.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun cliente trovato."})}):a.jsxs("table",{className:"customers-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Cliente"}),a.jsx("th",{children:"Contatti"}),a.jsx("th",{children:"Punti Fedelt"}),a.jsx("th",{children:"Registrato il"}),a.jsx("th",{children:"Ultimo Accesso"})]})}),a.jsx("tbody",{children:c.map(d=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"customer-name",children:[d.firstName," ",d.lastName]})}),a.jsxs("td",{children:[a.jsxs("div",{className:"customer-phone",children:[" ",d.phone]}),a.jsxs("div",{className:"customer-email",children:[" ",d.email]})]}),a.jsx("td",{children:a.jsxs("span",{className:"loyalty-points",children:[" ",d.loyaltyPoints||0]})}),a.jsx("td",{children:a.jsx("span",{className:"registration-date",children:d.createdAt?new Date(d.createdAt).toLocaleDateString("it-IT"):"-"})}),a.jsx("td",{children:a.jsx("span",{className:"registration-date",children:d.lastAccess?new Date(d.lastAccess).toLocaleDateString("it-IT")+" "+new Date(d.lastAccess).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}):"-"})})]},d.id))})]})})]})}const nl=[{id:"reward1",name:"Bibita in omaggio",description:"Una bibita a scelta",pointsRequired:100,imageUrl:"",available:!0},{id:"reward2",name:"Pizza Margherita",description:"Pizza Margherita omaggio",pointsRequired:200,imageUrl:"",available:!0},{id:"reward3",name:"Dolce a scelta",description:"Un dolce della casa",pointsRequired:150,imageUrl:"",available:!0}];function SO(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[i,s]=j.useState(!1),[o,c]=j.useState(null),[u,d]=j.useState({name:"",description:"",pointsRequired:100,imageUrl:""});j.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const I=ne(H,"config","rewards"),O=await Gt(I);if(O.exists()){const b=O.data();e(b.rewards||nl)}else e(nl),await m(nl)}catch(I){console.error("Error loading rewards:",I),e(nl)}r(!1)},m=async I=>{s(!0);try{await Rr(ne(H,"config","rewards"),{rewards:I,updatedAt:new Date}),e(I),alert(" Premi salvati con successo!")}catch(O){console.error("Error saving rewards:",O),alert(" Errore nel salvataggio")}s(!1)},p=()=>{if(!u.name||u.pointsRequired<=0){alert("Inserisci nome e punti validi");return}const I={id:`reward_${Date.now()}`,name:u.name,description:u.description,pointsRequired:u.pointsRequired,imageUrl:u.imageUrl,available:!0};m([...t,I]),w()},v=()=>{if(!o||!u.name||u.pointsRequired<=0){alert("Inserisci dati validi");return}const I=t.map(O=>O.id===o?{...O,...u}:O);m(I),w()},x=I=>{c(I.id),d({name:I.name,description:I.description,pointsRequired:I.pointsRequired,imageUrl:I.imageUrl||""})},E=I=>{if(confirm("Sei sicuro di voler eliminare questo premio?")){const O=t.filter(b=>b.id!==I);m(O)}},A=I=>{const O=t.map(b=>b.id===I?{...b,available:!b.available}:b);m(O)},y=I=>{if(I===0)return;const O=[...t];[O[I],O[I-1]]=[O[I-1],O[I]],m(O)},T=I=>{if(I===t.length-1)return;const O=[...t];[O[I],O[I+1]]=[O[I+1],O[I]],m(O)},w=()=>{c(null),d({name:"",description:"",pointsRequired:100,imageUrl:""})};return n?a.jsx("div",{className:"rewards-management",children:a.jsx("div",{className:"loading",children:"Caricamento..."})}):a.jsxs("div",{className:"rewards-management",children:[a.jsxs("div",{className:"rewards-header",children:[a.jsx("h2",{children:" Gestione Premi Fidelity"}),a.jsx("p",{className:"rewards-description",children:"Configura i premi che i clienti possono visualizzare nella loro Fidelity Card"})]}),a.jsxs("div",{className:"rewards-form",children:[a.jsx("h3",{children:o?"Modifica Premio":"Nuovo Premio"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Icona (Emoji)"}),a.jsx("input",{type:"text",value:u.imageUrl,onChange:I=>d({...u,imageUrl:I.target.value}),placeholder:"",maxLength:2})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome Premio *"}),a.jsx("input",{type:"text",value:u.name,onChange:I=>d({...u,name:I.target.value}),placeholder:"Es: Bibita in omaggio"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Punti Richiesti *"}),a.jsx("input",{type:"number",value:u.pointsRequired,onChange:I=>d({...u,pointsRequired:Number(I.target.value)}),min:"1"})]}),a.jsxs("div",{className:"form-group full-width",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:u.description,onChange:I=>d({...u,description:I.target.value}),placeholder:"Descrizione breve del premio"})]})]}),a.jsx("div",{className:"form-actions",children:o?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:v,className:"btn btn-primary",disabled:i,children:" Aggiorna"}),a.jsx("button",{onClick:w,className:"btn btn-outline",children:" Annulla"})]}):a.jsx("button",{onClick:p,className:"btn btn-primary",disabled:i,children:" Aggiungi Premio"})})]}),a.jsxs("div",{className:"rewards-list",children:[a.jsxs("h3",{children:["Premi Configurati (",t.length,")"]}),t.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun premio configurato. Aggiungi il primo premio!"})}):a.jsx("div",{className:"rewards-grid",children:t.map((I,O)=>a.jsxs("div",{className:`reward-card ${I.available?"":"inactive"}`,children:[a.jsx("div",{className:"reward-icon-large",children:I.imageUrl}),a.jsxs("div",{className:"reward-content",children:[a.jsx("h4",{children:I.name}),a.jsx("p",{className:"reward-desc",children:I.description}),a.jsxs("p",{className:"reward-points",children:[I.pointsRequired," Punti"]}),a.jsx("span",{className:`reward-status ${I.available?"active":"inactive"}`,children:I.available?" Attivo":" Disattivato"})]}),a.jsxs("div",{className:"reward-actions",children:[a.jsx("button",{onClick:()=>y(O),disabled:O===0,className:"btn-icon",title:"Sposta su",children:""}),a.jsx("button",{onClick:()=>T(O),disabled:O===t.length-1,className:"btn-icon",title:"Sposta gi",children:""}),a.jsx("button",{onClick:()=>A(I.id),className:"btn-icon",title:I.available?"Disattiva":"Attiva",children:I.available?"":""}),a.jsx("button",{onClick:()=>x(I),className:"btn-icon",title:"Modifica",children:""}),a.jsx("button",{onClick:()=>E(I.id),className:"btn-icon btn-danger",title:"Elimina",children:""})]})]},I.id))})]})]})}function IO(){const[t,e]=j.useState(""),[n,r]=j.useState(!1),[i,s]=j.useState(null),o=async()=>{var u;if(!t.trim()){s({type:"error",text:" Inserisci un codice"});return}r(!0),s(null);try{const d=t.trim().toUpperCase(),f=Ee(H,"GeneratedCoupons"),m=Ct(f,qe("code","==",d)),p=await et(m);if(p.empty){s({type:"error",text:" Codice Inesistente",details:`Il codice "${d}" non  stato trovato nel sistema.`}),r(!1);return}const v=p.docs[0],x=v.data();if(x.status==="redeemed"){const E=(u=x.redeemedAt)==null?void 0:u.toDate(),A=E?E.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Data sconosciuta";s({type:"warning",text:" ATTENZIONE: Codice gi utilizzato in precedenza!",details:`Questo codice  stato gi riscattato il ${A}`}),r(!1);return}try{const E=new Date;E.setHours(0,0,0,0);const A=Ct(Ee(H,"GeneratedCoupons"),qe("userId","==",x.userId),qe("status","==","redeemed"),qe("redeemedAt",">=",E));if(!(await et(A)).empty){s({type:"error",text:" LIMIT RAGGIUNTO",details:"Questo cliente ha gi utilizzato una promozione oggi. Limite di 1 al giorno."}),r(!1);return}}catch(E){console.error("Error checking daily limit:",E)}await vn(ne(H,"GeneratedCoupons",v.id),{status:"redeemed",redeemedAt:Gx()}),s({type:"success",text:" CODICE VALIDO!",details:`Sconto Autorizzato per: ${x.offerTitle}`}),setTimeout(()=>{e(""),s(null)},3e3)}catch(d){console.error("Error validating coupon:",d),s({type:"error",text:" Errore nella validazione",details:"Si  verificato un errore. Riprova."})}r(!1)},c=u=>{u.key==="Enter"&&o()};return a.jsxs("div",{className:"coupon-validation",children:[a.jsxs("div",{className:"validation-header",children:[a.jsx("h2",{children:" Convalida Coupon"}),a.jsx("p",{className:"header-description",children:"Inserisci il codice cliente per verificare e convalidare lo sconto"})]}),a.jsxs("div",{className:"validation-form",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"coupon-code",children:"Codice Cliente"}),a.jsx("input",{id:"coupon-code",type:"text",value:t,onChange:u=>e(u.target.value),onKeyPress:c,placeholder:"es: ABC123",className:"code-input",maxLength:6,disabled:n,autoFocus:!0})]}),a.jsx("button",{className:"btn btn-primary btn-validate",onClick:o,disabled:n||!t.trim(),children:n?"Convalida in corso...":"CONVALIDA CODICE"})]}),i&&a.jsxs("div",{className:`validation-message ${i.type}`,children:[a.jsx("div",{className:"message-text",children:i.text}),i.details&&a.jsx("div",{className:"message-details",children:i.details})]}),a.jsxs("div",{className:"help-section",children:[a.jsx("h3",{children:" Come funziona"}),a.jsxs("ol",{children:[a.jsx("li",{children:"Il cliente mostra il codice da 6 caratteri"}),a.jsx("li",{children:"Inserisci il codice nel campo sopra"}),a.jsx("li",{children:'Click su "CONVALIDA CODICE"'}),a.jsx("li",{children:"Se il codice  valido, autorizza lo sconto"})]})]})]})}function gT(){const[t,e]=j.useState(null),[n,r]=j.useState(!0);j.useEffect(()=>{i()},[]);const i=async()=>{try{const o=ne(H,"config","theme"),c=await Gt(o);if(c.exists()){const u=c.data();e(u),s(u)}}catch(o){console.error("Error loading theme:",o)}finally{r(!1)}},s=o=>{const c=document.documentElement;Object.entries(o).forEach(([u,d])=>{if(u.startsWith("color")){const f="--"+u.replace(/([A-Z])/g,"-$1").toLowerCase();c.style.setProperty(f,d)}else if(u.startsWith("fontSize")){const f="--font-size-"+u.replace("fontSize","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}else if(u.startsWith("spacing")){const f="--spacing-"+u.replace("spacing","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}else if(u.startsWith("radius")){const f="--radius-"+u.replace("radius","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}})};return{theme:t,loading:n,reload:i}}function NO({onLogout:t}){const e=At(),[n,r]=j.useState("orders"),{theme:i}=gT(),s=()=>{t(),e("/admin/login")},o=()=>{switch(n){case"orders":return a.jsx(Fy,{});case"products":return a.jsx(gO,{});case"modifications":return a.jsx(xO,{});case"categories":return a.jsx(vO,{});case"promotions":return a.jsx(Uy,{mode:"promotion"});case"news":return a.jsx(Uy,{mode:"news"});case"fidelity":return a.jsx(SO,{});case"coupon-validation":return a.jsx(IO,{});case"settings":return a.jsx(EO,{});case"customers":return a.jsx(TO,{});default:return a.jsx(Fy,{})}};return a.jsxs("div",{className:"admin-dashboard",children:[a.jsxs("div",{className:"admin-sidebar",children:[a.jsx("div",{className:"admin-logo",children:a.jsx("h2",{children:"ZeroSei Admin"})}),a.jsxs("nav",{className:"admin-nav",children:[a.jsxs("button",{className:`nav-item ${n==="orders"?"active":""}`,onClick:()=>r("orders"),children:[(i==null?void 0:i.iconOrders)||""," Ordini"]}),a.jsxs("button",{className:`nav-item ${n==="products"?"active":""}`,onClick:()=>r("products"),children:[(i==null?void 0:i.iconProducts)||""," Prodotti"]}),a.jsxs("button",{className:`nav-item ${n==="modifications"?"active":""}`,onClick:()=>r("modifications"),children:[(i==null?void 0:i.iconIngredients)||""," Ingredienti"]}),a.jsxs("button",{className:`nav-item ${n==="categories"?"active":""}`,onClick:()=>r("categories"),children:[(i==null?void 0:i.iconCategories)||""," Categorie"]}),a.jsxs("button",{className:`nav-item ${n==="promotions"?"active":""}`,onClick:()=>r("promotions"),children:[(i==null?void 0:i.iconPromotions)||""," Promozioni"]}),a.jsx("button",{className:`nav-item ${n==="news"?"active":""}`,onClick:()=>r("news"),children:" Novit"}),a.jsx("button",{className:`nav-item ${n==="fidelity"?"active":""}`,onClick:()=>r("fidelity"),children:" Premi Fidelity"}),a.jsx("button",{className:`nav-item ${n==="coupon-validation"?"active":""}`,onClick:()=>r("coupon-validation"),children:" Convalida Coupon"}),a.jsxs("button",{className:`nav-item ${n==="customers"?"active":""}`,onClick:()=>r("customers"),children:[(i==null?void 0:i.iconCustomers)||""," Clienti"]}),a.jsxs("button",{className:`nav-item ${n==="settings"?"active":""}`,onClick:()=>r("settings"),children:[(i==null?void 0:i.iconSettings)||""," Impostazioni"]})]}),a.jsx("div",{className:"admin-footer",children:a.jsx("button",{className:"btn-logout",onClick:s,children:" Logout"})})]}),a.jsx("div",{className:"admin-content",children:o()})]})}function CO(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[i,s]=j.useState(null),[o,c]=j.useState([]),[u,d]=j.useState("3999999999"),[f,m]=j.useState([]);j.useEffect(()=>{p()},[]);const p=async()=>{try{console.log(" Loading all products...");const E=await qp();console.log(" Products loaded:",E.length),console.log(" Products:",E),e(E),console.log(" Testing category query for pizze-classiche...");const A=await Wp("pizze-classiche");console.log(" Category products loaded:",A.length),console.log(" Category products:",A),c(A)}catch(E){console.error(" Error loading products:",E),s(E.message||"Unknown error")}r(!1)};if(n)return a.jsx("div",{style:{padding:20},children:"Loading debug data..."});if(i)return a.jsxs("div",{style:{padding:20,color:"red"},children:["Error: ",i]});const v=E=>{console.log(`[DIAG] ${E}`),m(A=>[...A,`${new Date().toISOString().split("T")[1]} - ${E}`])},x=async()=>{m([]),v(" Starting Profile Save Diagnostic...");try{const E={firstName:"Test",lastName:"User",phone:u,email:"test@example.com"};v(` Form Data: ${JSON.stringify(E)}`),v("Searching user by phone...");const A=await Sl(()=>Promise.resolve().then(()=>gd),void 0).then(y=>y.getUserByPhone(E.phone));if(A){v(` Found existing user: ${A.id}`),v(`Existing Data: ${JSON.stringify(A)}`);const y={id:A.id,firstName:E.firstName,lastName:E.lastName,phone:E.phone,email:E.email,loyaltyPoints:A.loyaltyPoints||0,createdAt:A.createdAt,updatedAt:new Date};v(` Preparing UPDATE for ID: ${A.id}`);const{id:T,...w}=y;v(`Sanitized Payload (no ID): ${JSON.stringify(w)}`),await Sl(()=>Promise.resolve().then(()=>gd),void 0).then(I=>I.updateUserProfile(A.id,w)),v(" Update SUCCESS")}else{v(" User not found. Creating NEW...");const y={id:"",firstName:E.firstName,lastName:E.lastName,phone:E.phone,email:E.email,loyaltyPoints:0,createdAt:new Date,updatedAt:new Date};v(" Preparing CREATE");const{id:T,...w}=y;v(`Sanitized Payload (no ID): ${JSON.stringify(w)}`);const{createUserProfile:I}=await Sl(async()=>{const{createUserProfile:b}=await Promise.resolve().then(()=>gd);return{createUserProfile:b}},void 0),O=await I(w);v(` Create SUCCESS. New ID: ${O}`)}}catch(E){v(` ERROR: ${E.message}`),v(`Stack: ${E.stack}`)}};return n?a.jsx("div",{style:{padding:20},children:"Loading debug data..."}):i?a.jsxs("div",{style:{padding:20,color:"red"},children:["Error: ",i]}):a.jsxs("div",{style:{padding:20,fontFamily:"monospace",maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h1",{children:"Debug Products & Profiles"}),a.jsxs("div",{style:{border:"2px solid #333",padding:20,margin:"20px 0",borderRadius:8,background:"#f5f5f5"},children:[a.jsx("h2",{children:" Profile Save Diagnostic"}),a.jsxs("div",{style:{marginBottom:10},children:[a.jsx("label",{children:"Test Phone: "}),a.jsx("input",{value:u,onChange:E=>d(E.target.value),style:{padding:5}})]}),a.jsx("button",{onClick:x,style:{background:"#007bff",color:"white",padding:"10px 20px",border:"none",borderRadius:4,cursor:"pointer"},children:"RUN DIAGNOSTIC"}),a.jsx("div",{style:{marginTop:20,background:"#1e1e1e",color:"#0f0",padding:15,borderRadius:4,minHeight:200,whiteSpace:"pre-wrap"},children:f.length===0?"// Ready to run...":f.join(`
`)})]}),a.jsxs("h2",{children:["All Products: ",t.length]}),a.jsxs("h2",{children:["Pizze Classiche: ",o.length]}),a.jsx("h3",{children:"Category Test Results:"}),a.jsx("pre",{style:{background:"#eee",padding:10},children:JSON.stringify(o,null,2)})]})}function AO(){const[t,e]=j.useState({items:[],total:0}),[n,r]=j.useState(null),[i,s]=j.useState(!1);gT(),j.useEffect(()=>{console.log("App Version: v1.2.0 - Favorites Feature");const u=uE();e(u);const d=localStorage.getItem("user_profile");if(d){const m=JSON.parse(d);r(m),m.id&&!m.id.startsWith("temp_")&&fc(m.id,{lastAccess:new Date}).catch(p=>console.error("Error updating last access:",p))}const f=localStorage.getItem("admin_authenticated");s(f==="true")},[]);const o=()=>{s(!0)},c=()=>{localStorage.removeItem("admin_authenticated"),s(!1)};return a.jsx(wC,{children:a.jsxs(uv,{children:[a.jsx(mt,{path:"/admin/login",element:i?a.jsx(cv,{to:"/admin/dashboard",replace:!0}):a.jsx(mO,{onLogin:o})}),a.jsx(mt,{path:"/admin/*",element:i?a.jsx(NO,{onLogout:c}):a.jsx(cv,{to:"/admin/login",replace:!0})}),a.jsx(mt,{path:"*",element:a.jsx(qD,{cart:t,userProfile:n,children:a.jsxs(uv,{children:[a.jsx(mt,{path:"/",element:a.jsx(XD,{})}),a.jsx(mt,{path:"/menu",element:a.jsx(YD,{})}),a.jsx(mt,{path:"/menu/:category",element:a.jsx(JD,{cart:t,setCart:e})}),a.jsx(mt,{path:"/product/:id",element:a.jsx(nO,{cart:t,setCart:e})}),a.jsx(mt,{path:"/cart",element:a.jsx(rO,{cart:t,setCart:e,userProfile:n})}),a.jsx(mt,{path:"/profile",element:a.jsx(iO,{userProfile:n,setUserProfile:r})}),a.jsx(mt,{path:"/news",element:a.jsx(sO,{})}),a.jsx(mt,{path:"/favorites",element:a.jsx(oO,{cart:t,setCart:e})}),a.jsx(mt,{path:"/offer/:id",element:a.jsx(aO,{userProfile:n})}),a.jsx(mt,{path:"/fidelity",element:a.jsx(fO,{userProfile:n})}),a.jsx(mt,{path:"/debug",element:a.jsx(CO,{})})]})})})]})})}class RO extends j.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){console.error("Uncaught error:",e,n),this.setState({errorInfo:n})}render(){var e;return this.state.hasError?a.jsxs("div",{style:{padding:20,backgroundColor:"#ffebee",color:"#c62828",height:"100vh",overflow:"auto"},children:[a.jsx("h1",{children:"Si  verificato un errore"}),a.jsx("p",{children:"Per favore invia uno screenshot di questa schermata allo sviluppatore."}),a.jsxs("div",{style:{backgroundColor:"white",padding:15,borderRadius:5,border:"1px solid #ffcdd2",marginTop:10},children:[a.jsx("h3",{style:{marginTop:0},children:"Errore:"}),a.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"monospace"},children:(e=this.state.error)==null?void 0:e.toString()})]}),this.state.errorInfo&&a.jsxs("div",{style:{backgroundColor:"white",padding:15,borderRadius:5,border:"1px solid #ffcdd2",marginTop:10},children:[a.jsx("h3",{style:{marginTop:0},children:"Dettagli Tecnici (Stack Trace):"}),a.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"0.8em"},children:this.state.errorInfo.componentStack})]}),a.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:20,padding:"10px 20px",backgroundColor:"#c62828",color:"white",border:"none",borderRadius:5,fontSize:"1em"},children:"Riprova (Ricarica App)"})]}):this.props.children}}vd.createRoot(document.getElementById("root")).render(a.jsx(Yy.StrictMode,{children:a.jsx(RO,{children:a.jsx(AO,{})})}));
