function xx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ix(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var by={exports:{}},oc={},Dy={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zo=Symbol.for("react.element"),Sx=Symbol.for("react.portal"),Cx=Symbol.for("react.fragment"),Nx=Symbol.for("react.strict_mode"),Ax=Symbol.for("react.profiler"),Rx=Symbol.for("react.provider"),Px=Symbol.for("react.context"),kx=Symbol.for("react.forward_ref"),jx=Symbol.for("react.suspense"),bx=Symbol.for("react.memo"),Dx=Symbol.for("react.lazy"),zm=Symbol.iterator;function Ox(t){return t===null||typeof t!="object"?null:(t=zm&&t[zm]||t["@@iterator"],typeof t=="function"?t:null)}var Oy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ly=Object.assign,Vy={};function as(t,e,n){this.props=t,this.context=e,this.refs=Vy,this.updater=n||Oy}as.prototype.isReactComponent={};as.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};as.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function My(){}My.prototype=as.prototype;function jh(t,e,n){this.props=t,this.context=e,this.refs=Vy,this.updater=n||Oy}var bh=jh.prototype=new My;bh.constructor=jh;Ly(bh,as.prototype);bh.isPureReactComponent=!0;var Bm=Array.isArray,Fy=Object.prototype.hasOwnProperty,Dh={current:null},Uy={key:!0,ref:!0,__self:!0,__source:!0};function zy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Fy.call(e,r)&&!Uy.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:zo,type:t,key:s,ref:o,props:i,_owner:Dh.current}}function Lx(t,e){return{$$typeof:zo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Oh(t){return typeof t=="object"&&t!==null&&t.$$typeof===zo}function Vx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $m=/\/+/g;function wu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Vx(""+t.key):e.toString(36)}function Ya(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zo:case Sx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+wu(o,0):r,Bm(i)?(n="",t!=null&&(n=t.replace($m,"$&/")+"/"),Ya(i,e,n,"",function(d){return d})):i!=null&&(Oh(i)&&(i=Lx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($m,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Bm(t))for(var c=0;c<t.length;c++){s=t[c];var u=r+wu(s,c);o+=Ya(s,e,n,u,i)}else if(u=Ox(t),typeof u=="function")for(t=u.call(t),c=0;!(s=t.next()).done;)s=s.value,u=r+wu(s,c++),o+=Ya(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sa(t,e,n){if(t==null)return t;var r=[],i=0;return Ya(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Mx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pt={current:null},Ja={transition:null},Fx={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Ja,ReactCurrentOwner:Dh};function By(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Sa,forEach:function(t,e,n){Sa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sa(t,function(){e++}),e},toArray:function(t){return Sa(t,function(e){return e})||[]},only:function(t){if(!Oh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=as;ee.Fragment=Cx;ee.Profiler=Ax;ee.PureComponent=jh;ee.StrictMode=Nx;ee.Suspense=jx;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fx;ee.act=By;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ly({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Dh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Fy.call(e,u)&&!Uy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:zo,type:t.type,key:i,ref:s,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:Px,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rx,_context:t},t.Consumer=t};ee.createElement=zy;ee.createFactory=function(t){var e=zy.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:kx,render:t}};ee.isValidElement=Oh;ee.lazy=function(t){return{$$typeof:Dx,_payload:{_status:-1,_result:t},_init:Mx}};ee.memo=function(t,e){return{$$typeof:bx,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Ja.transition;Ja.transition={};try{t()}finally{Ja.transition=e}};ee.unstable_act=By;ee.useCallback=function(t,e){return pt.current.useCallback(t,e)};ee.useContext=function(t){return pt.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return pt.current.useDeferredValue(t)};ee.useEffect=function(t,e){return pt.current.useEffect(t,e)};ee.useId=function(){return pt.current.useId()};ee.useImperativeHandle=function(t,e,n){return pt.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return pt.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return pt.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return pt.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return pt.current.useReducer(t,e,n)};ee.useRef=function(t){return pt.current.useRef(t)};ee.useState=function(t){return pt.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return pt.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return pt.current.useTransition()};ee.version="18.3.1";Dy.exports=ee;var b=Dy.exports;const $y=Ix(b),Ux=xx({__proto__:null,default:$y},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx=b,Bx=Symbol.for("react.element"),$x=Symbol.for("react.fragment"),qx=Object.prototype.hasOwnProperty,Wx=zx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hx={key:!0,ref:!0,__self:!0,__source:!0};function qy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qx.call(e,r)&&!Hx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Bx,type:t,key:s,ref:o,props:i,_owner:Wx.current}}oc.Fragment=$x;oc.jsx=qy;oc.jsxs=qy;by.exports=oc;var a=by.exports,ld={},Wy={exports:{}},Pt={},Hy={exports:{}},Gy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,X){var Z=B.length;B.push(X);e:for(;0<Z;){var we=Z-1>>>1,he=B[we];if(0<i(he,X))B[we]=X,B[Z]=he,Z=we;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var X=B[0],Z=B.pop();if(Z!==X){B[0]=Z;e:for(var we=0,he=B.length,Pe=he>>>1;we<Pe;){var gn=2*(we+1)-1,vn=B[gn],yn=gn+1,_n=B[yn];if(0>i(vn,Z))yn<he&&0>i(_n,vn)?(B[we]=_n,B[yn]=Z,we=yn):(B[we]=vn,B[gn]=Z,we=gn);else if(yn<he&&0>i(_n,Z))B[we]=_n,B[yn]=Z,we=yn;else break e}}return X}function i(B,X){var Z=B.sortIndex-X.sortIndex;return Z!==0?Z:B.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,g=null,m=3,v=!1,T=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(B){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=B)r(d),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(d)}}function x(B){if(I=!1,C(B),!T)if(n(u)!==null)T=!0,en(L);else{var X=n(d);X!==null&&mn(x,X.startTime-B)}}function L(B,X){T=!1,I&&(I=!1,y(_),_=-1),v=!0;var Z=m;try{for(C(X),g=n(u);g!==null&&(!(g.expirationTime>X)||B&&!N());){var we=g.callback;if(typeof we=="function"){g.callback=null,m=g.priorityLevel;var he=we(g.expirationTime<=X);X=t.unstable_now(),typeof he=="function"?g.callback=he:g===n(u)&&r(u),C(X)}else r(u);g=n(u)}if(g!==null)var Pe=!0;else{var gn=n(d);gn!==null&&mn(x,gn.startTime-X),Pe=!1}return Pe}finally{g=null,m=Z,v=!1}}var D=!1,S=null,_=-1,A=5,R=-1;function N(){return!(t.unstable_now()-R<A)}function j(){if(S!==null){var B=t.unstable_now();R=B;var X=!0;try{X=S(!0,B)}finally{X?P():(D=!1,S=null)}}else D=!1}var P;if(typeof w=="function")P=function(){w(j)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,pn=ne.port2;ne.port1.onmessage=j,P=function(){pn.postMessage(null)}}else P=function(){k(j,0)};function en(B){S=B,D||(D=!0,P())}function mn(B,X){_=k(function(){B(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){T||v||(T=!0,en(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var Z=m;m=X;try{return B()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=m;m=B;try{return X()}finally{m=Z}},t.unstable_scheduleCallback=function(B,X,Z){var we=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,B){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Z+he,B={id:f++,callback:X,priorityLevel:B,startTime:Z,expirationTime:he,sortIndex:-1},Z>we?(B.sortIndex=Z,e(d,B),n(u)===null&&B===n(d)&&(I?(y(_),_=-1):I=!0,mn(x,Z-we))):(B.sortIndex=he,e(u,B),T||v||(T=!0,en(L))),B},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(B){var X=m;return function(){var Z=m;m=X;try{return B.apply(this,arguments)}finally{m=Z}}}})(Gy);Hy.exports=Gy;var Gx=Hy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kx=b,Rt=Gx;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ky=new Set,ho={};function oi(t,e){Hi(t,e),Hi(t+"Capture",e)}function Hi(t,e){for(ho[t]=e,t=0;t<e.length;t++)Ky.add(e[t])}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cd=Object.prototype.hasOwnProperty,Qx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qm={},Wm={};function Xx(t){return cd.call(Wm,t)?!0:cd.call(qm,t)?!1:Qx.test(t)?Wm[t]=!0:(qm[t]=!0,!1)}function Yx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Jx(t,e,n,r){if(e===null||typeof e>"u"||Yx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qe[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qe[e]=new mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qe[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qe[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qe[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qe[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qe[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qe[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qe[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lh=/[\-:]([a-z])/g;function Vh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lh,Vh);Qe[e]=new mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lh,Vh);Qe[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lh,Vh);Qe[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qe[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qe[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mh(t,e,n,r){var i=Qe.hasOwnProperty(e)?Qe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Jx(e,n,i,r)&&(n=null),r||i===null?Xx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bn=Kx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ca=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),xi=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),ud=Symbol.for("react.profiler"),Qy=Symbol.for("react.provider"),Xy=Symbol.for("react.context"),Uh=Symbol.for("react.forward_ref"),dd=Symbol.for("react.suspense"),hd=Symbol.for("react.suspense_list"),zh=Symbol.for("react.memo"),Qn=Symbol.for("react.lazy"),Yy=Symbol.for("react.offscreen"),Hm=Symbol.iterator;function Ps(t){return t===null||typeof t!="object"?null:(t=Hm&&t[Hm]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,Eu;function Bs(t){if(Eu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eu=e&&e[1]||""}return`
`+Eu+t}var Tu=!1;function xu(t,e){if(!t||Tu)return"";Tu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,c=s.length-1;1<=o&&0<=c&&i[o]!==s[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==s[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==s[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Tu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bs(t):""}function Zx(t){switch(t.tag){case 5:return Bs(t.type);case 16:return Bs("Lazy");case 13:return Bs("Suspense");case 19:return Bs("SuspenseList");case 0:case 2:case 15:return t=xu(t.type,!1),t;case 11:return t=xu(t.type.render,!1),t;case 1:return t=xu(t.type,!0),t;default:return""}}function fd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xi:return"Fragment";case Ti:return"Portal";case ud:return"Profiler";case Fh:return"StrictMode";case dd:return"Suspense";case hd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xy:return(t.displayName||"Context")+".Consumer";case Qy:return(t._context.displayName||"Context")+".Provider";case Uh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zh:return e=t.displayName||null,e!==null?e:fd(t.type)||"Memo";case Qn:e=t._payload,t=t._init;try{return fd(t(e))}catch{}}return null}function eI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fd(e);case 8:return e===Fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tI(t){var e=Jy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Na(t){t._valueTracker||(t._valueTracker=tI(t))}function Zy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Jy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pd(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Er(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function e_(t,e){e=e.checked,e!=null&&Mh(t,"checked",e,!1)}function md(t,e){e_(t,e);var n=Er(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gd(t,e.type,n):e.hasOwnProperty("defaultValue")&&gd(t,e.type,Er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Km(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gd(t,e,n){(e!=="number"||yl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $s=Array.isArray;function Oi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Er(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function vd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if($s(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Er(n)}}function t_(t,e){var n=Er(e.value),r=Er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function n_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?n_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Aa,r_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nI=["Webkit","ms","Moz","O"];Object.keys(Xs).forEach(function(t){nI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xs[e]=Xs[t]})});function i_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xs.hasOwnProperty(t)&&Xs[t]?(""+e).trim():e+"px"}function s_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=i_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var rI=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _d(t,e){if(e){if(rI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function wd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ed=null;function Bh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Td=null,Li=null,Vi=null;function Ym(t){if(t=qo(t)){if(typeof Td!="function")throw Error(U(280));var e=t.stateNode;e&&(e=dc(e),Td(t.stateNode,t.type,e))}}function o_(t){Li?Vi?Vi.push(t):Vi=[t]:Li=t}function a_(){if(Li){var t=Li,e=Vi;if(Vi=Li=null,Ym(t),e)for(t=0;t<e.length;t++)Ym(e[t])}}function l_(t,e){return t(e)}function c_(){}var Iu=!1;function u_(t,e,n){if(Iu)return t(e,n);Iu=!0;try{return l_(t,e,n)}finally{Iu=!1,(Li!==null||Vi!==null)&&(c_(),a_())}}function po(t,e){var n=t.stateNode;if(n===null)return null;var r=dc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var xd=!1;if(kn)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){xd=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{xd=!1}function iI(t,e,n,r,i,s,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ys=!1,_l=null,wl=!1,Id=null,sI={onError:function(t){Ys=!0,_l=t}};function oI(t,e,n,r,i,s,o,c,u){Ys=!1,_l=null,iI.apply(sI,arguments)}function aI(t,e,n,r,i,s,o,c,u){if(oI.apply(this,arguments),Ys){if(Ys){var d=_l;Ys=!1,_l=null}else throw Error(U(198));wl||(wl=!0,Id=d)}}function ai(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function d_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jm(t){if(ai(t)!==t)throw Error(U(188))}function lI(t){var e=t.alternate;if(!e){if(e=ai(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Jm(i),t;if(s===r)return Jm(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function h_(t){return t=lI(t),t!==null?f_(t):null}function f_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=f_(t);if(e!==null)return e;t=t.sibling}return null}var p_=Rt.unstable_scheduleCallback,Zm=Rt.unstable_cancelCallback,cI=Rt.unstable_shouldYield,uI=Rt.unstable_requestPaint,je=Rt.unstable_now,dI=Rt.unstable_getCurrentPriorityLevel,$h=Rt.unstable_ImmediatePriority,m_=Rt.unstable_UserBlockingPriority,El=Rt.unstable_NormalPriority,hI=Rt.unstable_LowPriority,g_=Rt.unstable_IdlePriority,ac=null,on=null;function fI(t){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(ac,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:gI,pI=Math.log,mI=Math.LN2;function gI(t){return t>>>=0,t===0?32:31-(pI(t)/mI|0)|0}var Ra=64,Pa=4194304;function qs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=qs(c):(s&=o,s!==0&&(r=qs(s)))}else o=n&~i,o!==0?r=qs(o):s!==0&&(r=qs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kt(e),i=1<<n,r|=t[n],e&=~i;return r}function vI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Kt(s),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=vI(c,e)):u<=e&&(t.expiredLanes|=c),s&=~c}}function Sd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function v_(){var t=Ra;return Ra<<=1,!(Ra&4194240)&&(Ra=64),t}function Su(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kt(e),t[e]=n}function _I(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function qh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ue=0;function y_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var __,Wh,w_,E_,T_,Cd=!1,ka=[],cr=null,ur=null,dr=null,mo=new Map,go=new Map,Yn=[],wI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eg(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":mo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(e.pointerId)}}function js(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qo(e),e!==null&&Wh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function EI(t,e,n,r,i){switch(e){case"focusin":return cr=js(cr,t,e,n,r,i),!0;case"dragenter":return ur=js(ur,t,e,n,r,i),!0;case"mouseover":return dr=js(dr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return mo.set(s,js(mo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,go.set(s,js(go.get(s)||null,t,e,n,r,i)),!0}return!1}function x_(t){var e=zr(t.target);if(e!==null){var n=ai(e);if(n!==null){if(e=n.tag,e===13){if(e=d_(n),e!==null){t.blockedOn=e,T_(t.priority,function(){w_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Za(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ed=r,n.target.dispatchEvent(r),Ed=null}else return e=qo(n),e!==null&&Wh(e),t.blockedOn=n,!1;e.shift()}return!0}function tg(t,e,n){Za(t)&&n.delete(e)}function TI(){Cd=!1,cr!==null&&Za(cr)&&(cr=null),ur!==null&&Za(ur)&&(ur=null),dr!==null&&Za(dr)&&(dr=null),mo.forEach(tg),go.forEach(tg)}function bs(t,e){t.blockedOn===e&&(t.blockedOn=null,Cd||(Cd=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,TI)))}function vo(t){function e(i){return bs(i,t)}if(0<ka.length){bs(ka[0],t);for(var n=1;n<ka.length;n++){var r=ka[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cr!==null&&bs(cr,t),ur!==null&&bs(ur,t),dr!==null&&bs(dr,t),mo.forEach(e),go.forEach(e),n=0;n<Yn.length;n++)r=Yn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yn.length&&(n=Yn[0],n.blockedOn===null);)x_(n),n.blockedOn===null&&Yn.shift()}var Mi=Bn.ReactCurrentBatchConfig,xl=!0;function xI(t,e,n,r){var i=ue,s=Mi.transition;Mi.transition=null;try{ue=1,Hh(t,e,n,r)}finally{ue=i,Mi.transition=s}}function II(t,e,n,r){var i=ue,s=Mi.transition;Mi.transition=null;try{ue=4,Hh(t,e,n,r)}finally{ue=i,Mi.transition=s}}function Hh(t,e,n,r){if(xl){var i=Nd(t,e,n,r);if(i===null)Ou(t,e,r,Il,n),eg(t,r);else if(EI(i,t,e,n,r))r.stopPropagation();else if(eg(t,r),e&4&&-1<wI.indexOf(t)){for(;i!==null;){var s=qo(i);if(s!==null&&__(s),s=Nd(t,e,n,r),s===null&&Ou(t,e,r,Il,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ou(t,e,r,null,n)}}var Il=null;function Nd(t,e,n,r){if(Il=null,t=Bh(r),t=zr(t),t!==null)if(e=ai(t),e===null)t=null;else if(n=e.tag,n===13){if(t=d_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Il=t,null}function I_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dI()){case $h:return 1;case m_:return 4;case El:case hI:return 16;case g_:return 536870912;default:return 16}default:return 16}}var ir=null,Gh=null,el=null;function S_(){if(el)return el;var t,e=Gh,n=e.length,r,i="value"in ir?ir.value:ir.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return el=i.slice(t,1<r?1-r:void 0)}function tl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ja(){return!0}function ng(){return!1}function kt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ja:ng,this.isPropagationStopped=ng,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ja)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ja)},persist:function(){},isPersistent:ja}),e}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kh=kt(ls),$o=xe({},ls,{view:0,detail:0}),SI=kt($o),Cu,Nu,Ds,lc=xe({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ds&&(Ds&&t.type==="mousemove"?(Cu=t.screenX-Ds.screenX,Nu=t.screenY-Ds.screenY):Nu=Cu=0,Ds=t),Cu)},movementY:function(t){return"movementY"in t?t.movementY:Nu}}),rg=kt(lc),CI=xe({},lc,{dataTransfer:0}),NI=kt(CI),AI=xe({},$o,{relatedTarget:0}),Au=kt(AI),RI=xe({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),PI=kt(RI),kI=xe({},ls,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jI=kt(kI),bI=xe({},ls,{data:0}),ig=kt(bI),DI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LI[t])?!!e[t]:!1}function Qh(){return VI}var MI=xe({},$o,{key:function(t){if(t.key){var e=DI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qh,charCode:function(t){return t.type==="keypress"?tl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FI=kt(MI),UI=xe({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sg=kt(UI),zI=xe({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qh}),BI=kt(zI),$I=xe({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),qI=kt($I),WI=xe({},lc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HI=kt(WI),GI=[9,13,27,32],Xh=kn&&"CompositionEvent"in window,Js=null;kn&&"documentMode"in document&&(Js=document.documentMode);var KI=kn&&"TextEvent"in window&&!Js,C_=kn&&(!Xh||Js&&8<Js&&11>=Js),og=" ",ag=!1;function N_(t,e){switch(t){case"keyup":return GI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ii=!1;function QI(t,e){switch(t){case"compositionend":return A_(e);case"keypress":return e.which!==32?null:(ag=!0,og);case"textInput":return t=e.data,t===og&&ag?null:t;default:return null}}function XI(t,e){if(Ii)return t==="compositionend"||!Xh&&N_(t,e)?(t=S_(),el=Gh=ir=null,Ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return C_&&e.locale!=="ko"?null:e.data;default:return null}}var YI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YI[t.type]:e==="textarea"}function R_(t,e,n,r){o_(r),e=Sl(e,"onChange"),0<e.length&&(n=new Kh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zs=null,yo=null;function JI(t){U_(t,0)}function cc(t){var e=Ni(t);if(Zy(e))return t}function ZI(t,e){if(t==="change")return e}var P_=!1;if(kn){var Ru;if(kn){var Pu="oninput"in document;if(!Pu){var cg=document.createElement("div");cg.setAttribute("oninput","return;"),Pu=typeof cg.oninput=="function"}Ru=Pu}else Ru=!1;P_=Ru&&(!document.documentMode||9<document.documentMode)}function ug(){Zs&&(Zs.detachEvent("onpropertychange",k_),yo=Zs=null)}function k_(t){if(t.propertyName==="value"&&cc(yo)){var e=[];R_(e,yo,t,Bh(t)),u_(JI,e)}}function eS(t,e,n){t==="focusin"?(ug(),Zs=e,yo=n,Zs.attachEvent("onpropertychange",k_)):t==="focusout"&&ug()}function tS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cc(yo)}function nS(t,e){if(t==="click")return cc(e)}function rS(t,e){if(t==="input"||t==="change")return cc(e)}function iS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xt=typeof Object.is=="function"?Object.is:iS;function _o(t,e){if(Xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cd.call(e,i)||!Xt(t[i],e[i]))return!1}return!0}function dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hg(t,e){var n=dg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dg(n)}}function j_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?j_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function b_(){for(var t=window,e=yl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yl(t.document)}return e}function Yh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sS(t){var e=b_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&j_(n.ownerDocument.documentElement,n)){if(r!==null&&Yh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=hg(n,s);var o=hg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oS=kn&&"documentMode"in document&&11>=document.documentMode,Si=null,Ad=null,eo=null,Rd=!1;function fg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rd||Si==null||Si!==yl(r)||(r=Si,"selectionStart"in r&&Yh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eo&&_o(eo,r)||(eo=r,r=Sl(Ad,"onSelect"),0<r.length&&(e=new Kh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Si)))}function ba(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ci={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},ku={},D_={};kn&&(D_=document.createElement("div").style,"AnimationEvent"in window||(delete Ci.animationend.animation,delete Ci.animationiteration.animation,delete Ci.animationstart.animation),"TransitionEvent"in window||delete Ci.transitionend.transition);function uc(t){if(ku[t])return ku[t];if(!Ci[t])return t;var e=Ci[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in D_)return ku[t]=e[n];return t}var O_=uc("animationend"),L_=uc("animationiteration"),V_=uc("animationstart"),M_=uc("transitionend"),F_=new Map,pg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,e){F_.set(t,e),oi(e,[t])}for(var ju=0;ju<pg.length;ju++){var bu=pg[ju],aS=bu.toLowerCase(),lS=bu[0].toUpperCase()+bu.slice(1);Ar(aS,"on"+lS)}Ar(O_,"onAnimationEnd");Ar(L_,"onAnimationIteration");Ar(V_,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(M_,"onTransitionEnd");Hi("onMouseEnter",["mouseout","mouseover"]);Hi("onMouseLeave",["mouseout","mouseover"]);Hi("onPointerEnter",["pointerout","pointerover"]);Hi("onPointerLeave",["pointerout","pointerover"]);oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ws));function mg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,aI(r,e,void 0,t),t.currentTarget=null}function U_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==s&&i.isPropagationStopped())break e;mg(i,c,d),s=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==s&&i.isPropagationStopped())break e;mg(i,c,d),s=u}}}if(wl)throw t=Id,wl=!1,Id=null,t}function ge(t,e){var n=e[Dd];n===void 0&&(n=e[Dd]=new Set);var r=t+"__bubble";n.has(r)||(z_(e,t,2,!1),n.add(r))}function Du(t,e,n){var r=0;e&&(r|=4),z_(n,t,r,e)}var Da="_reactListening"+Math.random().toString(36).slice(2);function wo(t){if(!t[Da]){t[Da]=!0,Ky.forEach(function(n){n!=="selectionchange"&&(cS.has(n)||Du(n,!1,t),Du(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Da]||(e[Da]=!0,Du("selectionchange",!1,e))}}function z_(t,e,n,r){switch(I_(e)){case 1:var i=xI;break;case 4:i=II;break;default:i=Hh}n=i.bind(null,e,n,t),i=void 0,!xd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ou(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=zr(c),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}c=c.parentNode}}r=r.return}u_(function(){var d=s,f=Bh(n),g=[];e:{var m=F_.get(t);if(m!==void 0){var v=Kh,T=t;switch(t){case"keypress":if(tl(n)===0)break e;case"keydown":case"keyup":v=FI;break;case"focusin":T="focus",v=Au;break;case"focusout":T="blur",v=Au;break;case"beforeblur":case"afterblur":v=Au;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=NI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=BI;break;case O_:case L_:case V_:v=PI;break;case M_:v=qI;break;case"scroll":v=SI;break;case"wheel":v=HI;break;case"copy":case"cut":case"paste":v=jI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=sg}var I=(e&4)!==0,k=!I&&t==="scroll",y=I?m!==null?m+"Capture":null:m;I=[];for(var w=d,C;w!==null;){C=w;var x=C.stateNode;if(C.tag===5&&x!==null&&(C=x,y!==null&&(x=po(w,y),x!=null&&I.push(Eo(w,x,C)))),k)break;w=w.return}0<I.length&&(m=new v(m,T,null,n,f),g.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==Ed&&(T=n.relatedTarget||n.fromElement)&&(zr(T)||T[jn]))break e;if((v||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,v?(T=n.relatedTarget||n.toElement,v=d,T=T?zr(T):null,T!==null&&(k=ai(T),T!==k||T.tag!==5&&T.tag!==6)&&(T=null)):(v=null,T=d),v!==T)){if(I=rg,x="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(I=sg,x="onPointerLeave",y="onPointerEnter",w="pointer"),k=v==null?m:Ni(v),C=T==null?m:Ni(T),m=new I(x,w+"leave",v,n,f),m.target=k,m.relatedTarget=C,x=null,zr(f)===d&&(I=new I(y,w+"enter",T,n,f),I.target=C,I.relatedTarget=k,x=I),k=x,v&&T)t:{for(I=v,y=T,w=0,C=I;C;C=yi(C))w++;for(C=0,x=y;x;x=yi(x))C++;for(;0<w-C;)I=yi(I),w--;for(;0<C-w;)y=yi(y),C--;for(;w--;){if(I===y||y!==null&&I===y.alternate)break t;I=yi(I),y=yi(y)}I=null}else I=null;v!==null&&gg(g,m,v,I,!1),T!==null&&k!==null&&gg(g,k,T,I,!0)}}e:{if(m=d?Ni(d):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var L=ZI;else if(lg(m))if(P_)L=rS;else{L=tS;var D=eS}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=nS);if(L&&(L=L(t,d))){R_(g,L,n,f);break e}D&&D(t,m,d),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&gd(m,"number",m.value)}switch(D=d?Ni(d):window,t){case"focusin":(lg(D)||D.contentEditable==="true")&&(Si=D,Ad=d,eo=null);break;case"focusout":eo=Ad=Si=null;break;case"mousedown":Rd=!0;break;case"contextmenu":case"mouseup":case"dragend":Rd=!1,fg(g,n,f);break;case"selectionchange":if(oS)break;case"keydown":case"keyup":fg(g,n,f)}var S;if(Xh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ii?N_(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(C_&&n.locale!=="ko"&&(Ii||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ii&&(S=S_()):(ir=f,Gh="value"in ir?ir.value:ir.textContent,Ii=!0)),D=Sl(d,_),0<D.length&&(_=new ig(_,t,null,n,f),g.push({event:_,listeners:D}),S?_.data=S:(S=A_(n),S!==null&&(_.data=S)))),(S=KI?QI(t,n):XI(t,n))&&(d=Sl(d,"onBeforeInput"),0<d.length&&(f=new ig("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:d}),f.data=S))}U_(g,e)})}function Eo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=po(t,n),s!=null&&r.unshift(Eo(t,s,i)),s=po(t,e),s!=null&&r.push(Eo(t,s,i))),t=t.return}return r}function yi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=po(n,s),u!=null&&o.unshift(Eo(n,u,c))):i||(u=po(n,s),u!=null&&o.push(Eo(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uS=/\r\n?/g,dS=/\u0000|\uFFFD/g;function vg(t){return(typeof t=="string"?t:""+t).replace(uS,`
`).replace(dS,"")}function Oa(t,e,n){if(e=vg(e),vg(t)!==e&&n)throw Error(U(425))}function Cl(){}var Pd=null,kd=null;function jd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bd=typeof setTimeout=="function"?setTimeout:void 0,hS=typeof clearTimeout=="function"?clearTimeout:void 0,yg=typeof Promise=="function"?Promise:void 0,fS=typeof queueMicrotask=="function"?queueMicrotask:typeof yg<"u"?function(t){return yg.resolve(null).then(t).catch(pS)}:bd;function pS(t){setTimeout(function(){throw t})}function Lu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),vo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vo(e)}function hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _g(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var cs=Math.random().toString(36).slice(2),rn="__reactFiber$"+cs,To="__reactProps$"+cs,jn="__reactContainer$"+cs,Dd="__reactEvents$"+cs,mS="__reactListeners$"+cs,gS="__reactHandles$"+cs;function zr(t){var e=t[rn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jn]||n[rn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_g(t);t!==null;){if(n=t[rn])return n;t=_g(t)}return e}t=n,n=t.parentNode}return null}function qo(t){return t=t[rn]||t[jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function dc(t){return t[To]||null}var Od=[],Ai=-1;function Rr(t){return{current:t}}function ye(t){0>Ai||(t.current=Od[Ai],Od[Ai]=null,Ai--)}function pe(t,e){Ai++,Od[Ai]=t.current,t.current=e}var Tr={},ot=Rr(Tr),wt=Rr(!1),Xr=Tr;function Gi(t,e){var n=t.type.contextTypes;if(!n)return Tr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Et(t){return t=t.childContextTypes,t!=null}function Nl(){ye(wt),ye(ot)}function wg(t,e,n){if(ot.current!==Tr)throw Error(U(168));pe(ot,e),pe(wt,n)}function B_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,eI(t)||"Unknown",i));return xe({},n,r)}function Al(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tr,Xr=ot.current,pe(ot,t),pe(wt,wt.current),!0}function Eg(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=B_(t,e,Xr),r.__reactInternalMemoizedMergedChildContext=t,ye(wt),ye(ot),pe(ot,t)):ye(wt),pe(wt,n)}var xn=null,hc=!1,Vu=!1;function $_(t){xn===null?xn=[t]:xn.push(t)}function vS(t){hc=!0,$_(t)}function Pr(){if(!Vu&&xn!==null){Vu=!0;var t=0,e=ue;try{var n=xn;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xn=null,hc=!1}catch(i){throw xn!==null&&(xn=xn.slice(t+1)),p_($h,Pr),i}finally{ue=e,Vu=!1}}return null}var Ri=[],Pi=0,Rl=null,Pl=0,bt=[],Dt=0,Yr=null,In=1,Sn="";function Mr(t,e){Ri[Pi++]=Pl,Ri[Pi++]=Rl,Rl=t,Pl=e}function q_(t,e,n){bt[Dt++]=In,bt[Dt++]=Sn,bt[Dt++]=Yr,Yr=t;var r=In;t=Sn;var i=32-Kt(r)-1;r&=~(1<<i),n+=1;var s=32-Kt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,In=1<<32-Kt(e)+i|n<<i|r,Sn=s+t}else In=1<<s|n<<i|r,Sn=t}function Jh(t){t.return!==null&&(Mr(t,1),q_(t,1,0))}function Zh(t){for(;t===Rl;)Rl=Ri[--Pi],Ri[Pi]=null,Pl=Ri[--Pi],Ri[Pi]=null;for(;t===Yr;)Yr=bt[--Dt],bt[Dt]=null,Sn=bt[--Dt],bt[Dt]=null,In=bt[--Dt],bt[Dt]=null}var At=null,St=null,_e=!1,Ht=null;function W_(t,e){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Tg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,St=hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,St=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yr!==null?{id:In,overflow:Sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,St=null,!0):!1;default:return!1}}function Ld(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vd(t){if(_e){var e=St;if(e){var n=e;if(!Tg(t,e)){if(Ld(t))throw Error(U(418));e=hr(n.nextSibling);var r=At;e&&Tg(t,e)?W_(r,n):(t.flags=t.flags&-4097|2,_e=!1,At=t)}}else{if(Ld(t))throw Error(U(418));t.flags=t.flags&-4097|2,_e=!1,At=t}}}function xg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function La(t){if(t!==At)return!1;if(!_e)return xg(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jd(t.type,t.memoizedProps)),e&&(e=St)){if(Ld(t))throw H_(),Error(U(418));for(;e;)W_(t,e),e=hr(e.nextSibling)}if(xg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){St=hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}St=null}}else St=At?hr(t.stateNode.nextSibling):null;return!0}function H_(){for(var t=St;t;)t=hr(t.nextSibling)}function Ki(){St=At=null,_e=!1}function ef(t){Ht===null?Ht=[t]:Ht.push(t)}var yS=Bn.ReactCurrentBatchConfig;function Os(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var c=i.refs;o===null?delete c[s]:c[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Va(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ig(t){var e=t._init;return e(t._payload)}function G_(t){function e(y,w){if(t){var C=y.deletions;C===null?(y.deletions=[w],y.flags|=16):C.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=gr(y,w),y.index=0,y.sibling=null,y}function s(y,w,C){return y.index=C,t?(C=y.alternate,C!==null?(C=C.index,C<w?(y.flags|=2,w):C):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function c(y,w,C,x){return w===null||w.tag!==6?(w=qu(C,y.mode,x),w.return=y,w):(w=i(w,C),w.return=y,w)}function u(y,w,C,x){var L=C.type;return L===xi?f(y,w,C.props.children,x,C.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Qn&&Ig(L)===w.type)?(x=i(w,C.props),x.ref=Os(y,w,C),x.return=y,x):(x=ll(C.type,C.key,C.props,null,y.mode,x),x.ref=Os(y,w,C),x.return=y,x)}function d(y,w,C,x){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Wu(C,y.mode,x),w.return=y,w):(w=i(w,C.children||[]),w.return=y,w)}function f(y,w,C,x,L){return w===null||w.tag!==7?(w=Hr(C,y.mode,x,L),w.return=y,w):(w=i(w,C),w.return=y,w)}function g(y,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=qu(""+w,y.mode,C),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ca:return C=ll(w.type,w.key,w.props,null,y.mode,C),C.ref=Os(y,null,w),C.return=y,C;case Ti:return w=Wu(w,y.mode,C),w.return=y,w;case Qn:var x=w._init;return g(y,x(w._payload),C)}if($s(w)||Ps(w))return w=Hr(w,y.mode,C,null),w.return=y,w;Va(y,w)}return null}function m(y,w,C,x){var L=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:c(y,w,""+C,x);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ca:return C.key===L?u(y,w,C,x):null;case Ti:return C.key===L?d(y,w,C,x):null;case Qn:return L=C._init,m(y,w,L(C._payload),x)}if($s(C)||Ps(C))return L!==null?null:f(y,w,C,x,null);Va(y,C)}return null}function v(y,w,C,x,L){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(C)||null,c(w,y,""+x,L);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ca:return y=y.get(x.key===null?C:x.key)||null,u(w,y,x,L);case Ti:return y=y.get(x.key===null?C:x.key)||null,d(w,y,x,L);case Qn:var D=x._init;return v(y,w,C,D(x._payload),L)}if($s(x)||Ps(x))return y=y.get(C)||null,f(w,y,x,L,null);Va(w,x)}return null}function T(y,w,C,x){for(var L=null,D=null,S=w,_=w=0,A=null;S!==null&&_<C.length;_++){S.index>_?(A=S,S=null):A=S.sibling;var R=m(y,S,C[_],x);if(R===null){S===null&&(S=A);break}t&&S&&R.alternate===null&&e(y,S),w=s(R,w,_),D===null?L=R:D.sibling=R,D=R,S=A}if(_===C.length)return n(y,S),_e&&Mr(y,_),L;if(S===null){for(;_<C.length;_++)S=g(y,C[_],x),S!==null&&(w=s(S,w,_),D===null?L=S:D.sibling=S,D=S);return _e&&Mr(y,_),L}for(S=r(y,S);_<C.length;_++)A=v(S,y,_,C[_],x),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?_:A.key),w=s(A,w,_),D===null?L=A:D.sibling=A,D=A);return t&&S.forEach(function(N){return e(y,N)}),_e&&Mr(y,_),L}function I(y,w,C,x){var L=Ps(C);if(typeof L!="function")throw Error(U(150));if(C=L.call(C),C==null)throw Error(U(151));for(var D=L=null,S=w,_=w=0,A=null,R=C.next();S!==null&&!R.done;_++,R=C.next()){S.index>_?(A=S,S=null):A=S.sibling;var N=m(y,S,R.value,x);if(N===null){S===null&&(S=A);break}t&&S&&N.alternate===null&&e(y,S),w=s(N,w,_),D===null?L=N:D.sibling=N,D=N,S=A}if(R.done)return n(y,S),_e&&Mr(y,_),L;if(S===null){for(;!R.done;_++,R=C.next())R=g(y,R.value,x),R!==null&&(w=s(R,w,_),D===null?L=R:D.sibling=R,D=R);return _e&&Mr(y,_),L}for(S=r(y,S);!R.done;_++,R=C.next())R=v(S,y,_,R.value,x),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?_:R.key),w=s(R,w,_),D===null?L=R:D.sibling=R,D=R);return t&&S.forEach(function(j){return e(y,j)}),_e&&Mr(y,_),L}function k(y,w,C,x){if(typeof C=="object"&&C!==null&&C.type===xi&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ca:e:{for(var L=C.key,D=w;D!==null;){if(D.key===L){if(L=C.type,L===xi){if(D.tag===7){n(y,D.sibling),w=i(D,C.props.children),w.return=y,y=w;break e}}else if(D.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Qn&&Ig(L)===D.type){n(y,D.sibling),w=i(D,C.props),w.ref=Os(y,D,C),w.return=y,y=w;break e}n(y,D);break}else e(y,D);D=D.sibling}C.type===xi?(w=Hr(C.props.children,y.mode,x,C.key),w.return=y,y=w):(x=ll(C.type,C.key,C.props,null,y.mode,x),x.ref=Os(y,w,C),x.return=y,y=x)}return o(y);case Ti:e:{for(D=C.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(y,w.sibling),w=i(w,C.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=Wu(C,y.mode,x),w.return=y,y=w}return o(y);case Qn:return D=C._init,k(y,w,D(C._payload),x)}if($s(C))return T(y,w,C,x);if(Ps(C))return I(y,w,C,x);Va(y,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(y,w.sibling),w=i(w,C),w.return=y,y=w):(n(y,w),w=qu(C,y.mode,x),w.return=y,y=w),o(y)):n(y,w)}return k}var Qi=G_(!0),K_=G_(!1),kl=Rr(null),jl=null,ki=null,tf=null;function nf(){tf=ki=jl=null}function rf(t){var e=kl.current;ye(kl),t._currentValue=e}function Md(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fi(t,e){jl=t,tf=ki=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function Ft(t){var e=t._currentValue;if(tf!==t)if(t={context:t,memoizedValue:e,next:null},ki===null){if(jl===null)throw Error(U(308));ki=t,jl.dependencies={lanes:0,firstContext:t}}else ki=ki.next=t;return e}var Br=null;function sf(t){Br===null?Br=[t]:Br.push(t)}function Q_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,sf(e)):(n.next=i.next,i.next=n),e.interleaved=n,bn(t,r)}function bn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xn=!1;function of(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,bn(t,n)}return i=r.interleaved,i===null?(e.next=e,sf(r)):(e.next=i.next,i.next=e),r.interleaved=e,bn(t,n)}function nl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qh(t,n)}}function Sg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bl(t,e,n,r){var i=t.updateQueue;Xn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;o=0,f=d=u=null,c=s;do{var m=c.lane,v=c.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var T=t,I=c;switch(m=e,v=n,I.tag){case 1:if(T=I.payload,typeof T=="function"){g=T.call(v,g,m);break e}g=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=I.payload,m=typeof T=="function"?T.call(v,g,m):T,m==null)break e;g=xe({},g,m);break e;case 2:Xn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[c]:m.push(c))}else v={eventTime:v,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=v,u=g):f=f.next=v,o|=m;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;m=c,c=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(f===null&&(u=g),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Zr|=o,t.lanes=o,t.memoizedState=g}}function Cg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var Wo={},an=Rr(Wo),xo=Rr(Wo),Io=Rr(Wo);function $r(t){if(t===Wo)throw Error(U(174));return t}function af(t,e){switch(pe(Io,e),pe(xo,t),pe(an,Wo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yd(e,t)}ye(an),pe(an,e)}function Xi(){ye(an),ye(xo),ye(Io)}function Y_(t){$r(Io.current);var e=$r(an.current),n=yd(e,t.type);e!==n&&(pe(xo,t),pe(an,n))}function lf(t){xo.current===t&&(ye(an),ye(xo))}var Ee=Rr(0);function Dl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mu=[];function cf(){for(var t=0;t<Mu.length;t++)Mu[t]._workInProgressVersionPrimary=null;Mu.length=0}var rl=Bn.ReactCurrentDispatcher,Fu=Bn.ReactCurrentBatchConfig,Jr=0,Te=null,Ve=null,Ue=null,Ol=!1,to=!1,So=0,_S=0;function et(){throw Error(U(321))}function uf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xt(t[n],e[n]))return!1;return!0}function df(t,e,n,r,i,s){if(Jr=s,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rl.current=t===null||t.memoizedState===null?xS:IS,t=n(r,i),to){s=0;do{if(to=!1,So=0,25<=s)throw Error(U(301));s+=1,Ue=Ve=null,e.updateQueue=null,rl.current=SS,t=n(r,i)}while(to)}if(rl.current=Ll,e=Ve!==null&&Ve.next!==null,Jr=0,Ue=Ve=Te=null,Ol=!1,e)throw Error(U(300));return t}function hf(){var t=So!==0;return So=0,t}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Te.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function Ut(){if(Ve===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=Ue===null?Te.memoizedState:Ue.next;if(e!==null)Ue=e,Ve=t;else{if(t===null)throw Error(U(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Ue===null?Te.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Co(t,e){return typeof e=="function"?e(t):e}function Uu(t){var e=Ut(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ve,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=o=null,u=null,d=s;do{var f=d.lane;if((Jr&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=g,o=r):u=u.next=g,Te.lanes|=f,Zr|=f}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=c,Xt(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Te.lanes|=s,Zr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zu(t){var e=Ut(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Xt(s,e.memoizedState)||(_t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function J_(){}function Z_(t,e){var n=Te,r=Ut(),i=e(),s=!Xt(r.memoizedState,i);if(s&&(r.memoizedState=i,_t=!0),r=r.queue,ff(nw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,No(9,tw.bind(null,n,r,i,e),void 0,null),ze===null)throw Error(U(349));Jr&30||ew(n,e,i)}return i}function ew(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tw(t,e,n,r){e.value=n,e.getSnapshot=r,rw(e)&&iw(t)}function nw(t,e,n){return n(function(){rw(e)&&iw(t)})}function rw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xt(t,n)}catch{return!0}}function iw(t){var e=bn(t,1);e!==null&&Qt(e,t,1,-1)}function Ng(t){var e=nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=TS.bind(null,Te,t),[e.memoizedState,t]}function No(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function sw(){return Ut().memoizedState}function il(t,e,n,r){var i=nn();Te.flags|=t,i.memoizedState=No(1|e,n,void 0,r===void 0?null:r)}function fc(t,e,n,r){var i=Ut();r=r===void 0?null:r;var s=void 0;if(Ve!==null){var o=Ve.memoizedState;if(s=o.destroy,r!==null&&uf(r,o.deps)){i.memoizedState=No(e,n,s,r);return}}Te.flags|=t,i.memoizedState=No(1|e,n,s,r)}function Ag(t,e){return il(8390656,8,t,e)}function ff(t,e){return fc(2048,8,t,e)}function ow(t,e){return fc(4,2,t,e)}function aw(t,e){return fc(4,4,t,e)}function lw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cw(t,e,n){return n=n!=null?n.concat([t]):null,fc(4,4,lw.bind(null,e,t),n)}function pf(){}function uw(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dw(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hw(t,e,n){return Jr&21?(Xt(n,e)||(n=v_(),Te.lanes|=n,Zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function wS(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=Fu.transition;Fu.transition={};try{t(!1),e()}finally{ue=n,Fu.transition=r}}function fw(){return Ut().memoizedState}function ES(t,e,n){var r=mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pw(t))mw(e,n);else if(n=Q_(t,e,n,r),n!==null){var i=ht();Qt(n,t,r,i),gw(n,e,r)}}function TS(t,e,n){var r=mr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pw(t))mw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,c=s(o,n);if(i.hasEagerState=!0,i.eagerState=c,Xt(c,o)){var u=e.interleaved;u===null?(i.next=i,sf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Q_(t,e,i,r),n!==null&&(i=ht(),Qt(n,t,r,i),gw(n,e,r))}}function pw(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function mw(t,e){to=Ol=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qh(t,n)}}var Ll={readContext:Ft,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},xS={readContext:Ft,useCallback:function(t,e){return nn().memoizedState=[t,e===void 0?null:e],t},useContext:Ft,useEffect:Ag,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,il(4194308,4,lw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return il(4194308,4,t,e)},useInsertionEffect:function(t,e){return il(4,2,t,e)},useMemo:function(t,e){var n=nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ES.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=nn();return t={current:t},e.memoizedState=t},useState:Ng,useDebugValue:pf,useDeferredValue:function(t){return nn().memoizedState=t},useTransition:function(){var t=Ng(!1),e=t[0];return t=wS.bind(null,t[1]),nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,i=nn();if(_e){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),ze===null)throw Error(U(349));Jr&30||ew(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ag(nw.bind(null,r,s,t),[t]),r.flags|=2048,No(9,tw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=nn(),e=ze.identifierPrefix;if(_e){var n=Sn,r=In;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=So++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_S++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IS={readContext:Ft,useCallback:uw,useContext:Ft,useEffect:ff,useImperativeHandle:cw,useInsertionEffect:ow,useLayoutEffect:aw,useMemo:dw,useReducer:Uu,useRef:sw,useState:function(){return Uu(Co)},useDebugValue:pf,useDeferredValue:function(t){var e=Ut();return hw(e,Ve.memoizedState,t)},useTransition:function(){var t=Uu(Co)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:J_,useSyncExternalStore:Z_,useId:fw,unstable_isNewReconciler:!1},SS={readContext:Ft,useCallback:uw,useContext:Ft,useEffect:ff,useImperativeHandle:cw,useInsertionEffect:ow,useLayoutEffect:aw,useMemo:dw,useReducer:zu,useRef:sw,useState:function(){return zu(Co)},useDebugValue:pf,useDeferredValue:function(t){var e=Ut();return Ve===null?e.memoizedState=t:hw(e,Ve.memoizedState,t)},useTransition:function(){var t=zu(Co)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:J_,useSyncExternalStore:Z_,useId:fw,unstable_isNewReconciler:!1};function qt(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pc={isMounted:function(t){return(t=t._reactInternals)?ai(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ht(),i=mr(t),s=Rn(r,i);s.payload=e,n!=null&&(s.callback=n),e=fr(t,s,i),e!==null&&(Qt(e,t,i,r),nl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ht(),i=mr(t),s=Rn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=fr(t,s,i),e!==null&&(Qt(e,t,i,r),nl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ht(),r=mr(t),i=Rn(n,r);i.tag=2,e!=null&&(i.callback=e),e=fr(t,i,r),e!==null&&(Qt(e,t,r,n),nl(e,t,r))}};function Rg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!_o(n,r)||!_o(i,s):!0}function vw(t,e,n){var r=!1,i=Tr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ft(s):(i=Et(e)?Xr:ot.current,r=e.contextTypes,s=(r=r!=null)?Gi(t,i):Tr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Pg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pc.enqueueReplaceState(e,e.state,null)}function Ud(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},of(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ft(s):(s=Et(e)?Xr:ot.current,i.context=Gi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&pc.enqueueReplaceState(i,i.state,null),bl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Yi(t,e){try{var n="",r=e;do n+=Zx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Bu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var CS=typeof WeakMap=="function"?WeakMap:Map;function yw(t,e,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ml||(Ml=!0,Yd=r),zd(t,e)},n}function _w(t,e,n){n=Rn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zd(t,e),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new CS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=US.bind(null,t,e,n),e.then(t,t))}function jg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rn(-1,1),e.tag=2,fr(n,e,1))),n.lanes|=1),t)}var NS=Bn.ReactCurrentOwner,_t=!1;function dt(t,e,n,r){e.child=t===null?K_(e,null,n,r):Qi(e,t.child,n,r)}function Dg(t,e,n,r,i){n=n.render;var s=e.ref;return Fi(e,i),r=df(t,e,n,r,s,i),n=hf(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dn(t,e,i)):(_e&&n&&Jh(e),e.flags|=1,dt(t,e,r,i),e.child)}function Og(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Tf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ww(t,e,s,r,i)):(t=ll(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:_o,n(o,r)&&t.ref===e.ref)return Dn(t,e,i)}return e.flags|=1,t=gr(s,r),t.ref=e.ref,t.return=e,e.child=t}function ww(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(_o(s,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,Dn(t,e,i)}return Bd(t,e,n,r,i)}function Ew(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(bi,It),It|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(bi,It),It|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,pe(bi,It),It|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,pe(bi,It),It|=r;return dt(t,e,i,n),e.child}function Tw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bd(t,e,n,r,i){var s=Et(n)?Xr:ot.current;return s=Gi(e,s),Fi(e,i),n=df(t,e,n,r,s,i),r=hf(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dn(t,e,i)):(_e&&r&&Jh(e),e.flags|=1,dt(t,e,n,i),e.child)}function Lg(t,e,n,r,i){if(Et(n)){var s=!0;Al(e)}else s=!1;if(Fi(e,i),e.stateNode===null)sl(t,e),vw(e,n,r),Ud(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ft(d):(d=Et(n)?Xr:ot.current,d=Gi(e,d));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Pg(e,o,r,d),Xn=!1;var m=e.memoizedState;o.state=m,bl(e,r,o,i),u=e.memoizedState,c!==r||m!==u||wt.current||Xn?(typeof f=="function"&&(Fd(e,n,f,r),u=e.memoizedState),(c=Xn||Rg(e,n,c,r,m,u,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,X_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:qt(e.type,c),o.props=d,g=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ft(u):(u=Et(n)?Xr:ot.current,u=Gi(e,u));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==g||m!==u)&&Pg(e,o,r,u),Xn=!1,m=e.memoizedState,o.state=m,bl(e,r,o,i);var T=e.memoizedState;c!==g||m!==T||wt.current||Xn?(typeof v=="function"&&(Fd(e,n,v,r),T=e.memoizedState),(d=Xn||Rg(e,n,d,r,m,T,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return $d(t,e,n,r,s,i)}function $d(t,e,n,r,i,s){Tw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Eg(e,n,!1),Dn(t,e,s);r=e.stateNode,NS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Qi(e,t.child,null,s),e.child=Qi(e,null,c,s)):dt(t,e,c,s),e.memoizedState=r.state,i&&Eg(e,n,!0),e.child}function xw(t){var e=t.stateNode;e.pendingContext?wg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wg(t,e.context,!1),af(t,e.containerInfo)}function Vg(t,e,n,r,i){return Ki(),ef(i),e.flags|=256,dt(t,e,n,r),e.child}var qd={dehydrated:null,treeContext:null,retryLane:0};function Wd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Iw(t,e,n){var r=e.pendingProps,i=Ee.current,s=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),pe(Ee,i&1),t===null)return Vd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=vc(o,r,0,null),t=Hr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wd(n),e.memoizedState=qd,t):mf(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return AS(t,e,o,r,c,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=gr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=gr(c,s):(s=Hr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Wd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=qd,r}return s=t.child,t=s.sibling,r=gr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mf(t,e){return e=vc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ma(t,e,n,r){return r!==null&&ef(r),Qi(e,t.child,null,n),t=mf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Bu(Error(U(422))),Ma(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=vc({mode:"visible",children:r.children},i,0,null),s=Hr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Qi(e,t.child,null,o),e.child.memoizedState=Wd(o),e.memoizedState=qd,s);if(!(e.mode&1))return Ma(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(U(419)),r=Bu(s,r,void 0),Ma(t,e,o,r)}if(c=(o&t.childLanes)!==0,_t||c){if(r=ze,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,bn(t,i),Qt(r,t,i,-1))}return Ef(),r=Bu(Error(U(421))),Ma(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=zS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,St=hr(i.nextSibling),At=e,_e=!0,Ht=null,t!==null&&(bt[Dt++]=In,bt[Dt++]=Sn,bt[Dt++]=Yr,In=t.id,Sn=t.overflow,Yr=e),e=mf(e,r.children),e.flags|=4096,e)}function Mg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Md(t.return,e,n)}function $u(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Sw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dt(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mg(t,n,e);else if(t.tag===19)Mg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Dl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$u(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Dl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$u(e,!0,n,null,s);break;case"together":$u(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RS(t,e,n){switch(e.tag){case 3:xw(e),Ki();break;case 5:Y_(e);break;case 1:Et(e.type)&&Al(e);break;case 4:af(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;pe(kl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?Iw(t,e,n):(pe(Ee,Ee.current&1),t=Dn(t,e,n),t!==null?t.sibling:null);pe(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pe(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,Ew(t,e,n)}return Dn(t,e,n)}var Cw,Hd,Nw,Aw;Cw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hd=function(){};Nw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,$r(an.current);var s=null;switch(n){case"input":i=pd(t,i),r=pd(t,r),s=[];break;case"select":i=xe({},i,{value:void 0}),r=xe({},r,{value:void 0}),s=[];break;case"textarea":i=vd(t,i),r=vd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cl)}_d(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ho.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ho.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ge("scroll",t),s||c===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};Aw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ls(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function PS(t,e,n){var r=e.pendingProps;switch(Zh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(e),null;case 1:return Et(e.type)&&Nl(),tt(e),null;case 3:return r=e.stateNode,Xi(),ye(wt),ye(ot),cf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(La(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ht!==null&&(eh(Ht),Ht=null))),Hd(t,e),tt(e),null;case 5:lf(e);var i=$r(Io.current);if(n=e.type,t!==null&&e.stateNode!=null)Nw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return tt(e),null}if(t=$r(an.current),La(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[rn]=e,r[To]=s,t=(e.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(i=0;i<Ws.length;i++)ge(Ws[i],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":Gm(r,s),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ge("invalid",r);break;case"textarea":Qm(r,s),ge("invalid",r)}_d(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&Oa(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&Oa(r.textContent,c,t),i=["children",""+c]):ho.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ge("scroll",r)}switch(n){case"input":Na(r),Km(r,s,!0);break;case"textarea":Na(r),Xm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=n_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[rn]=e,t[To]=r,Cw(t,e,!1,!1),e.stateNode=t;e:{switch(o=wd(n,r),n){case"dialog":ge("cancel",t),ge("close",t),i=r;break;case"iframe":case"object":case"embed":ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ws.length;i++)ge(Ws[i],t);i=r;break;case"source":ge("error",t),i=r;break;case"img":case"image":case"link":ge("error",t),ge("load",t),i=r;break;case"details":ge("toggle",t),i=r;break;case"input":Gm(t,r),i=pd(t,r),ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=xe({},r,{value:void 0}),ge("invalid",t);break;case"textarea":Qm(t,r),i=vd(t,r),ge("invalid",t);break;default:i=r}_d(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var u=c[s];s==="style"?s_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&r_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&fo(t,u):typeof u=="number"&&fo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ho.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ge("scroll",t):u!=null&&Mh(t,s,u,o))}switch(n){case"input":Na(t),Km(t,r,!1);break;case"textarea":Na(t),Xm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Er(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Oi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Oi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tt(e),null;case 6:if(t&&e.stateNode!=null)Aw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=$r(Io.current),$r(an.current),La(e)){if(r=e.stateNode,n=e.memoizedProps,r[rn]=e,(s=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Oa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Oa(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rn]=e,e.stateNode=r}return tt(e),null;case 13:if(ye(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&St!==null&&e.mode&1&&!(e.flags&128))H_(),Ki(),e.flags|=98560,s=!1;else if(s=La(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[rn]=e}else Ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tt(e),s=!1}else Ht!==null&&(eh(Ht),Ht=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Me===0&&(Me=3):Ef())),e.updateQueue!==null&&(e.flags|=4),tt(e),null);case 4:return Xi(),Hd(t,e),t===null&&wo(e.stateNode.containerInfo),tt(e),null;case 10:return rf(e.type._context),tt(e),null;case 17:return Et(e.type)&&Nl(),tt(e),null;case 19:if(ye(Ee),s=e.memoizedState,s===null)return tt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ls(s,!1);else{if(Me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Dl(t),o!==null){for(e.flags|=128,Ls(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(Ee,Ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&je()>Ji&&(e.flags|=128,r=!0,Ls(s,!1),e.lanes=4194304)}else{if(!r)if(t=Dl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ls(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_e)return tt(e),null}else 2*je()-s.renderingStartTime>Ji&&n!==1073741824&&(e.flags|=128,r=!0,Ls(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=je(),e.sibling=null,n=Ee.current,pe(Ee,r?n&1|2:n&1),e):(tt(e),null);case 22:case 23:return wf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?It&1073741824&&(tt(e),e.subtreeFlags&6&&(e.flags|=8192)):tt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function kS(t,e){switch(Zh(e),e.tag){case 1:return Et(e.type)&&Nl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xi(),ye(wt),ye(ot),cf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lf(e),null;case 13:if(ye(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(Ee),null;case 4:return Xi(),null;case 10:return rf(e.type._context),null;case 22:case 23:return wf(),null;case 24:return null;default:return null}}var Fa=!1,it=!1,jS=typeof WeakSet=="function"?WeakSet:Set,q=null;function ji(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function Gd(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var Fg=!1;function bS(t,e){if(Pd=xl,t=b_(),Yh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,g=t,m=null;t:for(;;){for(var v;g!==n||i!==0&&g.nodeType!==3||(c=o+i),g!==s||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(v=g.firstChild)!==null;)m=g,g=v;for(;;){if(g===t)break t;if(m===n&&++d===i&&(c=o),m===s&&++f===r&&(u=o),(v=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(kd={focusedElem:t,selectionRange:n},xl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var I=T.memoizedProps,k=T.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?I:qt(e.type,I),k);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(x){Ce(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return T=Fg,Fg=!1,T}function no(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gd(e,n,s)}i=i.next}while(i!==r)}}function mc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Rw(t){var e=t.alternate;e!==null&&(t.alternate=null,Rw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rn],delete e[To],delete e[Dd],delete e[mS],delete e[gS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Pw(t){return t.tag===5||t.tag===3||t.tag===4}function Ug(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cl));else if(r!==4&&(t=t.child,t!==null))for(Qd(t,e,n),t=t.sibling;t!==null;)Qd(t,e,n),t=t.sibling}function Xd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xd(t,e,n),t=t.sibling;t!==null;)Xd(t,e,n),t=t.sibling}var qe=null,Wt=!1;function Gn(t,e,n){for(n=n.child;n!==null;)kw(t,e,n),n=n.sibling}function kw(t,e,n){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(ac,n)}catch{}switch(n.tag){case 5:it||ji(n,e);case 6:var r=qe,i=Wt;qe=null,Gn(t,e,n),qe=r,Wt=i,qe!==null&&(Wt?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Wt?(t=qe,n=n.stateNode,t.nodeType===8?Lu(t.parentNode,n):t.nodeType===1&&Lu(t,n),vo(t)):Lu(qe,n.stateNode));break;case 4:r=qe,i=Wt,qe=n.stateNode.containerInfo,Wt=!0,Gn(t,e,n),qe=r,Wt=i;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gd(n,e,o),i=i.next}while(i!==r)}Gn(t,e,n);break;case 1:if(!it&&(ji(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ce(n,e,c)}Gn(t,e,n);break;case 21:Gn(t,e,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,Gn(t,e,n),it=r):Gn(t,e,n);break;default:Gn(t,e,n)}}function zg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jS),e.forEach(function(r){var i=BS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $t(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:qe=c.stateNode,Wt=!1;break e;case 3:qe=c.stateNode.containerInfo,Wt=!0;break e;case 4:qe=c.stateNode.containerInfo,Wt=!0;break e}c=c.return}if(qe===null)throw Error(U(160));kw(s,o,i),qe=null,Wt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Ce(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jw(e,t),e=e.sibling}function jw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($t(e,t),tn(t),r&4){try{no(3,t,t.return),mc(3,t)}catch(I){Ce(t,t.return,I)}try{no(5,t,t.return)}catch(I){Ce(t,t.return,I)}}break;case 1:$t(e,t),tn(t),r&512&&n!==null&&ji(n,n.return);break;case 5:if($t(e,t),tn(t),r&512&&n!==null&&ji(n,n.return),t.flags&32){var i=t.stateNode;try{fo(i,"")}catch(I){Ce(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&e_(i,s),wd(c,o);var d=wd(c,s);for(o=0;o<u.length;o+=2){var f=u[o],g=u[o+1];f==="style"?s_(i,g):f==="dangerouslySetInnerHTML"?r_(i,g):f==="children"?fo(i,g):Mh(i,f,g,d)}switch(c){case"input":md(i,s);break;case"textarea":t_(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Oi(i,!!s.multiple,v,!1):m!==!!s.multiple&&(s.defaultValue!=null?Oi(i,!!s.multiple,s.defaultValue,!0):Oi(i,!!s.multiple,s.multiple?[]:"",!1))}i[To]=s}catch(I){Ce(t,t.return,I)}}break;case 6:if($t(e,t),tn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){Ce(t,t.return,I)}}break;case 3:if($t(e,t),tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vo(e.containerInfo)}catch(I){Ce(t,t.return,I)}break;case 4:$t(e,t),tn(t);break;case 13:$t(e,t),tn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(yf=je())),r&4&&zg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(it=(d=it)||f,$t(e,t),it=d):$t(e,t),tn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(g=q=f;q!==null;){switch(m=q,v=m.child,m.tag){case 0:case 11:case 14:case 15:no(4,m,m.return);break;case 1:ji(m,m.return);var T=m.stateNode;if(typeof T.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(I){Ce(r,n,I)}}break;case 5:ji(m,m.return);break;case 22:if(m.memoizedState!==null){$g(g);continue}}v!==null?(v.return=m,q=v):$g(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{i=g.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=i_("display",o))}catch(I){Ce(t,t.return,I)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(I){Ce(t,t.return,I)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:$t(e,t),tn(t),r&4&&zg(t);break;case 21:break;default:$t(e,t),tn(t)}}function tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Pw(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fo(i,""),r.flags&=-33);var s=Ug(t);Xd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Ug(t);Qd(t,c,o);break;default:throw Error(U(161))}}catch(u){Ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DS(t,e,n){q=t,bw(t)}function bw(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Fa;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||it;c=Fa;var d=it;if(Fa=o,(it=u)&&!d)for(q=i;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?qg(i):u!==null?(u.return=o,q=u):qg(i);for(;s!==null;)q=s,bw(s),s=s.sibling;q=i,Fa=c,it=d}Bg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Bg(t)}}function Bg(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||mc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!it)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:qt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Cg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&vo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}it||e.flags&512&&Kd(e)}catch(m){Ce(e,e.return,m)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function $g(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function qg(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mc(4,e)}catch(u){Ce(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ce(e,i,u)}}var s=e.return;try{Kd(e)}catch(u){Ce(e,s,u)}break;case 5:var o=e.return;try{Kd(e)}catch(u){Ce(e,o,u)}}}catch(u){Ce(e,e.return,u)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var OS=Math.ceil,Vl=Bn.ReactCurrentDispatcher,gf=Bn.ReactCurrentOwner,Lt=Bn.ReactCurrentBatchConfig,oe=0,ze=null,Oe=null,Ge=0,It=0,bi=Rr(0),Me=0,Ao=null,Zr=0,gc=0,vf=0,ro=null,vt=null,yf=0,Ji=1/0,Tn=null,Ml=!1,Yd=null,pr=null,Ua=!1,sr=null,Fl=0,io=0,Jd=null,ol=-1,al=0;function ht(){return oe&6?je():ol!==-1?ol:ol=je()}function mr(t){return t.mode&1?oe&2&&Ge!==0?Ge&-Ge:yS.transition!==null?(al===0&&(al=v_()),al):(t=ue,t!==0||(t=window.event,t=t===void 0?16:I_(t.type)),t):1}function Qt(t,e,n,r){if(50<io)throw io=0,Jd=null,Error(U(185));Bo(t,n,r),(!(oe&2)||t!==ze)&&(t===ze&&(!(oe&2)&&(gc|=n),Me===4&&Jn(t,Ge)),Tt(t,r),n===1&&oe===0&&!(e.mode&1)&&(Ji=je()+500,hc&&Pr()))}function Tt(t,e){var n=t.callbackNode;yI(t,e);var r=Tl(t,t===ze?Ge:0);if(r===0)n!==null&&Zm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zm(n),e===1)t.tag===0?vS(Wg.bind(null,t)):$_(Wg.bind(null,t)),fS(function(){!(oe&6)&&Pr()}),n=null;else{switch(y_(r)){case 1:n=$h;break;case 4:n=m_;break;case 16:n=El;break;case 536870912:n=g_;break;default:n=El}n=zw(n,Dw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dw(t,e){if(ol=-1,al=0,oe&6)throw Error(U(327));var n=t.callbackNode;if(Ui()&&t.callbackNode!==n)return null;var r=Tl(t,t===ze?Ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ul(t,r);else{e=r;var i=oe;oe|=2;var s=Lw();(ze!==t||Ge!==e)&&(Tn=null,Ji=je()+500,Wr(t,e));do try{MS();break}catch(c){Ow(t,c)}while(!0);nf(),Vl.current=s,oe=i,Oe!==null?e=0:(ze=null,Ge=0,e=Me)}if(e!==0){if(e===2&&(i=Sd(t),i!==0&&(r=i,e=Zd(t,i))),e===1)throw n=Ao,Wr(t,0),Jn(t,r),Tt(t,je()),n;if(e===6)Jn(t,r);else{if(i=t.current.alternate,!(r&30)&&!LS(i)&&(e=Ul(t,r),e===2&&(s=Sd(t),s!==0&&(r=s,e=Zd(t,s))),e===1))throw n=Ao,Wr(t,0),Jn(t,r),Tt(t,je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Fr(t,vt,Tn);break;case 3:if(Jn(t,r),(r&130023424)===r&&(e=yf+500-je(),10<e)){if(Tl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ht(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=bd(Fr.bind(null,t,vt,Tn),e);break}Fr(t,vt,Tn);break;case 4:if(Jn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Kt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OS(r/1960))-r,10<r){t.timeoutHandle=bd(Fr.bind(null,t,vt,Tn),r);break}Fr(t,vt,Tn);break;case 5:Fr(t,vt,Tn);break;default:throw Error(U(329))}}}return Tt(t,je()),t.callbackNode===n?Dw.bind(null,t):null}function Zd(t,e){var n=ro;return t.current.memoizedState.isDehydrated&&(Wr(t,e).flags|=256),t=Ul(t,e),t!==2&&(e=vt,vt=n,e!==null&&eh(e)),t}function eh(t){vt===null?vt=t:vt.push.apply(vt,t)}function LS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jn(t,e){for(e&=~vf,e&=~gc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kt(e),r=1<<n;t[n]=-1,e&=~r}}function Wg(t){if(oe&6)throw Error(U(327));Ui();var e=Tl(t,0);if(!(e&1))return Tt(t,je()),null;var n=Ul(t,e);if(t.tag!==0&&n===2){var r=Sd(t);r!==0&&(e=r,n=Zd(t,r))}if(n===1)throw n=Ao,Wr(t,0),Jn(t,e),Tt(t,je()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fr(t,vt,Tn),Tt(t,je()),null}function _f(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(Ji=je()+500,hc&&Pr())}}function ei(t){sr!==null&&sr.tag===0&&!(oe&6)&&Ui();var e=oe;oe|=1;var n=Lt.transition,r=ue;try{if(Lt.transition=null,ue=1,t)return t()}finally{ue=r,Lt.transition=n,oe=e,!(oe&6)&&Pr()}}function wf(){It=bi.current,ye(bi)}function Wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hS(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(Zh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nl();break;case 3:Xi(),ye(wt),ye(ot),cf();break;case 5:lf(r);break;case 4:Xi();break;case 13:ye(Ee);break;case 19:ye(Ee);break;case 10:rf(r.type._context);break;case 22:case 23:wf()}n=n.return}if(ze=t,Oe=t=gr(t.current,null),Ge=It=e,Me=0,Ao=null,vf=gc=Zr=0,vt=ro=null,Br!==null){for(e=0;e<Br.length;e++)if(n=Br[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Br=null}return t}function Ow(t,e){do{var n=Oe;try{if(nf(),rl.current=Ll,Ol){for(var r=Te.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ol=!1}if(Jr=0,Ue=Ve=Te=null,to=!1,So=0,gf.current=null,n===null||n.return===null){Me=1,Ao=e,Oe=null;break}e:{var s=t,o=n.return,c=n,u=e;if(e=Ge,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=jg(o);if(v!==null){v.flags&=-257,bg(v,o,c,s,e),v.mode&1&&kg(s,d,e),e=v,u=d;var T=e.updateQueue;if(T===null){var I=new Set;I.add(u),e.updateQueue=I}else T.add(u);break e}else{if(!(e&1)){kg(s,d,e),Ef();break e}u=Error(U(426))}}else if(_e&&c.mode&1){var k=jg(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),bg(k,o,c,s,e),ef(Yi(u,c));break e}}s=u=Yi(u,c),Me!==4&&(Me=2),ro===null?ro=[s]:ro.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=yw(s,u,e);Sg(s,y);break e;case 1:c=u;var w=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(pr===null||!pr.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=_w(s,c,e);Sg(s,x);break e}}s=s.return}while(s!==null)}Mw(n)}catch(L){e=L,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function Lw(){var t=Vl.current;return Vl.current=Ll,t===null?Ll:t}function Ef(){(Me===0||Me===3||Me===2)&&(Me=4),ze===null||!(Zr&268435455)&&!(gc&268435455)||Jn(ze,Ge)}function Ul(t,e){var n=oe;oe|=2;var r=Lw();(ze!==t||Ge!==e)&&(Tn=null,Wr(t,e));do try{VS();break}catch(i){Ow(t,i)}while(!0);if(nf(),oe=n,Vl.current=r,Oe!==null)throw Error(U(261));return ze=null,Ge=0,Me}function VS(){for(;Oe!==null;)Vw(Oe)}function MS(){for(;Oe!==null&&!cI();)Vw(Oe)}function Vw(t){var e=Uw(t.alternate,t,It);t.memoizedProps=t.pendingProps,e===null?Mw(t):Oe=e,gf.current=null}function Mw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kS(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Me=6,Oe=null;return}}else if(n=PS(n,e,It),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);Me===0&&(Me=5)}function Fr(t,e,n){var r=ue,i=Lt.transition;try{Lt.transition=null,ue=1,FS(t,e,n,r)}finally{Lt.transition=i,ue=r}return null}function FS(t,e,n,r){do Ui();while(sr!==null);if(oe&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(_I(t,s),t===ze&&(Oe=ze=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ua||(Ua=!0,zw(El,function(){return Ui(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Lt.transition,Lt.transition=null;var o=ue;ue=1;var c=oe;oe|=4,gf.current=null,bS(t,n),jw(n,t),sS(kd),xl=!!Pd,kd=Pd=null,t.current=n,DS(n),uI(),oe=c,ue=o,Lt.transition=s}else t.current=n;if(Ua&&(Ua=!1,sr=t,Fl=i),s=t.pendingLanes,s===0&&(pr=null),fI(n.stateNode),Tt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ml)throw Ml=!1,t=Yd,Yd=null,t;return Fl&1&&t.tag!==0&&Ui(),s=t.pendingLanes,s&1?t===Jd?io++:(io=0,Jd=t):io=0,Pr(),null}function Ui(){if(sr!==null){var t=y_(Fl),e=Lt.transition,n=ue;try{if(Lt.transition=null,ue=16>t?16:t,sr===null)var r=!1;else{if(t=sr,sr=null,Fl=0,oe&6)throw Error(U(331));var i=oe;for(oe|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var c=s.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:no(8,f,s)}var g=f.child;if(g!==null)g.return=f,q=g;else for(;q!==null;){f=q;var m=f.sibling,v=f.return;if(Rw(f),f===d){q=null;break}if(m!==null){m.return=v,q=m;break}q=v}}}var T=s.alternate;if(T!==null){var I=T.child;if(I!==null){T.child=null;do{var k=I.sibling;I.sibling=null,I=k}while(I!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:no(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,q=y;break e}q=s.return}}var w=t.current;for(q=w;q!==null;){o=q;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,q=C;else e:for(o=w;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:mc(9,c)}}catch(L){Ce(c,c.return,L)}if(c===o){q=null;break e}var x=c.sibling;if(x!==null){x.return=c.return,q=x;break e}q=c.return}}if(oe=i,Pr(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(ac,t)}catch{}r=!0}return r}finally{ue=n,Lt.transition=e}}return!1}function Hg(t,e,n){e=Yi(n,e),e=yw(t,e,1),t=fr(t,e,1),e=ht(),t!==null&&(Bo(t,1,e),Tt(t,e))}function Ce(t,e,n){if(t.tag===3)Hg(t,t,n);else for(;e!==null;){if(e.tag===3){Hg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){t=Yi(n,t),t=_w(e,t,1),e=fr(e,t,1),t=ht(),e!==null&&(Bo(e,1,t),Tt(e,t));break}}e=e.return}}function US(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ht(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(Ge&n)===n&&(Me===4||Me===3&&(Ge&130023424)===Ge&&500>je()-yf?Wr(t,0):vf|=n),Tt(t,e)}function Fw(t,e){e===0&&(t.mode&1?(e=Pa,Pa<<=1,!(Pa&130023424)&&(Pa=4194304)):e=1);var n=ht();t=bn(t,e),t!==null&&(Bo(t,e,n),Tt(t,n))}function zS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fw(t,n)}function BS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Fw(t,n)}var Uw;Uw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,RS(t,e,n);_t=!!(t.flags&131072)}else _t=!1,_e&&e.flags&1048576&&q_(e,Pl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sl(t,e),t=e.pendingProps;var i=Gi(e,ot.current);Fi(e,n),i=df(null,e,r,t,i,n);var s=hf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(s=!0,Al(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,of(e),i.updater=pc,e.stateNode=i,i._reactInternals=e,Ud(e,r,t,n),e=$d(null,e,r,!0,s,n)):(e.tag=0,_e&&s&&Jh(e),dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qS(r),t=qt(r,t),i){case 0:e=Bd(null,e,r,t,n);break e;case 1:e=Lg(null,e,r,t,n);break e;case 11:e=Dg(null,e,r,t,n);break e;case 14:e=Og(null,e,r,qt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),Bd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),Lg(t,e,r,i,n);case 3:e:{if(xw(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,X_(t,e),bl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Yi(Error(U(423)),e),e=Vg(t,e,r,n,i);break e}else if(r!==i){i=Yi(Error(U(424)),e),e=Vg(t,e,r,n,i);break e}else for(St=hr(e.stateNode.containerInfo.firstChild),At=e,_e=!0,Ht=null,n=K_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ki(),r===i){e=Dn(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return Y_(e),t===null&&Vd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,jd(r,i)?o=null:s!==null&&jd(r,s)&&(e.flags|=32),Tw(t,e),dt(t,e,o,n),e.child;case 6:return t===null&&Vd(e),null;case 13:return Iw(t,e,n);case 4:return af(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qi(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),Dg(t,e,r,i,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,pe(kl,r._currentValue),r._currentValue=o,s!==null)if(Xt(s.value,o)){if(s.children===i.children&&!wt.current){e=Dn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Rn(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Md(s.return,n,e),c.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Md(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fi(e,n),i=Ft(i),r=r(i),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,i=qt(r,e.pendingProps),i=qt(r.type,i),Og(t,e,r,i,n);case 15:return ww(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),sl(t,e),e.tag=1,Et(r)?(t=!0,Al(e)):t=!1,Fi(e,n),vw(e,r,i),Ud(e,r,i,n),$d(null,e,r,!0,t,n);case 19:return Sw(t,e,n);case 22:return Ew(t,e,n)}throw Error(U(156,e.tag))};function zw(t,e){return p_(t,e)}function $S(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,e,n,r){return new $S(t,e,n,r)}function Tf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qS(t){if(typeof t=="function")return Tf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uh)return 11;if(t===zh)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=Ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ll(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Tf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xi:return Hr(n.children,i,s,e);case Fh:o=8,i|=8;break;case ud:return t=Ot(12,n,e,i|2),t.elementType=ud,t.lanes=s,t;case dd:return t=Ot(13,n,e,i),t.elementType=dd,t.lanes=s,t;case hd:return t=Ot(19,n,e,i),t.elementType=hd,t.lanes=s,t;case Yy:return vc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qy:o=10;break e;case Xy:o=9;break e;case Uh:o=11;break e;case zh:o=14;break e;case Qn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ot(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Hr(t,e,n,r){return t=Ot(7,t,r,e),t.lanes=n,t}function vc(t,e,n,r){return t=Ot(22,t,r,e),t.elementType=Yy,t.lanes=n,t.stateNode={isHidden:!1},t}function qu(t,e,n){return t=Ot(6,t,null,e),t.lanes=n,t}function Wu(t,e,n){return e=Ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Su(0),this.expirationTimes=Su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Su(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xf(t,e,n,r,i,s,o,c,u){return t=new WS(t,e,n,c,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ot(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},of(s),t}function HS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Bw(t){if(!t)return Tr;t=t._reactInternals;e:{if(ai(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Et(n))return B_(t,n,e)}return e}function $w(t,e,n,r,i,s,o,c,u){return t=xf(n,r,!0,t,i,s,o,c,u),t.context=Bw(null),n=t.current,r=ht(),i=mr(n),s=Rn(r,i),s.callback=e??null,fr(n,s,i),t.current.lanes=i,Bo(t,i,r),Tt(t,r),t}function yc(t,e,n,r){var i=e.current,s=ht(),o=mr(i);return n=Bw(n),e.context===null?e.context=n:e.pendingContext=n,e=Rn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fr(i,e,o),t!==null&&(Qt(t,i,o,s),nl(t,i,o)),o}function zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function If(t,e){Gg(t,e),(t=t.alternate)&&Gg(t,e)}function GS(){return null}var qw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sf(t){this._internalRoot=t}_c.prototype.render=Sf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));yc(t,e,null,null)};_c.prototype.unmount=Sf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ei(function(){yc(null,t,null,null)}),e[jn]=null}};function _c(t){this._internalRoot=t}_c.prototype.unstable_scheduleHydration=function(t){if(t){var e=E_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yn.length&&e!==0&&e<Yn[n].priority;n++);Yn.splice(n,0,t),n===0&&x_(t)}};function Cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Kg(){}function KS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=zl(o);s.call(d)}}var o=$w(e,r,t,0,null,!1,!1,"",Kg);return t._reactRootContainer=o,t[jn]=o.current,wo(t.nodeType===8?t.parentNode:t),ei(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=zl(u);c.call(d)}}var u=xf(t,0,!1,null,null,!1,!1,"",Kg);return t._reactRootContainer=u,t[jn]=u.current,wo(t.nodeType===8?t.parentNode:t),ei(function(){yc(e,u,n,r)}),u}function Ec(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var c=i;i=function(){var u=zl(o);c.call(u)}}yc(e,o,t,i)}else o=KS(n,e,t,i,r);return zl(o)}__=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qs(e.pendingLanes);n!==0&&(qh(e,n|1),Tt(e,je()),!(oe&6)&&(Ji=je()+500,Pr()))}break;case 13:ei(function(){var r=bn(t,1);if(r!==null){var i=ht();Qt(r,t,1,i)}}),If(t,1)}};Wh=function(t){if(t.tag===13){var e=bn(t,134217728);if(e!==null){var n=ht();Qt(e,t,134217728,n)}If(t,134217728)}};w_=function(t){if(t.tag===13){var e=mr(t),n=bn(t,e);if(n!==null){var r=ht();Qt(n,t,e,r)}If(t,e)}};E_=function(){return ue};T_=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};Td=function(t,e,n){switch(e){case"input":if(md(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=dc(r);if(!i)throw Error(U(90));Zy(r),md(r,i)}}}break;case"textarea":t_(t,n);break;case"select":e=n.value,e!=null&&Oi(t,!!n.multiple,e,!1)}};l_=_f;c_=ei;var QS={usingClientEntryPoint:!1,Events:[qo,Ni,dc,o_,a_,_f]},Vs={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XS={bundleType:Vs.bundleType,version:Vs.version,rendererPackageName:Vs.rendererPackageName,rendererConfig:Vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=h_(t),t===null?null:t.stateNode},findFiberByHostInstance:Vs.findFiberByHostInstance||GS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{ac=za.inject(XS),on=za}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QS;Pt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cf(e))throw Error(U(200));return HS(t,e,null,n)};Pt.createRoot=function(t,e){if(!Cf(t))throw Error(U(299));var n=!1,r="",i=qw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=xf(t,1,!1,null,null,n,!1,r,i),t[jn]=e.current,wo(t.nodeType===8?t.parentNode:t),new Sf(e)};Pt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=h_(e),t=t===null?null:t.stateNode,t};Pt.flushSync=function(t){return ei(t)};Pt.hydrate=function(t,e,n){if(!wc(e))throw Error(U(200));return Ec(null,t,e,!0,n)};Pt.hydrateRoot=function(t,e,n){if(!Cf(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=qw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$w(e,null,t,1,n??null,i,!1,s,o),t[jn]=e.current,wo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new _c(e)};Pt.render=function(t,e,n){if(!wc(e))throw Error(U(200));return Ec(null,t,e,!1,n)};Pt.unmountComponentAtNode=function(t){if(!wc(t))throw Error(U(40));return t._reactRootContainer?(ei(function(){Ec(null,null,t,!1,function(){t._reactRootContainer=null,t[jn]=null})}),!0):!1};Pt.unstable_batchedUpdates=_f;Pt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Ec(t,e,n,!1,r)};Pt.version="18.3.1-next-f1338f8080-20240426";function Ww(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ww)}catch(t){console.error(t)}}Ww(),Wy.exports=Pt;var YS=Wy.exports,Qg=YS;ld.createRoot=Qg.createRoot,ld.hydrateRoot=Qg.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ro(){return Ro=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ro.apply(this,arguments)}var or;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(or||(or={}));const Xg="popstate";function JS(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:c="",hash:u=""}=li(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),th("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof s=="string"?s:Bl(s))}function r(i,s){Tc(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return eC(e,n,r,t)}function be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Tc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZS(){return Math.random().toString(36).substr(2,8)}function Yg(t,e){return{usr:t.state,key:t.key,idx:e}}function th(t,e,n,r){return n===void 0&&(n=null),Ro({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?li(e):e,{state:n,key:e&&e.key||r||ZS()})}function Bl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function li(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function eC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,c=or.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Ro({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function g(){c=or.Pop;let k=f(),y=k==null?null:k-d;d=k,u&&u({action:c,location:I.location,delta:y})}function m(k,y){c=or.Push;let w=th(I.location,k,y);n&&n(w,k),d=f()+1;let C=Yg(w,d),x=I.createHref(w);try{o.pushState(C,"",x)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(x)}s&&u&&u({action:c,location:I.location,delta:1})}function v(k,y){c=or.Replace;let w=th(I.location,k,y);n&&n(w,k),d=f();let C=Yg(w,d),x=I.createHref(w);o.replaceState(C,"",x),s&&u&&u({action:c,location:I.location,delta:0})}function T(k){let y=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof k=="string"?k:Bl(k);return w=w.replace(/ $/,"%20"),be(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let I={get action(){return c},get location(){return t(i,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Xg,g),u=k,()=>{i.removeEventListener(Xg,g),u=null}},createHref(k){return e(i,k)},createURL:T,encodeLocation(k){let y=T(k);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:v,go(k){return o.go(k)}};return I}var Jg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jg||(Jg={}));function tC(t,e,n){return n===void 0&&(n="/"),nC(t,e,n)}function nC(t,e,n,r){let i=typeof e=="string"?li(e):e,s=Nf(i.pathname||"/",n);if(s==null)return null;let o=Hw(t);rC(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=mC(s);c=hC(o[u],d)}return c}function Hw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(be(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=vr([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(be(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Hw(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:uC(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,o);else for(let u of Gw(s.path))i(s,o,u)}),e}function Gw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Gw(r.join("/")),c=[];return c.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function rC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const iC=/^:[\w-]+$/,sC=3,oC=2,aC=1,lC=10,cC=-2,Zg=t=>t==="*";function uC(t,e){let n=t.split("/"),r=n.length;return n.some(Zg)&&(r+=cC),e&&(r+=oC),n.filter(i=>!Zg(i)).reduce((i,s)=>i+(iC.test(s)?sC:s===""?aC:lC),r)}function dC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function hC(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",g=fC({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),m=u.route;if(!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:vr([s,g.pathname]),pathnameBase:wC(vr([s,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(s=vr([s,g.pathnameBase]))}return o}function fC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,f,g)=>{let{paramName:m,isOptional:v}=f;if(m==="*"){let I=c[g]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const T=c[g];return v&&!T?d[m]=void 0:d[m]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function pC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Tc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function mC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Nf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const gC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vC=t=>gC.test(t);function yC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?li(t):t,s;if(n)if(vC(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Tc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=ev(n.substring(1),"/"):s=ev(n,e)}else s=e;return{pathname:s,search:EC(r),hash:TC(i)}}function ev(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Hu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _C(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Af(t,e){let n=_C(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Rf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=li(t):(i=Ro({},t),be(!i.pathname||!i.pathname.includes("?"),Hu("?","pathname","search",i)),be(!i.pathname||!i.pathname.includes("#"),Hu("#","pathname","hash",i)),be(!i.search||!i.search.includes("#"),Hu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}c=g>=0?e[g]:"/"}let u=yC(i,c),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const vr=t=>t.join("/").replace(/\/\/+/g,"/"),wC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Kw=["post","put","patch","delete"];new Set(Kw);const IC=["get",...Kw];new Set(IC);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Po(){return Po=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Po.apply(this,arguments)}const Pf=b.createContext(null),SC=b.createContext(null),kr=b.createContext(null),xc=b.createContext(null),$n=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Qw=b.createContext(null);function CC(t,e){let{relative:n}=e===void 0?{}:e;us()||be(!1);let{basename:r,navigator:i}=b.useContext(kr),{hash:s,pathname:o,search:c}=Yw(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:vr([r,o])),i.createHref({pathname:u,search:c,hash:s})}function us(){return b.useContext(xc)!=null}function Ho(){return us()||be(!1),b.useContext(xc).location}function Xw(t){b.useContext(kr).static||b.useLayoutEffect(t)}function jt(){let{isDataRoute:t}=b.useContext($n);return t?FC():NC()}function NC(){us()||be(!1);let t=b.useContext(Pf),{basename:e,future:n,navigator:r}=b.useContext(kr),{matches:i}=b.useContext($n),{pathname:s}=Ho(),o=JSON.stringify(Af(i,n.v7_relativeSplatPath)),c=b.useRef(!1);return Xw(()=>{c.current=!0}),b.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let g=Rf(d,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:vr([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,o,s,t])}function kf(){let{matches:t}=b.useContext($n),e=t[t.length-1];return e?e.params:{}}function Yw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(kr),{matches:i}=b.useContext($n),{pathname:s}=Ho(),o=JSON.stringify(Af(i,r.v7_relativeSplatPath));return b.useMemo(()=>Rf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function AC(t,e){return RC(t,e)}function RC(t,e,n,r){us()||be(!1);let{navigator:i}=b.useContext(kr),{matches:s}=b.useContext($n),o=s[s.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Ho(),f;if(e){var g;let k=typeof e=="string"?li(e):e;u==="/"||(g=k.pathname)!=null&&g.startsWith(u)||be(!1),f=k}else f=d;let m=f.pathname||"/",v=m;if(u!=="/"){let k=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let T=tC(t,{pathname:v}),I=DC(T&&T.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:vr([u,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:vr([u,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r);return e&&I?b.createElement(xc.Provider,{value:{location:Po({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:or.Pop}},I):I}function PC(){let t=MC(),e=xC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const kC=b.createElement(PC,null);class jC extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement($n.Provider,{value:this.props.routeContext},b.createElement(Qw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bC(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(Pf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement($n.Provider,{value:e},r)}function DC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let f=o.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);f>=0||be(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let g=o[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:m,errors:v}=n,T=g.route.loader&&m[g.route.id]===void 0&&(!v||v[g.route.id]===void 0);if(g.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,g,m)=>{let v,T=!1,I=null,k=null;n&&(v=c&&g.route.id?c[g.route.id]:void 0,I=g.route.errorElement||kC,u&&(d<0&&m===0?(UC("route-fallback"),T=!0,k=null):d===m&&(T=!0,k=g.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,m+1)),w=()=>{let C;return v?C=I:T?C=k:g.route.Component?C=b.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=f,b.createElement(bC,{match:g,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:C})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?b.createElement(jC,{location:n.location,revalidation:n.revalidation,component:I,error:v,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var Jw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Jw||{}),Zw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Zw||{});function OC(t){let e=b.useContext(Pf);return e||be(!1),e}function LC(t){let e=b.useContext(SC);return e||be(!1),e}function VC(t){let e=b.useContext($n);return e||be(!1),e}function eE(t){let e=VC(),n=e.matches[e.matches.length-1];return n.route.id||be(!1),n.route.id}function MC(){var t;let e=b.useContext(Qw),n=LC(),r=eE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function FC(){let{router:t}=OC(Jw.UseNavigateStable),e=eE(Zw.UseNavigateStable),n=b.useRef(!1);return Xw(()=>{n.current=!0}),b.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Po({fromRouteId:e},s)))},[t,e])}const tv={};function UC(t,e,n){tv[t]||(tv[t]=!0)}function zC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function nv(t){let{to:e,replace:n,state:r,relative:i}=t;us()||be(!1);let{future:s,static:o}=b.useContext(kr),{matches:c}=b.useContext($n),{pathname:u}=Ho(),d=jt(),f=Rf(e,Af(c,s.v7_relativeSplatPath),u,i==="path"),g=JSON.stringify(f);return b.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:i}),[d,g,i,n,r]),null}function gt(t){be(!1)}function BC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=or.Pop,navigator:s,static:o=!1,future:c}=t;us()&&be(!1);let u=e.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:u,navigator:s,static:o,future:Po({v7_relativeSplatPath:!1},c)}),[u,c,s,o]);typeof r=="string"&&(r=li(r));let{pathname:f="/",search:g="",hash:m="",state:v=null,key:T="default"}=r,I=b.useMemo(()=>{let k=Nf(f,u);return k==null?null:{location:{pathname:k,search:g,hash:m,state:v,key:T},navigationType:i}},[u,f,g,m,v,T,i]);return I==null?null:b.createElement(kr.Provider,{value:d},b.createElement(xc.Provider,{children:n,value:I}))}function rv(t){let{children:e,location:n}=t;return AC(nh(e),n)}new Promise(()=>{});function nh(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){n.push.apply(n,nh(r.props.children,s));return}r.type!==gt&&be(!1),!r.props.index||!r.props.children||be(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=nh(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rh(){return rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rh.apply(this,arguments)}function $C(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function qC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function WC(t,e){return t.button===0&&(!e||e==="_self")&&!qC(t)}const HC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GC="6";try{window.__reactRouterVersion=GC}catch{}const KC="startTransition",iv=Ux[KC];function QC(t){let{basename:e,children:n,future:r,window:i}=t,s=b.useRef();s.current==null&&(s.current=JS({window:i,v5Compat:!0}));let o=s.current,[c,u]=b.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=b.useCallback(g=>{d&&iv?iv(()=>u(g)):u(g)},[u,d]);return b.useLayoutEffect(()=>o.listen(f),[o,f]),b.useEffect(()=>zC(r),[r]),b.createElement(BC,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const XC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sv=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:g}=e,m=$C(e,HC),{basename:v}=b.useContext(kr),T,I=!1;if(typeof d=="string"&&YC.test(d)&&(T=d,XC))try{let C=new URL(window.location.href),x=d.startsWith("//")?new URL(C.protocol+d):new URL(d),L=Nf(x.pathname,v);x.origin===C.origin&&L!=null?d=L+x.search+x.hash:I=!0}catch{}let k=CC(d,{relative:i}),y=JC(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:g});function w(C){r&&r(C),C.defaultPrevented||y(C)}return b.createElement("a",rh({},m,{href:T||k,onClick:I||s?r:w,ref:n,target:u}))});var ov;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ov||(ov={}));var av;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(av||(av={}));function JC(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:c}=e===void 0?{}:e,u=jt(),d=Ho(),f=Yw(t,{relative:o});return b.useCallback(g=>{if(WC(g,n)){g.preventDefault();let m=r!==void 0?r:Bl(d)===Bl(f);u(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:c})}},[d,u,f,r,i,n,t,s,o,c])}const tE="zerosei_cart";function nE(){try{const t=localStorage.getItem(tE);if(t)return JSON.parse(t)}catch(t){console.error("Error loading cart:",t)}return{items:[],total:0}}function Ic(t){try{localStorage.setItem(tE,JSON.stringify(t))}catch(e){console.error("Error saving cart:",e)}}function Sc(t){const e=t.modifications?t.modifications.reduce((n,r)=>n+r.price,0):0;return t.product.price+e}function jf(t){return t.reduce((e,n)=>{const r=Sc(n);return e+r*n.quantity},0)}function lv(t){return!t||t.length===0?"":t.map(e=>e.id).sort().join("|")}function rE(t,e,n=1,r,i){const s=lv(i),o=t.items.findIndex(d=>{const f=lv(d.modifications);return d.product.id===e.id&&f===s});let c;o>=0?(c=[...t.items],c[o]={...c[o],quantity:c[o].quantity+n,notes:r?c[o].notes?`${c[o].notes}, ${r}`:r:c[o].notes}):c=[...t.items,{product:e,quantity:n,notes:r,modifications:i}];const u={items:c,total:jf(c)};return Ic(u),u}function iE(t,e){const n=t.items.filter((i,s)=>s!==e),r={items:n,total:jf(n)};return Ic(r),r}function ZC(t,e,n){if(n<=0)return iE(t,e);const r=t.items.map((s,o)=>o===e?{...s,quantity:n}:s),i={items:r,total:jf(r)};return Ic(i),i}function eN(){const t={items:[],total:0};return Ic(t),t}function tN(t){return t.items.reduce((e,n)=>e+n.quantity,0)}var cv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},oE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,g=(s&3)<<4|c>>4;let m=(c&15)<<2|d>>6,v=d&63;u||(v=64,o||(m=64)),r.push(n[f],n[g],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new rN;const m=s<<2|c>>4;if(r.push(m),d!==64){const v=c<<4&240|d>>2;if(r.push(v),g!==64){const T=d<<6&192|g;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iN=function(t){const e=sE(t);return oE.encodeByteArray(e,!0)},$l=function(t){return iN(t).replace(/\./g,"")},aE=function(t){try{return oE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=()=>sN().__FIREBASE_DEFAULTS__,aN=()=>{if(typeof process>"u"||typeof cv>"u")return;const t=cv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aE(t[1]);return e&&JSON.parse(e)},Cc=()=>{try{return oN()||aN()||lN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lE=t=>{var e,n;return(n=(e=Cc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bf=t=>{const e=lE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},cE=()=>{var t;return(t=Cc())===null||t===void 0?void 0:t.config},uE=t=>{var e;return(e=Cc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$l(JSON.stringify(n)),$l(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function dN(){var t;const e=(t=Cc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mN(){const t=at();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gN(){return!dN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vN(){try{return typeof indexedDB=="object"}catch{return!1}}function yN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="FirebaseError";class Zt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_N,Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Go.prototype.create)}}class Go{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?wN(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Zt(i,c,r)}}function wN(t,e){return t.replace(EN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const EN=/\{\$([^}]+)}/g;function TN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ql(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(uv(s)&&uv(o)){if(!ql(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function uv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xN(t,e){const n=new IN(t,e);return n.subscribe.bind(n)}class IN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Gu),i.error===void 0&&(i.error=Gu),i.complete===void 0&&(i.complete=Gu);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class On{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AN(e))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ur){return this.instances.has(e)}getOptions(e=Ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ur){return this.component?this.component.multipleInstances?e:Ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NN(t){return t===Ur?void 0:t}function AN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const PN={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},kN=re.INFO,jN={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},bN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=jN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Df{constructor(e){this.name=e,this._logLevel=kN,this._logHandler=bN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const DN=(t,e)=>e.some(n=>t instanceof n);let dv,hv;function ON(){return dv||(dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LN(){return hv||(hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hE=new WeakMap,ih=new WeakMap,fE=new WeakMap,Ku=new WeakMap,Of=new WeakMap;function VN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(yr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hE.set(n,t)}).catch(()=>{}),Of.set(e,t),e}function MN(t){if(ih.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ih.set(t,e)}let sh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ih.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FN(t){sh=t(sh)}function UN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qu(this),e,...n);return fE.set(r,e.sort?e.sort():[e]),yr(r)}:LN().includes(t)?function(...e){return t.apply(Qu(this),e),yr(hE.get(this))}:function(...e){return yr(t.apply(Qu(this),e))}}function zN(t){return typeof t=="function"?UN(t):(t instanceof IDBTransaction&&MN(t),DN(t,ON())?new Proxy(t,sh):t)}function yr(t){if(t instanceof IDBRequest)return VN(t);if(Ku.has(t))return Ku.get(t);const e=zN(t);return e!==t&&(Ku.set(t,e),Of.set(e,t)),e}const Qu=t=>Of.get(t);function BN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),c=yr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(yr(o.result),u.oldVersion,u.newVersion,yr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const $N=["get","getKey","getAll","getAllKeys","count"],qN=["put","add","delete","clear"],Xu=new Map;function fv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xu.get(e))return Xu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=qN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$N.includes(n)))return;const s=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return Xu.set(e,s),s}FN(t=>({...t,get:(e,n,r)=>fv(e,n)||t.get(e,n,r),has:(e,n)=>!!fv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const oh="@firebase/app",pv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new Df("@firebase/app"),GN="@firebase/app-compat",KN="@firebase/analytics-compat",QN="@firebase/analytics",XN="@firebase/app-check-compat",YN="@firebase/app-check",JN="@firebase/auth",ZN="@firebase/auth-compat",eA="@firebase/database",tA="@firebase/data-connect",nA="@firebase/database-compat",rA="@firebase/functions",iA="@firebase/functions-compat",sA="@firebase/installations",oA="@firebase/installations-compat",aA="@firebase/messaging",lA="@firebase/messaging-compat",cA="@firebase/performance",uA="@firebase/performance-compat",dA="@firebase/remote-config",hA="@firebase/remote-config-compat",fA="@firebase/storage",pA="@firebase/storage-compat",mA="@firebase/firestore",gA="@firebase/vertexai-preview",vA="@firebase/firestore-compat",yA="firebase",_A="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="[DEFAULT]",wA={[oh]:"fire-core",[GN]:"fire-core-compat",[QN]:"fire-analytics",[KN]:"fire-analytics-compat",[YN]:"fire-app-check",[XN]:"fire-app-check-compat",[JN]:"fire-auth",[ZN]:"fire-auth-compat",[eA]:"fire-rtdb",[tA]:"fire-data-connect",[nA]:"fire-rtdb-compat",[rA]:"fire-fn",[iA]:"fire-fn-compat",[sA]:"fire-iid",[oA]:"fire-iid-compat",[aA]:"fire-fcm",[lA]:"fire-fcm-compat",[cA]:"fire-perf",[uA]:"fire-perf-compat",[dA]:"fire-rc",[hA]:"fire-rc-compat",[fA]:"fire-gcs",[pA]:"fire-gcs-compat",[mA]:"fire-fst",[vA]:"fire-fst-compat",[gA]:"fire-vertex","fire-js":"fire-js",[yA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new Map,EA=new Map,lh=new Map;function mv(t,e){try{t.container.addComponent(e)}catch(n){Ln.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xr(t){const e=t.name;if(lh.has(e))return Ln.debug(`There were multiple attempts to register component ${e}.`),!1;lh.set(e,t);for(const n of Wl.values())mv(n,t);for(const n of EA.values())mv(n,t);return!0}function Qo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ar(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new Go("app","Firebase",TA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new On("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=_A;function pE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ah,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw _r.create("bad-app-name",{appName:String(i)});if(n||(n=cE()),!n)throw _r.create("no-options");const s=Wl.get(i);if(s){if(ql(n,s.options)&&ql(r,s.config))return s;throw _r.create("duplicate-app",{appName:i})}const o=new RN(i);for(const u of lh.values())o.addComponent(u);const c=new xA(n,r,o);return Wl.set(i,c),c}function Nc(t=ah){const e=Wl.get(t);if(!e&&t===ah&&cE())return pE();if(!e)throw _r.create("no-app",{appName:t});return e}function Vt(t,e,n){var r;let i=(r=wA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ln.warn(c.join(" "));return}xr(new On(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="firebase-heartbeat-database",SA=1,ko="firebase-heartbeat-store";let Yu=null;function mE(){return Yu||(Yu=BN(IA,SA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),Yu}async function CA(t){try{const n=(await mE()).transaction(ko),r=await n.objectStore(ko).get(gE(t));return await n.done,r}catch(e){if(e instanceof Zt)Ln.warn(e.message);else{const n=_r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ln.warn(n.message)}}}async function gv(t,e){try{const r=(await mE()).transaction(ko,"readwrite");await r.objectStore(ko).put(e,gE(t)),await r.done}catch(n){if(n instanceof Zt)Ln.warn(n.message);else{const r=_r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ln.warn(r.message)}}}function gE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=1024,AA=30*24*60*60*1e3;class RA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=AA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ln.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vv(),{heartbeatsToSend:r,unsentEntries:i}=PA(this._heartbeatsCache.heartbeats),s=$l(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ln.warn(n),""}}}function vv(){return new Date().toISOString().substring(0,10)}function PA(t,e=NA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),yv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),yv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vN()?yN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function yv(t){return $l(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){xr(new On("platform-logger",e=>new WN(e),"PRIVATE")),xr(new On("heartbeat",e=>new RA(e),"PRIVATE")),Vt(oh,pv,t),Vt(oh,pv,"esm2017"),Vt("fire-js","")}jA("");var bA="firebase",DA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt(bA,DA,"app");var _v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gr,vE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function A(){}A.prototype=_.prototype,S.D=_.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(R,N,j){for(var P=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)P[ne-2]=arguments[ne];return _.prototype[N].apply(R,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,_,A){A||(A=0);var R=Array(16);if(typeof _=="string")for(var N=0;16>N;++N)R[N]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(N=0;16>N;++N)R[N]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=S.g[0],A=S.g[1],N=S.g[2];var j=S.g[3],P=_+(j^A&(N^j))+R[0]+3614090360&4294967295;_=A+(P<<7&4294967295|P>>>25),P=j+(N^_&(A^N))+R[1]+3905402710&4294967295,j=_+(P<<12&4294967295|P>>>20),P=N+(A^j&(_^A))+R[2]+606105819&4294967295,N=j+(P<<17&4294967295|P>>>15),P=A+(_^N&(j^_))+R[3]+3250441966&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(j^A&(N^j))+R[4]+4118548399&4294967295,_=A+(P<<7&4294967295|P>>>25),P=j+(N^_&(A^N))+R[5]+1200080426&4294967295,j=_+(P<<12&4294967295|P>>>20),P=N+(A^j&(_^A))+R[6]+2821735955&4294967295,N=j+(P<<17&4294967295|P>>>15),P=A+(_^N&(j^_))+R[7]+4249261313&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(j^A&(N^j))+R[8]+1770035416&4294967295,_=A+(P<<7&4294967295|P>>>25),P=j+(N^_&(A^N))+R[9]+2336552879&4294967295,j=_+(P<<12&4294967295|P>>>20),P=N+(A^j&(_^A))+R[10]+4294925233&4294967295,N=j+(P<<17&4294967295|P>>>15),P=A+(_^N&(j^_))+R[11]+2304563134&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(j^A&(N^j))+R[12]+1804603682&4294967295,_=A+(P<<7&4294967295|P>>>25),P=j+(N^_&(A^N))+R[13]+4254626195&4294967295,j=_+(P<<12&4294967295|P>>>20),P=N+(A^j&(_^A))+R[14]+2792965006&4294967295,N=j+(P<<17&4294967295|P>>>15),P=A+(_^N&(j^_))+R[15]+1236535329&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(N^j&(A^N))+R[1]+4129170786&4294967295,_=A+(P<<5&4294967295|P>>>27),P=j+(A^N&(_^A))+R[6]+3225465664&4294967295,j=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(j^_))+R[11]+643717713&4294967295,N=j+(P<<14&4294967295|P>>>18),P=A+(j^_&(N^j))+R[0]+3921069994&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(N^j&(A^N))+R[5]+3593408605&4294967295,_=A+(P<<5&4294967295|P>>>27),P=j+(A^N&(_^A))+R[10]+38016083&4294967295,j=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(j^_))+R[15]+3634488961&4294967295,N=j+(P<<14&4294967295|P>>>18),P=A+(j^_&(N^j))+R[4]+3889429448&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(N^j&(A^N))+R[9]+568446438&4294967295,_=A+(P<<5&4294967295|P>>>27),P=j+(A^N&(_^A))+R[14]+3275163606&4294967295,j=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(j^_))+R[3]+4107603335&4294967295,N=j+(P<<14&4294967295|P>>>18),P=A+(j^_&(N^j))+R[8]+1163531501&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(N^j&(A^N))+R[13]+2850285829&4294967295,_=A+(P<<5&4294967295|P>>>27),P=j+(A^N&(_^A))+R[2]+4243563512&4294967295,j=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(j^_))+R[7]+1735328473&4294967295,N=j+(P<<14&4294967295|P>>>18),P=A+(j^_&(N^j))+R[12]+2368359562&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(A^N^j)+R[5]+4294588738&4294967295,_=A+(P<<4&4294967295|P>>>28),P=j+(_^A^N)+R[8]+2272392833&4294967295,j=_+(P<<11&4294967295|P>>>21),P=N+(j^_^A)+R[11]+1839030562&4294967295,N=j+(P<<16&4294967295|P>>>16),P=A+(N^j^_)+R[14]+4259657740&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(A^N^j)+R[1]+2763975236&4294967295,_=A+(P<<4&4294967295|P>>>28),P=j+(_^A^N)+R[4]+1272893353&4294967295,j=_+(P<<11&4294967295|P>>>21),P=N+(j^_^A)+R[7]+4139469664&4294967295,N=j+(P<<16&4294967295|P>>>16),P=A+(N^j^_)+R[10]+3200236656&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(A^N^j)+R[13]+681279174&4294967295,_=A+(P<<4&4294967295|P>>>28),P=j+(_^A^N)+R[0]+3936430074&4294967295,j=_+(P<<11&4294967295|P>>>21),P=N+(j^_^A)+R[3]+3572445317&4294967295,N=j+(P<<16&4294967295|P>>>16),P=A+(N^j^_)+R[6]+76029189&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(A^N^j)+R[9]+3654602809&4294967295,_=A+(P<<4&4294967295|P>>>28),P=j+(_^A^N)+R[12]+3873151461&4294967295,j=_+(P<<11&4294967295|P>>>21),P=N+(j^_^A)+R[15]+530742520&4294967295,N=j+(P<<16&4294967295|P>>>16),P=A+(N^j^_)+R[2]+3299628645&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(N^(A|~j))+R[0]+4096336452&4294967295,_=A+(P<<6&4294967295|P>>>26),P=j+(A^(_|~N))+R[7]+1126891415&4294967295,j=_+(P<<10&4294967295|P>>>22),P=N+(_^(j|~A))+R[14]+2878612391&4294967295,N=j+(P<<15&4294967295|P>>>17),P=A+(j^(N|~_))+R[5]+4237533241&4294967295,A=N+(P<<21&4294967295|P>>>11),P=_+(N^(A|~j))+R[12]+1700485571&4294967295,_=A+(P<<6&4294967295|P>>>26),P=j+(A^(_|~N))+R[3]+2399980690&4294967295,j=_+(P<<10&4294967295|P>>>22),P=N+(_^(j|~A))+R[10]+4293915773&4294967295,N=j+(P<<15&4294967295|P>>>17),P=A+(j^(N|~_))+R[1]+2240044497&4294967295,A=N+(P<<21&4294967295|P>>>11),P=_+(N^(A|~j))+R[8]+1873313359&4294967295,_=A+(P<<6&4294967295|P>>>26),P=j+(A^(_|~N))+R[15]+4264355552&4294967295,j=_+(P<<10&4294967295|P>>>22),P=N+(_^(j|~A))+R[6]+2734768916&4294967295,N=j+(P<<15&4294967295|P>>>17),P=A+(j^(N|~_))+R[13]+1309151649&4294967295,A=N+(P<<21&4294967295|P>>>11),P=_+(N^(A|~j))+R[4]+4149444226&4294967295,_=A+(P<<6&4294967295|P>>>26),P=j+(A^(_|~N))+R[11]+3174756917&4294967295,j=_+(P<<10&4294967295|P>>>22),P=N+(_^(j|~A))+R[2]+718787259&4294967295,N=j+(P<<15&4294967295|P>>>17),P=A+(j^(N|~_))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+j&4294967295}r.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var A=_-this.blockSize,R=this.B,N=this.h,j=0;j<_;){if(N==0)for(;j<=A;)i(this,S,j),j+=this.blockSize;if(typeof S=="string"){for(;j<_;)if(R[N++]=S.charCodeAt(j++),N==this.blockSize){i(this,R),N=0;break}}else for(;j<_;)if(R[N++]=S[j++],N==this.blockSize){i(this,R),N=0;break}}this.h=N,this.o+=_},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var A=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=A&255,A/=256;for(this.u(S),S=Array(16),_=A=0;4>_;++_)for(var R=0;32>R;R+=8)S[A++]=this.g[_]>>>R&255;return S};function s(S,_){var A=c;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=_(S)}function o(S,_){this.h=_;for(var A=[],R=!0,N=S.length-1;0<=N;N--){var j=S[N]|0;R&&j==_||(A[N]=j,R=!1)}this.g=A}var c={};function u(S){return-128<=S&&128>S?s(S,function(_){return new o([_|0],0>_?-1:0)}):new o([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return g;if(0>S)return k(d(-S));for(var _=[],A=1,R=0;S>=A;R++)_[R]=S/A|0,A*=4294967296;return new o(_,0)}function f(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return k(f(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(_,8)),R=g,N=0;N<S.length;N+=8){var j=Math.min(8,S.length-N),P=parseInt(S.substring(N,N+j),_);8>j?(j=d(Math.pow(_,j)),R=R.j(j).add(d(P))):(R=R.j(A),R=R.add(d(P)))}return R}var g=u(0),m=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(I(this))return-k(this).m();for(var S=0,_=1,A=0;A<this.g.length;A++){var R=this.i(A);S+=(0<=R?R:4294967296+R)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(I(this))return"-"+k(this).toString(S);for(var _=d(Math.pow(S,6)),A=this,R="";;){var N=x(A,_).g;A=y(A,N.j(_));var j=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=N,T(A))return j+R;for(;6>j.length;)j="0"+j;R=j+R}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function I(S){return S.h==-1}t.l=function(S){return S=y(this,S),I(S)?-1:T(S)?0:1};function k(S){for(var _=S.g.length,A=[],R=0;R<_;R++)A[R]=~S.g[R];return new o(A,~S.h).add(m)}t.abs=function(){return I(this)?k(this):this},t.add=function(S){for(var _=Math.max(this.g.length,S.g.length),A=[],R=0,N=0;N<=_;N++){var j=R+(this.i(N)&65535)+(S.i(N)&65535),P=(j>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);R=P>>>16,j&=65535,P&=65535,A[N]=P<<16|j}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(S,_){return S.add(k(_))}t.j=function(S){if(T(this)||T(S))return g;if(I(this))return I(S)?k(this).j(k(S)):k(k(this).j(S));if(I(S))return k(this.j(k(S)));if(0>this.l(v)&&0>S.l(v))return d(this.m()*S.m());for(var _=this.g.length+S.g.length,A=[],R=0;R<2*_;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<S.g.length;N++){var j=this.i(R)>>>16,P=this.i(R)&65535,ne=S.i(N)>>>16,pn=S.i(N)&65535;A[2*R+2*N]+=P*pn,w(A,2*R+2*N),A[2*R+2*N+1]+=j*pn,w(A,2*R+2*N+1),A[2*R+2*N+1]+=P*ne,w(A,2*R+2*N+1),A[2*R+2*N+2]+=j*ne,w(A,2*R+2*N+2)}for(R=0;R<_;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=_;R<2*_;R++)A[R]=0;return new o(A,0)};function w(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function C(S,_){this.g=S,this.h=_}function x(S,_){if(T(_))throw Error("division by zero");if(T(S))return new C(g,g);if(I(S))return _=x(k(S),_),new C(k(_.g),k(_.h));if(I(_))return _=x(S,k(_)),new C(k(_.g),_.h);if(30<S.g.length){if(I(S)||I(_))throw Error("slowDivide_ only works with positive integers.");for(var A=m,R=_;0>=R.l(S);)A=L(A),R=L(R);var N=D(A,1),j=D(R,1);for(R=D(R,2),A=D(A,2);!T(R);){var P=j.add(R);0>=P.l(S)&&(N=N.add(A),j=P),R=D(R,1),A=D(A,1)}return _=y(S,N.j(_)),new C(N,_)}for(N=g;0<=S.l(_);){for(A=Math.max(1,Math.floor(S.m()/_.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),j=d(A),P=j.j(_);I(P)||0<P.l(S);)A-=R,j=d(A),P=j.j(_);T(j)&&(j=m),N=N.add(j),S=y(S,P)}return new C(N,S)}t.A=function(S){return x(this,S).h},t.and=function(S){for(var _=Math.max(this.g.length,S.g.length),A=[],R=0;R<_;R++)A[R]=this.i(R)&S.i(R);return new o(A,this.h&S.h)},t.or=function(S){for(var _=Math.max(this.g.length,S.g.length),A=[],R=0;R<_;R++)A[R]=this.i(R)|S.i(R);return new o(A,this.h|S.h)},t.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),A=[],R=0;R<_;R++)A[R]=this.i(R)^S.i(R);return new o(A,this.h^S.h)};function L(S){for(var _=S.g.length+1,A=[],R=0;R<_;R++)A[R]=S.i(R)<<1|S.i(R-1)>>>31;return new o(A,S.h)}function D(S,_){var A=_>>5;_%=32;for(var R=S.g.length-A,N=[],j=0;j<R;j++)N[j]=0<_?S.i(j+A)>>>_|S.i(j+A+1)<<32-_:S.i(j+A);return new o(N,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Gr=o}).apply(typeof _v<"u"?_v:typeof self<"u"?self:typeof window<"u"?window:{});var Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yE,Hs,_E,cl,ch,wE,EE,TE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ba=="object"&&Ba];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var O=l[E];if(!(O in p))break e;p=p[O]}l=l[l.length-1],E=p[l],h=h(E),h!=E&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var p=0,E=!1,O={next:function(){if(!E&&p<l.length){var V=p++;return{value:h(V,l[V]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function g(l,h,p){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),l.apply(h,O)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,m.apply(null,arguments)}function v(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function T(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(E,O,V){for(var z=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)z[fe-2]=arguments[fe];return h.prototype[O].apply(E,z)}}function I(l){const h=l.length;if(0<h){const p=Array(h);for(let E=0;E<h;E++)p[E]=l[E];return p}return[]}function k(l,h){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(u(E)){const O=l.length||0,V=E.length||0;l.length=O+V;for(let z=0;z<V;z++)l[O+z]=E[z]}else l.push(E)}}class y{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(l){return/^[\s\xa0]*$/.test(l)}function C(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function x(l){return x[" "](l),l}x[" "]=function(){};var L=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function D(l,h,p){for(const E in l)h.call(p,l[E],E,l)}function S(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function _(l){const h={};for(const p in l)h[p]=l[p];return h}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(l,h){let p,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(p in E)l[p]=E[p];for(let V=0;V<A.length;V++)p=A[V],Object.prototype.hasOwnProperty.call(E,p)&&(l[p]=E[p])}}function N(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function j(l){c.setTimeout(()=>{throw l},0)}function P(){var l=X;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class ne{constructor(){this.h=this.g=null}add(h,p){const E=pn.get();E.set(h,p),this.h?this.h.next=E:this.g=E,this.h=E}}var pn=new y(()=>new en,l=>l.reset());class en{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let mn,B=!1,X=new ne,Z=()=>{const l=c.Promise.resolve(void 0);mn=()=>{l.then(we)}};var we=()=>{for(var l;l=P();){try{l.h.call(l.g)}catch(p){j(p)}var h=pn;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var gn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function vn(l,h){if(Pe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{x(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:yn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&vn.aa.h.call(this)}}T(vn,Pe);var yn={2:"touch",3:"pen",4:"mouse"};vn.prototype.h=function(){vn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var _n="closure_listenable_"+(1e6*Math.random()|0),H0=0;function G0(l,h,p,E,O){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!E,this.ha=O,this.key=++H0,this.da=this.fa=!1}function aa(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function la(l){this.src=l,this.g={},this.h=0}la.prototype.add=function(l,h,p,E,O){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var z=Jc(l,h,E,O);return-1<z?(h=l[z],p||(h.fa=!1)):(h=new G0(h,this.src,V,!!E,O),h.fa=p,l.push(h)),h};function Yc(l,h){var p=h.type;if(p in l.g){var E=l.g[p],O=Array.prototype.indexOf.call(E,h,void 0),V;(V=0<=O)&&Array.prototype.splice.call(E,O,1),V&&(aa(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Jc(l,h,p,E){for(var O=0;O<l.length;++O){var V=l[O];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==E)return O}return-1}var Zc="closure_lm_"+(1e6*Math.random()|0),eu={};function Bp(l,h,p,E,O){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Bp(l,h[V],p,E,O);return null}return p=Wp(p),l&&l[_n]?l.K(h,p,d(E)?!!E.capture:!1,O):K0(l,h,p,!1,E,O)}function K0(l,h,p,E,O,V){if(!h)throw Error("Invalid event type");var z=d(O)?!!O.capture:!!O,fe=nu(l);if(fe||(l[Zc]=fe=new la(l)),p=fe.add(h,p,E,z,V),p.proxy)return p;if(E=Q0(),p.proxy=E,E.src=l,E.listener=p,l.addEventListener)gn||(O=z),O===void 0&&(O=!1),l.addEventListener(h.toString(),E,O);else if(l.attachEvent)l.attachEvent(qp(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Q0(){function l(p){return h.call(l.src,l.listener,p)}const h=X0;return l}function $p(l,h,p,E,O){if(Array.isArray(h))for(var V=0;V<h.length;V++)$p(l,h[V],p,E,O);else E=d(E)?!!E.capture:!!E,p=Wp(p),l&&l[_n]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],p=Jc(V,p,E,O),-1<p&&(aa(V[p]),Array.prototype.splice.call(V,p,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=nu(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Jc(h,p,E,O)),(p=-1<l?h[l]:null)&&tu(p))}function tu(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[_n])Yc(h.i,l);else{var p=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(p,E,l.capture):h.detachEvent?h.detachEvent(qp(p),E):h.addListener&&h.removeListener&&h.removeListener(E),(p=nu(h))?(Yc(p,l),p.h==0&&(p.src=null,h[Zc]=null)):aa(l)}}}function qp(l){return l in eu?eu[l]:eu[l]="on"+l}function X0(l,h){if(l.da)l=!0;else{h=new vn(h,this);var p=l.listener,E=l.ha||l.src;l.fa&&tu(l),l=p.call(E,h)}return l}function nu(l){return l=l[Zc],l instanceof la?l:null}var ru="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wp(l){return typeof l=="function"?l:(l[ru]||(l[ru]=function(h){return l.handleEvent(h)}),l[ru])}function Ye(){he.call(this),this.i=new la(this),this.M=this,this.F=null}T(Ye,he),Ye.prototype[_n]=!0,Ye.prototype.removeEventListener=function(l,h,p,E){$p(this,l,h,p,E)};function lt(l,h){var p,E=l.F;if(E)for(p=[];E;E=E.F)p.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new Pe(h,l);else if(h instanceof Pe)h.target=h.target||l;else{var O=h;h=new Pe(E,l),R(h,O)}if(O=!0,p)for(var V=p.length-1;0<=V;V--){var z=h.g=p[V];O=ca(z,E,!0,h)&&O}if(z=h.g=l,O=ca(z,E,!0,h)&&O,O=ca(z,E,!1,h)&&O,p)for(V=0;V<p.length;V++)z=h.g=p[V],O=ca(z,E,!1,h)&&O}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],E=0;E<p.length;E++)aa(p[E]);delete l.g[h],l.h--}}this.F=null},Ye.prototype.K=function(l,h,p,E){return this.i.add(String(l),h,!1,p,E)},Ye.prototype.L=function(l,h,p,E){return this.i.add(String(l),h,!0,p,E)};function ca(l,h,p,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,V=0;V<h.length;++V){var z=h[V];if(z&&!z.da&&z.capture==p){var fe=z.listener,$e=z.ha||z.src;z.fa&&Yc(l.i,z),O=fe.call($e,E)!==!1&&O}}return O&&!E.defaultPrevented}function Hp(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Gp(l){l.g=Hp(()=>{l.g=null,l.i&&(l.i=!1,Gp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Y0 extends he{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Gp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(l){he.call(this),this.h=l,this.g={}}T(vs,he);var Kp=[];function Qp(l){D(l.g,function(h,p){this.g.hasOwnProperty(p)&&tu(h)},l),l.g={}}vs.prototype.N=function(){vs.aa.N.call(this),Qp(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var iu=c.JSON.stringify,J0=c.JSON.parse,Z0=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function su(){}su.prototype.h=null;function Xp(l){return l.h||(l.h=l.i())}function Yp(){}var ys={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ou(){Pe.call(this,"d")}T(ou,Pe);function au(){Pe.call(this,"c")}T(au,Pe);var Dr={},Jp=null;function ua(){return Jp=Jp||new Ye}Dr.La="serverreachability";function Zp(l){Pe.call(this,Dr.La,l)}T(Zp,Pe);function _s(l){const h=ua();lt(h,new Zp(h))}Dr.STAT_EVENT="statevent";function em(l,h){Pe.call(this,Dr.STAT_EVENT,l),this.stat=h}T(em,Pe);function ct(l){const h=ua();lt(h,new em(h,l))}Dr.Ma="timingevent";function tm(l,h){Pe.call(this,Dr.Ma,l),this.size=h}T(tm,Pe);function ws(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Es(){this.g=!0}Es.prototype.xa=function(){this.g=!1};function ex(l,h,p,E,O,V){l.info(function(){if(l.g)if(V)for(var z="",fe=V.split("&"),$e=0;$e<fe.length;$e++){var ae=fe[$e].split("=");if(1<ae.length){var Je=ae[0];ae=ae[1];var Ze=Je.split("_");z=2<=Ze.length&&Ze[1]=="type"?z+(Je+"="+ae+"&"):z+(Je+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+h+`
`+p+`
`+z})}function tx(l,h,p,E,O,V,z){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+h+`
`+p+`
`+V+" "+z})}function pi(l,h,p,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+rx(l,p)+(E?" "+E:"")})}function nx(l,h){l.info(function(){return"TIMEOUT: "+h})}Es.prototype.info=function(){};function rx(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var E=p[l];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var V=O[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<O.length;z++)O[z]=""}}}}return iu(p)}catch{return h}}var da={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lu;function ha(){}T(ha,su),ha.prototype.g=function(){return new XMLHttpRequest},ha.prototype.i=function(){return{}},lu=new ha;function qn(l,h,p,E){this.j=l,this.i=h,this.l=p,this.R=E||1,this.U=new vs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rm}function rm(){this.i=null,this.g="",this.h=!1}var im={},cu={};function uu(l,h,p){l.L=1,l.v=ga(wn(h)),l.m=p,l.P=!0,sm(l,null)}function sm(l,h){l.F=Date.now(),fa(l),l.A=wn(l.v);var p=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),_m(p.i,"t",E),l.C=0,p=l.j.J,l.h=new rm,l.g=Vm(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Y0(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,E=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Kp[0]=O.toString()),O=Kp);for(var V=0;V<O.length;V++){var z=Bp(p,O[V],E||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),_s(),ex(l.i,l.u,l.A,l.l,l.R,l.m)}qn.prototype.ca=function(l){l=l.target;const h=this.M;h&&En(l)==3?h.j():this.Y(l)},qn.prototype.Y=function(l){try{if(l==this.g)e:{const Ze=En(this.g);var h=this.g.Ba();const vi=this.g.Z();if(!(3>Ze)&&(Ze!=3||this.g&&(this.h.h||this.g.oa()||Cm(this.g)))){this.J||Ze!=4||h==7||(h==8||0>=vi?_s(3):_s(2)),du(this);var p=this.g.Z();this.X=p;t:if(om(this)){var E=Cm(this.g);l="";var O=E.length,V=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Or(this),Ts(this);var z="";break t}this.h.i=new c.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,l+=this.h.i.decode(E[h],{stream:!(V&&h==O-1)});E.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=p==200,tx(this.i,this.u,this.A,this.l,this.R,Ze,p),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,$e=this.g;if((fe=$e.g?$e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(fe)){var ae=fe;break t}}ae=null}if(p=ae)pi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hu(this,p);else{this.o=!1,this.s=3,ct(12),Or(this),Ts(this);break e}}if(this.P){p=!0;let Bt;for(;!this.J&&this.C<z.length;)if(Bt=ix(this,z),Bt==cu){Ze==4&&(this.s=4,ct(14),p=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==im){this.s=4,ct(15),pi(this.i,this.l,z,"[Invalid Chunk]"),p=!1;break}else pi(this.i,this.l,Bt,null),hu(this,Bt);if(om(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||z.length!=0||this.h.h||(this.s=1,ct(16),p=!1),this.o=this.o&&p,!p)pi(this.i,this.l,z,"[Invalid Chunked Response]"),Or(this),Ts(this);else if(0<z.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),yu(Je),Je.M=!0,ct(11))}}else pi(this.i,this.l,z,null),hu(this,z);Ze==4&&Or(this),this.o&&!this.J&&(Ze==4?bm(this.j,this):(this.o=!1,fa(this)))}else Ex(this.g),p==400&&0<z.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Or(this),Ts(this)}}}catch{}finally{}};function om(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ix(l,h){var p=l.C,E=h.indexOf(`
`,p);return E==-1?cu:(p=Number(h.substring(p,E)),isNaN(p)?im:(E+=1,E+p>h.length?cu:(h=h.slice(E,E+p),l.C=E+p,h)))}qn.prototype.cancel=function(){this.J=!0,Or(this)};function fa(l){l.S=Date.now()+l.I,am(l,l.I)}function am(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ws(m(l.ba,l),h)}function du(l){l.B&&(c.clearTimeout(l.B),l.B=null)}qn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(nx(this.i,this.A),this.L!=2&&(_s(),ct(17)),Or(this),this.s=2,Ts(this)):am(this,this.S-l)};function Ts(l){l.j.G==0||l.J||bm(l.j,l)}function Or(l){du(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Qp(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function hu(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||fu(p.h,l))){if(!l.K&&fu(p.h,l)&&p.G==3){try{var E=p.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Ta(p),wa(p);else break e;vu(p),ct(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=ws(m(p.Za,p),6e3));if(1>=um(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Vr(p,11)}else if((l.K||p.g==l)&&Ta(p),!w(h))for(O=p.Da.g.parse(h),h=0;h<O.length;h++){let ae=O[h];if(p.T=ae[0],ae=ae[1],p.G==2)if(ae[0]=="c"){p.K=ae[1],p.ia=ae[2];const Je=ae[3];Je!=null&&(p.la=Je,p.j.info("VER="+p.la));const Ze=ae[4];Ze!=null&&(p.Aa=Ze,p.j.info("SVER="+p.Aa));const vi=ae[5];vi!=null&&typeof vi=="number"&&0<vi&&(E=1.5*vi,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Bt=l.g;if(Bt){const Ia=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var V=E.h;V.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(pu(V,V.h),V.h=null))}if(E.D){const _u=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;_u&&(E.ya=_u,me(E.I,E.D,_u))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var z=l;if(E.qa=Lm(E,E.J?E.ia:null,E.W),z.K){dm(E.h,z);var fe=z,$e=E.L;$e&&(fe.I=$e),fe.B&&(du(fe),fa(fe)),E.g=z}else km(E);0<p.i.length&&Ea(p)}else ae[0]!="stop"&&ae[0]!="close"||Vr(p,7);else p.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?Vr(p,7):gu(p):ae[0]!="noop"&&p.l&&p.l.ta(ae),p.v=0)}}_s(4)}catch{}}var sx=class{constructor(l,h){this.g=l,this.map=h}};function lm(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function um(l){return l.h?1:l.g?l.g.size:0}function fu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function pu(l,h){l.g?l.g.add(h):l.h=h}function dm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}lm.prototype.cancel=function(){if(this.i=hm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function hm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return I(l.i)}function ox(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,E=0;E<p;E++)h.push(l[E]);return h}h=[],p=0;for(E in l)h[p++]=l[E];return h}function ax(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const E in l)h[p++]=E;return h}}}function fm(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=ax(l),E=ox(l),O=E.length,V=0;V<O;V++)h.call(void 0,E[V],p&&p[V],l)}var pm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lx(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var E=l[p].indexOf("="),O=null;if(0<=E){var V=l[p].substring(0,E);O=l[p].substring(E+1)}else V=l[p];h(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Lr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Lr){this.h=l.h,pa(this,l.j),this.o=l.o,this.g=l.g,ma(this,l.s),this.l=l.l;var h=l.i,p=new Ss;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),mm(this,p),this.m=l.m}else l&&(h=String(l).match(pm))?(this.h=!1,pa(this,h[1]||"",!0),this.o=xs(h[2]||""),this.g=xs(h[3]||"",!0),ma(this,h[4]),this.l=xs(h[5]||"",!0),mm(this,h[6]||"",!0),this.m=xs(h[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}Lr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Is(h,gm,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Is(h,gm,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Is(p,p.charAt(0)=="/"?dx:ux,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Is(p,fx)),l.join("")};function wn(l){return new Lr(l)}function pa(l,h,p){l.j=p?xs(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function ma(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function mm(l,h,p){h instanceof Ss?(l.i=h,px(l.i,l.h)):(p||(h=Is(h,hx)),l.i=new Ss(h,l.h))}function me(l,h,p){l.i.set(h,p)}function ga(l){return me(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function xs(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Is(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,cx),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function cx(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var gm=/[#\/\?@]/g,ux=/[#\?:]/g,dx=/[#\?]/g,hx=/[#\?@]/g,fx=/#/g;function Ss(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Wn(l){l.g||(l.g=new Map,l.h=0,l.i&&lx(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ss.prototype,t.add=function(l,h){Wn(this),this.i=null,l=mi(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function vm(l,h){Wn(l),h=mi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function ym(l,h){return Wn(l),h=mi(l,h),l.g.has(h)}t.forEach=function(l,h){Wn(this),this.g.forEach(function(p,E){p.forEach(function(O){l.call(h,O,E,this)},this)},this)},t.na=function(){Wn(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let E=0;E<h.length;E++){const O=l[E];for(let V=0;V<O.length;V++)p.push(h[E])}return p},t.V=function(l){Wn(this);let h=[];if(typeof l=="string")ym(this,l)&&(h=h.concat(this.g.get(mi(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return Wn(this),this.i=null,l=mi(this,l),ym(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function _m(l,h,p){vm(l,h),0<p.length&&(l.i=null,l.g.set(mi(l,h),I(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var E=h[p];const V=encodeURIComponent(String(E)),z=this.V(E);for(E=0;E<z.length;E++){var O=V;z[E]!==""&&(O+="="+encodeURIComponent(String(z[E]))),l.push(O)}}return this.i=l.join("&")};function mi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function px(l,h){h&&!l.j&&(Wn(l),l.i=null,l.g.forEach(function(p,E){var O=E.toLowerCase();E!=O&&(vm(this,E),_m(this,O,p))},l)),l.j=h}function mx(l,h){const p=new Es;if(c.Image){const E=new Image;E.onload=v(Hn,p,"TestLoadImage: loaded",!0,h,E),E.onerror=v(Hn,p,"TestLoadImage: error",!1,h,E),E.onabort=v(Hn,p,"TestLoadImage: abort",!1,h,E),E.ontimeout=v(Hn,p,"TestLoadImage: timeout",!1,h,E),c.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function gx(l,h){const p=new Es,E=new AbortController,O=setTimeout(()=>{E.abort(),Hn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(V=>{clearTimeout(O),V.ok?Hn(p,"TestPingServer: ok",!0,h):Hn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),Hn(p,"TestPingServer: error",!1,h)})}function Hn(l,h,p,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(p)}catch{}}function vx(){this.g=new Z0}function yx(l,h,p){const E=p||"";try{fm(l,function(O,V){let z=O;d(O)&&(z=iu(O)),h.push(E+V+"="+encodeURIComponent(z))})}catch(O){throw h.push(E+"type="+encodeURIComponent("_badmap")),O}}function va(l){this.l=l.Ub||null,this.j=l.eb||!1}T(va,su),va.prototype.g=function(){return new ya(this.l,this.j)},va.prototype.i=function(l){return function(){return l}}({});function ya(l,h){Ye.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ya,Ye),t=ya.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Ns(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function wm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Cs(this):Ns(this),this.readyState==3&&wm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Cs(this))},t.Qa=function(l){this.g&&(this.response=l,Cs(this))},t.ga=function(){this.g&&Cs(this)};function Cs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ns(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Ns(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ya.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Em(l){let h="";return D(l,function(p,E){h+=E,h+=":",h+=p,h+=`\r
`}),h}function mu(l,h,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=Em(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):me(l,h,p))}function Se(l){Ye.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Se,Ye);var _x=/^https?$/i,wx=["POST","PUT"];t=Se.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lu.g(),this.v=this.o?Xp(this.o):Xp(lu),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){Tm(this,V);return}if(l=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)p.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const V of E.keys())p.set(V,E.get(V));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),O=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(wx,h,void 0))||E||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of p)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sm(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Tm(this,V)}};function Tm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,xm(l),_a(l)}function xm(l){l.A||(l.A=!0,lt(l,"complete"),lt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,lt(this,"complete"),lt(this,"abort"),_a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Im(this):this.bb())},t.bb=function(){Im(this)};function Im(l){if(l.h&&typeof o<"u"&&(!l.v[1]||En(l)!=4||l.Z()!=2)){if(l.u&&En(l)==4)Hp(l.Ea,0,l);else if(lt(l,"readystatechange"),En(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var E;if(E=z===0){var O=String(l.D).match(pm)[1]||null;!O&&c.self&&c.self.location&&(O=c.self.location.protocol.slice(0,-1)),E=!_x.test(O?O.toLowerCase():"")}p=E}if(p)lt(l,"complete"),lt(l,"success");else{l.m=6;try{var V=2<En(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",xm(l)}}finally{_a(l)}}}}function _a(l,h){if(l.g){Sm(l);const p=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||lt(l,"ready");try{p.onreadystatechange=E}catch{}}}function Sm(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function En(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),J0(h)}};function Cm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ex(l){const h={};l=(l.g&&2<=En(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(w(l[E]))continue;var p=N(l[E]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=h[O]||[];h[O]=V,V.push(p)}S(h,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Nm(l){this.Aa=0,this.i=[],this.j=new Es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=As("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=As("baseRetryDelayMs",5e3,l),this.cb=As("retryDelaySeedMs",1e4,l),this.Wa=As("forwardChannelMaxRetries",2,l),this.wa=As("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new lm(l&&l.concurrentRequestLimit),this.Da=new vx,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Nm.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,E){ct(0),this.W=l,this.H=h||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=Lm(this,null,this.W),Ea(this)};function gu(l){if(Am(l),l.G==3){var h=l.U++,p=wn(l.I);if(me(p,"SID",l.K),me(p,"RID",h),me(p,"TYPE","terminate"),Rs(l,p),h=new qn(l,l.j,h),h.L=2,h.v=ga(wn(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=Vm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),fa(h)}Om(l)}function wa(l){l.g&&(yu(l),l.g.cancel(),l.g=null)}function Am(l){wa(l),l.u&&(c.clearTimeout(l.u),l.u=null),Ta(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ea(l){if(!cm(l.h)&&!l.s){l.s=!0;var h=l.Ga;mn||Z(),B||(mn(),B=!0),X.add(h,l),l.B=0}}function Tx(l,h){return um(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ws(m(l.Ga,l,h),Dm(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new qn(this,this.j,l);let V=this.o;if(this.S&&(V?(V=_(V),R(V,this.S)):V=this.S),this.m!==null||this.O||(O.H=V,V=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Pm(this,O,h),p=wn(this.I),me(p,"RID",l),me(p,"CVER",22),this.D&&me(p,"X-HTTP-Session-Id",this.D),Rs(this,p),V&&(this.O?h="headers="+encodeURIComponent(String(Em(V)))+"&"+h:this.m&&mu(p,this.m,V)),pu(this.h,O),this.Ua&&me(p,"TYPE","init"),this.P?(me(p,"$req",h),me(p,"SID","null"),O.T=!0,uu(O,p,null)):uu(O,p,h),this.G=2}}else this.G==3&&(l?Rm(this,l):this.i.length==0||cm(this.h)||Rm(this))};function Rm(l,h){var p;h?p=h.l:p=l.U++;const E=wn(l.I);me(E,"SID",l.K),me(E,"RID",p),me(E,"AID",l.T),Rs(l,E),l.m&&l.o&&mu(E,l.m,l.o),p=new qn(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Pm(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),pu(l.h,p),uu(p,E,h)}function Rs(l,h){l.H&&D(l.H,function(p,E){me(h,E,p)}),l.l&&fm({},function(p,E){me(h,E,p)})}function Pm(l,h,p){p=Math.min(l.i.length,p);var E=l.l?m(l.l.Na,l.l,l):null;e:{var O=l.i;let V=-1;for(;;){const z=["count="+p];V==-1?0<p?(V=O[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let fe=!0;for(let $e=0;$e<p;$e++){let ae=O[$e].g;const Je=O[$e].map;if(ae-=V,0>ae)V=Math.max(0,O[$e].g-100),fe=!1;else try{yx(Je,z,"req"+ae+"_")}catch{E&&E(Je)}}if(fe){E=z.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,E}function km(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;mn||Z(),B||(mn(),B=!0),X.add(h,l),l.v=0}}function vu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ws(m(l.Fa,l),Dm(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,jm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ws(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),wa(this),jm(this))};function yu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function jm(l){l.g=new qn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=wn(l.qa);me(h,"RID","rpc"),me(h,"SID",l.K),me(h,"AID",l.T),me(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&me(h,"TO",l.ja),me(h,"TYPE","xmlhttp"),Rs(l,h),l.m&&l.o&&mu(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=ga(wn(h)),p.m=null,p.P=!0,sm(p,l)}t.Za=function(){this.C!=null&&(this.C=null,wa(this),vu(this),ct(19))};function Ta(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function bm(l,h){var p=null;if(l.g==h){Ta(l),yu(l),l.g=null;var E=2}else if(fu(l.h,h))p=h.D,dm(l.h,h),E=1;else return;if(l.G!=0){if(h.o)if(E==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var O=l.B;E=ua(),lt(E,new tm(E,p)),Ea(l)}else km(l);else if(O=h.s,O==3||O==0&&0<h.X||!(E==1&&Tx(l,h)||E==2&&vu(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),O){case 1:Vr(l,5);break;case 4:Vr(l,10);break;case 3:Vr(l,6);break;default:Vr(l,2)}}}function Dm(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Vr(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),E=l.Xa;const O=!E;E=new Lr(E||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||pa(E,"https"),ga(E),O?mx(E.toString(),p):gx(E.toString(),p)}else ct(2);l.G=0,l.l&&l.l.sa(h),Om(l),Am(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Om(l){if(l.G=0,l.ka=[],l.l){const h=hm(l.h);(h.length!=0||l.i.length!=0)&&(k(l.ka,h),k(l.ka,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.ra()}}function Lm(l,h,p){var E=p instanceof Lr?wn(p):new Lr(p);if(E.g!="")h&&(E.g=h+"."+E.g),ma(E,E.s);else{var O=c.location;E=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var V=new Lr(null);E&&pa(V,E),h&&(V.g=h),O&&ma(V,O),p&&(V.l=p),E=V}return p=l.D,h=l.ya,p&&h&&me(E,p,h),me(E,"VER",l.la),Rs(l,E),E}function Vm(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Se(new va({eb:p})):new Se(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mm(){}t=Mm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xa(){}xa.prototype.g=function(l,h){return new xt(l,h)};function xt(l,h){Ye.call(this),this.g=new Nm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!w(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new gi(this)}T(xt,Ye),xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){gu(this.g)},xt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=iu(l),l=p);h.i.push(new sx(h.Ya++,l)),h.G==3&&Ea(h)},xt.prototype.N=function(){this.g.l=null,delete this.j,gu(this.g),delete this.g,xt.aa.N.call(this)};function Fm(l){ou.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}T(Fm,ou);function Um(){au.call(this),this.status=1}T(Um,au);function gi(l){this.g=l}T(gi,Mm),gi.prototype.ua=function(){lt(this.g,"a")},gi.prototype.ta=function(l){lt(this.g,new Fm(l))},gi.prototype.sa=function(l){lt(this.g,new Um)},gi.prototype.ra=function(){lt(this.g,"b")},xa.prototype.createWebChannel=xa.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,TE=function(){return new xa},EE=function(){return ua()},wE=Dr,ch={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,cl=da,nm.COMPLETE="complete",_E=nm,Yp.EventType=ys,ys.OPEN="a",ys.CLOSE="b",ys.ERROR="c",ys.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,Hs=Yp,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,yE=Se}).apply(typeof Ba<"u"?Ba:typeof self<"u"?self:typeof window<"u"?window:{});const wv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ds="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new Df("@firebase/firestore");function Ms(){return ti.logLevel}function W(t,...e){if(ti.logLevel<=re.DEBUG){const n=e.map(Lf);ti.debug(`Firestore (${ds}): ${t}`,...n)}}function Vn(t,...e){if(ti.logLevel<=re.ERROR){const n=e.map(Lf);ti.error(`Firestore (${ds}): ${t}`,...n)}}function Zi(t,...e){if(ti.logLevel<=re.WARN){const n=e.map(Lf);ti.warn(`Firestore (${ds}): ${t}`,...n)}}function Lf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${ds}) INTERNAL ASSERTION FAILED: `+t;throw Vn(e),new Error(e)}function de(t,e){t||Q()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Zt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rt.UNAUTHENTICATED))}shutdown(){}}class LA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VA{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Pn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new xE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new rt(e)}}class MA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new MA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){de(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new UA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=BA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function es(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ie.fromMillis(Date.now())}static fromDate(e){return ie.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ie(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new ie(0,0))}static max(){return new Y(new ie(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return jo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends jo{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const $A=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends jo{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return $A.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new $(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new $(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(ve.fromString(e))}static fromName(e){return new H(ve.fromString(e).popFirst(5))}static empty(){return new H(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new ve(e.slice()))}}function qA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new ie(n+1,0):new ie(n,r));return new Ir(i,H.empty(),e)}function WA(t){return new Ir(t.readTime,t.key,-1)}class Ir{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ir(Y.min(),H.empty(),-1)}static max(){return new Ir(Y.max(),H.empty(),-1)}}function HA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==GA)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function QA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vf.oe=-1;function Ac(t){return t==null}function Hl(t){return t===0&&1/t==-1/0}function XA(t){return typeof t=="number"&&Number.isInteger(t)&&!Hl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||We.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,We.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,We.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $a(this.root,e,this.comparator,!1)}getReverseIterator(){return new $a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $a(this.root,e,this.comparator,!0)}}class $a{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class We{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??We.RED,this.left=i??We.EMPTY,this.right=s??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new We(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return We.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new We(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tv(this.data.getIterator())}getIteratorFrom(e){return new Tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class Tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new Ct([])}unionWith(e){let n=new Ke(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ct(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return es(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new CE("Invalid base64 string: "+s):s}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const YA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(t){if(de(!!t),typeof t=="string"){let e=0;const n=YA.exec(t);if(de(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ni(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ff(t){const e=t.mapValue.fields.__previous_value__;return Mf(e)?Ff(e):e}function bo(t){const e=Sr(t.mapValue.fields.__local_write_time__.timestampValue);return new ie(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n,r,i,s,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Do{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Do("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Do&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa={mapValue:{}};function ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mf(t)?4:eR(t)?9007199254740991:ZA(t)?10:11:Q()}function hn(t,e){if(t===e)return!0;const n=ri(t);if(n!==ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bo(t).isEqual(bo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Sr(i.timestampValue),c=Sr(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ni(i.bytesValue).isEqual(ni(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ke(i.geoPointValue.latitude)===ke(s.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ke(i.integerValue)===ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ke(i.doubleValue),c=ke(s.doubleValue);return o===c?Hl(o)===Hl(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return es(t.arrayValue.values||[],e.arrayValue.values||[],hn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Ev(o)!==Ev(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!hn(o[u],c[u])))return!1;return!0}(t,e);default:return Q()}}function Oo(t,e){return(t.values||[]).find(n=>hn(n,e))!==void 0}function ts(t,e){if(t===e)return 0;const n=ri(t),r=ri(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=ke(s.integerValue||s.doubleValue),u=ke(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return xv(t.timestampValue,e.timestampValue);case 4:return xv(bo(t),bo(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(s,o){const c=ni(s),u=ni(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=le(c[d],u[d]);if(f!==0)return f}return le(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=le(ke(s.latitude),ke(o.latitude));return c!==0?c:le(ke(s.longitude),ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Iv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,d,f;const g=s.fields||{},m=o.fields||{},v=(c=g.value)===null||c===void 0?void 0:c.arrayValue,T=(u=m.value)===null||u===void 0?void 0:u.arrayValue,I=le(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((f=T==null?void 0:T.values)===null||f===void 0?void 0:f.length)||0);return I!==0?I:Iv(v,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===qa.mapValue&&o===qa.mapValue)return 0;if(s===qa.mapValue)return 1;if(o===qa.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const m=le(u[g],f[g]);if(m!==0)return m;const v=ts(c[u[g]],d[f[g]]);if(v!==0)return v}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Q()}}function xv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Sr(t),r=Sr(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function Iv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ts(n[i],r[i]);if(s)return s}return le(n.length,r.length)}function ns(t){return uh(t)}function uh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Sr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ni(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=uh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${uh(n.fields[o])}`;return i+"}"}(t.mapValue):Q()}function Sv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dh(t){return!!t&&"integerValue"in t}function Uf(t){return!!t&&"arrayValue"in t}function Cv(t){return!!t&&"nullValue"in t}function Nv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ul(t){return!!t&&"mapValue"in t}function ZA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function so(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=so(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=so(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.value=e}static empty(){return new yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ul(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=so(n)}setAll(e){let n=He.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=so(o):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ul(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ul(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ui(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new yt(so(this.value))}}function NE(t){const e=[];return ui(t.fields,(n,r)=>{const i=new He([n]);if(ul(r)){const s=NE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ct(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new st(e,0,Y.min(),Y.min(),Y.min(),yt.empty(),0)}static newFoundDocument(e,n,r,i){return new st(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new st(e,2,n,Y.min(),Y.min(),yt.empty(),0)}static newUnknownDocument(e,n){return new st(e,3,n,Y.min(),Y.min(),yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.position=e,this.inclusive=n}}function Av(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=ts(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n="asc"){this.field=e,this.dir=n}}function tR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{}class Le extends AE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rR(e,n,r):n==="array-contains"?new oR(e,r):n==="in"?new aR(e,r):n==="not-in"?new lR(e,r):n==="array-contains-any"?new cR(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new iR(e,r):new sR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ts(n,this.value)):n!==null&&ri(this.value)===ri(n)&&this.matchesComparison(ts(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yt extends AE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Yt(e,n)}matches(e){return RE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function RE(t){return t.op==="and"}function PE(t){return nR(t)&&RE(t)}function nR(t){for(const e of t.filters)if(e instanceof Yt)return!1;return!0}function hh(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+ns(t.value);if(PE(t))return t.filters.map(e=>hh(e)).join(",");{const e=t.filters.map(n=>hh(n)).join(",");return`${t.op}(${e})`}}function kE(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&hn(r.value,i.value)}(t,e):t instanceof Yt?function(r,i){return i instanceof Yt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&kE(o,i.filters[c]),!0):!1}(t,e):void Q()}function jE(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${ns(n.value)}`}(t):t instanceof Yt?function(n){return n.op.toString()+" {"+n.getFilters().map(jE).join(" ,")+"}"}(t):"Filter"}class rR extends Le{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class iR extends Le{constructor(e,n){super(e,"in",n),this.keys=bE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sR extends Le{constructor(e,n){super(e,"not-in",n),this.keys=bE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class oR extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Uf(n)&&Oo(n.arrayValue,this.value)}}class aR extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oo(this.value.arrayValue,n)}}class lR extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Oo(this.value.arrayValue,n)}}class cR extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Uf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}}function Pv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new uR(t,e,n,r,i,s,o)}function zf(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ac(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ns(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ns(r)).join(",")),e.ue=n}return e.ue}function Bf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Rv(t.startAt,e.startAt)&&Rv(t.endAt,e.endAt)}function fh(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dR(t,e,n,r,i,s,o,c){return new hs(t,e,n,r,i,s,o,c)}function $f(t){return new hs(t)}function kv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DE(t){return t.collectionGroup!==null}function oo(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ke(He.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Lo(s,r))}),n.has(He.keyField().canonicalString())||e.ce.push(new Lo(He.keyField(),r))}return e.ce}function ln(t){const e=J(t);return e.le||(e.le=hR(e,oo(t))),e.le}function hR(t,e){if(t.limitType==="F")return Pv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Lo(i.field,s)});const n=t.endAt?new Gl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gl(t.startAt.position,t.startAt.inclusive):null;return Pv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ph(t,e){const n=t.filters.concat([e]);return new hs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Kl(t,e,n){return new hs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rc(t,e){return Bf(ln(t),ln(e))&&t.limitType===e.limitType}function OE(t){return`${zf(ln(t))}|lt:${t.limitType}`}function _i(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jE(i)).join(", ")}]`),Ac(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ns(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ns(i)).join(",")),`Target(${r})`}(ln(t))}; limitType=${t.limitType})`}function Pc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of oo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const d=Av(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,oo(r),i)||r.endAt&&!function(o,c,u){const d=Av(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,oo(r),i))}(t,e)}function fR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LE(t){return(e,n)=>{let r=!1;for(const i of oo(t)){const s=pR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function pR(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,c){const u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?ts(u,d):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ui(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return SE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new Ie(H.comparator);function Mn(){return mR}const VE=new Ie(H.comparator);function Gs(...t){let e=VE;for(const n of t)e=e.insert(n.key,n);return e}function ME(t){let e=VE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qr(){return ao()}function FE(){return ao()}function ao(){return new fs(t=>t.toString(),(t,e)=>t.isEqual(e))}const gR=new Ie(H.comparator),vR=new Ke(H.comparator);function te(...t){let e=vR;for(const n of t)e=e.add(n);return e}const yR=new Ke(le);function _R(){return yR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hl(e)?"-0":e}}function UE(t){return{integerValue:""+t}}function wR(t,e){return XA(e)?UE(e):qf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(){this._=void 0}}function ER(t,e,n){return t instanceof Vo?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Mf(s)&&(s=Ff(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Mo?BE(t,e):t instanceof Fo?$E(t,e):function(i,s){const o=zE(i,s),c=jv(o)+jv(i.Pe);return dh(o)&&dh(i.Pe)?UE(c):qf(i.serializer,c)}(t,e)}function TR(t,e,n){return t instanceof Mo?BE(t,e):t instanceof Fo?$E(t,e):n}function zE(t,e){return t instanceof Ql?function(r){return dh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Vo extends kc{}class Mo extends kc{constructor(e){super(),this.elements=e}}function BE(t,e){const n=qE(e);for(const r of t.elements)n.some(i=>hn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fo extends kc{constructor(e){super(),this.elements=e}}function $E(t,e){let n=qE(e);for(const r of t.elements)n=n.filter(i=>!hn(i,r));return{arrayValue:{values:n}}}class Ql extends kc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function jv(t){return ke(t.integerValue||t.doubleValue)}function qE(t){return Uf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.field=e,this.transform=n}}function IR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Mo&&i instanceof Mo||r instanceof Fo&&i instanceof Fo?es(r.elements,i.elements,hn):r instanceof Ql&&i instanceof Ql?hn(r.Pe,i.Pe):r instanceof Vo&&i instanceof Vo}(t.transform,e.transform)}class SR{constructor(e,n){this.version=e,this.transformResults=n}}class Mt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mt}static exists(e){return new Mt(void 0,e)}static updateTime(e){return new Mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jc{}function WE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wf(t.key,Mt.none()):new Jo(t.key,t.data,Mt.none());{const n=t.data,r=yt.empty();let i=new Ke(He.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new jr(t.key,r,new Ct(i.toArray()),Mt.none())}}function CR(t,e,n){t instanceof Jo?function(i,s,o){const c=i.value.clone(),u=Dv(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof jr?function(i,s,o){if(!dl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=Dv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(HE(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lo(t,e,n,r){return t instanceof Jo?function(s,o,c,u){if(!dl(s.precondition,o))return c;const d=s.value.clone(),f=Ov(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof jr?function(s,o,c,u){if(!dl(s.precondition,o))return c;const d=Ov(s.fieldTransforms,u,o),f=o.data;return f.setAll(HE(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,c){return dl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function NR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=zE(r.transform,i||null);s!=null&&(n===null&&(n=yt.empty()),n.set(r.field,s))}return n||null}function bv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&es(r,i,(s,o)=>IR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Jo extends jc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jr extends jc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Dv(t,e,n){const r=new Map;de(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,TR(o,c,n[i]))}return r}function Ov(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ER(s,o,e))}return r}class Wf extends jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AR extends jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&CR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;const u=WE(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&es(this.mutations,e.mutations,(n,r)=>bv(n,r))&&es(this.baseMutations,e.baseMutations,(n,r)=>bv(n,r))}}class Hf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length);let i=function(){return gR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Hf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,se;function jR(t){switch(t){default:return Q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function GE(t){if(t===void 0)return Vn("GRPC error has no .code"),M.UNKNOWN;switch(t){case De.OK:return M.OK;case De.CANCELLED:return M.CANCELLED;case De.UNKNOWN:return M.UNKNOWN;case De.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case De.INTERNAL:return M.INTERNAL;case De.UNAVAILABLE:return M.UNAVAILABLE;case De.UNAUTHENTICATED:return M.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case De.NOT_FOUND:return M.NOT_FOUND;case De.ALREADY_EXISTS:return M.ALREADY_EXISTS;case De.PERMISSION_DENIED:return M.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case De.ABORTED:return M.ABORTED;case De.OUT_OF_RANGE:return M.OUT_OF_RANGE;case De.UNIMPLEMENTED:return M.UNIMPLEMENTED;case De.DATA_LOSS:return M.DATA_LOSS;default:return Q()}}(se=De||(De={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new Gr([4294967295,4294967295],0);function Lv(t){const e=bR().encode(t),n=new vE;return n.update(e),new Uint8Array(n.digest())}function Vv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gr([n,r],0),new Gr([i,s],0)]}class Gf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ks(`Invalid padding: ${n}`);if(r<0)throw new Ks(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ks(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ks(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Gr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Gr.fromNumber(r)));return i.compare(DR)===1&&(i=new Gr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Lv(e),[r,i]=Vv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Gf(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=Lv(e),[r,i]=Vv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ks extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Zo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bc(Y.min(),i,new Ie(le),Mn(),te())}}class Zo{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zo(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class KE{constructor(e,n){this.targetId=e,this.me=n}}class QE{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Mv{constructor(){this.fe=0,this.ge=Uv(),this.pe=Xe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new Zo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Uv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class OR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mn(),this.qe=Fv(),this.Qe=new Ie(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(fh(s))if(r===0){const o=new H(s.path);this.Ue(n,o,st.newNoDocument(o,Y.min()))}else de(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,c;try{o=ni(r).toUint8Array()}catch(u){if(u instanceof CE)return Zi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Gf(o,i,s)}catch(u){return Zi(u instanceof Ks?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const c=this.Je(o);if(c){if(s.current&&fh(c.target)){const u=new H(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,st.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=te();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new bc(e,n,this.Qe,this.ke,r);return this.ke=Mn(),this.qe=Fv(),this.Qe=new Ie(le),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Mv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ke(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Fv(){return new Ie(H.comparator)}function Uv(){return new Ie(H.comparator)}const LR={asc:"ASCENDING",desc:"DESCENDING"},VR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MR={and:"AND",or:"OR"};class FR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mh(t,e){return t.useProto3Json||Ac(e)?e:{value:e}}function Xl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UR(t,e){return Xl(t,e.toTimestamp())}function cn(t){return de(!!t),Y.fromTimestamp(function(n){const r=Sr(n);return new ie(r.seconds,r.nanos)}(t))}function Kf(t,e){return gh(t,e).canonicalString()}function gh(t,e){const n=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function YE(t){const e=ve.fromString(t);return de(nT(e)),e}function vh(t,e){return Kf(t.databaseId,e.path)}function Ju(t,e){const n=YE(e);if(n.get(1)!==t.databaseId.projectId)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(ZE(n))}function JE(t,e){return Kf(t.databaseId,e)}function zR(t){const e=YE(t);return e.length===4?ve.emptyPath():ZE(e)}function yh(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ZE(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zv(t,e,n){return{name:vh(t,e),fields:n.value.mapValue.fields}}function BR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(de(f===void 0||typeof f=="string"),Xe.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Xe.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?M.UNKNOWN:GE(d.code);return new $(f,d.message||"")}(o);n=new QE(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ju(t,r.document.name),s=cn(r.document.updateTime),o=r.document.createTime?cn(r.document.createTime):Y.min(),c=new yt({mapValue:{fields:r.document.fields}}),u=st.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new hl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ju(t,r.document),s=r.readTime?cn(r.readTime):Y.min(),o=st.newNoDocument(i,s),c=r.removedTargetIds||[];n=new hl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ju(t,r.document),s=r.removedTargetIds||[];n=new hl([],s,i,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new kR(i,s),c=r.targetId;n=new KE(c,o)}}return n}function $R(t,e){let n;if(e instanceof Jo)n={update:zv(t,e.key,e.value)};else if(e instanceof Wf)n={delete:vh(t,e.key)};else if(e instanceof jr)n={update:zv(t,e.key,e.data),updateMask:JR(e.fieldMask)};else{if(!(e instanceof AR))return Q();n={verify:vh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const c=o.transform;if(c instanceof Vo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Mo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ql)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:UR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function qR(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?cn(i.updateTime):cn(s);return o.isEqual(Y.min())&&(o=cn(s)),new SR(o,i.transformResults||[])}(n,e))):[]}function WR(t,e){return{documents:[JE(t,e.path)]}}function HR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=JE(t,i);const s=function(d){if(d.length!==0)return tT(Yt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(f=>function(m){return{field:wi(m.field),direction:QR(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=mh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function GR(t){let e=zR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){de(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){const m=eT(g);return m instanceof Yt&&PE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(m=>function(T){return new Lo(Ei(T.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(g){let m;return m=typeof g=="object"?g.value:g,Ac(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,v=g.values||[];return new Gl(v,m)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const m=!g.before,v=g.values||[];return new Gl(v,m)}(n.endAt)),dR(e,i,o,s,c,"F",u,d)}function KR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ei(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ei(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ei(n.unaryFilter.field);return Le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ei(n.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Le.create(Ei(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yt.create(n.compositeFilter.filters.map(r=>eT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function QR(t){return LR[t]}function XR(t){return VR[t]}function YR(t){return MR[t]}function wi(t){return{fieldPath:t.canonicalString()}}function Ei(t){return He.fromServerFormat(t.fieldPath)}function tT(t){return t instanceof Le?function(n){if(n.op==="=="){if(Nv(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NAN"}};if(Cv(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nv(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NOT_NAN"}};if(Cv(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wi(n.field),op:XR(n.op),value:n.value}}}(t):t instanceof Yt?function(n){const r=n.getFilters().map(i=>tT(i));return r.length===1?r[0]:{compositeFilter:{op:YR(n.op),filters:r}}}(t):Q()}function JR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,r,i,s=Y.min(),o=Y.min(),c=Xe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.ct=e}}function eP(t){const e=GR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.un=new nP}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ir.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class nP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ke(ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ke(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new rs(0)}static kn(){return new rs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.changes=new fs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&lo(r.mutation,i,Ct.empty(),ie.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const i=qr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Gs();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=Mn();const o=ao(),c=function(){return ao()}();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof jr)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),lo(f.mutation,d,f.mutation.getFieldMask(),ie.now())):o.set(d.key,Ct.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return c.set(d,new iP(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){const r=ao();let i=new Ie((o,c)=>o-c),s=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Ct.empty();f=c.applyToLocalView(d,f),r.set(u,f);const g=(i.get(c.batchId)||te()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,g=FE();f.forEach(m=>{if(!s.has(m)){const v=WE(n.get(m),r.get(m));v!==null&&g.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(qr());let c=-1,u=s;return o.next(d=>F.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,te())).next(f=>({batchId:c,changes:ME(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=Gs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Gs();return this.indexManager.getCollectionParents(e,s).next(c=>F.forEach(c,u=>{const d=function(g,m){return new hs(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,st.newInvalidDocument(f)))});let c=Gs();return o.forEach((u,d)=>{const f=s.get(u);f!==void 0&&lo(f.mutation,d,Ct.empty(),ie.now()),Pc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:cn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:eP(i.bundledQuery),readTime:cn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.overlays=new Ie(H.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qr();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=qr(),s=n.length+1,o=new H(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ie((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=qr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=qr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return F.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PR(n,r));let s=this.Ir.get(n);s===void 0&&(s=te(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(){this.Tr=new Ke(Fe.Er),this.dr=new Ke(Fe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Fe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Fe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new H(new ve([])),r=new Fe(n,e),i=new Fe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new H(new ve([])),r=new Fe(n,e),i=new Fe(n,e+1);let s=te();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Fe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||le(e.wr,n.wr)}static Ar(e,n){return le(e.wr,n.wr)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ke(Fe.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RR(s,n,r,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new Fe(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fe(n,0),i=new Fe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const c=this.Dr(o.wr);s.push(c)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(le);return n.forEach(i=>{const s=new Fe(i,0),o=new Fe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;H.isDocumentKey(s)||(s=s.child(""));const o=new Fe(new H(s),0);let c=new Ke(le);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),F.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new Fe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Fe(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.Mr=e,this.docs=function(){return new Ie(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():st.newInvalidDocument(n))}getEntries(e,n){let r=Mn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():st.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Mn();const o=n.path,c=new H(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||HA(WA(f),r)<=0||(i.has(f.key)||Pc(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dP(this)}getSize(e){return F.resolve(this.size)}}class dP extends rP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.persistence=e,this.Nr=new fs(n=>zf(n),Bf),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Qf,this.targetCount=0,this.kr=rs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new rs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Vf(0),this.Kr=!1,this.Kr=!0,this.$r=new lP,this.referenceDelegate=e(this),this.Ur=new hP(this),this.indexManager=new tP,this.remoteDocumentCache=function(i){return new uP(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ZR(n),this.Gr=new oP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new cP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new pP(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class pP extends KA{constructor(e){super(),this.currentSequenceNumber=e}}class Xf{constructor(e){this.persistence=e,this.Jr=new Qf,this.Yr=null}static Zr(e){return new Xf(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=H.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=te(),i=te();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Yf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return gN()?8:QA(at())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new mP;return this.Xi(e,n,o).next(c=>{if(s.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ms()<=re.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",_i(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Ms()<=re.DEBUG&&W("QueryEngine","Query:",_i(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ms()<=re.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",_i(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ln(n))):F.resolve())}Yi(e,n){if(kv(n))return F.resolve(null);let r=ln(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Kl(n,null,"F"),r=ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=te(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,Kl(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return kv(n)||i.isEqual(Y.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(Ms()<=re.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_i(n)),this.rs(e,o,n,qA(i,-1)).next(c=>c))})}ts(e,n){let r=new Ke(LE(e));return n.forEach((i,s)=>{Pc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ms()<=re.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",_i(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ir.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ie(le),this._s=new fs(s=>zf(s),Bf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function yP(t,e,n,r){return new vP(t,e,n,r)}async function rT(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let u=te();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function _P(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const g=d.batch,m=g.keys();let v=F.resolve();return m.forEach(T=>{v=v.next(()=>f.getEntry(u,T)).next(I=>{const k=d.docVersions.get(T);de(k!==null),I.version.compareTo(k)<0&&(g.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),f.addEntry(I)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=te();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function iT(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function wP(t,e){const n=J(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((f,g)=>{const m=i.get(g);if(!m)return;c.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,g)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?v=v.withResumeToken(Xe.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(g,v),function(I,k,y){return I.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,v,f)&&c.push(n.Ur.updateTargetData(s,v))});let u=Mn(),d=te();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(EP(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(Y.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return F.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.os=i,s))}function EP(t,e,n){let r=te(),i=te();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Mn();return n.forEach((c,u)=>{const d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):W("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function TP(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xP(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new lr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function _h(t,e,n){const r=J(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Yo(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Bv(t,e,n){const r=J(t);let i=Y.min(),s=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const g=J(u),m=g._s.get(f);return m!==void 0?F.resolve(g.os.get(m)):g.Ur.getTargetData(d,f)}(r,o,ln(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:te())).next(c=>(IP(r,fR(e),c),{documents:c,Ts:s})))}function IP(t,e,n){let r=t.us.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class $v{constructor(){this.activeTargetIds=_R()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SP{constructor(){this.so=new $v,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $v,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa=null;function Zu(){return Wa===null?Wa=function(){return 268435456+Math.round(2147483648*Math.random())}():Wa++,"0x"+Wa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt="WebChannelConnection";class RP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const c=Zu(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(n,u,d,i).then(f=>(W("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw Zi("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,c){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ds}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=NP[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Zu();return new Promise((o,c)=>{const u=new yE;u.setWithCredentials(!0),u.listenOnce(_E.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cl.NO_ERROR:const f=u.getResponseJson();W(nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case cl.TIMEOUT:W(nt,`RPC '${e}' ${s} timed out`),c(new $(M.DEADLINE_EXCEEDED,"Request time out"));break;case cl.HTTP_ERROR:const g=u.getStatus();if(W(nt,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const T=function(k){const y=k.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(y)>=0?y:M.UNKNOWN}(v.status);c(new $(T,v.message))}else c(new $(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new $(M.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{W(nt,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);W(nt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=Zu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=TE(),c=EE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");W(nt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=o.createWebChannel(f,u);let m=!1,v=!1;const T=new AP({Io:k=>{v?W(nt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(m||(W(nt,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),W(nt,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},To:()=>g.close()}),I=(k,y,w)=>{k.listen(y,C=>{try{w(C)}catch(x){setTimeout(()=>{throw x},0)}})};return I(g,Hs.EventType.OPEN,()=>{v||(W(nt,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),I(g,Hs.EventType.CLOSE,()=>{v||(v=!0,W(nt,`RPC '${e}' stream ${i} transport closed`),T.So())}),I(g,Hs.EventType.ERROR,k=>{v||(v=!0,Zi(nt,`RPC '${e}' stream ${i} transport errored:`,k),T.So(new $(M.UNAVAILABLE,"The operation could not be completed")))}),I(g,Hs.EventType.MESSAGE,k=>{var y;if(!v){const w=k.data[0];de(!!w);const C=w,x=C.error||((y=C[0])===null||y===void 0?void 0:y.error);if(x){W(nt,`RPC '${e}' stream ${i} received error:`,x);const L=x.status;let D=function(A){const R=De[A];if(R!==void 0)return GE(R)}(L),S=x.message;D===void 0&&(D=M.INTERNAL,S="Unknown error status: "+L+" with message "+x.message),v=!0,T.So(new $(D,S)),g.close()}else W(nt,`RPC '${e}' stream ${i} received:`,w),T.bo(w)}}),I(c,wE.STAT_EVENT,k=>{k.stat===ch.PROXY?W(nt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===ch.NOPROXY&&W(nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){return new FR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new sT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Vn(n.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new $(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PP extends oT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=BR(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?cn(o.readTime):Y.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=yh(this.serializer),n.addTarget=function(s,o){let c;const u=o.target;if(c=fh(u)?{documents:WR(s,u)}:{query:HR(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=XE(s,o.resumeToken);const d=mh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=Xl(s,o.snapshotVersion.toTimestamp());const d=mh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=KR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=yh(this.serializer),n.removeTarget=e,this.a_(n)}}class kP extends oT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=qR(e.writeResults,e.commitTime),r=cn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=yh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$R(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,gh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,gh(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class bP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{di(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=J(u);d.L_.add(4),await ea(d),d.q_.set("Unknown"),d.L_.delete(4),await Oc(d)}(this))})}),this.q_=new bP(r,i)}}async function Oc(t){if(di(t))for(const e of t.B_)await e(!0)}async function ea(t){for(const e of t.B_)await e(!1)}function aT(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),tp(n)?ep(n):ps(n).r_()&&Zf(n,e))}function Jf(t,e){const n=J(t),r=ps(n);n.N_.delete(e),r.r_()&&lT(n,e),n.N_.size===0&&(r.r_()?r.o_():di(n)&&n.q_.set("Unknown"))}function Zf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ps(t).A_(e)}function lT(t,e){t.Q_.xe(e),ps(t).R_(e)}function ep(t){t.Q_=new OR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ps(t).start(),t.q_.v_()}function tp(t){return di(t)&&!ps(t).n_()&&t.N_.size>0}function di(t){return J(t).L_.size===0}function cT(t){t.Q_=void 0}async function OP(t){t.q_.set("Online")}async function LP(t){t.N_.forEach((e,n)=>{Zf(t,e)})}async function VP(t,e){cT(t),tp(t)?(t.q_.M_(e),ep(t)):t.q_.set("Unknown")}async function MP(t,e,n){if(t.q_.set("Online"),e instanceof QE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yl(t,r)}else if(e instanceof hl?t.Q_.Ke(e):e instanceof KE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Y.min()))try{const r=await iT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const c=s.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(Xe.EMPTY_BYTE_STRING,f.snapshotVersion)),lT(s,u);const g=new lr(f.target,u,d,f.sequenceNumber);Zf(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Yl(t,r)}}async function Yl(t,e,n){if(!Yo(e))throw e;t.L_.add(1),await ea(t),t.q_.set("Offline"),n||(n=()=>iT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Oc(t)})}function uT(t,e){return e().catch(n=>Yl(t,n,e))}async function Lc(t){const e=J(t),n=Cr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;FP(e);)try{const i=await TP(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,UP(e,i)}catch(i){await Yl(e,i)}dT(e)&&hT(e)}function FP(t){return di(t)&&t.O_.length<10}function UP(t,e){t.O_.push(e);const n=Cr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function dT(t){return di(t)&&!Cr(t).n_()&&t.O_.length>0}function hT(t){Cr(t).start()}async function zP(t){Cr(t).p_()}async function BP(t){const e=Cr(t);for(const n of t.O_)e.m_(n.mutations)}async function $P(t,e,n){const r=t.O_.shift(),i=Hf.from(r,e,n);await uT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Lc(t)}async function qP(t,e){e&&Cr(t).V_&&await async function(r,i){if(function(o){return jR(o)&&o!==M.ABORTED}(i.code)){const s=r.O_.shift();Cr(r).s_(),await uT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Lc(r)}}(t,e),dT(t)&&hT(t)}async function Wv(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=di(n);n.L_.add(3),await ea(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Oc(n)}async function WP(t,e){const n=J(t);e?(n.L_.delete(2),await Oc(n)):e||(n.L_.add(2),await ea(n),n.q_.set("Unknown"))}function ps(t){return t.K_||(t.K_=function(n,r,i){const s=J(n);return s.w_(),new PP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:OP.bind(null,t),Ro:LP.bind(null,t),mo:VP.bind(null,t),d_:MP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),tp(t)?ep(t):t.q_.set("Unknown")):(await t.K_.stop(),cT(t))})),t.K_}function Cr(t){return t.U_||(t.U_=function(n,r,i){const s=J(n);return s.w_(),new kP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zP.bind(null,t),mo:qP.bind(null,t),f_:BP.bind(null,t),g_:$P.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Lc(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,c=new np(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rp(t,e){if(Vn("AsyncQueue",`${e}: ${t}`),Yo(t))return new $(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Gs(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new zi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.W_=new Ie(H.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class is{constructor(e,n,r,i,s,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new is(e,n,zi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class GP{constructor(){this.queries=Gv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=J(n),s=i.queries;i.queries=Gv(),s.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new $(M.ABORTED,"Firestore shutting down"))}}function Gv(){return new fs(t=>OE(t),Rc)}async function fT(t,e){const n=J(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new HP,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=rp(o,`Initialization of query '${_i(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&ip(n)}async function pT(t,e){const n=J(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KP(t,e){const n=J(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&ip(n)}function QP(t,e,n){const r=J(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function ip(t){t.Y_.forEach(e=>{e.next()})}var wh,Kv;(Kv=wh||(wh={})).ea="default",Kv.Cache="cache";class mT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new is(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=is.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==wh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.key=e}}class vT{constructor(e){this.key=e}}class XP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=LE(e),this.Ra=new zi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Hv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const m=i.get(f),v=Pc(this.query,g)?g:null,T=!!m&&this.mutatedKeys.has(m.key),I=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let k=!1;m&&v?m.data.isEqual(v.data)?T!==I&&(r.track({type:3,doc:v}),k=!0):this.ga(m,v)||(r.track({type:2,doc:v}),k=!0,(u&&this.Aa(v,u)>0||d&&this.Aa(v,d)<0)&&(c=!0)):!m&&v?(r.track({type:0,doc:v}),k=!0):m&&!v&&(r.track({type:1,doc:m}),k=!0,(u||d)&&(c=!0)),k&&(v?(o=o.add(v),s=I?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,g)=>function(v,T){const I=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return I(v)-I(T)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new is(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new vT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new gT(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return is.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class YP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class JP{constructor(e){this.key=e,this.va=!1}}class ZP{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new fs(c=>OE(c),Rc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ie(H.comparator),this.Na=new Map,this.La=new Qf,this.Ba={},this.ka=new Map,this.qa=rs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ek(t,e,n=!0){const r=xT(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await yT(r,e,n,!0),i}async function tk(t,e){const n=xT(t);await yT(n,e,!0,!1)}async function yT(t,e,n,r){const i=await xP(t.localStore,ln(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await nk(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&aT(t.remoteStore,i),c}async function nk(t,e,n,r,i){t.Ka=(g,m,v)=>async function(I,k,y,w){let C=k.view.ma(y);C.ns&&(C=await Bv(I.localStore,k.query,!1).then(({documents:S})=>k.view.ma(S,C)));const x=w&&w.targetChanges.get(k.targetId),L=w&&w.targetMismatches.get(k.targetId)!=null,D=k.view.applyChanges(C,I.isPrimaryClient,x,L);return Xv(I,k.targetId,D.wa),D.snapshot}(t,g,m,v);const s=await Bv(t.localStore,e,!0),o=new XP(e,s.Ts),c=o.ma(s.documents),u=Zo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);Xv(t,n,d.wa);const f=new YP(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function rk(t,e,n){const r=J(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Rc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _h(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Jf(r.remoteStore,i.targetId),Eh(r,i.targetId)}).catch(Xo)):(Eh(r,i.targetId),await _h(r.localStore,i.targetId,!0))}async function ik(t,e){const n=J(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jf(n.remoteStore,r.targetId))}async function sk(t,e,n){const r=hk(t);try{const i=await function(o,c){const u=J(o),d=ie.now(),f=c.reduce((v,T)=>v.add(T.key),te());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=Mn(),I=te();return u.cs.getEntries(v,f).next(k=>{T=k,T.forEach((y,w)=>{w.isValidDocument()||(I=I.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,T)).next(k=>{g=k;const y=[];for(const w of c){const C=NR(w,g.get(w.key).overlayedDocument);C!=null&&y.push(new jr(w.key,C,NE(C.value.mapValue),Mt.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,y,c)}).next(k=>{m=k;const y=k.applyToLocalDocumentSet(g,I);return u.documentOverlayCache.saveOverlays(v,k.batchId,y)})}).then(()=>({batchId:m.batchId,changes:ME(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ie(le)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,n),await ta(r,i.changes),await Lc(r.remoteStore)}catch(i){const s=rp(i,"Failed to persist write");n.reject(s)}}async function _T(t,e){const n=J(t);try{const r=await wP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?de(o.va):i.removedDocuments.size>0&&(de(o.va),o.va=!1))}),await ta(n,r,e)}catch(r){await Xo(r)}}function Qv(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=J(o);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(const m of g.j_)m.Z_(c)&&(d=!0)}),d&&ip(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ok(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ie(H.comparator);o=o.insert(s,st.newNoDocument(s,Y.min()));const c=te().add(s),u=new bc(Y.min(),new Map,new Ie(le),o,c);await _T(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),sp(r)}else await _h(r.localStore,e,!1).then(()=>Eh(r,e,n)).catch(Xo)}async function ak(t,e){const n=J(t),r=e.batch.batchId;try{const i=await _P(n.localStore,e);ET(n,r,null),wT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ta(n,i)}catch(i){await Xo(i)}}async function lk(t,e,n){const r=J(t);try{const i=await function(o,c){const u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(de(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);ET(r,e,n),wT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ta(r,i)}catch(i){await Xo(i)}}function wT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ET(t,e,n){const r=J(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Eh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||TT(t,r)})}function TT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Jf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),sp(t))}function Xv(t,e,n){for(const r of n)r instanceof gT?(t.La.addReference(r.key,e),ck(t,r)):r instanceof vT?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||TT(t,r.key)):Q()}function ck(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),sp(t))}function sp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new H(ve.fromString(e)),r=t.qa.next();t.Na.set(r,new JP(n)),t.Oa=t.Oa.insert(n,r),aT(t.remoteStore,new lr(ln($f(n.path)),r,"TargetPurposeLimboResolution",Vf.oe))}}async function ta(t,e,n){const r=J(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);const g=Yf.Wi(u.targetId,d);s.push(g)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,d){const f=J(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>F.forEach(d,m=>F.forEach(m.$i,v=>f.persistence.referenceDelegate.addReference(g,m.targetId,v)).next(()=>F.forEach(m.Ui,v=>f.persistence.referenceDelegate.removeReference(g,m.targetId,v)))))}catch(g){if(!Yo(g))throw g;W("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const v=f.os.get(m),T=v.snapshotVersion,I=v.withLastLimboFreeSnapshotVersion(T);f.os=f.os.insert(m,I)}}}(r.localStore,s))}async function uk(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await rT(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new $(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ta(n,r.hs)}}function dk(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let i=te();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function xT(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_T.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ok.bind(null,e),e.Ca.d_=KP.bind(null,e.eventManager),e.Ca.$a=QP.bind(null,e.eventManager),e}function hk(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ak.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lk.bind(null,e),e}class Jl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return yP(this.persistence,new gP,e.initialUser,this.serializer)}Ga(e){return new fP(Xf.Zr,this.serializer)}Wa(e){return new SP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jl.provider={build:()=>new Jl};class Th{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uk.bind(null,this.syncEngine),await WP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GP}()}createDatastore(e){const n=Dc(e.databaseInfo.databaseId),r=function(s){return new RP(s)}(e.databaseInfo);return function(s,o,c,u){return new jP(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new DP(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Qv(this.syncEngine,n,0),function(){return qv.D()?new qv:new CP}())}createSyncEngine(e,n){return function(i,s,o,c,u,d,f){const g=new ZP(i,s,o,c,u,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=J(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ea(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Th.provider={build:()=>new Th};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=IE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function td(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await rT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pk(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Wv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Wv(e.remoteStore,i)),t._onlineComponents=e}async function pk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await td(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Zi("Error using user provided cache. Falling back to memory cache: "+n),await td(t,new Jl)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await td(t,new Jl);return t._offlineComponents}async function ST(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Yv(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Yv(t,new Th))),t._onlineComponents}function mk(t){return ST(t).then(e=>e.syncEngine)}async function CT(t){const e=await ST(t),n=e.eventManager;return n.onListen=ek.bind(null,e.syncEngine),n.onUnlisten=rk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ik.bind(null,e.syncEngine),n}function gk(t,e,n={}){const r=new Pn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const f=new IT({next:m=>{f.Za(),o.enqueueAndForget(()=>pT(s,g));const v=m.docs.has(c);!v&&m.fromCache?d.reject(new $(M.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?d.reject(new $(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new mT($f(c.path),f,{includeMetadataChanges:!0,_a:!0});return fT(s,g)}(await CT(t),t.asyncQueue,e,n,r)),r.promise}function vk(t,e,n={}){const r=new Pn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const f=new IT({next:m=>{f.Za(),o.enqueueAndForget(()=>pT(s,g)),m.fromCache&&u.source==="server"?d.reject(new $(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new mT(c,f,{includeMetadataChanges:!0,_a:!0});return fT(s,g)}(await CT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t,e,n){if(!n)throw new $(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yk(t,e,n,r){if(e===!0&&r===!0)throw new $(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zv(t){if(!H.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ey(t){if(H.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function Jt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vc(t);throw new $(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ty({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ty(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OA;switch(r.type){case"firstParty":return new FA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jv.get(n);r&&(W("ComponentProvider","Removing Datastore"),Jv.delete(n),r.terminate())}(this),Promise.resolve()}}function _k(t,e,n,r={}){var i;const s=(t=Jt(t,Mc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=rt.MOCK_USER;else{c=dE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new $(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new rt(d)}t._authCredentials=new LA(new xE(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new br(this.firestore,e,this._query)}}class ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}}class wr extends br{constructor(e,n,r){super(e,n,$f(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new H(e))}withConverter(e){return new wr(this.firestore,e,this._path)}}function Be(t,e,...n){if(t=Ne(t),AT("collection","path",e),t instanceof Mc){const r=ve.fromString(e,...n);return ey(r),new wr(t,null,r)}{if(!(t instanceof ft||t instanceof wr))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return ey(r),new wr(t.firestore,null,r)}}function ce(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=IE.newId()),AT("doc","path",e),t instanceof Mc){const r=ve.fromString(e,...n);return Zv(r),new ft(t,null,new H(r))}{if(!(t instanceof ft||t instanceof wr))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Zv(r),new ft(t.firestore,t instanceof wr?t.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new sT(this,"async_queue_retry"),this.Vu=()=>{const r=ed();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ed();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Pn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yo(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Vn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=np.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class hi extends Mc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ny,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ny(e),this._firestoreClient=void 0,await e}}}function wk(t,e){const n=typeof t=="object"?t:Nc(),r=typeof t=="string"?t:"(default)",i=Qo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=bf("firestore");s&&_k(i,...s)}return i}function op(t){if(t._terminated)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ek(t),t._firestoreClient}function Ek(t){var e,n,r;const i=t._freezeSettings(),s=function(c,u,d,f){return new JA(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,NT(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new fk(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ss(Xe.fromBase64String(e))}catch(n){throw new $(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ss(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=/^__.*__$/;class xk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jo(e,this.data,n,this.fieldTransforms)}}class RT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new jr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function PT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class cp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(PT(this.Cu)&&Tk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Ik{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Dc(e)}Qu(e,n,r,i=!1){return new cp({Cu:e,methodName:n,qu:r,path:He.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zc(t){const e=t._freezeSettings(),n=Dc(t._databaseId);return new Ik(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kT(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);dp("Data must be an object, but it was:",o,r);const c=jT(r,o);let u,d;if(s.merge)u=new Ct(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const g of s.mergeFields){const m=xh(e,g,n);if(!o.contains(m))throw new $(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);DT(f,m)||f.push(m)}u=new Ct(f),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new xk(new yt(c),u,d)}class Bc extends Uc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bc}}class up extends Uc{_toFieldTransform(e){return new xR(e.path,new Vo)}isEqual(e){return e instanceof up}}function Sk(t,e,n,r){const i=t.Qu(1,e,n);dp("Data must be an object, but it was:",i,r);const s=[],o=yt.empty();ui(r,(u,d)=>{const f=hp(e,u,n);d=Ne(d);const g=i.Nu(f);if(d instanceof Bc)s.push(f);else{const m=na(d,g);m!=null&&(s.push(f),o.set(f,m))}});const c=new Ct(s);return new RT(o,c,i.fieldTransforms)}function Ck(t,e,n,r,i,s){const o=t.Qu(1,e,n),c=[xh(e,r,n)],u=[i];if(s.length%2!=0)throw new $(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)c.push(xh(e,s[m])),u.push(s[m+1]);const d=[],f=yt.empty();for(let m=c.length-1;m>=0;--m)if(!DT(d,c[m])){const v=c[m];let T=u[m];T=Ne(T);const I=o.Nu(v);if(T instanceof Bc)d.push(v);else{const k=na(T,I);k!=null&&(d.push(v),f.set(v,k))}}const g=new Ct(d);return new RT(f,g,o.fieldTransforms)}function Nk(t,e,n,r=!1){return na(n,t.Qu(r?4:3,e))}function na(t,e){if(bT(t=Ne(t)))return dp("Unsupported field value:",e,t),jT(t,e);if(t instanceof Uc)return function(r,i){if(!PT(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const c of r){let u=na(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ie.fromDate(r);return{timestampValue:Xl(i.serializer,s)}}if(r instanceof ie){const s=new ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xl(i.serializer,s)}}if(r instanceof ap)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ss)return{bytesValue:XE(i.serializer,r._byteString)};if(r instanceof ft){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Kf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lp)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return qf(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Vc(r)}`)}(t,e)}function jT(t,e){const n={};return SE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ui(t,(r,i)=>{const s=na(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function bT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ie||t instanceof ap||t instanceof ss||t instanceof ft||t instanceof Uc||t instanceof lp)}function dp(t,e,n){if(!bT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Vc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function xh(t,e,n){if((e=Ne(e))instanceof Fc)return e._internalPath;if(typeof e=="string")return hp(t,e);throw Zl("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ak=new RegExp("[~\\*/\\[\\]]");function hp(t,e,n){if(e.search(Ak)>=0)throw Zl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fc(...e.split("."))._internalPath}catch{throw Zl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new $(M.INVALID_ARGUMENT,c+t+u)}function DT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Rk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($c("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Rk extends OT{data(){return super.data()}}function $c(t,e){return typeof e=="string"?hp(t,e):e instanceof Fc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fp{}class pp extends fp{}function Fn(t,e,...n){let r=[];e instanceof fp&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof mp).length,c=s.filter(u=>u instanceof qc).length;if(o>1||o>0&&c>0)throw new $(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class qc extends pp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qc(e,n,r)}_apply(e){const n=this._parse(e);return LT(e._query,n),new br(e.firestore,e.converter,ph(e._query,n))}_parse(e){const n=zc(e.firestore);return function(s,o,c,u,d,f,g){let m;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){iy(g,f);const v=[];for(const T of g)v.push(ry(u,s,T));m={arrayValue:{values:v}}}else m=ry(u,s,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||iy(g,f),m=Nk(c,o,g,f==="in"||f==="not-in");return Le.create(d,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gt(t,e,n){const r=e,i=$c("where",t);return qc._create(i,r,n)}class mp extends fp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const u of c)LT(o,u),o=ph(o,u)}(e._query,n),new br(e.firestore,e.converter,ph(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gp extends pp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gp(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lo(s,o)}(e._query,this._field,this._direction);return new br(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new hs(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function vp(t,e="asc"){const n=e,r=$c("orderBy",t);return gp._create(r,n)}class yp extends pp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new yp(e,n,r)}_apply(e){return new br(e.firestore,e.converter,Kl(e._query,this._limit,this._limitType))}}function kk(t){return yp._create("limit",t,"F")}function ry(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new $(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DE(e)&&n.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!H.isDocumentKey(r))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sv(t,new H(r))}if(n instanceof ft)return Sv(t,n._key);throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vc(n)}.`)}function iy(t,e){if(!Array.isArray(t)||t.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LT(t,e){const n=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class jk{convertValue(e,n="none"){switch(ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ui(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ke(o.doubleValue));return new lp(s)}convertGeoPoint(e){return new ap(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ff(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bo(e));default:return null}}convertTimestamp(e){const n=Sr(e);return new ie(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);de(nT(r));const i=new Do(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||Vn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class MT extends OT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($c("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class fl extends MT{data(e={}){return super.data(e)}}class bk{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new fl(this._firestore,this._userDataWriter,r.key,r,new Qs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new fl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qs(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const u=new fl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qs(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:Dk(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Dk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t){t=Jt(t,ft);const e=Jt(t.firestore,hi);return gk(op(e),t._key).then(n=>Ok(e,t,n))}class FT extends jk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function zt(t){t=Jt(t,br);const e=Jt(t.firestore,hi),n=op(e),r=new FT(e);return Pk(t._query),vk(n,t._query).then(i=>new bk(e,r,t,i))}function Nr(t,e,n){t=Jt(t,ft);const r=Jt(t.firestore,hi),i=VT(t.converter,e,n);return Hc(r,[kT(zc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Mt.none())])}function fi(t,e,n,...r){t=Jt(t,ft);const i=Jt(t.firestore,hi),s=zc(i);let o;return o=typeof(e=Ne(e))=="string"||e instanceof Fc?Ck(s,"updateDoc",t._key,e,n,r):Sk(s,"updateDoc",t._key,e),Hc(i,[o.toMutation(t._key,Mt.exists(!0))])}function Wc(t){return Hc(Jt(t.firestore,hi),[new Wf(t._key,Mt.none())])}function ms(t,e){const n=Jt(t.firestore,hi),r=ce(t),i=VT(t.converter,e);return Hc(n,[kT(zc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Mt.exists(!1))]).then(()=>r)}function Hc(t,e){return function(r,i){const s=new Pn;return r.asyncQueue.enqueueAndForget(async()=>sk(await mk(r),i,s)),s.promise}(op(t),e)}function Ok(t,e,n){const r=n.docs.get(e._key),i=new FT(t);return new MT(t,i,e._key,r,new Qs(n.hasPendingWrites,n.fromCache),e.converter)}function UT(){return new up("serverTimestamp")}(function(e,n=!0){(function(i){ds=i})(ci),xr(new On("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),c=new hi(new VA(r.getProvider("auth-internal")),new zA(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Do(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Vt(wv,"4.7.3",e),Vt(wv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="firebasestorage.googleapis.com",BT="storageBucket",Lk=2*60*1e3,Vk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re extends Zt{constructor(e,n,r=0){super(nd(e),`Firebase Storage: ${n} (${nd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Re.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ae;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ae||(Ae={}));function nd(t){return"storage/"+t}function _p(){const t="An unknown error occurred, please check the error payload for server response.";return new Re(Ae.UNKNOWN,t)}function Mk(t){return new Re(Ae.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Fk(t){return new Re(Ae.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Uk(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Re(Ae.UNAUTHENTICATED,t)}function zk(){return new Re(Ae.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Bk(t){return new Re(Ae.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function $k(){return new Re(Ae.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qk(){return new Re(Ae.CANCELED,"User canceled the upload/download.")}function Wk(t){return new Re(Ae.INVALID_URL,"Invalid URL '"+t+"'.")}function Hk(t){return new Re(Ae.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Gk(){return new Re(Ae.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BT+"' property when initializing the app?")}function Kk(){return new Re(Ae.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Qk(){return new Re(Ae.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Xk(t){return new Re(Ae.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ih(t){return new Re(Ae.INVALID_ARGUMENT,t)}function $T(){return new Re(Ae.APP_DELETED,"The Firebase app was deleted.")}function Yk(t){return new Re(Ae.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function co(t,e){return new Re(Ae.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fs(t){throw new Re(Ae.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Nt.makeFromUrl(e,n)}catch{return new Nt(e,"")}if(r.path==="")return r;throw Hk(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(x){x.path_=decodeURIComponent(x.path)}const f="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${g}/${f}/b/${i}/o${m}`,"i"),T={bucket:1,path:3},I=n===zT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",y=new RegExp(`^https?://${I}/${i}/${k}`,"i"),C=[{regex:c,indices:u,postModify:s},{regex:v,indices:T,postModify:d},{regex:y,indices:{bucket:1,path:2},postModify:d}];for(let x=0;x<C.length;x++){const L=C[x],D=L.regex.exec(e);if(D){const S=D[L.indices.bucket];let _=D[L.indices.path];_||(_=""),r=new Nt(S,_),L.postModify(r);break}}if(r==null)throw Wk(e);return r}}class Jk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t,e,n){let r=1,i=null,s=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...k){d||(d=!0,e.apply(null,k))}function g(k){i=setTimeout(()=>{i=null,t(v,u())},k)}function m(){s&&clearTimeout(s)}function v(k,...y){if(d){m();return}if(k){m(),f.call(null,k,...y);return}if(u()||o){m(),f.call(null,k,...y);return}r<64&&(r*=2);let C;c===1?(c=2,C=0):C=(r+Math.random())*1e3,g(C)}let T=!1;function I(k){T||(T=!0,m(),!d&&(i!==null?(k||(c=2),clearTimeout(i),g(0)):k||(c=1)))}return g(0),s=setTimeout(()=>{o=!0,I(!0)},n),I}function ej(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t){return t!==void 0}function nj(t){return typeof t=="object"&&!Array.isArray(t)}function wp(t){return typeof t=="string"||t instanceof String}function sy(t){return Ep()&&t instanceof Blob}function Ep(){return typeof Blob<"u"}function oy(t,e,n,r){if(r<e)throw Ih(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ih(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function qT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Kr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Kr||(Kr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n,r,i,s,o,c,u,d,f,g,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=g,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,T)=>{this.resolve_=v,this.reject_=T,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ha(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===Kr.NO_ERROR,u=s.getStatus();if(!c||rj(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Kr.ABORT;r(!1,new Ha(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Ha(d,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());tj(u)?s(u):s()}catch(u){o(u)}else if(c!==null){const u=_p();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?$T():qk();o(u)}else{const u=$k();o(u)}};this.canceled_?n(!1,new Ha(!1,null,!0)):this.backoffId_=Zk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ej(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ha{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function sj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function oj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function lj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function cj(t,e,n,r,i,s,o=!0){const c=qT(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return aj(d,e),sj(d,n),oj(d,s),lj(d,r),new ij(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dj(...t){const e=uj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Ep())return new Blob(t);throw new Re(Ae.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function hj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t){if(typeof atob>"u")throw Xk("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rd{constructor(e,n){this.data=e,this.contentType=n||null}}function pj(t,e){switch(t){case sn.RAW:return new rd(WT(e));case sn.BASE64:case sn.BASE64URL:return new rd(HT(t,e));case sn.DATA_URL:return new rd(gj(e),vj(e))}throw _p()}function WT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function mj(t){let e;try{e=decodeURIComponent(t)}catch{throw co(sn.DATA_URL,"Malformed data URL.")}return WT(e)}function HT(t,e){switch(t){case sn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw co(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case sn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw co(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fj(e)}catch(i){throw i.message.includes("polyfill")?i:co(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class GT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw co(sn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=yj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function gj(t){const e=new GT(t);return e.base64?HT(sn.BASE64,e.rest):mj(e.rest)}function vj(t){return new GT(t).contentType}function yj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n){let r=0,i="";sy(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(sy(this.data_)){const r=this.data_,i=hj(r,e,n);return i===null?null:new Zn(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Zn(r,!0)}}static getBlob(...e){if(Ep()){const n=e.map(r=>r instanceof Zn?r.data_:r);return new Zn(dj.apply(null,n))}else{const n=e.map(o=>wp(o)?pj(sn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)i[s++]=o[c]}),new Zn(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){let e;try{e=JSON.parse(t)}catch{return null}return nj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function QT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t,e){return e}class ut{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Ej}}let Ga=null;function Tj(t){return!wp(t)||t.length<2?t:QT(t)}function XT(){if(Ga)return Ga;const t=[];t.push(new ut("bucket")),t.push(new ut("generation")),t.push(new ut("metageneration")),t.push(new ut("name","fullPath",!0));function e(s,o){return Tj(o)}const n=new ut("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ut("size");return i.xform=r,t.push(i),t.push(new ut("timeCreated")),t.push(new ut("updated")),t.push(new ut("md5Hash",null,!0)),t.push(new ut("cacheControl",null,!0)),t.push(new ut("contentDisposition",null,!0)),t.push(new ut("contentEncoding",null,!0)),t.push(new ut("contentLanguage",null,!0)),t.push(new ut("contentType",null,!0)),t.push(new ut("metadata","customMetadata",!0)),Ga=t,Ga}function xj(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Nt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Ij(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return xj(r,t),r}function YT(t,e,n){const r=KT(e);return r===null?null:Ij(t,r,n)}function Sj(t,e,n,r){const i=KT(e);if(i===null||!wp(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const f=t.bucket,g=t.fullPath,m="/b/"+o(f)+"/o/"+o(g),v=Tp(m,n,r),T=qT({alt:"media",token:d});return v+T})[0]}function Cj(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class JT{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){if(!t)throw _p()}function Nj(t,e){function n(r,i){const s=YT(t,i,e);return ZT(s!==null),s}return n}function Aj(t,e){function n(r,i){const s=YT(t,i,e);return ZT(s!==null),Sj(s,i,t.host,t._protocol)}return n}function e0(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=zk():i=Uk():n.getStatus()===402?i=Fk(t.bucket):n.getStatus()===403?i=Bk(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Rj(t){const e=e0(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Mk(t.path)),s.serverResponse=i.serverResponse,s}return n}function Pj(t,e,n){const r=e.fullServerUrl(),i=Tp(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new JT(i,s,Aj(t,n),o);return c.errorHandler=Rj(e),c}function kj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function jj(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=kj(null,e)),r}function bj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let C="";for(let x=0;x<2;x++)C=C+Math.random().toString().slice(2);return C}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=jj(e,r,i),f=Cj(d,n),g="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+u+"--",v=Zn.getBlob(g,r,m);if(v===null)throw Kk();const T={name:d.fullPath},I=Tp(s,t.host,t._protocol),k="POST",y=t.maxUploadRetryTime,w=new JT(I,k,Nj(t,n),y);return w.urlParams=T,w.headers=o,w.body=v.uploadData(),w.errorHandler=e0(e),w}class Dj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Fs("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fs("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fs("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fs("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fs("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Oj extends Dj{initXhr(){this.xhr_.responseType="text"}}function t0(){return new Oj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n){this._service=e,n instanceof Nt?this._location=n:this._location=Nt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ii(e,n)}get root(){const e=new Nt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QT(this._location.path)}get storage(){return this._service}get parent(){const e=_j(this._location.path);if(e===null)return null;const n=new Nt(this._location.bucket,e);return new ii(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Yk(e)}}function Lj(t,e,n){t._throwIfRoot("uploadBytes");const r=bj(t.storage,t._location,XT(),new Zn(e,!0),n);return t.storage.makeRequestWithTokens(r,t0).then(i=>({metadata:i,ref:t}))}function Vj(t){t._throwIfRoot("getDownloadURL");const e=Pj(t.storage,t._location,XT());return t.storage.makeRequestWithTokens(e,t0).then(n=>{if(n===null)throw Qk();return n})}function Mj(t,e){const n=wj(t._location.path,e),r=new Nt(t._location.bucket,n);return new ii(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t){return/^[A-Za-z]+:\/\//.test(t)}function Uj(t,e){return new ii(t,e)}function n0(t,e){if(t instanceof xp){const n=t;if(n._bucket==null)throw Gk();const r=new ii(n,n._bucket);return e!=null?n0(r,e):r}else return e!==void 0?Mj(t,e):t}function zj(t,e){if(e&&Fj(e)){if(t instanceof xp)return Uj(t,e);throw Ih("To use ref(service, url), the first argument must be a Storage instance.")}else return n0(t,e)}function ay(t,e){const n=e==null?void 0:e[BT];return n==null?null:Nt.makeFromBucketSpec(n,t)}function Bj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:dE(i,t.app.options.projectId))}class xp{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=zT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Lk,this._maxUploadRetryTime=Vk,this._requests=new Set,i!=null?this._bucket=Nt.makeFromBucketSpec(i,this._host):this._bucket=ay(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Nt.makeFromBucketSpec(this._url,e):this._bucket=ay(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ii(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Jk($T());{const o=cj(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const ly="@firebase/storage",cy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="storage";function Ip(t,e,n){return t=Ne(t),Lj(t,e,n)}function Sp(t){return t=Ne(t),Vj(t)}function Cp(t,e){return t=Ne(t),zj(t,e)}function $j(t=Nc(),e){t=Ne(t);const r=Qo(t,r0).getImmediate({identifier:e}),i=bf("storage");return i&&qj(r,...i),r}function qj(t,e,n,r={}){Bj(t,e,n,r)}function Wj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new xp(n,r,i,e,ci)}function Hj(){xr(new On(r0,Wj,"PUBLIC").setMultipleInstances(!0)),Vt(ly,cy,""),Vt(ly,cy,"esm2017")}Hj();function Np(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function i0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gj=i0,s0=new Go("auth","Firebase",i0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Df("@firebase/auth");function Kj(t,...e){ec.logLevel<=re.WARN&&ec.warn(`Auth (${ci}): ${t}`,...e)}function pl(t,...e){ec.logLevel<=re.ERROR&&ec.error(`Auth (${ci}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw Ap(t,...e)}function un(t,...e){return Ap(t,...e)}function o0(t,e,n){const r=Object.assign(Object.assign({},Gj()),{[e]:n});return new Go("auth","Firebase",r).create(e,{appName:t.name})}function Qr(t){return o0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ap(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return s0.create(t,...e)}function K(t,e,...n){if(!t)throw Ap(e,...n)}function Cn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pl(e),new Error(e)}function zn(t,e){t||Cn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Qj(){return uy()==="http:"||uy()==="https:"}function uy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Qj()||fN()||"connection"in navigator)?navigator.onLine:!0}function Yj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.shortDelay=e,this.longDelay=n,zn(n>e,"Short delay should be less than long delay!"),this.isMobile=uN()||pN()}get(){return Xj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(t,e){zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=new ra(3e4,6e4);function Pp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gs(t,e,n,r,i={}){return l0(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const c=Ko(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},s);return hN()||(d.referrerPolicy="no-referrer"),a0.fetch()(c0(t,t.config.apiHost,n,c),d)})}async function l0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Jj),e);try{const i=new t1(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ka(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ka(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ka(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ka(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw o0(t,f,d);Un(t,f)}}catch(i){if(i instanceof Zt)throw i;Un(t,"network-request-failed",{message:String(i)})}}async function e1(t,e,n,r,i={}){const s=await gs(t,e,n,r,i);return"mfaPendingCredential"in s&&Un(t,"multi-factor-auth-required",{_serverResponse:s}),s}function c0(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Rp(t.config,i):`${t.config.apiScheme}://${i}`}class t1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(un(this.auth,"network-request-failed")),Zj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ka(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=un(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(t,e){return gs(t,"POST","/v1/accounts:delete",e)}async function u0(t,e){return gs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function r1(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),i=kp(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:uo(id(i.auth_time)),issuedAtTime:uo(id(i.iat)),expirationTime:uo(id(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function id(t){return Number(t)*1e3}function kp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pl("JWT malformed, contained fewer than 3 sections"),null;try{const i=aE(n);return i?JSON.parse(i):(pl("Failed to decode base64 JWT payload"),null)}catch(i){return pl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function dy(t){const e=kp(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Zt&&i1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function i1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uo(this.lastLoginAt),this.creationTime=uo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Uo(t,u0(n,{idToken:r}));K(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?d0(s.providerUserInfo):[],c=a1(t.providerData,o),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Ch(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function o1(t){const e=Ne(t);await tc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a1(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function d0(t){return t.map(e=>{var{providerId:n}=e,r=Np(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(t,e){const n=await l0(t,{},async()=>{const r=Ko({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=c0(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",a0.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function c1(t,e){return gs(t,"POST","/v2/accounts:revokeToken",Pp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=dy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await l1(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Bi;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bi,this.toJSON())}_performRefresh(){return Cn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Np(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ch(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Uo(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return r1(this,e)}reload(){return o1(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ar(this.auth.app))return Promise.reject(Qr(this.auth));const e=await this.getIdToken();return await Uo(this,n1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,d,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(c=n.tenantId)!==null&&c!==void 0?c:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:C,emailVerified:x,isAnonymous:L,providerData:D,stsTokenManager:S}=n;K(C&&S,e,"internal-error");const _=Bi.fromJSON(this.name,S);K(typeof C=="string",e,"internal-error"),Kn(g,e.name),Kn(m,e.name),K(typeof x=="boolean",e,"internal-error"),K(typeof L=="boolean",e,"internal-error"),Kn(v,e.name),Kn(T,e.name),Kn(I,e.name),Kn(k,e.name),Kn(y,e.name),Kn(w,e.name);const A=new Nn({uid:C,auth:e,email:m,emailVerified:x,displayName:g,isAnonymous:L,photoURL:T,phoneNumber:v,tenantId:I,stsTokenManager:_,createdAt:y,lastLoginAt:w});return D&&Array.isArray(D)&&(A.providerData=D.map(R=>Object.assign({},R))),k&&(A._redirectEventId=k),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Bi;i.updateFromServerResponse(n);const s=new Nn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await tc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];K(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?d0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Bi;c.updateFromIdToken(r);const u=new Nn({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ch(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map;function An(t){zn(t instanceof Function,"Expected a class definition");let e=hy.get(t);return e?(zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}h0.type="NONE";const fy=h0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t,e,n){return`firebase:${t}:${e}:${n}`}class $i{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ml(this.userKey,i.apiKey,s),this.fullPersistenceKey=ml("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $i(An(fy),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||An(fy);const o=ml(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){const g=Nn._fromJSON(e,f);d!==s&&(c=g),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new $i(s,e,r):(s=u[0],c&&await s._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new $i(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(g0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y0(e))return"Blackberry";if(_0(e))return"Webos";if(p0(e))return"Safari";if((e.includes("chrome/")||m0(e))&&!e.includes("edge/"))return"Chrome";if(v0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function f0(t=at()){return/firefox\//i.test(t)}function p0(t=at()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function m0(t=at()){return/crios\//i.test(t)}function g0(t=at()){return/iemobile/i.test(t)}function v0(t=at()){return/android/i.test(t)}function y0(t=at()){return/blackberry/i.test(t)}function _0(t=at()){return/webos/i.test(t)}function jp(t=at()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function u1(t=at()){var e;return jp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function d1(){return mN()&&document.documentMode===10}function w0(t=at()){return jp(t)||v0(t)||_0(t)||y0(t)||/windows phone/i.test(t)||g0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t,e=[]){let n;switch(t){case"Browser":n=py(at());break;case"Worker":n=`${py(at())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ci}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,c)=>{try{const u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(t,e={}){return gs(t,"GET","/v2/passwordPolicy",Pp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=6;class m1{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:p1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new my(this),this.idTokenSubscription=new my(this),this.beforeStateQueue=new h1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=An(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await $i.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await u0(this,{idToken:e}),r=await Nn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ar(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Yj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ar(this.app))return Promise.reject(Qr(this));const n=e?Ne(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ar(this.app)?Promise.reject(Qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ar(this.app)?Promise.reject(Qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(An(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f1(this),n=new m1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Go("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await c1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&An(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await $i.create(this,[An(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Kj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function bp(t){return Ne(t)}class my{constructor(e){this.auth=e,this.observer=null,this.addObserver=xN(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function v1(t){Dp=t}function y1(t){return Dp.loadJS(t)}function _1(){return Dp.gapiScript}function w1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(t,e){const n=Qo(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ql(s,e??{}))return i;Un(i,"already-initialized")}return n.initialize({options:e})}function T1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(An);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function x1(t,e,n){const r=bp(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=T0(e),{host:o,port:c}=I1(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),S1()}function T0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function I1(t){const e=T0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:gy(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:gy(o)}}}function gy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function S1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Cn("not implemented")}_getIdTokenResponse(e){return Cn("not implemented")}_linkToIdToken(e,n){return Cn("not implemented")}_getReauthenticationResolver(e){return Cn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(t,e){return e1(t,"POST","/v1/accounts:signInWithIdp",Pp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="http://localhost";class si extends x0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Np(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new si(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qi(e,n)}buildRequest(){const e={requestUri:C1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ko(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends I0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends ia{constructor(){super("facebook.com")}static credential(e){return si._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.FACEBOOK_SIGN_IN_METHOD="facebook.com";er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends ia{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return si._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends ia{constructor(){super("github.com")}static credential(e){return si._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends ia{constructor(){super("twitter.com")}static credential(e,n){return si._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return rr.credential(n,r)}catch{return null}}}rr.TWITTER_SIGN_IN_METHOD="twitter.com";rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Nn._fromIdTokenResponse(e,r,i),o=vy(r);return new os({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=vy(r);return new os({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function vy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends Zt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,nc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new nc(e,n,r,i)}}function S0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nc._fromErrorAndOperation(t,s,e,r):s})}async function N1(t,e,n=!1){const r=await Uo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return os._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(t,e,n=!1){const{auth:r}=t;if(ar(r.app))return Promise.reject(Qr(r));const i="reauthenticate";try{const s=await Uo(t,S0(r,i,e,t),n);K(s.idToken,r,"internal-error");const o=kp(s.idToken);K(o,r,"internal-error");const{sub:c}=o;return K(t.uid===c,r,"user-mismatch"),os._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Un(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(t,e,n=!1){if(ar(t.app))return Promise.reject(Qr(t));const r="signIn",i=await S0(t,r,e),s=await os._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function P1(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function k1(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}const rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rc,"1"),this.storage.removeItem(rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=1e3,b1=10;class N0 extends C0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);d1()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,b1):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},j1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}N0.type="LOCAL";const D1=N0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends C0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}A0.type="SESSION";const R0=A0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Gc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,s)),u=await O1(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{const d=Op("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(m.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return window}function V1(t){dn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(){return typeof dn().WorkerGlobalScope<"u"&&typeof dn().importScripts=="function"}async function M1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function U1(){return P0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="firebaseLocalStorageDb",z1=1,ic="firebaseLocalStorage",j0="fbase_key";class sa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kc(t,e){return t.transaction([ic],e?"readwrite":"readonly").objectStore(ic)}function B1(){const t=indexedDB.deleteDatabase(k0);return new sa(t).toPromise()}function Nh(){const t=indexedDB.open(k0,z1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ic,{keyPath:j0})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ic)?e(r):(r.close(),await B1(),e(await Nh()))})})}async function yy(t,e,n){const r=Kc(t,!0).put({[j0]:e,value:n});return new sa(r).toPromise()}async function $1(t,e){const n=Kc(t,!1).get(e),r=await new sa(n).toPromise();return r===void 0?null:r.value}function _y(t,e){const n=Kc(t,!0).delete(e);return new sa(n).toPromise()}const q1=800,W1=3;class b0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>W1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gc._getInstance(U1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await M1(),!this.activeServiceWorker)return;this.sender=new L1(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nh();return await yy(e,rc,"1"),await _y(e,rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>yy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_y(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Kc(i,!1).getAll();return new sa(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b0.type="LOCAL";const H1=b0;new ra(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e){return e?An(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp extends x0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function K1(t){return R1(t.auth,new Lp(t),t.bypassAuthState)}function Q1(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),A1(n,new Lp(t),t.bypassAuthState)}async function X1(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),N1(n,new Lp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K1;case"linkViaPopup":case"linkViaRedirect":return X1;case"reauthViaPopup":case"reauthViaRedirect":return Q1;default:Un(this.auth,"internal-error")}}resolve(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new ra(2e3,1e4);class Di extends D0{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Di.currentPopupAction&&Di.currentPopupAction.cancel(),Di.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){zn(this.filter.length===1,"Popup operations only handle one event");const e=Op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Di.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Y1.get())};e()}}Di.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="pendingRedirect",gl=new Map;class Z1 extends D0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=gl.get(this.auth._key());if(!e){try{const r=await eb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gl.set(this.auth._key(),e)}return this.bypassAuthState||gl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eb(t,e){const n=rb(e),r=nb(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function tb(t,e){gl.set(t._key(),e)}function nb(t){return An(t._redirectPersistence)}function rb(t){return ml(J1,t.config.apiKey,t.name)}async function ib(t,e,n=!1){if(ar(t.app))return Promise.reject(Qr(t));const r=bp(t),i=G1(r,e),o=await new Z1(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=10*60*1e3;class ob{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ab(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!O0(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(un(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sb&&this.cachedEventUids.clear(),this.cachedEventUids.has(wy(e))}saveEventToCache(e){this.cachedEventUids.add(wy(e)),this.lastProcessedEventTime=Date.now()}}function wy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function O0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ab(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return O0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lb(t,e={}){return gs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ub=/^https?/;async function db(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lb(t);for(const n of e)try{if(hb(n))return}catch{}Un(t,"unauthorized-domain")}function hb(t){const e=Sh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ub.test(n))return!1;if(cb.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new ra(3e4,6e4);function Ey(){const t=dn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function pb(t){return new Promise((e,n)=>{var r,i,s;function o(){Ey(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ey(),n(un(t,"network-request-failed"))},timeout:fb.get()})}if(!((i=(r=dn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=dn().gapi)===null||s===void 0)&&s.load)o();else{const c=w1("iframefcb");return dn()[c]=()=>{gapi.load?o():n(un(t,"network-request-failed"))},y1(`${_1()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw vl=null,e})}let vl=null;function mb(t){return vl=vl||pb(t),vl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=new ra(5e3,15e3),vb="__/auth/iframe",yb="emulator/auth/iframe",_b={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Eb(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Rp(e,yb):`https://${t.config.authDomain}/${vb}`,r={apiKey:e.apiKey,appName:t.name,v:ci},i=wb.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ko(r).slice(1)}`}async function Tb(t){const e=await mb(t),n=dn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:Eb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_b,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=un(t,"network-request-failed"),c=dn().setTimeout(()=>{s(o)},gb.get());function u(){dn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ib=500,Sb=600,Cb="_blank",Nb="http://localhost";class Ty{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ab(t,e,n,r=Ib,i=Sb){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},xb),{width:r.toString(),height:i.toString(),top:s,left:o}),d=at().toLowerCase();n&&(c=m0(d)?Cb:n),f0(d)&&(e=e||Nb,u.scrollbars="yes");const f=Object.entries(u).reduce((m,[v,T])=>`${m}${v}=${T},`,"");if(u1(d)&&c!=="_self")return Rb(e||"",c),new Ty(null);const g=window.open(e||"",c,f);K(g,t,"popup-blocked");try{g.focus()}catch{}return new Ty(g)}function Rb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="__/auth/handler",kb="emulator/auth/handler",jb=encodeURIComponent("fac");async function xy(t,e,n,r,i,s){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ci,eventId:i};if(e instanceof I0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",TN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof ia){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${jb}=${encodeURIComponent(u)}`:"";return`${bb(t)}?${Ko(c).slice(1)}${d}`}function bb({config:t}){return t.emulator?Rp(t,kb):`https://${t.authDomain}/${Pb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd="webStorageSupport";class Db{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R0,this._completeRedirectFn=ib,this._overrideRedirectResult=tb}async _openPopup(e,n,r,i){var s;zn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await xy(e,n,r,Sh(),i);return Ab(e,o,Op())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await xy(e,n,r,Sh(),i);return V1(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(zn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Tb(e),r=new ob(e);return n.register("authEvent",i=>(K(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sd,{type:sd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[sd];o!==void 0&&n(!!o),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=db(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return w0()||p0()||jp()}}const Ob=Db;var Iy="@firebase/auth",Sy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Mb(t){xr(new On("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E0(t)},d=new g1(r,i,s,u);return T1(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xr(new On("auth-internal",e=>{const n=bp(e.getProvider("auth").getImmediate());return(r=>new Lb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vt(Iy,Sy,Vb(t)),Vt(Iy,Sy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=5*60,Ub=uE("authIdTokenMaxAge")||Fb;let Cy=null;const zb=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ub)return;const i=n==null?void 0:n.token;Cy!==i&&(Cy=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Bb(t=Nc()){const e=Qo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=E1(t,{popupRedirectResolver:Ob,persistence:[H1,D1,R0]}),r=uE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=zb(s.toString());k1(n,o,()=>o(n.currentUser)),P1(n,c=>o(c))}}const i=lE("auth");return i&&x1(n,`http://${i}`),n}function $b(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}v1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=un("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$b().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Mb("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="type.googleapis.com/google.protobuf.Int64Value",Wb="type.googleapis.com/google.protobuf.UInt64Value";function L0(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Ah(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Ah(e));if(typeof t=="function"||typeof t=="object")return L0(t,e=>Ah(e));throw new Error("Data cannot be encoded in JSON: "+t)}function sc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case qb:case Wb:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>sc(e)):typeof t=="function"||typeof t=="object"?L0(t,e=>sc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wi extends Zt{constructor(e,n,r){super(`${Vp}/${e}`,n||""),this.details=r}}function Hb(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Gb(t,e){let n=Hb(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!Ny[o])return new Wi("internal","internal");n=Ny[o],r=o}const c=s.message;typeof c=="string"&&(r=c),i=s.details,i!==void 0&&(i=sc(i))}}catch{}return n==="ok"?null:new Wi(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="us-central1";function Qb(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Wi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Xb{constructor(e,n,r,i,s=Rh,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Kb(n,r,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(s);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Rh}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Yb(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function Jb(t,e,n){return r=>eD(t,e,r,{})}async function Zb(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function eD(t,e,n,r){const i=t._url(e);return tD(t,i,n,r)}async function tD(t,e,n,r){n=Ah(n);const i={data:n},s={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=o.appCheckToken);const c=r.timeout||7e4,u=Qb(c),d=await Promise.race([Zb(e,i,s,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!d)throw new Wi("cancelled","Firebase Functions instance was deleted.");const f=Gb(d.status,d.json);if(f)throw f;if(!d.json)throw new Wi("internal","Response is not valid JSON object.");let g=d.json.data;if(typeof g>"u"&&(g=d.json.result),typeof g>"u")throw new Wi("internal","Response is missing data field.");return{data:sc(g)}}const Ay="@firebase/functions",Ry="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="auth-internal",rD="app-check-internal",iD="messaging-internal";function sD(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(nD),c=r.getProvider(iD),u=r.getProvider(rD);return new Xb(s,o,c,u,i,t)};xr(new On(Vp,n,"PUBLIC").setMultipleInstances(!0)),Vt(Ay,Ry,e),Vt(Ay,Ry,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t=Nc(),e=Rh){const r=Qo(Ne(t),Vp).getImmediate({identifier:e}),i=bf("functions");return i&&oD(r,...i),r}function oD(t,e,n){Yb(Ne(t),e,n)}function Qc(t,e,n){return Jb(Ne(t),e)}sD(fetch.bind(self));const aD={apiKey:"AIzaSyDf7bTYBUCJiVj8L-7nKxuWU8ueGdXc1W0",authDomain:"app-zerosei-pizza.firebaseapp.com",projectId:"app-zerosei-pizza",storageBucket:"app-zerosei-pizza.firebasestorage.app",messagingSenderId:"912128427084",appId:"1:912128427084:web:9f99ba64f9bd2c97f520e9"},oa=pE(aD),G=wk(oa),Mp=$j(oa);Bb(oa);const lD=V0(oa);async function M0(){const t=Be(G,"products");return(await zt(t)).docs.map(n=>{var r,i;return{id:n.id,...n.data(),createdAt:(r=n.data().createdAt)==null?void 0:r.toDate(),updatedAt:(i=n.data().updatedAt)==null?void 0:i.toDate()}})}async function F0(t){const e=Be(G,"products"),n=Fn(e,Gt("category","==",t),Gt("available","==",!0));return(await zt(n)).docs.map(i=>{var s,o;return{id:i.id,...i.data(),createdAt:(s=i.data().createdAt)==null?void 0:s.toDate(),updatedAt:(o=i.data().updatedAt)==null?void 0:o.toDate()}})}async function cD(t){var r,i;const e=ce(G,"products",t),n=await fn(e);return n.exists()?{id:n.id,...n.data(),createdAt:(r=n.data().createdAt)==null?void 0:r.toDate(),updatedAt:(i=n.data().updatedAt)==null?void 0:i.toDate()}:null}async function uD(t){const e=Be(G,"products");return(await ms(e,{...t,createdAt:ie.now(),updatedAt:ie.now()})).id}async function dD(t,e){const n=ce(G,"products",t);await fi(n,{...e,updatedAt:ie.now()})}async function hD(t){const e=ce(G,"products",t);await Wc(e)}async function U0(){const t=Be(G,"categories"),e=Fn(t,vp("order","asc"));return(await zt(e)).docs.map(r=>({id:r.id,...r.data()}))}async function fD(t){const e=Be(G,"categories");return(await ms(e,t)).id}async function pD(t,e){const n=ce(G,"categories",t);await fi(n,e)}async function mD(t){const e=ce(G,"categories",t);await Wc(e)}async function gD(t){const e=Be(G,"users");return(await ms(e,{...t,createdAt:ie.now(),updatedAt:ie.now()})).id}async function Ph(t,e){const n=ce(G,"users",t);await Nr(n,{...e,updatedAt:ie.now()},{merge:!0})}async function vD(t){var s,o;const e=Be(G,"users"),n=Fn(e,Gt("phone","==",t),kk(1)),r=await zt(n);if(r.empty)return null;const i=r.docs[0];return{id:i.id,...i.data(),createdAt:(s=i.data().createdAt)==null?void 0:s.toDate(),updatedAt:(o=i.data().updatedAt)==null?void 0:o.toDate()}}const od=t=>{if(t)return typeof t.toDate=="function"?t.toDate():t instanceof Date?t:new Date(t)};async function yD(){const t=Be(G,"users");try{const e=await zt(t);return console.log(`Fetched ${e.size} users`),e.docs.map(n=>{const r=n.data();return{id:n.id,...r,createdAt:od(r.createdAt),updatedAt:od(r.updatedAt),lastAccess:od(r.lastAccess)}})}catch(e){return console.error("Error fetching users:",e),[]}}async function kh(t){const e=Be(G,"orders");return(await ms(e,{...t,createdAt:ie.now(),updatedAt:ie.now()})).id}async function _D(){const t=Be(G,"orders"),e=Fn(t,vp("createdAt","desc"));return(await zt(e)).docs.map(r=>{var i,s;return{id:r.id,...r.data(),createdAt:(i=r.data().createdAt)==null?void 0:i.toDate(),updatedAt:(s=r.data().updatedAt)==null?void 0:s.toDate()}})}async function wD(t,e){const n=ce(G,"orders",t);await fi(n,{status:e,updatedAt:ie.now()})}async function Fp(){const t=Be(G,"promotions"),e=Fn(t,vp("createdAt","desc"));return(await zt(e)).docs.map(r=>{var i,s,o,c;return{id:r.id,...r.data(),validFrom:(i=r.data().validFrom)==null?void 0:i.toDate(),validTo:(s=r.data().validTo)==null?void 0:s.toDate(),createdAt:(o=r.data().createdAt)==null?void 0:o.toDate(),updatedAt:(c=r.data().updatedAt)==null?void 0:c.toDate()}})}async function ED(t){const e=Be(G,"promotions");return(await ms(e,{...t,validFrom:ie.fromDate(t.validFrom),validTo:ie.fromDate(t.validTo),createdAt:ie.now(),updatedAt:ie.now()})).id}async function TD(t,e){const n=ce(G,"promotions",t),r={...e,updatedAt:ie.now()};e.validFrom&&(r.validFrom=ie.fromDate(e.validFrom)),e.validTo&&(r.validTo=ie.fromDate(e.validTo)),await fi(n,r)}async function xD(t){const e=ce(G,"promotions",t);await Wc(e)}function ID(){const[t,e]=b.useState(null),[n,r]=b.useState(!1);b.useEffect(()=>{i()},[]);const i=async()=>{try{const u=(await Fp()).filter(d=>d.active&&d.showAsPopup&&s(d));if(u.length>0){const d=u[0];JSON.parse(localStorage.getItem("seenPromotions")||"[]").includes(d.id)||(e(d),r(!0))}}catch(c){console.error("Error loading popup promotion:",c)}},s=c=>{const u=new Date;return u>=new Date(c.validFrom)&&u<=new Date(c.validTo)},o=(c=!1)=>{if(c&&t){const u=JSON.parse(localStorage.getItem("seenPromotions")||"[]");u.push(t.id),localStorage.setItem("seenPromotions",JSON.stringify(u))}r(!1)};return!n||!t?null:a.jsx("div",{className:"promotion-popup-overlay",onClick:()=>o(!1),children:a.jsxs("div",{className:"promotion-popup",onClick:c=>c.stopPropagation(),children:[a.jsx("button",{className:"popup-close",onClick:()=>o(!1),children:""}),t.imageUrl&&a.jsx("div",{className:"popup-image",children:a.jsx("img",{src:t.imageUrl,alt:t.title})}),a.jsxs("div",{className:"popup-content",children:[a.jsx("h2",{children:t.title}),a.jsx("p",{children:t.description}),a.jsxs("div",{className:"popup-actions",children:[a.jsx("button",{className:"btn btn-primary",onClick:()=>o(!1),children:"Ho capito!"}),a.jsx("button",{className:"btn btn-text",onClick:()=>o(!0),children:"Non mostrare pi"})]})]})]})})}function SD({children:t,cart:e}){const[n,r]=b.useState(!1),[i,s]=b.useState(""),[o,c]=b.useState(60),u=jt(),d=tN(e);b.useEffect(()=>{(async()=>{try{const T=ce(G,"config","general"),I=await fn(T);I.exists()&&(I.data().logoUrl&&s(I.data().logoUrl),I.data().logoSize&&c(I.data().logoSize))}catch(T){console.error("Error loading logo:",T)}})()},[]);const f=()=>r(!n),g=()=>r(!1),m=[{path:"/",label:"Home",icon:""},{path:"/menu",label:"Men",icon:""},{path:"/news",label:"Novit e Offerte",icon:""},{path:"/fidelity",label:"Fidelity Card",icon:""},{path:"/profile",label:"Profilo",icon:""}];return a.jsxs("div",{className:"layout",children:[a.jsx("header",{className:"header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"menu-btn",onClick:f,"aria-label":"Menu",children:a.jsx("span",{className:"menu-icon",children:""})}),a.jsx(sv,{to:"/",className:"logo",children:i?a.jsx("img",{src:i,alt:"ZeroSei Pizza",className:"logo-image",style:{height:`${o}px`,objectFit:"contain"}}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"logo-text",children:"ZeroSei"}),a.jsx("span",{className:"logo-emoji",children:""})]})}),a.jsxs("button",{className:"cart-btn",onClick:()=>u("/cart"),"aria-label":"Carrello",children:[a.jsx("span",{className:"cart-icon",children:""}),d>0&&a.jsx("span",{className:"cart-badge",children:d})]})]})}),a.jsx("div",{className:`sidebar-overlay ${n?"active":""}`,onClick:g}),a.jsxs("aside",{className:`sidebar ${n?"open":""}`,children:[a.jsxs("div",{className:"sidebar-header",children:[a.jsx("h2",{children:"Menu"}),a.jsx("button",{className:"close-btn",onClick:g,children:""})]}),a.jsx("nav",{className:"sidebar-nav",children:m.map(v=>a.jsxs(sv,{to:v.path,className:"sidebar-link",onClick:g,children:[a.jsx("span",{className:"sidebar-icon",children:v.icon}),a.jsx("span",{children:v.label})]},v.path))}),a.jsx("div",{className:"sidebar-footer",children:a.jsxs("div",{className:"social-links",children:[a.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Instagram"}),a.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Facebook"}),a.jsx("a",{href:"https://zerosei.it",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Sito Web"})]})})]}),a.jsx("main",{className:"main-content",children:t}),a.jsx("footer",{className:"footer",children:a.jsx("div",{className:"footer-content",children:a.jsx("p",{children:" 2025 ZeroSei Pizza. Tutti i diritti riservati."})})}),a.jsx(ID,{})]})}const z0="+390456180120";function CD(){return`tel:${z0}`}async function B0(t,e,n){try{if(console.log("Saving phone order..."),!t||t.items.length===0){const r={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Cliente",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"Telefonico",phone:(e==null?void 0:e.phone)||"",email:""},items:[],total:0,status:"pending",source:"phone",notes:"Chiamata telefonica avviata da app"};await kh(r),console.log("Phone call event saved to Firestore")}else{const r=t.items.map(s=>({productId:s.product.id,productName:s.product.name,quantity:s.quantity,price:s.product.price,notes:s.notes,modifications:s.modifications})),i={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Cliente",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"Telefonico",phone:(e==null?void 0:e.phone)||"",email:""},items:r,total:t.total,status:"pending",source:"phone",notes:(n==null?void 0:n.notes)||"Ordine telefonico da app",deliveryAddress:(n==null?void 0:n.deliveryType)==="delivery"&&(n!=null&&n.deliveryAddress)?`${n.deliveryAddress.street}, ${n.deliveryAddress.city} - ${n.deliveryAddress.doorbell}`:null};await kh(i),console.log("Phone order saved to Firestore with cart data")}}catch(r){console.error("Error saving phone order:",r)}window.location.href=CD()}function ND(){return z0.replace(/(\+\d{2})(\d{3})(\d{3})(\d{4})/,"$1 $2 $3 $4")}const AD="393792407433";function RD(t,e,n){let r=` *Nuovo Ordine ZeroSei Pizza*

`;if(e&&(r+=` *Cliente:* ${e.name}
`,r+=` *Telefono:* ${e.phone}

`),n&&(n.deliveryType==="pickup"?(r+=` *Ritiro in Pizzeria*
`,n.pickupTime&&(r+=` *Orario preferito:* ${n.pickupTime}
`),r+=`
`):(r+=` *Consegna a Domicilio*
`,n.deliveryAddress&&(r+=` *Indirizzo:* ${n.deliveryAddress.street}, ${n.deliveryAddress.city}
`,r+=` *Campanello:* ${n.deliveryAddress.doorbell}
`),n.pickupTime&&(r+=` *Orario preferito:* ${n.pickupTime}
`),r+=`
`)),r+=`*Prodotti:*
`,t.items.forEach((i,s)=>{const o=Sc(i);r+=`${s+1}. *${i.product.name}* x${i.quantity}
`,i.modifications&&i.modifications.length>0&&(r+=`    ${i.modifications.map(c=>c.name).join(", ")}
`),r+=`    ${(o*i.quantity).toFixed(2)}
`,i.notes&&(r+=`    Note: ${i.notes}
`)}),r+=`
*Totale: ${t.total.toFixed(2)}*
`,(n==null?void 0:n.deliveryType)==="delivery"&&(r+=`_(escluse eventuali spese di trasporto)_
`),r+=`
`,n){let i="";switch(n.paymentMethod){case"cash":i="Contanti";break;case"pos":i="POS";break;case"satispay":i="Satispay";break}r+=` *Pagamento:* ${i}
`}return n!=null&&n.notes&&(r+=`
 *Note:* ${n.notes}`),r}function PD(t,e,n){const r=RD(t,e,n),i=encodeURIComponent(r);return`https://wa.me/${AD}?text=${i}`}async function Up(t,e,n){const r=PD(t,e,n);window.open(r,"_blank");try{const i={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Guest",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"",phone:(e==null?void 0:e.phone)||"",email:""},items:t.items.map(s=>({productId:s.product.id,productName:s.product.name,quantity:s.quantity,price:Sc(s),notes:s.notes,modifications:s.modifications})),total:t.total,status:"pending",source:"whatsapp",deliveryAddress:n!=null&&n.deliveryAddress?`${n.deliveryAddress.street}, ${n.deliveryAddress.city} (Campanello: ${n.deliveryAddress.doorbell})`:null,notes:(n==null?void 0:n.notes)||null};await kh(i),console.log("Order saved to Firestore")}catch(i){console.error("Error saving order to Firestore:",i)}}const ad={heroTitle:"Benvenuto da ZeroSei ",heroSubtitle:"La migliore pizza napoletana d'asporto della citt",featuresTitle:"Perch scegliere ZeroSei?",features:[{id:"feature1",icon:"",title:"Forno a Legna",description:"Pizza cotta nel tradizionale forno a legna"},{id:"feature2",icon:"",title:"Ingredienti Freschi",description:"Solo ingredienti di prima qualit"},{id:"feature3",icon:"",title:"Servizio Veloce",description:"Pronta in 15-20 minuti"},{id:"feature4",icon:"",title:"Ricetta Napoletana",description:"Autentica tradizione partenopea"}],buttons:[{id:"menu",icon:"",title:"Men",description:"Scopri le nostre pizze",color:"#E74C3C",visible:!0,order:1},{id:"phone",icon:"",title:"Chiama Ora",description:ND(),color:"#27AE60",visible:!0,order:2},{id:"whatsapp",icon:"",title:"Ordina su WhatsApp",description:"Ordine rapido e facile",color:"#25D366",visible:!0,order:3},{id:"fidelity",icon:"",title:"Fidelity Card",description:"I tuoi punti fedelt",color:"#F39C12",visible:!0,order:4}]};function kD(){const t=jt(),[e,n]=b.useState(ad),[r,i]=b.useState(!0);b.useEffect(()=>{s()},[]);const s=async()=>{try{const f=ce(G,"config","home"),g=await fn(f);g.exists()&&n({...ad,...g.data()})}catch(f){console.error("Error loading home config:",f)}i(!1)},o=()=>{const f=nE(),g=localStorage.getItem("user_profile");let m;if(g){const v=JSON.parse(g);m={name:`${v.firstName} ${v.lastName}`,phone:v.phone}}Up(f,m)},c=()=>{B0()},u=f=>{switch(f){case"menu":t("/menu");break;case"phone":c();break;case"whatsapp":o();break;case"fidelity":t("/fidelity");break;case"news":t("/news");break}};if(r)return a.jsx("div",{className:"home-screen fade-in",children:a.jsx("div",{className:"loading",children:"Caricamento..."})});const d=e.buttons.filter(f=>f.visible).sort((f,g)=>f.order-g.order);return a.jsxs("div",{className:"home-screen fade-in",children:[a.jsx("section",{className:"hero",children:a.jsxs("div",{className:"hero-content",children:[a.jsx("h1",{className:"hero-title",children:e.heroTitle}),a.jsx("p",{className:"hero-subtitle",children:e.heroSubtitle})]})}),a.jsx("section",{className:"cta-section",children:a.jsx("div",{className:"cta-grid",children:d.map(f=>a.jsxs("button",{className:"cta-card",style:{background:`linear-gradient(135deg, ${f.color} 0%, ${f.color}dd 100%)`,borderColor:f.color},onClick:()=>u(f.id),children:[f.imageUrl?a.jsx("img",{src:f.imageUrl,alt:f.title,className:"cta-icon-image"}):a.jsx("span",{className:"cta-icon",children:f.icon}),a.jsx("h3",{children:f.title}),a.jsx("p",{children:f.description})]},f.id))})}),a.jsxs("section",{className:"info-section",children:[a.jsx("h2",{children:e.featuresTitle||"Perch scegliere ZeroSei?"}),a.jsx("div",{className:"features-grid",children:(e.features||ad.features||[]).map(f=>a.jsxs("div",{className:"feature",children:[a.jsx("span",{className:"feature-icon",children:f.icon}),a.jsx("h4",{children:f.title}),a.jsx("p",{children:f.description})]},f.id))})]}),a.jsxs("section",{className:"social-section",children:[a.jsx("h3",{children:"Seguici sui social"}),a.jsxs("div",{className:"social-buttons",children:[a.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"social-btn instagram",children:" Instagram"}),a.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"social-btn facebook",children:" Facebook"}),a.jsx("a",{href:"https://www.zeroseilapizzadasporto.it",target:"_blank",rel:"noopener noreferrer",className:"social-btn website",children:" Sito Web"})]})]})]})}function jD(){const t=jt(),[e,n]=b.useState([]),[r,i]=b.useState(!0);b.useEffect(()=>{s()},[]);const s=async()=>{try{const u=await U0();n(u)}catch(u){console.error("Error loading categories:",u)}i(!1)},o=u=>{const d=["var(--color-primary)","#9B59B6","var(--color-secondary)","var(--color-accent)","#3498DB","#F1C40F","#E74C3C","#1ABC9C"];return d[u%d.length]},c=u=>({"Pizze Veraci":"pizze-veraci","Pizze Classiche":"pizze-classiche","Le Nostre Proposte":"proposte",Proposte:"proposte",Calzoni:"calzoni",Bevande:"bevande",Birre:"birre"})[u]||u.toLowerCase().replace(/\s+/g,"-");return r?a.jsxs("div",{className:"menu-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Nostro Men"}),a.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Caricamento categorie..."})]}):a.jsxs("div",{className:"menu-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Nostro Men"}),a.jsx("div",{className:"categories-grid",children:e.map((u,d)=>a.jsxs("button",{className:"category-card",onClick:()=>t(`/menu/${c(u.name)}`),style:{"--category-color":o(d)},children:[a.jsx("div",{className:"category-icon",children:u.icon||""}),a.jsxs("div",{className:"category-content",children:[a.jsx("h3",{children:u.name}),a.jsx("p",{children:u.description||""})]}),a.jsx("div",{className:"category-arrow",children:""})]},u.id))})]})}function bD({cart:t,setCart:e}){const{category:n}=kf(),r=jt(),[i,s]=b.useState([]),[o,c]=b.useState(""),[u,d]=b.useState(!0);b.useEffect(()=>{f()},[n]);const f=async()=>{d(!0),console.log(" ProductListScreen: Loading products for category:",n);try{if(n){const T=await F0(n);console.log(" ProductListScreen: Products loaded:",T.length,T),s(T)}else console.log(" ProductListScreen: No category specified")}catch(T){console.error(" ProductListScreen: Error loading products:",T)}d(!1)},g=i.filter(T=>{var I,k;return T.name.toLowerCase().includes(o.toLowerCase())||(((I=T.ingredients)==null?void 0:I.some(y=>y.toLowerCase().includes(o.toLowerCase())))??!1)||(((k=T.description)==null?void 0:k.toLowerCase().includes(o.toLowerCase()))??!1)}).sort((T,I)=>I.price-T.price),m=T=>{switch(T){case"pizze-veraci":return"Pizze Veraci";case"pizze-classiche":return"Pizze Classiche";case"proposte":return"Le Nostre Proposte";case"calzoni":return"Calzoni";case"bevande":return"Bevande";case"birre":return"Birre";default:return"Prodotti"}},v=(T,I)=>{T.stopPropagation();const k=rE(t,I,1);e(k)};return a.jsxs("div",{className:"product-list-screen fade-in",children:[a.jsxs("div",{className:"list-header",children:[a.jsx("button",{className:"back-btn",onClick:()=>r("/menu"),children:" Indietro"}),a.jsx("h1",{children:m(n)})]}),a.jsxs("div",{className:"search-bar",children:[a.jsx("span",{className:"search-icon",children:""}),a.jsx("input",{type:"text",placeholder:"Cerca pizze o ingredienti...",value:o,onChange:T=>c(T.target.value)})]}),u?a.jsx("div",{className:"loading",children:"Caricamento..."}):a.jsxs("div",{className:"products-grid",children:[g.map(T=>{var k,y,w;const I=((k=T.imageUrl)!=null&&k.startsWith("http")?T.imageUrl:null)||((y=T.image)!=null&&y.startsWith("http")?T.image:null)||T.imageUrl||T.image;return a.jsxs("div",{className:"product-card",onClick:()=>r(`/product/${T.id}`),children:[I&&a.jsx("div",{className:"product-list-image-container",children:a.jsx("img",{src:I,alt:T.name,className:"product-list-image",onError:C=>C.currentTarget.style.display="none"})}),a.jsxs("div",{className:"product-info",children:[a.jsx("h3",{children:T.name}),a.jsx("p",{className:"ingredients",children:T.description||((w=T.ingredients)==null?void 0:w.join(", "))||""}),a.jsxs("p",{className:"price",children:["",T.price.toFixed(2)]})]}),a.jsx("button",{className:"add-btn",onClick:C=>v(C,T),children:"+"})]},T.id)}),g.length===0&&a.jsx("div",{className:"no-results",children:a.jsx("p",{children:"Nessun prodotto trovato."})})]})]})}const Xc="modifications";async function $0(){try{const t=await zt(Be(G,Xc)),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e}catch(t){return console.error("Error loading modifications:",t),[]}}async function DD(t){try{console.log("Saving modification:",t);const e=ce(G,Xc,t.id),n={name:t.name,price:t.price,type:t.type,available:t.available,category:t.category};console.log("Data to save:",n),await Nr(e,n),console.log("Modification saved successfully")}catch(e){throw console.error("Error saving modification:",e),e}}async function OD(t){try{await Wc(ce(G,Xc,t))}catch(e){throw console.error("Error deleting modification:",e),e}}async function LD(t,e){try{const n=ce(G,Xc,t);await fi(n,{available:e})}catch(n){throw console.error("Error updating modification availability:",n),n}}function VD({cart:t,setCart:e}){var R;const{id:n}=kf(),r=jt(),[i,s]=b.useState(null),[o,c]=b.useState(1),[u,d]=b.useState(""),[f,g]=b.useState([]),[m,v]=b.useState([]),[T,I]=b.useState(!0);b.useEffect(()=>{y(),k()},[n]);const k=async()=>{const N=await $0();v(N)},y=async()=>{if(n){try{const N=await cD(n);s(N)}catch(N){console.error("Error loading product:",N)}I(!1)}},w=N=>{const j=o+N;j>=1&&c(j)},C=N=>{g(j=>j.find(ne=>ne.id===N.id)?j.filter(ne=>ne.id!==N.id):[...j,N])},x=()=>f.reduce((N,j)=>N+j.price,0),L=()=>i?(i.price+x())*o:0,D=()=>{if(i){const N=rE(t,i,o,u,f);e(N),r(-1)}},S=()=>{if(i){const N={items:[{product:i,quantity:o,notes:u,modifications:f}],total:L()},j=localStorage.getItem("user_profile");let P;if(j){const ne=JSON.parse(j);P={name:`${ne.firstName} ${ne.lastName}`,phone:ne.phone}}Up(N,P)}};if(T)return a.jsx("div",{className:"loading",children:"Caricamento..."});if(!i)return a.jsx("div",{className:"error",children:"Prodotto non trovato"});const A=i.imageUrl&&i.imageUrl.startsWith("http")?i.imageUrl:i.image&&i.image.startsWith("http")?i.image:i.imageUrl||i.image;return a.jsxs("div",{className:"product-detail-screen fade-in",children:[a.jsx("button",{className:"back-btn-floating",onClick:()=>r(-1),children:""}),a.jsxs("div",{className:"product-image-container",children:[A?a.jsx("img",{src:A,alt:i.name,className:"product-image",onError:N=>{var j;console.error("Error loading image:",A),N.currentTarget.style.display="none",(j=N.currentTarget.nextElementSibling)==null||j.classList.remove("hidden")}}):a.jsx("div",{className:"product-image-placeholder",children:""}),a.jsx("div",{className:"product-image-placeholder hidden",children:""})]}),a.jsxs("div",{className:"product-details-content",children:[a.jsxs("div",{className:"product-header",children:[a.jsx("h1",{children:i.name}),a.jsxs("span",{className:"product-price",children:["",i.price.toFixed(2)]})]}),a.jsx("p",{className:"product-ingredients",children:i.description||((R=i.ingredients)==null?void 0:R.join(", "))||"Nessuna descrizione disponibile"}),!i.category.includes("bevande")&&!i.category.includes("birre")&&a.jsxs("div",{className:"modifications-section",children:[a.jsx("h3",{children:"Aggiungi ingredienti"}),["Formaggi","Salumi","Verdure","Altro"].map(N=>{const j=m.filter(P=>P.category===N&&P.available);return j.length===0?null:a.jsxs("div",{className:"modification-category",children:[a.jsx("h4",{children:N}),a.jsx("div",{className:"modification-grid",children:j.map(P=>a.jsxs("button",{className:`modification-btn ${f.find(ne=>ne.id===P.id)?"selected":""}`,onClick:()=>C(P),children:[a.jsx("span",{className:"mod-name",children:P.name}),a.jsxs("span",{className:"mod-price",children:["+",P.price.toFixed(2)]})]},P.id))})]},N)})]}),a.jsxs("div",{className:"notes-section",children:[a.jsx("label",{htmlFor:"notes",children:"Note per la cucina"}),a.jsx("textarea",{id:"notes",placeholder:"Es: Ben cotta, no basilico...",value:u,onChange:N=>d(N.target.value),rows:3})]}),a.jsxs("div",{className:"quantity-selector",children:[a.jsx("button",{className:"qty-btn",onClick:()=>w(-1),disabled:o<=1,children:"-"}),a.jsx("span",{className:"qty-value",children:o}),a.jsx("button",{className:"qty-btn",onClick:()=>w(1),children:"+"})]}),a.jsxs("div",{className:"action-buttons",children:[a.jsxs("button",{className:"btn btn-primary add-to-cart-btn",onClick:D,children:["Aggiungi al carrello - ",L().toFixed(2)]}),a.jsx("button",{className:"btn btn-whatsapp order-now-btn",onClick:S,children:"Ordina subito su WhatsApp"})]})]})]})}function MD({cart:t,setCart:e,userProfile:n}){const r=jt(),[i,s]=b.useState(""),[o,c]=b.useState(""),[u,d]=b.useState("pickup"),[f,g]=b.useState(""),[m,v]=b.useState(""),[T,I]=b.useState(""),[k,y]=b.useState(""),[w,C]=b.useState("cash"),[x,L]=b.useState(""),D=(N,j)=>{const P=ZC(t,N,j);e(P)},S=N=>{const j=iE(t,N);e(j)},_=()=>{if(window.confirm("Sei sicuro di voler svuotare il carrello?")){const N=eN();e(N)}},A=()=>{console.log("WhatsApp order button clicked");let N;if(n)N={name:`${n.firstName} ${n.lastName}`,phone:n.phone};else if(i&&o)N={name:i,phone:o};else{alert("Per favore inserisci il tuo nome e numero di telefono o accedi al profilo.");return}if(u==="delivery"){if(!m||!T||!k){alert("Per favore compila tutti i campi dell'indirizzo di consegna.");return}if(!f){alert("Per favore seleziona un orario di consegna.");return}}const j={deliveryType:u,pickupTime:f,deliveryAddress:u==="delivery"?{street:m,city:T,doorbell:k}:void 0,paymentMethod:w,notes:x};console.log("Opening WhatsApp with:",{cart:t,userInfo:N,orderDetails:j}),Up(t,N,j)},R=()=>{console.log("Phone call button clicked");let N;n?N={name:`${n.firstName} ${n.lastName}`,phone:n.phone}:i&&o&&(N={name:i,phone:o});const j={deliveryType:u,pickupTime:f,deliveryAddress:u==="delivery"?{street:m,city:T,doorbell:k}:void 0,paymentMethod:w,notes:x};console.log("Calling pizzeria with:",{cart:t,userInfo:N,orderDetails:j}),B0(t,N,j)};return t.items.length===0?a.jsx("div",{className:"cart-screen empty fade-in",children:a.jsxs("div",{className:"empty-state",children:[a.jsx("span",{className:"empty-icon",children:""}),a.jsx("h2",{children:"Il tuo carrello  vuoto"}),a.jsx("p",{children:"Aggiungi qualche pizza deliziosa!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>r("/menu"),children:"Vai al Men"})]})}):a.jsxs("div",{className:"cart-screen fade-in",children:[a.jsxs("div",{className:"cart-header",children:[a.jsx("h1",{children:"Il tuo Ordine"}),a.jsx("button",{className:"clear-btn",onClick:_,children:"Svuota"})]}),a.jsx("div",{className:"cart-items",children:t.items.map((N,j)=>{const P=Sc(N);return a.jsxs("div",{className:"cart-item",children:[a.jsxs("div",{className:"item-info",children:[a.jsx("h3",{children:N.product.name}),a.jsxs("p",{className:"item-price",children:["",P.toFixed(2)," cad."]}),N.modifications&&N.modifications.length>0&&a.jsx("div",{className:"item-modifications",children:N.modifications.map(ne=>a.jsxs("span",{className:"mod-tag",children:["+ ",ne.name]},ne.id))}),N.notes&&a.jsxs("p",{className:"item-notes",children:[" ",N.notes]})]}),a.jsxs("div",{className:"item-actions",children:[a.jsxs("div",{className:"qty-control",children:[a.jsx("button",{onClick:()=>D(j,N.quantity-1),children:"-"}),a.jsx("span",{children:N.quantity}),a.jsx("button",{onClick:()=>D(j,N.quantity+1),children:"+"})]}),a.jsxs("div",{className:"item-total",children:["",(P*N.quantity).toFixed(2)]}),a.jsx("button",{className:"remove-btn",onClick:()=>S(j),children:""})]})]},`${N.product.id}-${j}`)})}),a.jsx("div",{className:"cart-summary",children:a.jsxs("div",{className:"summary-row total",children:[a.jsx("span",{children:"Totale"}),a.jsxs("span",{children:["",t.total.toFixed(2)]})]})}),a.jsxs("div",{className:"quick-order-section",children:[a.jsxs("p",{className:"quick-order-hint",children:[" ",a.jsx("strong",{children:"Ordine veloce?"})," Chiama direttamente!"]}),a.jsxs("button",{className:"btn btn-secondary full-width",onClick:R,children:[a.jsx("span",{className:"icon",children:""})," Chiama Ora - 045 618 0120"]})]}),a.jsxs("div",{className:"whatsapp-order-section",children:[a.jsx("h3",{children:"Ordina su WhatsApp"}),a.jsx("p",{className:"section-hint",children:"Compila i dettagli per ricevere il riepilogo completo"}),!n&&a.jsxs("div",{className:"guest-info-inline",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"guestName",children:"Nome e Cognome *"}),a.jsx("input",{type:"text",id:"guestName",className:"input",placeholder:"Nome e Cognome",value:i,onChange:N=>s(N.target.value)})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"guestPhone",children:"Telefono *"}),a.jsx("input",{type:"tel",id:"guestPhone",className:"input",placeholder:"Numero di Telefono",value:o,onChange:N=>c(N.target.value)})]})]}),a.jsxs("div",{className:"delivery-options-wrapper",children:[a.jsx("label",{className:"section-label",children:"Modalit di Ritiro *"}),a.jsxs("div",{className:"delivery-options",children:[a.jsxs("button",{className:`delivery-option ${u==="pickup"?"active":""}`,onClick:()=>d("pickup"),children:[a.jsx("span",{className:"option-icon",children:""}),a.jsx("span",{className:"option-label",children:"Ritiro in Pizzeria"})]}),a.jsxs("button",{className:`delivery-option ${u==="delivery"?"active":""}`,onClick:()=>d("delivery"),children:[a.jsx("span",{className:"option-icon",children:""}),a.jsx("span",{className:"option-label",children:"Consegna a Domicilio"})]})]}),u==="pickup"&&a.jsxs("div",{className:"pickup-details",children:[a.jsx("label",{htmlFor:"pickupTime",children:"Orario Preferito (opzionale)"}),a.jsx("input",{type:"time",id:"pickupTime",className:"input",value:f,onChange:N=>g(N.target.value)})]}),u==="delivery"&&a.jsxs("div",{className:"delivery-details",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"street",children:"Via e Numero Civico *"}),a.jsx("input",{type:"text",id:"street",className:"input",placeholder:"Es: Via Roma, 123",value:m,onChange:N=>v(N.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"city",children:"Paese/Citt *"}),a.jsx("input",{type:"text",id:"city",className:"input",placeholder:"Es: Verona",value:T,onChange:N=>I(N.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"doorbell",children:"Nome sul Campanello *"}),a.jsx("input",{type:"text",id:"doorbell",className:"input",placeholder:"Nome e Cognome",value:k,onChange:N=>y(N.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"deliveryTime",children:"Orario di Consegna *"}),a.jsx("input",{type:"time",id:"deliveryTime",className:"input",value:f,onChange:N=>g(N.target.value),required:!0})]}),a.jsx("label",{className:"section-label",children:"Metodo di Pagamento *"}),a.jsxs("div",{className:"payment-options",children:[a.jsx("button",{className:`payment-option ${w==="cash"?"active":""}`,onClick:()=>C("cash"),children:" Contanti"}),a.jsx("button",{className:`payment-option ${w==="pos"?"active":""}`,onClick:()=>C("pos"),children:" POS"}),a.jsx("button",{className:`payment-option ${w==="satispay"?"active":""}`,onClick:()=>C("satispay"),children:" Satispay"})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"orderNotes",children:"Note Aggiuntive (opzionale)"}),a.jsx("textarea",{id:"orderNotes",className:"input",placeholder:"Es: Suonare al citofono, non al campanello...",value:x,onChange:N=>L(N.target.value),rows:2})]})]}),a.jsxs("button",{className:"btn btn-whatsapp full-width",onClick:A,children:[a.jsx("span",{className:"icon",children:""})," Invia Ordine su WhatsApp"]}),!n&&a.jsxs("p",{className:"profile-hint",children:[" ",a.jsx("span",{onClick:()=>r("/profile"),className:"link",children:"Crea un profilo"})," per salvare i tuoi dati"]})]})]})}function FD({userProfile:t,setUserProfile:e}){const[n,r]=b.useState({firstName:"",lastName:"",phone:"",email:""}),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(!1),[f,g]=b.useState(null);b.useEffect(()=>{t?r({firstName:t.firstName,lastName:t.lastName,phone:t.phone,email:t.email}):s(!0)},[t]);const m=I=>{const{name:k,value:y}=I.target;r(w=>({...w,[k]:y}))},v=async()=>{if(t){d(!0),g(null);try{console.log("Invoking searchAndSyncFidelityPoints...");const k=await Qc(lD,"searchAndSyncFidelityPoints")({email:t.email,firstName:t.firstName,lastName:t.lastName,phone:t.phone});console.log("Sync result:",k.data);const y=k.data;if(y.success){const w=ce(G,"users",t.id);await fi(w,{cassaCloudId:y.customerId,loyaltyPoints:y.points,loyaltyPointsLastSync:new Date().toISOString()}),e&&e({...t,cassaCloudId:y.customerId,loyaltyPoints:y.points,loyaltyPointsLastSync:new Date().toISOString()}),c({type:"success",text:`Fidelity Card collegata! Punti: ${y.points}`})}else g(y.message||"Errore durante la ricerca"),y.code==="CUSTOMER_NOT_FOUND"&&c({type:"error",text:"Nessuna Fidelity Card trovata. Chiedi in cassa!"})}catch(I){console.error("Sync error:",I),g("Errore di connessione. Riprova pi tardi."),c({type:"error",text:"Errore di connessione durante la sincronizzazione."})}finally{d(!1)}}},T=async I=>{if(I.preventDefault(),!n.firstName||!n.lastName||!n.phone){c({type:"error",text:"Per favore compila tutti i campi obbligatori."});return}try{const k={id:(t==null?void 0:t.id)||"",firstName:n.firstName,lastName:n.lastName,phone:n.phone,email:n.email,loyaltyPoints:(t==null?void 0:t.loyaltyPoints)||0,createdAt:(t==null?void 0:t.createdAt)||new Date,updatedAt:new Date};if(t!=null&&t.id)await Ph(t.id,k);else{const y=await vD(n.phone);if(y)k.id=y.id,k.loyaltyPoints=y.loyaltyPoints,k.createdAt=y.createdAt,await Ph(y.id,k);else{const w=await gD(k);k.id=w}}localStorage.setItem("user_profile",JSON.stringify(k)),e(k),s(!1),c({type:"success",text:"Profilo salvato con successo!"})}catch(k){console.error("Error saving profile:",k),c({type:"error",text:"Errore nel salvataggio del profilo. Riprova."})}setTimeout(()=>c(null),3e3)};return a.jsxs("div",{className:"profile-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Tuo Profilo"}),o&&a.jsx("div",{className:`message ${o.type}`,children:o.text}),a.jsxs("div",{className:"profile-card",children:[a.jsxs("div",{className:"profile-header",children:[a.jsx("div",{className:"avatar-circle",children:n.firstName?n.firstName[0].toUpperCase():""}),!i&&a.jsxs("div",{className:"profile-summary",children:[a.jsxs("h2",{children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]}),a.jsx("p",{children:t==null?void 0:t.phone})]})]}),a.jsxs("form",{onSubmit:T,className:"profile-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"firstName",children:"Nome *"}),a.jsx("input",{type:"text",id:"firstName",name:"firstName",value:n.firstName,onChange:m,disabled:!i,placeholder:"Il tuo nome",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"lastName",children:"Cognome *"}),a.jsx("input",{type:"text",id:"lastName",name:"lastName",value:n.lastName,onChange:m,disabled:!i,placeholder:"Il tuo cognome",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"phone",children:"Telefono *"}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:m,disabled:!i,placeholder:"Il tuo numero di cellulare",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:m,disabled:!i,placeholder:"La tua email (opzionale)",className:"input"})]}),a.jsx("div",{className:"form-actions",children:i?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>s(!1),disabled:!t,children:"Annulla"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Salva Profilo"})]}):a.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>s(!0),children:"Modifica Dati"})})]})]}),t&&!i&&a.jsxs("div",{className:"profile-card",children:[a.jsx("h3",{children:" Fidelity Card ZeroSei"}),t.cassaCloudId?a.jsxs("div",{className:"fidelity-info",children:[a.jsxs("div",{className:"points-display",children:[a.jsx("span",{className:"points-label",children:"I tuoi Punti:"}),a.jsx("span",{className:"points-value",children:t.loyaltyPoints||0})]}),a.jsx("p",{className:"last-sync",style:{fontSize:"0.8rem",color:"#666",marginTop:"5px"},children:t.loyaltyPointsLastSync?`Aggiornato: ${new Date(t.loyaltyPointsLastSync).toLocaleString("it-IT")}`:""}),a.jsx("button",{onClick:v,disabled:u,className:"btn btn-secondary",style:{marginTop:"10px",width:"100%"},children:u?" Sincronizzazione...":" Aggiorna Punti"})]}):a.jsxs("div",{className:"fidelity-connect",children:[a.jsx("p",{children:"Hai gi una Fidelity Card in negozio? Collegala ora per vedere i tuoi punti!"}),a.jsx("button",{onClick:v,disabled:u,className:"btn btn-primary",style:{marginTop:"10px",width:"100%"},children:u?" Ricerca in corso...":" Collega Fidelity Card"}),f&&a.jsx("p",{className:"error-text",style:{color:"red",marginTop:"10px",fontSize:"0.9rem"},children:f})]})]}),a.jsxs("div",{className:"info-box",children:[a.jsx("h3",{children:" Perch serve il profilo?"}),a.jsx("p",{children:"I tuoi dati servono solo per pre-compilare i messaggi WhatsApp per gli ordini e per associare la tua Fidelity Card. Non vengono inviati a server esterni se non quando invii un ordine o usi la Fidelity Card."})]})]})}function UD(){const t=jt(),[e,n]=b.useState([]),[r,i]=b.useState(!0);b.useEffect(()=>{s()},[]);const s=async()=>{try{const d=(await Fp()).filter(f=>f.active);n(d)}catch(u){console.error("Error loading promotions:",u)}i(!1)},o=u=>new Date(u).toLocaleDateString("it-IT",{day:"numeric",month:"short",year:"numeric"}),c=u=>{const d=new Date;return d>=new Date(u.validFrom)&&d<=new Date(u.validTo)};return r?a.jsxs("div",{className:"news-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Novit e Offerte"}),a.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Caricamento offerte..."})]}):a.jsxs("div",{className:"news-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Novit e Offerte"}),e.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:[a.jsx("p",{children:"Nessuna offerta disponibile al momento."}),a.jsx("p",{style:{fontSize:"0.9rem",marginTop:"8px"},children:"Torna presto per scoprire le nostre promozioni!"})]}):a.jsx("div",{className:"news-grid",children:e.map(u=>a.jsxs("div",{className:"news-card clickable",onClick:()=>t(`/offer/${u.id}`),children:[u.imageUrl?a.jsx("img",{src:u.imageUrl,alt:u.title,className:"news-image"}):a.jsx("div",{className:"news-icon",children:""}),a.jsxs("div",{className:"news-content",children:[a.jsxs("span",{className:"news-date",children:[o(u.validFrom)," - ",o(u.validTo)]}),!c(u)&&a.jsx("span",{className:"news-badge expired",children:"Scaduta"}),a.jsx("h3",{children:u.title}),a.jsx("p",{children:u.description})]})]},u.id))})]})}function zD({userProfile:t}){const{id:e}=kf(),n=jt(),[r,i]=b.useState(null),[s,o]=b.useState(!0),[c,u]=b.useState(!1),[d,f]=b.useState(null),[g,m]=b.useState(null),[v,T]=b.useState(null),[I,k]=b.useState(!1);b.useEffect(()=>{y()},[e,t]),b.useEffect(()=>{(async()=>{if(t){console.log("[DEBUG] Controllo limite giornaliero per user:",t.id);const A=await C(t.id);console.log("[DEBUG] Limite raggiunto?",A),k(A)}else console.log("[DEBUG] userProfile non disponibile, skip controllo")})()},[t]);const y=async()=>{var _,A,R,N;if(e){try{const j=ce(G,"promotions",e),P=await fn(j);if(P.exists()){const ne=P.data(),pn={id:P.id,title:ne.title,description:ne.description,imageUrl:ne.imageUrl,validFrom:((_=ne.validFrom)==null?void 0:_.toDate())||new Date,validTo:((A=ne.validTo)==null?void 0:A.toDate())||new Date,active:ne.active,showAsPopup:ne.showAsPopup,createdAt:((R=ne.createdAt)==null?void 0:R.toDate())||new Date,updatedAt:((N=ne.updatedAt)==null?void 0:N.toDate())||new Date};if(i(pn),t){const en=await w(t.id,P.id);en&&(m(en),en.status==="active"&&f(en.code))}}else T("Offerta non trovata")}catch(j){console.error("Error loading offer:",j),T("Errore nel caricamento dell'offerta")}o(!1)}},w=async(_,A)=>{try{const R=Be(G,"GeneratedCoupons"),N=Fn(R,Gt("userId","==",_),Gt("offerId","==",A)),j=await zt(N);return j.size>0?{...j.docs[0].data(),id:j.docs[0].id}:null}catch(R){return console.error("Error checking offer activation:",R),null}},C=async _=>{try{const A=new Date;A.setHours(0,0,0,0),console.log("[DEBUG] checkDailyGlobalLimit - Controllo coupon creati oggi per user:",_),console.log("[DEBUG] Data oggi (00:00):",A);const R=Be(G,"GeneratedCoupons"),N=Fn(R,Gt("userId","==",_),Gt("createdAt",">=",A)),j=await zt(N);return console.log("[DEBUG] Coupon trovati oggi:",j.size),j.size>0}catch(A){return console.error("Error checking daily global limit:",A),!1}},x=()=>{const _="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let A="";for(let R=0;R<6;R++)A+=_.charAt(Math.floor(Math.random()*_.length));return A},L=async()=>{if(!t){T("Devi essere loggato per attivare un'offerta");return}if(r){u(!0),T(null);try{const _=await w(t.id,r.id);if(_){_.status==="active"?(f(_.code),m(_)):(T("Hai gi utilizzato questa offerta."),m(_)),u(!1);return}if(await C(t.id)){T(" Puoi attivare solo un'offerta al giorno. Torna domani!"),u(!1);return}const R=x(),N={userId:t.id,offerId:r.id,offerTitle:r.title,code:R,status:"active",createdAt:UT()};await ms(Be(G,"GeneratedCoupons"),N),f(R),m({...N,code:R})}catch(_){console.error("Error activating offer:",_),T("Errore nell'attivazione dell'offerta. Riprova.")}u(!1)}},D=_=>new Date(_).toLocaleDateString("it-IT",{day:"numeric",month:"long",year:"numeric"});if(!t)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsxs("div",{className:"login-prompt",children:[a.jsx("span",{className:"lock-icon",children:""}),a.jsx("h2",{children:"Accedi per attivare le offerte"}),a.jsx("p",{children:"Crea un profilo per ricevere codici sconto esclusivi!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>n("/profile"),children:"Crea Profilo"})]})});if(s)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsx("div",{style:{textAlign:"center",padding:"40px"},children:"Caricamento..."})});if(v&&!r)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsxs("div",{className:"error-message",children:[a.jsx("p",{children:v}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/news"),children:"Torna alle offerte"})]})});if(!r)return null;const S=new Date>=new Date(r.validFrom)&&new Date<=new Date(r.validTo);return a.jsxs("div",{className:"offer-detail-screen fade-in",children:[a.jsx("button",{className:"back-button",onClick:()=>n("/news"),children:" Torna alle offerte"}),a.jsxs("div",{className:"offer-detail-card",children:[r.imageUrl&&a.jsx("img",{src:r.imageUrl,alt:r.title,className:"offer-detail-image"}),a.jsxs("div",{className:"offer-detail-content",children:[a.jsx("h1",{className:"offer-title",children:r.title}),a.jsxs("div",{className:"offer-validity",children:[a.jsx("span",{className:`validity-badge ${S?"valid":"expired"}`,children:S?" Offerta Valida":" Offerta Scaduta"}),a.jsxs("p",{className:"validity-dates",children:["Dal ",D(r.validFrom)," al ",D(r.validTo)]})]}),a.jsx("p",{className:"offer-description",children:r.description}),g&&g.status==="redeemed"&&a.jsxs("div",{className:"alert alert-warning",children:[a.jsx("strong",{children:" Offerta gi utilizzata"}),a.jsx("p",{children:"Hai gi riscattato questa offerta. Non puoi riattivarla."})]}),d&&(!g||g.status==="active")&&a.jsx("div",{className:"coupon-generated",children:a.jsxs("div",{className:"coupon-box",children:[a.jsx("h2",{children:" Offerta Attivata!"}),a.jsxs("div",{className:"coupon-code",children:[a.jsx("span",{className:"code-label",children:"Il tuo codice :"}),a.jsx("span",{className:"code-value",children:d})]}),a.jsxs("p",{className:"coupon-instructions",children:[" ",a.jsx("strong",{children:"Mostra questo codice in cassa"})," per ricevere lo sconto"]})]})}),!g&&S&&a.jsxs("div",{className:"activation-section",children:[I&&a.jsxs("div",{className:"alert alert-error",children:[" ",a.jsx("strong",{children:"Limite raggiunto!"}),a.jsx("br",{}),"Hai gi attivato un'offerta oggi. Torna domani per attivarne un'altra!"]}),v&&!I&&a.jsx("div",{className:"alert alert-error",children:v}),a.jsx("button",{className:"btn btn-primary btn-large",onClick:L,disabled:c||I,children:c?"Attivazione in corso...":" ATTIVA QUESTA OFFERTA"}),!I&&a.jsx("p",{className:"help-text",children:"Attiva l'offerta per ricevere il tuo codice sconto personale"})]}),!S&&a.jsx("div",{className:"alert alert-warning",children:"Questa offerta non  pi valida"})]})]})]})}const BD="modulepreload",$D=function(t){return"/app-zerosei-pizza/"+t},Py={},qD=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=$D(u),u in Py)return;Py[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":BD,d||(g.as="script"),g.crossOrigin="",g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),d)return new Promise((m,v)=>{g.addEventListener("load",m),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},zp=V0(oa);let Qa=null,ky=0;async function WD(){try{if(Qa&&Date.now()<ky)return Qa;const n=(await Qc(zp,"getAccessToken")({})).data;if(n.success)return Qa=n.accessToken,ky=Date.now()+(n.expiresIn-600)*1e3,Qa;throw new Error("Risposta API non valida (success=false)")}catch(t){throw console.error("Error getting access token via Cloud Function:",t),new Error(t.message||"Errore sconosciuto nel recupero del token")}}async function q0(t){try{const e=await WD();if(!e)return console.warn("Could not obtain access token"),{customerId:t,points:0,tier:"Member",lastUpdated:new Date};const i=(await Qc(zp,"getLoyaltyPoints")({accessToken:e,customerId:t})).data;return i.success?{customerId:i.customerId,points:i.points,tier:i.tier,lastUpdated:new Date(i.lastUpdated)}:{customerId:t,points:0,tier:"Member",lastUpdated:new Date}}catch(e){return console.error("Error fetching loyalty points via Cloud Function:",e),{customerId:t,points:0,tier:"Member",lastUpdated:new Date}}}async function HD(t){if(t.cassaCloudId)return t.cassaCloudId;try{const r=(await Qc(zp,"searchAndSyncFidelityPoints")({email:t.email,firstName:t.firstName,lastName:t.lastName,phone:t.phone})).data;return r.success&&r.customerId?(console.log("[linkCustomerProfile] Found customer:",r.customerId,"with",r.points,"points"),r.customerId):(console.log("[linkCustomerProfile] Customer not found in Cassa in Cloud"),null)}catch(e){return console.error("[linkCustomerProfile] Error:",e),null}}const GD=Object.freeze(Object.defineProperty({__proto__:null,getLoyaltyPoints:q0,linkCustomerProfile:HD},Symbol.toStringTag,{value:"Module"}));function KD({userProfile:t}){const e=jt(),[n,r]=b.useState(null),[i,s]=b.useState([]),[o,c]=b.useState(!1),[u,d]=b.useState(!0);b.useEffect(()=>{f()},[]),b.useEffect(()=>{t&&(c(!0),(async()=>{let m=t.cassaCloudId;if(console.log("Initial customerId from profile:",m),!m)try{console.log("Searching for customer profile with:",t.email,t.phone);const{linkCustomerProfile:v}=await qD(async()=>{const{linkCustomerProfile:I}=await Promise.resolve().then(()=>GD);return{linkCustomerProfile:I}},void 0),T=await v(t);console.log("Search result foundId:",T),T?(m=T,console.log("Found Cassa in Cloud ID:",m)):console.warn("Customer not found in Cassa in Cloud")}catch(v){console.error("Error linking profile:",v)}m?(console.log("Fetching points for customerId:",m),q0(m).then(v=>{console.log("Loyalty data received:",v),r(v),c(!1)})):(console.log("No customerId available, skipping points fetch"),c(!1))})())},[t]);const f=async()=>{d(!0);try{const g=ce(G,"config","rewards"),m=await fn(g);if(m.exists()){const T=(m.data().rewards||[]).filter(I=>I.available);s(T)}else s([])}catch(g){console.error("Error loading rewards:",g),s([])}d(!1)};return t?a.jsxs("div",{className:"fidelity-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Fidelity Card"}),a.jsx("div",{className:"card-container",children:a.jsx("div",{className:"digital-card",children:a.jsxs("div",{className:"card-front",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("span",{className:"card-logo",children:"ZeroSei "}),a.jsx("span",{className:"card-tier",children:(n==null?void 0:n.tier)||"Member"})]}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"points-display",children:[a.jsx("span",{className:"points-value",children:o?"...":(n==null?void 0:n.points)||0}),a.jsx("span",{className:"points-label",children:"Punti"})]})}),a.jsxs("div",{className:"card-footer",children:[a.jsxs("span",{className:"card-holder",children:[t.firstName," ",t.lastName]}),a.jsxs("span",{className:"card-id",children:["ID: ",t.phone]})]})]})})}),a.jsxs("div",{className:"rewards-section",children:[a.jsx("h2",{children:"Premi Disponibili"}),u?a.jsx("div",{className:"loading-rewards",children:"Caricamento premi..."}):i.length===0?a.jsx("div",{className:"no-rewards",children:a.jsx("p",{children:"Nessun premio disponibile al momento."})}):a.jsx("div",{className:"rewards-list",children:i.map(g=>a.jsxs("div",{className:"reward-item",children:[a.jsx("div",{className:"reward-icon",children:g.imageUrl||""}),a.jsxs("div",{className:"reward-info",children:[a.jsx("h3",{children:g.name}),a.jsx("p",{children:g.description}),a.jsxs("p",{className:"reward-points-required",children:[g.pointsRequired," Punti"]})]})]},g.id))})]}),a.jsx("div",{className:"info-box mt-xl",children:a.jsx("p",{children:"I punti vengono aggiornati automaticamente dopo ogni acquisto in cassa."})})]}):a.jsx("div",{className:"fidelity-screen fade-in",children:a.jsxs("div",{className:"login-prompt",children:[a.jsx("span",{className:"lock-icon",children:""}),a.jsx("h2",{children:"Accedi per vedere la tua Fidelity Card"}),a.jsx("p",{children:"Crea un profilo per accumulare punti e ricevere premi!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>e("/profile"),children:"Crea Profilo"})]})})}const QD="zerosei2024";function XD({onLogin:t}){const[e,n]=b.useState(""),[r,i]=b.useState(""),s=jt(),o=c=>{c.preventDefault(),e===QD?(localStorage.setItem("admin_authenticated","true"),t(),s("/admin/dashboard")):(i("Password non corretta"),n(""))};return a.jsx("div",{className:"admin-login-screen",children:a.jsxs("div",{className:"admin-login-container",children:[a.jsxs("div",{className:"admin-login-header",children:[a.jsx("h1",{children:" ZeroSei Pizza"}),a.jsx("h2",{children:"Pannello Amministratore"})]}),a.jsxs("form",{onSubmit:o,className:"admin-login-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:e,onChange:c=>{n(c.target.value),i("")},placeholder:"Inserisci la password admin",autoFocus:!0})]}),r&&a.jsx("div",{className:"error-message",children:r}),a.jsx("button",{type:"submit",className:"btn-login",children:"Accedi"})]}),a.jsx("button",{className:"btn-back",onClick:()=>s("/"),children:" Torna al sito"})]})})}function YD(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(""),[f,g]=b.useState(!1),[m,v]=b.useState({name:"",description:"",price:0,category:"pizze-veraci",image:"/placeholder-pizza.jpg",available:!0});b.useEffect(()=>{T()},[]);const T=async()=>{r(!0);try{const D=await M0();e(D)}catch(D){console.error("Error loading products:",D),alert("Errore nel caricamento dei prodotti")}r(!1)},I=async D=>{D.preventDefault();try{const S={...m,imageUrl:m.image};o?(await dD(o.id,S),alert("Prodotto aggiornato con successo!")):(await uD(S),alert("Prodotto creato con successo!")),C(),T()}catch(S){console.error("Error saving product:",S),alert("Errore nel salvataggio del prodotto")}},k=D=>{c(D),v({name:D.name,description:D.description||"",price:D.price,category:D.category,image:D.image||"/placeholder-pizza.jpg",available:D.available}),s(!0)},y=async D=>{if(confirm(`Sei sicuro di voler eliminare "${D.name}"?`))try{await hD(D.id),alert("Prodotto eliminato con successo!"),T()}catch(S){console.error("Error deleting product:",S),alert("Errore nell'eliminazione del prodotto")}},w=async D=>{var _;const S=(_=D.target.files)==null?void 0:_[0];if(S){g(!0);try{const A=Cp(Mp,`products/${Date.now()}_${S.name}`);await Ip(A,S);const R=await Sp(A);v(N=>({...N,image:R}))}catch(A){console.error("Error uploading image:",A),alert("Errore durante il caricamento dell'immagine")}finally{g(!1)}}},C=()=>{v({name:"",description:"",price:0,category:"pizze-veraci",image:"/placeholder-pizza.jpg",available:!0}),c(null),s(!1)},x=t.filter(D=>{var S;return D.name.toLowerCase().includes(u.toLowerCase())||((S=D.description)==null?void 0:S.toLowerCase().includes(u.toLowerCase()))}),L=D=>({"pizze-veraci":"Pizze Veraci","pizze-classiche":"Pizze Classiche",proposte:"Le Nostre Proposte",calzoni:"Calzoni",bevande:"Bevande",birre:"Birre"})[D];return n?a.jsx("div",{className:"loading",children:"Caricamento prodotti..."}):a.jsxs("div",{className:"product-management",children:[a.jsxs("div",{className:"pm-header",children:[a.jsx("h2",{children:"Gestione Prodotti"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>s(!i),children:i?" Chiudi":"+ Nuovo Prodotto"})]}),i&&a.jsxs("div",{className:"product-form-container",children:[a.jsx("h3",{children:o?"Modifica Prodotto":"Nuovo Prodotto"}),a.jsxs("form",{onSubmit:I,className:"product-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:m.name,onChange:D=>v({...m,name:D.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Prezzo () *"}),a.jsx("input",{type:"number",step:"0.01",value:m.price,onChange:D=>v({...m,price:parseFloat(D.target.value)}),required:!0})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("textarea",{value:m.description,onChange:D=>v({...m,description:D.target.value}),rows:3})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Categoria *"}),a.jsxs("select",{value:m.category,onChange:D=>v({...m,category:D.target.value}),required:!0,children:[a.jsx("option",{value:"pizze-veraci",children:"Pizze Veraci"}),a.jsx("option",{value:"pizze-classiche",children:"Pizze Classiche"}),a.jsx("option",{value:"proposte",children:"Le Nostre Proposte"}),a.jsx("option",{value:"calzoni",children:"Calzoni"}),a.jsx("option",{value:"bevande",children:"Bevande"}),a.jsx("option",{value:"birre",children:"Birre"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Immagine prodotto"}),a.jsxs("div",{className:"image-upload-container",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:w,disabled:f,className:"file-input"}),f&&a.jsx("span",{className:"upload-status",children:"Caricamento in corso..."}),m.image&&m.image!=="/placeholder-pizza.jpg"&&a.jsx("div",{className:"image-preview",children:a.jsx("img",{src:m.image,alt:"Anteprima",style:{height:"50px",objectFit:"cover",marginTop:"10px",borderRadius:"4px"}})})]}),a.jsx("input",{type:"text",placeholder:"O incolla URL immagine",value:m.image,onChange:D=>v({...m,image:D.target.value}),style:{marginTop:"10px"}})]})]}),a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:m.available,onChange:D=>v({...m,available:D.target.checked})})," ","Disponibile"]})}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:f,children:[o?"Aggiorna":"Crea"," Prodotto"]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:C,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"pm-search",children:[a.jsx("input",{type:"text",placeholder:"Cerca prodotti...",value:u,onChange:D=>d(D.target.value)}),a.jsxs("span",{className:"product-count",children:[x.length," prodotti"]})]}),a.jsxs("div",{className:"products-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Nome"}),a.jsx("th",{children:"Categoria"}),a.jsx("th",{children:"Prezzo"}),a.jsx("th",{children:"Stato"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:x.map(D=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("strong",{children:D.name}),D.description&&a.jsx("div",{className:"product-desc",children:D.description})]}),a.jsx("td",{children:a.jsx("span",{className:"category-badge",children:L(D.category)})}),a.jsxs("td",{className:"price-cell",children:["",D.price.toFixed(2)]}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${D.available?"available":"unavailable"}`,children:D.available?"Disponibile":"Non disponibile"})}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>k(D),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>y(D),title:"Elimina",children:""})]})]},D.id))})]}),x.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun prodotto trovato"})})]})]})}function JD(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState({name:"",description:"",icon:"",order:0,imageUrl:""});b.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const I=await U0();e(I)}catch(I){console.error("Error loading categories:",I),alert("Errore nel caricamento delle categorie")}r(!1)},g=async I=>{I.preventDefault();try{o?(await pD(o.id,u),alert("Categoria aggiornata con successo!")):(await fD(u),alert("Categoria creata con successo!")),T(),f()}catch(k){console.error("Error saving category:",k),alert("Errore nel salvataggio della categoria")}},m=I=>{c(I),d({name:I.name,description:I.description||"",icon:I.icon||"",order:I.order,imageUrl:I.imageUrl||""}),s(!0)},v=async I=>{if(confirm(`Sei sicuro di voler eliminare la categoria "${I.name}"?`))try{await mD(I.id),alert("Categoria eliminata con successo!"),f()}catch(k){console.error("Error deleting category:",k),alert("Errore nell'eliminazione della categoria")}},T=()=>{d({name:"",description:"",icon:"",order:0,imageUrl:""}),c(null),s(!1)};return n?a.jsx("div",{className:"loading",children:"Caricamento categorie..."}):a.jsxs("div",{className:"category-management",children:[a.jsxs("div",{className:"cm-header",children:[a.jsx("h2",{children:"Gestione Categorie"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>s(!i),children:i?" Chiudi":"+ Nuova Categoria"})]}),i&&a.jsxs("div",{className:"category-form-container",children:[a.jsx("h3",{children:o?"Modifica Categoria":"Nuova Categoria"}),a.jsxs("form",{onSubmit:g,className:"category-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:u.name,onChange:I=>d({...u,name:I.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Ordine *"}),a.jsx("input",{type:"number",value:u.order,onChange:I=>d({...u,order:parseInt(I.target.value)}),required:!0}),a.jsx("small",{style:{color:"#666",fontSize:"0.85rem"},children:"Ordine di visualizzazione nel menu"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("textarea",{value:u.description,onChange:I=>d({...u,description:I.target.value}),rows:3})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",placeholder:"es. ",value:u.icon,onChange:I=>d({...u,icon:I.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"URL Immagine"}),a.jsx("input",{type:"text",placeholder:"URL dell'immagine della categoria",value:u.imageUrl,onChange:I=>d({...u,imageUrl:I.target.value})})]})]}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[o?"Aggiorna":"Crea"," Categoria"]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:T,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"categories-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Ordine"}),a.jsx("th",{children:"Nome"}),a.jsx("th",{children:"Descrizione"}),a.jsx("th",{children:"Icona"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:t.map(I=>a.jsxs("tr",{children:[a.jsx("td",{className:"order-cell",children:I.order}),a.jsx("td",{children:a.jsx("strong",{children:I.name})}),a.jsx("td",{children:a.jsx("div",{className:"category-desc",children:I.description||"-"})}),a.jsx("td",{className:"icon-cell",children:I.icon||"-"}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>m(I),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>v(I),title:"Elimina",children:""})]})]},I.id))})]}),t.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessuna categoria trovata"})})]})]})}function ZD(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState({title:"",description:"",imageUrl:"",validFrom:new Date,validTo:new Date(Date.now()+7*24*60*60*1e3),active:!0,showAsPopup:!1});b.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const y=await Fp();e(y)}catch(y){console.error("Error loading promotions:",y),alert("Errore nel caricamento delle promozioni")}r(!1)},g=async y=>{y.preventDefault();try{o?(await TD(o.id,u),alert("Promozione aggiornata con successo!")):(await ED(u),alert("Promozione creata con successo!")),T(),f()}catch(w){console.error("Error saving promotion:",w),alert("Errore nel salvataggio della promozione")}},m=y=>{c(y),d({title:y.title,description:y.description,imageUrl:y.imageUrl||"",validFrom:y.validFrom,validTo:y.validTo,active:y.active,showAsPopup:y.showAsPopup||!1}),s(!0)},v=async y=>{if(confirm(`Sei sicuro di voler eliminare "${y.title}"?`))try{await xD(y.id),alert("Promozione eliminata con successo!"),f()}catch(w){console.error("Error deleting promotion:",w),alert("Errore nell'eliminazione della promozione")}},T=()=>{d({title:"",description:"",imageUrl:"",validFrom:new Date,validTo:new Date(Date.now()+7*24*60*60*1e3),active:!0,showAsPopup:!1}),c(null),s(!1)},I=y=>new Date(y).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"}),k=y=>{const w=new Date(y),C=w.getFullYear(),x=String(w.getMonth()+1).padStart(2,"0"),L=String(w.getDate()).padStart(2,"0");return`${C}-${x}-${L}`};return n?a.jsx("div",{className:"loading",children:"Caricamento promozioni..."}):a.jsxs("div",{className:"promotion-management",children:[a.jsxs("div",{className:"pm-header",children:[a.jsx("h2",{children:"Gestione Promozioni e News"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>s(!i),children:i?" Chiudi":"+ Nuova Promozione"})]}),i&&a.jsxs("div",{className:"promotion-form-container",children:[a.jsx("h3",{children:o?"Modifica Promozione":"Nuova Promozione"}),a.jsxs("form",{onSubmit:g,className:"promotion-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Titolo *"}),a.jsx("input",{type:"text",value:u.title,onChange:y=>d({...u,title:y.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione *"}),a.jsx("textarea",{value:u.description,onChange:y=>d({...u,description:y.target.value}),rows:4,required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"URL Immagine"}),a.jsx("input",{type:"text",placeholder:"URL dell'immagine della promozione",value:u.imageUrl,onChange:y=>d({...u,imageUrl:y.target.value})})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Valida dal *"}),a.jsx("input",{type:"date",value:k(u.validFrom),onChange:y=>d({...u,validFrom:new Date(y.target.value)}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Valida fino al *"}),a.jsx("input",{type:"date",value:k(u.validTo),onChange:y=>d({...u,validTo:new Date(y.target.value)}),required:!0})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:u.active,onChange:y=>d({...u,active:y.target.checked})})," ","Attiva"]})}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:u.showAsPopup,onChange:y=>d({...u,showAsPopup:y.target.checked})})," ","Mostra come Popup"]}),a.jsx("small",{style:{color:"#666",fontSize:"0.85rem",marginTop:"4px"},children:"La promozione apparir come popup all'apertura dell'app"})]})]}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[o?"Aggiorna":"Crea"," Promozione"]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:T,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"promotions-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Titolo"}),a.jsx("th",{children:"Periodo"}),a.jsx("th",{children:"Stato"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:t.map(y=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("strong",{children:y.title}),a.jsx("div",{className:"promotion-desc",children:y.description})]}),a.jsx("td",{children:a.jsxs("div",{className:"date-range",children:[I(y.validFrom)," - ",I(y.validTo)]})}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${y.active?"active":"inactive"}`,children:y.active?"Attiva":"Non attiva"})}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>m(y),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>v(y),title:"Elimina",children:""})]})]},y.id))})]}),t.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessuna promozione trovata"})})]})]})}function jy(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState("all"),[o,c]=b.useState(null);b.useEffect(()=>{u()},[]);const u=async()=>{r(!0);try{const y=await _D();e(y)}catch(y){console.error("Error loading orders:",y),alert("Errore nel caricamento degli ordini")}r(!1)},d=async(y,w)=>{try{await wD(y,w),e(t.map(C=>C.id===y?{...C,status:w}:C)),o&&o.id===y&&c({...o,status:w})}catch(C){console.error("Error updating order status:",C),alert("Errore nell'aggiornamento dello stato")}},f=y=>{switch(y){case"pending":return"In Attesa";case"confirmed":return"Confermato";case"preparing":return"In Preparazione";case"ready":return"Pronto";case"delivered":return"Consegnato";case"cancelled":return"Annullato";default:return y}},g=y=>{switch(y){case"pending":return"#ff9800";case"confirmed":return"#2196f3";case"preparing":return"#9c27b0";case"ready":return"#009688";case"delivered":return"#4caf50";case"cancelled":return"#f44336";default:return"#9e9e9e"}},m=y=>{switch(y){case"whatsapp":return"";case"phone":return"";case"web":return"";default:return""}},v=i==="all"?t:t.filter(y=>y.status===i),T=new Date;T.setHours(0,0,0,0);const I=t.filter(y=>{const w=new Date(y.createdAt);return w.setHours(0,0,0,0),w.getTime()===T.getTime()}),k={totalToday:I.length,whatsappToday:I.filter(y=>y.source==="whatsapp").length,phoneToday:I.filter(y=>y.source==="phone").length,revenueToday:I.reduce((y,w)=>y+(w.total||0),0)};return n?a.jsx("div",{className:"loading",children:"Caricamento ordini..."}):a.jsxs("div",{className:"order-management",children:[a.jsxs("div",{className:"om-header",children:[a.jsx("h2",{children:"Gestione Ordini"}),a.jsx("button",{className:"btn btn-outline",onClick:u,children:" Aggiorna"})]}),a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Ordini Oggi"}),a.jsx("p",{className:"stat-value",children:k.totalToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"WhatsApp"}),a.jsx("p",{className:"stat-value",children:k.whatsappToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Telefono"}),a.jsx("p",{className:"stat-value",children:k.phoneToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Incasso Oggi"}),a.jsxs("p",{className:"stat-value",children:["",k.revenueToday.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"om-content",children:[a.jsxs("div",{className:"orders-list-container",children:[a.jsx("div",{className:"filters",children:a.jsxs("select",{value:i,onChange:y=>s(y.target.value),className:"status-filter",children:[a.jsx("option",{value:"all",children:"Tutti gli stati"}),a.jsx("option",{value:"pending",children:"In Attesa"}),a.jsx("option",{value:"confirmed",children:"Confermati"}),a.jsx("option",{value:"preparing",children:"In Preparazione"}),a.jsx("option",{value:"ready",children:"Pronti"}),a.jsx("option",{value:"delivered",children:"Consegnati"}),a.jsx("option",{value:"cancelled",children:"Annullati"})]})}),a.jsx("div",{className:"orders-list",children:v.length===0?a.jsx("div",{className:"empty-state",children:"Nessun ordine trovato"}):v.map(y=>a.jsxs("div",{className:`order-card ${(o==null?void 0:o.id)===y.id?"selected":""}`,onClick:()=>c(y),children:[a.jsxs("div",{className:"order-card-header",children:[a.jsx("span",{className:"order-source",title:y.source,children:m(y.source)}),a.jsx("span",{className:"order-date",children:new Date(y.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),a.jsx("span",{className:"order-status-badge",style:{backgroundColor:g(y.status)},children:f(y.status)})]}),a.jsxs("div",{className:"order-card-body",children:[a.jsxs("h4",{children:[y.userProfile.firstName," ",y.userProfile.lastName]}),a.jsxs("p",{className:"order-total",children:["",y.total.toFixed(2)]})]})]},y.id))})]}),o?a.jsxs("div",{className:"order-details-panel",children:[a.jsxs("div",{className:"od-header",children:[a.jsx("h3",{children:"Dettaglio Ordine"}),a.jsx("button",{className:"close-details",onClick:()=>c(null),children:""})]}),a.jsxs("div",{className:"od-content",children:[a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Cliente"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Nome:"})," ",o.userProfile.firstName," ",o.userProfile.lastName]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Telefono:"})," ",o.userProfile.phone]}),o.deliveryAddress&&a.jsxs("p",{children:[a.jsx("strong",{children:"Indirizzo:"})," ",o.deliveryAddress]})]}),a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Prodotti"}),a.jsx("ul",{className:"od-items",children:o.items.map((y,w)=>a.jsxs("li",{children:[a.jsxs("div",{className:"od-item-main",children:[a.jsxs("span",{children:[y.quantity,"x ",y.productName]}),a.jsxs("span",{children:["",(y.price*y.quantity).toFixed(2)]})]}),y.modifications&&y.modifications.length>0&&a.jsx("div",{className:"od-item-mods",children:y.modifications.map(C=>`+ ${C.name}`).join(", ")}),y.notes&&a.jsxs("div",{className:"od-item-notes",children:[" ",y.notes]})]},w))}),a.jsxs("div",{className:"od-total",children:[a.jsx("span",{children:"Totale"}),a.jsxs("span",{children:["",o.total.toFixed(2)]})]})]}),o.notes&&a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Note Ordine"}),a.jsx("p",{children:o.notes})]}),a.jsxs("div",{className:"od-actions",children:[a.jsx("h4",{children:"Aggiorna Stato"}),a.jsxs("div",{className:"status-buttons",children:[a.jsx("button",{className:`btn-status ${o.status==="confirmed"?"active":""}`,onClick:()=>d(o.id,"confirmed"),style:{borderColor:"#2196f3",color:"#2196f3"},children:"Conferma"}),a.jsx("button",{className:`btn-status ${o.status==="preparing"?"active":""}`,onClick:()=>d(o.id,"preparing"),style:{borderColor:"#9c27b0",color:"#9c27b0"},children:"In Prep."}),a.jsx("button",{className:`btn-status ${o.status==="ready"?"active":""}`,onClick:()=>d(o.id,"ready"),style:{borderColor:"#009688",color:"#009688"},children:"Pronto"}),a.jsx("button",{className:`btn-status ${o.status==="delivered"?"active":""}`,onClick:()=>d(o.id,"delivered"),style:{borderColor:"#4caf50",color:"#4caf50"},children:"Consegnato"}),a.jsx("button",{className:`btn-status ${o.status==="cancelled"?"active":""}`,onClick:()=>d(o.id,"cancelled"),style:{borderColor:"#f44336",color:"#f44336"},children:"Annulla"})]})]})]})]}):a.jsx("div",{className:"order-details-placeholder",children:a.jsx("p",{children:"Seleziona un ordine per visualizzare i dettagli"})})]})]})}function eO(){return a.jsxs("div",{className:"cassa-cloud-settings",children:[a.jsx("h2",{children:" Configurazione Cassa in Cloud"}),a.jsxs("div",{className:"info-section",style:{padding:"20px",backgroundColor:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107"},children:[a.jsx("h3",{children:" Configurazione Spostata nel Backend"}),a.jsx("p",{children:"Per motivi di sicurezza, l'API Key di Cassa in Cloud non viene pi configurata nel frontend dell'app."}),a.jsx("p",{style:{marginTop:"15px"},children:a.jsx("strong",{children:"La configurazione  ora gestita tramite Firebase Functions:"})}),a.jsxs("ol",{style:{marginTop:"10px",marginLeft:"20px"},children:[a.jsx("li",{children:"Apri il terminale nella cartella del progetto"}),a.jsxs("li",{children:["Esegui il comando:",a.jsx("code",{style:{display:"block",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px",marginTop:"5px",fontFamily:"monospace"},children:'firebase functions:config:set cassanova.api_key="TUA_API_KEY"'})]}),a.jsxs("li",{children:["Deploy delle functions:",a.jsx("code",{style:{display:"block",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px",marginTop:"5px",fontFamily:"monospace"},children:"firebase deploy --only functions"})]})]}),a.jsx("p",{style:{marginTop:"15px",fontSize:"0.9em",color:"#666"},children:" Questa modifica garantisce che l'API Key non sia mai esposta al codice frontend e quindi non sia visibile agli utenti."})]}),a.jsxs("div",{className:"api-info",style:{marginTop:"20px"},children:[a.jsx("h3",{children:" Informazioni Tecniche"}),a.jsxs("div",{className:"info-grid",children:[a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"Program ID ZeroSei 24/25:"}),a.jsx("code",{children:"3159"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"URL Base API:"}),a.jsx("code",{children:"https://api.cassanova.com"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"API Version:"}),a.jsx("code",{children:"2.0.0"})]})]})]})]})}const Us={colorPrimary:"#E74C3C",colorPrimaryDark:"#C0392B",colorPrimaryLight:"#EC7063",colorSecondary:"#27AE60",colorSecondaryDark:"#229954",colorSecondaryLight:"#58D68D",colorAccent:"#F39C12",colorAccentDark:"#D68910",colorBg:"#FFFFFF",colorBgSecondary:"#F8F9FA",colorBgTertiary:"#ECF0F1",colorText:"#2C3E50",colorTextSecondary:"#7F8C8D",colorTextLight:"#95A5A6",colorBorder:"#E0E0E0",fontSizeBase:"1rem",fontSizeSm:"0.875rem",fontSizeLg:"1.125rem",fontSizeXl:"1.25rem",fontSize2xl:"1.5rem",fontSize3xl:"2rem",fontSize4xl:"2.5rem",spacingSm:"0.5rem",spacingMd:"1rem",spacingLg:"1.5rem",spacingXl:"2rem",spacing2xl:"3rem",radiusSm:"0.25rem",radiusMd:"0.5rem",radiusLg:"1rem",radiusXl:"1.5rem",iconOrders:"",iconProducts:"",iconIngredients:"",iconCategories:"",iconPromotions:"",iconCustomers:"",iconSettings:"",statusBarColor:"#000000",statusBarStyle:"black"};function tO(){const[t,e]=b.useState(Us),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState("colors");b.useEffect(()=>{u()},[]),b.useEffect(()=>{d(t)},[t]);const u=async()=>{r(!0);try{const v=ce(G,"config","theme"),T=await fn(v);if(T.exists()){const I={...Us,...T.data()};e(I),d(I)}}catch(v){console.error("Error loading theme:",v)}r(!1)},d=v=>{const T=document.documentElement;T.style.setProperty("--color-primary",v.colorPrimary),T.style.setProperty("--color-primary-dark",v.colorPrimaryDark),T.style.setProperty("--color-primary-light",v.colorPrimaryLight),T.style.setProperty("--color-secondary",v.colorSecondary),T.style.setProperty("--color-secondary-dark",v.colorSecondaryDark),T.style.setProperty("--color-secondary-light",v.colorSecondaryLight),T.style.setProperty("--color-accent",v.colorAccent),T.style.setProperty("--color-accent-dark",v.colorAccentDark),T.style.setProperty("--color-bg",v.colorBg),T.style.setProperty("--color-bg-secondary",v.colorBgSecondary),T.style.setProperty("--color-bg-tertiary",v.colorBgTertiary),T.style.setProperty("--color-text",v.colorText),T.style.setProperty("--color-text-secondary",v.colorTextSecondary),T.style.setProperty("--color-text-light",v.colorTextLight),T.style.setProperty("--color-border",v.colorBorder),T.style.setProperty("--font-size-base",v.fontSizeBase),T.style.setProperty("--font-size-sm",v.fontSizeSm),T.style.setProperty("--font-size-lg",v.fontSizeLg),T.style.setProperty("--font-size-xl",v.fontSizeXl),T.style.setProperty("--font-size-2xl",v.fontSize2xl),T.style.setProperty("--font-size-3xl",v.fontSize3xl),T.style.setProperty("--font-size-4xl",v.fontSize4xl),T.style.setProperty("--spacing-sm",v.spacingSm),T.style.setProperty("--spacing-md",v.spacingMd),T.style.setProperty("--spacing-lg",v.spacingLg),T.style.setProperty("--spacing-xl",v.spacingXl),T.style.setProperty("--spacing-2xl",v.spacing2xl),T.style.setProperty("--radius-sm",v.radiusSm),T.style.setProperty("--radius-md",v.radiusMd),T.style.setProperty("--radius-lg",v.radiusLg),T.style.setProperty("--radius-xl",v.radiusXl)},f=async()=>{s(!0);try{await Nr(ce(G,"config","theme"),{...t,updatedAt:new Date}),alert("Tema salvato con successo! ")}catch(v){console.error("Error saving theme:",v),alert("Errore nel salvataggio del tema")}s(!1)},g=async()=>{if(confirm("Sei sicuro di voler ripristinare il tema predefinito?")){e(Us),d(Us);try{await Nr(ce(G,"config","theme"),{...Us,updatedAt:new Date}),alert("Tema ripristinato! ")}catch(v){console.error("Error resetting theme:",v)}}},m=(v,T)=>{e(I=>({...I,[v]:T}))};return n?a.jsx("div",{className:"loading",children:"Caricamento tema..."}):a.jsxs("div",{className:"theme-customizer",children:[a.jsxs("div",{className:"theme-header",children:[a.jsx("h2",{children:" Personalizzazione Tema"}),a.jsx("p",{className:"theme-description",children:"Personalizza tutti gli aspetti estetici dell'applicazione"})]}),a.jsxs("div",{className:"theme-tabs",children:[a.jsx("button",{className:`theme-tab ${o==="colors"?"active":""}`,onClick:()=>c("colors"),children:" Colori"}),a.jsx("button",{className:`theme-tab ${o==="typography"?"active":""}`,onClick:()=>c("typography"),children:" Tipografia"}),a.jsx("button",{className:`theme-tab ${o==="spacing"?"active":""}`,onClick:()=>c("spacing"),children:" Spaziature"}),a.jsx("button",{className:`theme-tab ${o==="radius"?"active":""}`,onClick:()=>c("radius"),children:" Arrotondamenti"}),a.jsx("button",{className:`theme-tab ${o==="icons"?"active":""}`,onClick:()=>c("icons"),children:" Icone Admin"})]}),a.jsxs("div",{className:"theme-content",children:[o==="colors"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Colori Primari"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Primario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimary,onChange:v=>m("colorPrimary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimary,onChange:v=>m("colorPrimary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Primario Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimaryDark,onChange:v=>m("colorPrimaryDark",v.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimaryDark,onChange:v=>m("colorPrimaryDark",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Primario Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimaryLight,onChange:v=>m("colorPrimaryLight",v.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimaryLight,onChange:v=>m("colorPrimaryLight",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Secondari"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondary,onChange:v=>m("colorSecondary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondary,onChange:v=>m("colorSecondary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Secondario Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondaryDark,onChange:v=>m("colorSecondaryDark",v.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondaryDark,onChange:v=>m("colorSecondaryDark",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Secondario Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondaryLight,onChange:v=>m("colorSecondaryLight",v.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondaryLight,onChange:v=>m("colorSecondaryLight",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Accent"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Accent"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorAccent,onChange:v=>m("colorAccent",v.target.value)}),a.jsx("input",{type:"text",value:t.colorAccent,onChange:v=>m("colorAccent",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Accent Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorAccentDark,onChange:v=>m("colorAccentDark",v.target.value)}),a.jsx("input",{type:"text",value:t.colorAccentDark,onChange:v=>m("colorAccentDark",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Sfondo"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Principale"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBg,onChange:v=>m("colorBg",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBg,onChange:v=>m("colorBg",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBgSecondary,onChange:v=>m("colorBgSecondary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBgSecondary,onChange:v=>m("colorBgSecondary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Terziario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBgTertiary,onChange:v=>m("colorBgTertiary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBgTertiary,onChange:v=>m("colorBgTertiary",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Testo"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Principale"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorText,onChange:v=>m("colorText",v.target.value)}),a.jsx("input",{type:"text",value:t.colorText,onChange:v=>m("colorText",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorTextSecondary,onChange:v=>m("colorTextSecondary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorTextSecondary,onChange:v=>m("colorTextSecondary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorTextLight,onChange:v=>m("colorTextLight",v.target.value)}),a.jsx("input",{type:"text",value:t.colorTextLight,onChange:v=>m("colorTextLight",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Altri Colori"}),a.jsx("div",{className:"color-grid",children:a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Bordi"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBorder,onChange:v=>m("colorBorder",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBorder,onChange:v=>m("colorBorder",v.target.value),className:"color-text-input"})]})]})}),a.jsx("h3",{children:" Status Bar Mobile"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Status Bar"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.statusBarColor||"#000000",onChange:v=>m("statusBarColor",v.target.value)}),a.jsx("input",{type:"text",value:t.statusBarColor||"#000000",onChange:v=>m("statusBarColor",v.target.value),className:"color-text-input"})]}),a.jsx("p",{className:"hint",children:" Colore della barra superiore del telefono"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Stile Status Bar iOS"}),a.jsxs("select",{value:t.statusBarStyle||"black",onChange:v=>m("statusBarStyle",v.target.value),className:"select-input",children:[a.jsx("option",{value:"default",children:"Default (bianco)"}),a.jsx("option",{value:"black",children:"Black (nero)"}),a.jsx("option",{value:"black-translucent",children:"Black Translucent"})]}),a.jsx("p",{className:"hint",children:" Stile per iPhone/iPad"})]})]})]}),o==="typography"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Dimensioni Font"}),a.jsxs("div",{className:"typography-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Base (16px default)"}),a.jsx("input",{type:"text",value:t.fontSizeBase,onChange:v=>m("fontSizeBase",v.target.value),placeholder:"1rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Small"}),a.jsx("input",{type:"text",value:t.fontSizeSm,onChange:v=>m("fontSizeSm",v.target.value),placeholder:"0.875rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Large"}),a.jsx("input",{type:"text",value:t.fontSizeLg,onChange:v=>m("fontSizeLg",v.target.value),placeholder:"1.125rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font XL"}),a.jsx("input",{type:"text",value:t.fontSizeXl,onChange:v=>m("fontSizeXl",v.target.value),placeholder:"1.25rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 2XL"}),a.jsx("input",{type:"text",value:t.fontSize2xl,onChange:v=>m("fontSize2xl",v.target.value),placeholder:"1.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 3XL"}),a.jsx("input",{type:"text",value:t.fontSize3xl,onChange:v=>m("fontSize3xl",v.target.value),placeholder:"2rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 4XL"}),a.jsx("input",{type:"text",value:t.fontSize4xl,onChange:v=>m("fontSize4xl",v.target.value),placeholder:"2.5rem"})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 1rem, 1.5rem) o px (es: 16px, 24px)"})]}),o==="spacing"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Spaziature"}),a.jsxs("div",{className:"spacing-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Small"}),a.jsx("input",{type:"text",value:t.spacingSm,onChange:v=>m("spacingSm",v.target.value),placeholder:"0.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Medium"}),a.jsx("input",{type:"text",value:t.spacingMd,onChange:v=>m("spacingMd",v.target.value),placeholder:"1rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Large"}),a.jsx("input",{type:"text",value:t.spacingLg,onChange:v=>m("spacingLg",v.target.value),placeholder:"1.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing XL"}),a.jsx("input",{type:"text",value:t.spacingXl,onChange:v=>m("spacingXl",v.target.value),placeholder:"2rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing 2XL"}),a.jsx("input",{type:"text",value:t.spacing2xl,onChange:v=>m("spacing2xl",v.target.value),placeholder:"3rem"})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 1rem, 2rem) o px (es: 16px, 32px)"})]}),o==="radius"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Arrotondamenti Bordi"}),a.jsxs("div",{className:"radius-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Small"}),a.jsx("input",{type:"text",value:t.radiusSm,onChange:v=>m("radiusSm",v.target.value),placeholder:"0.25rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusSm}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Medium"}),a.jsx("input",{type:"text",value:t.radiusMd,onChange:v=>m("radiusMd",v.target.value),placeholder:"0.5rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusMd}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Large"}),a.jsx("input",{type:"text",value:t.radiusLg,onChange:v=>m("radiusLg",v.target.value),placeholder:"1rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusLg}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius XL"}),a.jsx("input",{type:"text",value:t.radiusXl,onChange:v=>m("radiusXl",v.target.value),placeholder:"1.5rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusXl}})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 0.5rem, 1rem) o px (es: 8px, 16px)"})]}),o==="icons"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Icone Sidebar Admin"}),a.jsxs("div",{className:"icons-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Ordini"}),a.jsx("input",{type:"text",value:t.iconOrders,onChange:v=>m("iconOrders",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconOrders})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Prodotti"}),a.jsx("input",{type:"text",value:t.iconProducts,onChange:v=>m("iconProducts",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconProducts})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Ingredienti"}),a.jsx("input",{type:"text",value:t.iconIngredients,onChange:v=>m("iconIngredients",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconIngredients})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Categorie"}),a.jsx("input",{type:"text",value:t.iconCategories,onChange:v=>m("iconCategories",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconCategories})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Promozioni"}),a.jsx("input",{type:"text",value:t.iconPromotions,onChange:v=>m("iconPromotions",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconPromotions})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Clienti"}),a.jsx("input",{type:"text",value:t.iconCustomers,onChange:v=>m("iconCustomers",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconCustomers})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Impostazioni"}),a.jsx("input",{type:"text",value:t.iconSettings,onChange:v=>m("iconSettings",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconSettings})]})]}),a.jsx("p",{className:"hint",children:" Usa emoji o caratteri speciali (max 2 caratteri)"})]})]}),a.jsxs("div",{className:"theme-actions",children:[a.jsx("button",{className:"btn-reset",onClick:g,disabled:i,children:" Ripristina Default"}),a.jsx("button",{className:"btn-save",onClick:f,disabled:i,children:i?" Salvataggio...":" Salva Modifiche"})]})]})}const zs={heroTitle:"Benvenuto da ZeroSei ",heroSubtitle:"La migliore pizza napoletana d'asporto della citt",featuresTitle:"Perch scegliere ZeroSei?",features:[{id:"feature1",icon:"",title:"Forno a Legna",description:"Pizza cotta nel tradizionale forno a legna"},{id:"feature2",icon:"",title:"Ingredienti Freschi",description:"Solo ingredienti di prima qualit"},{id:"feature3",icon:"",title:"Servizio Veloce",description:"Pronta in 15-20 minuti"},{id:"feature4",icon:"",title:"Ricetta Napoletana",description:"Autentica tradizione partenopea"}],buttons:[{id:"menu",icon:"",title:"Men",description:"Scopri le nostre pizze",color:"#E74C3C",visible:!0,order:1},{id:"phone",icon:"",title:"Chiama Ora",description:"Contattaci telefonicamente",color:"#27AE60",visible:!0,order:2},{id:"whatsapp",icon:"",title:"Ordina su WhatsApp",description:"Ordine rapido e facile",color:"#25D366",visible:!0,order:3},{id:"fidelity",icon:"",title:"Fidelity Card",description:"I tuoi punti fedelt",color:"#F39C12",visible:!0,order:4},{id:"news",icon:"",title:"Novit e Offerte",description:"Scopri le ultime promozioni",color:"#9B59B6",visible:!0,order:5}]};function nO(){const[t,e]=b.useState(zs),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null);b.useEffect(()=>{u()},[]);const u=async()=>{var x;r(!0);try{const L=ce(G,"config","home"),D=await fn(L);if(D.exists()){const S=D.data(),_=new Set(((x=S.buttons)==null?void 0:x.map(N=>N.id))||[]),A=zs.buttons.filter(N=>!_.has(N.id)),R=[...S.buttons||[],...A];e({...zs,...S,buttons:R})}}catch(L){console.error("Error loading home config:",L)}r(!1)},d=async()=>{s(!0);try{const x=t.buttons.map(L=>{const D={...L};return Object.keys(D).forEach(S=>{D[S]===void 0&&delete D[S]}),D});await Nr(ce(G,"config","home"),{heroTitle:t.heroTitle,heroSubtitle:t.heroSubtitle,featuresTitle:t.featuresTitle,features:t.features,buttons:x,updatedAt:new Date}),alert(" Modifiche salvate con successo!")}catch(x){console.error("Error saving config:",x),alert(" Errore nel salvataggio")}s(!1)},f=async()=>{if(confirm("Sei sicuro di voler ripristinare le impostazioni predefinite?")){e(zs);try{await Nr(ce(G,"config","home"),{...zs,updatedAt:new Date}),alert(" Impostazioni ripristinate!")}catch(x){console.error("Error resetting:",x)}}},g=x=>{e(L=>({...L,heroTitle:x}))},m=x=>{e(L=>({...L,heroSubtitle:x}))},v=x=>{e(L=>({...L,featuresTitle:x}))},T=(x,L,D)=>{e(S=>({...S,features:(S.features||[]).map(_=>_.id===x?{..._,[L]:D}:_)}))},I=(x,L,D)=>{e(S=>({...S,buttons:S.buttons.map(_=>_.id===x?{..._,[L]:D}:_)}))},k=x=>{e(L=>({...L,buttons:L.buttons.map(D=>D.id===x?{...D,visible:!D.visible}:D)}))},y=(x,L)=>{const D=[...t.buttons],S=D.findIndex(_=>_.id===x);L==="up"&&S>0?[D[S],D[S-1]]=[D[S-1],D[S]]:L==="down"&&S<D.length-1&&([D[S],D[S+1]]=[D[S+1],D[S]]),D.forEach((_,A)=>{_.order=A+1}),e(_=>({..._,buttons:D}))},w=async(x,L)=>{var S;const D=(S=L.target.files)==null?void 0:S[0];if(D){c(x);try{const _=Cp(Mp,`home-buttons/${x}_${Date.now()}_${D.name}`);await Ip(_,D);const A=await Sp(_);I(x,"imageUrl",A),alert(" Immagine caricata con successo!")}catch(_){console.error("Error uploading image:",_),alert(" Errore nel caricamento dell'immagine")}c(null)}},C=x=>{confirm("Vuoi rimuovere l'immagine e tornare all'icona emoji?")&&I(x,"imageUrl",void 0)};return n?a.jsx("div",{className:"loading",children:"Caricamento..."}):a.jsxs("div",{className:"home-customizer",children:[a.jsxs("div",{className:"customizer-header",children:[a.jsx("h2",{children:" Personalizza Pagina Home"}),a.jsx("p",{className:"customizer-description",children:"Modifica testi, colori e visibilit dei bottoni della home page"})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:" Testi Principali"}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo Principale"}),a.jsx("input",{type:"text",value:t.heroTitle,onChange:x=>g(x.target.value),placeholder:"Benvenuto da ZeroSei "})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Sottotitolo"}),a.jsx("input",{type:"text",value:t.heroSubtitle,onChange:x=>m(x.target.value),placeholder:"La migliore pizza napoletana..."})]})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:" Bottoni Home"}),a.jsx("p",{className:"section-hint",children:"Personalizza i bottoni della home page. Puoi modificare testi, colori, icone e decidere quali mostrare."}),a.jsx("div",{className:"buttons-list",children:t.buttons.map((x,L)=>a.jsxs("div",{className:`button-card ${x.visible?"":"disabled"}`,children:[a.jsxs("div",{className:"button-card-header",children:[a.jsxs("div",{className:"button-preview",style:{backgroundColor:x.color},children:[x.imageUrl?a.jsx("img",{src:x.imageUrl,alt:x.title,className:"preview-image"}):a.jsx("span",{className:"preview-icon",children:x.icon}),a.jsxs("div",{className:"preview-text",children:[a.jsx("strong",{children:x.title}),a.jsx("small",{children:x.description})]})]}),a.jsxs("div",{className:"button-controls",children:[a.jsx("button",{className:"control-btn",onClick:()=>y(x.id,"up"),disabled:L===0,title:"Sposta su",children:""}),a.jsx("button",{className:"control-btn",onClick:()=>y(x.id,"down"),disabled:L===t.buttons.length-1,title:"Sposta gi",children:""}),a.jsx("button",{className:`control-btn ${x.visible?"visible":"hidden"}`,onClick:()=>k(x.id),title:x.visible?"Nascondi":"Mostra",children:x.visible?"":""})]})]}),a.jsxs("div",{className:"button-card-body",children:[a.jsxs("div",{className:"input-row",children:[a.jsxs("div",{className:"input-group small",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",value:x.icon,onChange:D=>I(x.id,"icon",D.target.value),maxLength:2})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo"}),a.jsx("input",{type:"text",value:x.title,onChange:D=>I(x.id,"title",D.target.value)})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:x.description,onChange:D=>I(x.id,"description",D.target.value)})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Immagine Personalizzata"}),x.imageUrl?a.jsxs("div",{className:"image-preview-container",children:[a.jsx("img",{src:x.imageUrl,alt:x.title,className:"uploaded-image-preview"}),a.jsx("button",{type:"button",className:"btn-remove-image",onClick:()=>C(x.id),children:" Rimuovi Immagine"})]}):a.jsxs("label",{className:"upload-image-btn",children:[o===x.id?" Caricamento...":" Carica Immagine",a.jsx("input",{type:"file",accept:"image/*",onChange:D=>w(x.id,D),disabled:o===x.id,hidden:!0})]}),a.jsx("small",{className:"hint-text",children:x.imageUrl?"L'immagine sostituisce l'icona emoji":"Carica un'immagine per sostituire l'emoji"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Colore"}),a.jsxs("div",{className:"color-picker-group",children:[a.jsx("input",{type:"color",value:x.color,onChange:D=>I(x.id,"color",D.target.value)}),a.jsx("input",{type:"text",value:x.color,onChange:D=>I(x.id,"color",D.target.value),className:"color-text"}),a.jsxs("div",{className:"color-presets",children:[a.jsx("button",{className:"preset-color",style:{backgroundColor:"#E74C3C"},onClick:()=>I(x.id,"color","#E74C3C"),title:"Rosso"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#27AE60"},onClick:()=>I(x.id,"color","#27AE60"),title:"Verde"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#25D366"},onClick:()=>I(x.id,"color","#25D366"),title:"WhatsApp"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#F39C12"},onClick:()=>I(x.id,"color","#F39C12"),title:"Arancione"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#3498DB"},onClick:()=>I(x.id,"color","#3498DB"),title:"Blu"})]})]})]})]})]},x.id))})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:' Sezione "Perch scegliere ZeroSei"'}),a.jsx("p",{className:"section-hint",children:"Personalizza il titolo e le 4 card che mostrano i punti di forza della pizzeria."}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo Sezione"}),a.jsx("input",{type:"text",value:t.featuresTitle||"",onChange:x=>v(x.target.value),placeholder:"Perch scegliere ZeroSei?"})]}),a.jsx("div",{className:"features-list",children:(t.features||[]).map(x=>a.jsxs("div",{className:"feature-card-edit",children:[a.jsxs("div",{className:"input-row",children:[a.jsxs("div",{className:"input-group small",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",value:x.icon,onChange:L=>T(x.id,"icon",L.target.value),maxLength:2})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo"}),a.jsx("input",{type:"text",value:x.title,onChange:L=>T(x.id,"title",L.target.value)})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:x.description,onChange:L=>T(x.id,"description",L.target.value)})]})]},x.id))})]}),a.jsxs("div",{className:"customizer-actions",children:[a.jsx("button",{className:"btn-reset",onClick:f,disabled:i,children:" Ripristina Default"}),a.jsx("button",{className:"btn-save",onClick:d,disabled:i,children:i?" Salvataggio...":" Salva Modifiche"})]})]})}function rO(){const[t,e]=b.useState("general"),[n,r]=b.useState(""),[i,s]=b.useState(60),[o,c]=b.useState(!1),[u,d]=b.useState(!0);b.useEffect(()=>{g()},[]),b.useEffect(()=>{n&&f(n)},[n]);const f=I=>{let k=document.querySelector("link[rel='icon']");k||(k=document.createElement("link"),k.rel="icon",document.head.appendChild(k)),k.href=I;let y=document.querySelector("link[rel='apple-touch-icon']");y||(y=document.createElement("link"),y.rel="apple-touch-icon",document.head.appendChild(y)),y.href=I},g=async()=>{d(!0);try{const I=ce(G,"config","general"),k=await fn(I);k.exists()&&(r(k.data().logoUrl||""),s(k.data().logoSize||60))}catch(I){console.error("Error loading settings:",I)}d(!1)},m=async I=>{var y;const k=(y=I.target.files)==null?void 0:y[0];if(k){c(!0);try{const w=Cp(Mp,`config/logo_${Date.now()}_${k.name}`);await Ip(w,k);const C=await Sp(w);r(C),f(C),await v(C,i)}catch(w){console.error("Error uploading image:",w),alert("Errore durante il caricamento dell'immagine")}c(!1)}},v=async(I,k)=>{try{await Nr(ce(G,"config","general"),{logoUrl:I,logoSize:k,updatedAt:new Date}),alert(" Impostazioni salvate!")}catch(y){console.error("Error saving settings:",y),alert(" Errore nel salvataggio")}},T=async I=>{s(I),n&&await v(n,I)};return u?a.jsx("div",{className:"settings-container",children:a.jsx("div",{className:"loading",children:"Caricamento..."})}):a.jsxs("div",{className:"settings-container",children:[a.jsx("h2",{className:"settings-title",children:" Impostazioni"}),a.jsxs("div",{className:"settings-tabs",children:[a.jsx("button",{className:`settings-tab ${t==="general"?"active":""}`,onClick:()=>e("general"),children:" Generale"}),a.jsx("button",{className:`settings-tab ${t==="home"?"active":""}`,onClick:()=>e("home"),children:" Pagina Home"}),a.jsx("button",{className:`settings-tab ${t==="theme"?"active":""}`,onClick:()=>e("theme"),children:" Tema Globale"})]}),a.jsxs("div",{className:"settings-tab-content",children:[t==="general"&&a.jsxs("div",{className:"tab-panel",children:[a.jsxs("div",{className:"settings-section",children:[a.jsx("h3",{children:" Logo Pizzeria"}),a.jsxs("div",{className:"logo-upload-container",children:[n&&a.jsx("div",{className:"logo-preview",children:a.jsx("img",{src:n,alt:"Logo",style:{height:`${i}px`}})}),a.jsxs("label",{className:"upload-button",children:[o?" Caricamento...":" Carica Logo",a.jsx("input",{type:"file",accept:"image/*",onChange:m,disabled:o,hidden:!0})]})]}),n&&a.jsxs("div",{className:"logo-size-control",children:[a.jsxs("label",{children:["Dimensione Logo: ",i,"px"]}),a.jsx("input",{type:"range",min:"30",max:"150",value:i,onChange:I=>T(Number(I.target.value))})]})]}),a.jsx(eO,{})]}),t==="home"&&a.jsx("div",{className:"tab-panel",children:a.jsx(nO,{})}),t==="theme"&&a.jsx("div",{className:"tab-panel",children:a.jsx(tO,{})})]})]})}function iO(){const[t,e]=b.useState([]),[n,r]=b.useState(null),[i,s]=b.useState(!1),[o,c]=b.useState(!0),[u,d]=b.useState({name:"",price:0,type:"add",available:!0,category:"Altro"});b.useEffect(()=>{f()},[]);const f=async()=>{c(!0);const y=await $0();e(y),c(!1)},g=y=>{r(y),d(y),s(!1)},m=()=>{s(!0),r(null),d({id:`m${Date.now()}`,name:"",price:0,type:"add",available:!0,category:"Altro"})},v=async()=>{if(!u.name||u.price===void 0){alert("Compila tutti i campi obbligatori");return}const y={id:u.id||`m${Date.now()}`,name:u.name,price:u.price,type:u.type||"add",available:u.available??!0,category:u.category||"Altro"};try{await DD(y),await f(),alert("Ingrediente salvato con successo!"),I()}catch(w){console.error("Error saving modification:",w),alert("Errore nel salvare l'ingrediente")}},T=async y=>{if(confirm("Sei sicuro di voler eliminare questo ingrediente?"))try{await OD(y),await f(),alert("Ingrediente eliminato con successo!")}catch(w){console.error("Error deleting modification:",w),alert("Errore nell'eliminare l'ingrediente")}},I=()=>{r(null),s(!1),d({name:"",price:0,type:"add",available:!0,category:"Altro"})},k=async y=>{const w=t.find(C=>C.id===y);if(w)try{await LD(y,!w.available),await f()}catch(C){console.error("Error toggling availability:",C),alert("Errore nell'aggiornare la disponibilit")}};return o?a.jsx("div",{className:"modification-management",children:a.jsx("p",{children:"Caricamento..."})}):a.jsxs("div",{className:"modification-management",children:[a.jsxs("div",{className:"management-header",children:[a.jsx("h2",{children:"Gestione Ingredienti Extra"}),a.jsx("button",{className:"btn btn-primary",onClick:m,children:"+ Aggiungi Ingrediente"})]}),(i||n)&&a.jsxs("div",{className:"modification-form",children:[a.jsx("h3",{children:i?"Nuovo Ingrediente":"Modifica Ingrediente"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:u.name,onChange:y=>d({...u,name:y.target.value}),placeholder:"Es: Mozzarella di Bufala"})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Prezzo () *"}),a.jsx("input",{type:"number",step:"0.50",min:"0",value:u.price,onChange:y=>d({...u,price:parseFloat(y.target.value)})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Categoria *"}),a.jsxs("select",{value:u.category,onChange:y=>d({...u,category:y.target.value}),children:[a.jsx("option",{value:"Formaggi",children:"Formaggi"}),a.jsx("option",{value:"Salumi",children:"Salumi"}),a.jsx("option",{value:"Verdure",children:"Verdure"}),a.jsx("option",{value:"Altro",children:"Altro"})]})]})]}),a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:u.available,onChange:y=>d({...u,available:y.target.checked})}),"Disponibile"]})}),a.jsxs("div",{className:"form-actions",children:[a.jsx("button",{className:"btn btn-secondary",onClick:I,children:"Annulla"}),a.jsx("button",{className:"btn btn-primary",onClick:v,children:"Salva"})]})]}),a.jsx("div",{className:"modifications-list",children:["Formaggi","Salumi","Verdure","Altro"].map(y=>{const w=t.filter(C=>C.category===y);return w.length===0?null:a.jsxs("div",{className:"category-section",children:[a.jsx("h3",{children:y}),a.jsx("div",{className:"modifications-grid",children:w.map(C=>a.jsxs("div",{className:`modification-card ${C.available?"":"unavailable"}`,children:[a.jsxs("div",{className:"mod-info",children:[a.jsx("h4",{children:C.name}),a.jsxs("p",{className:"mod-price",children:["",C.price.toFixed(2)]}),a.jsx("span",{className:`availability-badge ${C.available?"available":"unavailable"}`,children:C.available?"Disponibile":"Non disponibile"})]}),a.jsxs("div",{className:"mod-actions",children:[a.jsx("button",{className:"btn-icon",onClick:()=>k(C.id),title:C.available?"Disabilita":"Abilita",children:C.available?"":""}),a.jsx("button",{className:"btn-icon",onClick:()=>g(C),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon delete",onClick:()=>T(C.id),title:"Elimina",children:""})]})]},C.id))})]},y)})})]})}function sO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState("");b.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await yD();e(d)}catch(d){console.error("Error loading customers:",d),alert("Errore nel caricamento dei clienti")}finally{r(!1)}},c=t.filter(d=>{var I,k,y;const f=i.toLowerCase(),g=((I=d.firstName)==null?void 0:I.toLowerCase())||"",m=((k=d.lastName)==null?void 0:k.toLowerCase())||"",v=d.phone||"",T=((y=d.email)==null?void 0:y.toLowerCase())||"";return g.includes(f)||m.includes(f)||v.includes(i)||T.includes(f)}),u=t.reduce((d,f)=>d+(f.loyaltyPoints||0),0);return n?a.jsx("div",{className:"customer-management",children:a.jsxs("div",{className:"loading-state",children:[a.jsx("span",{className:"loading-spinner",children:""}),a.jsx("p",{children:"Caricamento clienti..."})]})}):a.jsxs("div",{className:"customer-management fade-in",children:[a.jsxs("div",{className:"customer-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("h2",{children:"Gestione Clienti"}),a.jsx("button",{onClick:o,className:"btn-icon",title:"Ricarica lista",children:""})]}),a.jsxs("div",{className:"customer-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-value",children:t.length}),a.jsx("span",{className:"stat-label",children:"Clienti Totali"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-value",children:u}),a.jsx("span",{className:"stat-label",children:"Punti Emessi"})]})]})]}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Cerca per nome, telefono o email...",value:i,onChange:d=>s(d.target.value),className:"search-input"})}),a.jsx("div",{className:"customers-table-container",children:c.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun cliente trovato."})}):a.jsxs("table",{className:"customers-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Cliente"}),a.jsx("th",{children:"Contatti"}),a.jsx("th",{children:"Punti Fedelt"}),a.jsx("th",{children:"Registrato il"}),a.jsx("th",{children:"Ultimo Accesso"})]})}),a.jsx("tbody",{children:c.map(d=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"customer-name",children:[d.firstName," ",d.lastName]})}),a.jsxs("td",{children:[a.jsxs("div",{className:"customer-phone",children:[" ",d.phone]}),a.jsxs("div",{className:"customer-email",children:[" ",d.email]})]}),a.jsx("td",{children:a.jsxs("span",{className:"loyalty-points",children:[" ",d.loyaltyPoints||0]})}),a.jsx("td",{children:a.jsx("span",{className:"registration-date",children:d.createdAt?new Date(d.createdAt).toLocaleDateString("it-IT"):"-"})}),a.jsx("td",{children:a.jsx("span",{className:"registration-date",children:d.lastAccess?new Date(d.lastAccess).toLocaleDateString("it-IT")+" "+new Date(d.lastAccess).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}):"-"})})]},d.id))})]})})]})}const Xa=[{id:"reward1",name:"Bibita in omaggio",description:"Una bibita a scelta",pointsRequired:100,imageUrl:"",available:!0},{id:"reward2",name:"Pizza Margherita",description:"Pizza Margherita omaggio",pointsRequired:200,imageUrl:"",available:!0},{id:"reward3",name:"Dolce a scelta",description:"Un dolce della casa",pointsRequired:150,imageUrl:"",available:!0}];function oO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState({name:"",description:"",pointsRequired:100,imageUrl:""});b.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const x=ce(G,"config","rewards"),L=await fn(x);if(L.exists()){const D=L.data();e(D.rewards||Xa)}else e(Xa),await g(Xa)}catch(x){console.error("Error loading rewards:",x),e(Xa)}r(!1)},g=async x=>{s(!0);try{await Nr(ce(G,"config","rewards"),{rewards:x,updatedAt:new Date}),e(x),alert(" Premi salvati con successo!")}catch(L){console.error("Error saving rewards:",L),alert(" Errore nel salvataggio")}s(!1)},m=()=>{if(!u.name||u.pointsRequired<=0){alert("Inserisci nome e punti validi");return}const x={id:`reward_${Date.now()}`,name:u.name,description:u.description,pointsRequired:u.pointsRequired,imageUrl:u.imageUrl,available:!0};g([...t,x]),C()},v=()=>{if(!o||!u.name||u.pointsRequired<=0){alert("Inserisci dati validi");return}const x=t.map(L=>L.id===o?{...L,...u}:L);g(x),C()},T=x=>{c(x.id),d({name:x.name,description:x.description,pointsRequired:x.pointsRequired,imageUrl:x.imageUrl||""})},I=x=>{if(confirm("Sei sicuro di voler eliminare questo premio?")){const L=t.filter(D=>D.id!==x);g(L)}},k=x=>{const L=t.map(D=>D.id===x?{...D,available:!D.available}:D);g(L)},y=x=>{if(x===0)return;const L=[...t];[L[x],L[x-1]]=[L[x-1],L[x]],g(L)},w=x=>{if(x===t.length-1)return;const L=[...t];[L[x],L[x+1]]=[L[x+1],L[x]],g(L)},C=()=>{c(null),d({name:"",description:"",pointsRequired:100,imageUrl:""})};return n?a.jsx("div",{className:"rewards-management",children:a.jsx("div",{className:"loading",children:"Caricamento..."})}):a.jsxs("div",{className:"rewards-management",children:[a.jsxs("div",{className:"rewards-header",children:[a.jsx("h2",{children:" Gestione Premi Fidelity"}),a.jsx("p",{className:"rewards-description",children:"Configura i premi che i clienti possono visualizzare nella loro Fidelity Card"})]}),a.jsxs("div",{className:"rewards-form",children:[a.jsx("h3",{children:o?"Modifica Premio":"Nuovo Premio"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Icona (Emoji)"}),a.jsx("input",{type:"text",value:u.imageUrl,onChange:x=>d({...u,imageUrl:x.target.value}),placeholder:"",maxLength:2})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome Premio *"}),a.jsx("input",{type:"text",value:u.name,onChange:x=>d({...u,name:x.target.value}),placeholder:"Es: Bibita in omaggio"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Punti Richiesti *"}),a.jsx("input",{type:"number",value:u.pointsRequired,onChange:x=>d({...u,pointsRequired:Number(x.target.value)}),min:"1"})]}),a.jsxs("div",{className:"form-group full-width",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:u.description,onChange:x=>d({...u,description:x.target.value}),placeholder:"Descrizione breve del premio"})]})]}),a.jsx("div",{className:"form-actions",children:o?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:v,className:"btn btn-primary",disabled:i,children:" Aggiorna"}),a.jsx("button",{onClick:C,className:"btn btn-outline",children:" Annulla"})]}):a.jsx("button",{onClick:m,className:"btn btn-primary",disabled:i,children:" Aggiungi Premio"})})]}),a.jsxs("div",{className:"rewards-list",children:[a.jsxs("h3",{children:["Premi Configurati (",t.length,")"]}),t.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun premio configurato. Aggiungi il primo premio!"})}):a.jsx("div",{className:"rewards-grid",children:t.map((x,L)=>a.jsxs("div",{className:`reward-card ${x.available?"":"inactive"}`,children:[a.jsx("div",{className:"reward-icon-large",children:x.imageUrl}),a.jsxs("div",{className:"reward-content",children:[a.jsx("h4",{children:x.name}),a.jsx("p",{className:"reward-desc",children:x.description}),a.jsxs("p",{className:"reward-points",children:[x.pointsRequired," Punti"]}),a.jsx("span",{className:`reward-status ${x.available?"active":"inactive"}`,children:x.available?" Attivo":" Disattivato"})]}),a.jsxs("div",{className:"reward-actions",children:[a.jsx("button",{onClick:()=>y(L),disabled:L===0,className:"btn-icon",title:"Sposta su",children:""}),a.jsx("button",{onClick:()=>w(L),disabled:L===t.length-1,className:"btn-icon",title:"Sposta gi",children:""}),a.jsx("button",{onClick:()=>k(x.id),className:"btn-icon",title:x.available?"Disattiva":"Attiva",children:x.available?"":""}),a.jsx("button",{onClick:()=>T(x),className:"btn-icon",title:"Modifica",children:""}),a.jsx("button",{onClick:()=>I(x.id),className:"btn-icon btn-danger",title:"Elimina",children:""})]})]},x.id))})]})]})}function aO(){const[t,e]=b.useState(""),[n,r]=b.useState(!1),[i,s]=b.useState(null),o=async()=>{var u;if(!t.trim()){s({type:"error",text:" Inserisci un codice"});return}r(!0),s(null);try{const d=t.trim().toUpperCase(),f=Be(G,"GeneratedCoupons"),g=Fn(f,Gt("code","==",d)),m=await zt(g);if(m.empty){s({type:"error",text:" Codice Inesistente",details:`Il codice "${d}" non  stato trovato nel sistema.`}),r(!1);return}const v=m.docs[0],T=v.data();if(T.status==="redeemed"){const I=(u=T.redeemedAt)==null?void 0:u.toDate(),k=I?I.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Data sconosciuta";s({type:"warning",text:" ATTENZIONE: Codice gi utilizzato in precedenza!",details:`Questo codice  stato gi riscattato il ${k}`}),r(!1);return}try{const I=new Date;I.setHours(0,0,0,0);const k=Fn(Be(G,"GeneratedCoupons"),Gt("userId","==",T.userId),Gt("status","==","redeemed"),Gt("redeemedAt",">=",I));if(!(await zt(k)).empty){s({type:"error",text:" LIMIT RAGGIUNTO",details:"Questo cliente ha gi utilizzato una promozione oggi. Limite di 1 al giorno."}),r(!1);return}}catch(I){console.error("Error checking daily limit:",I)}await fi(ce(G,"GeneratedCoupons",v.id),{status:"redeemed",redeemedAt:UT()}),s({type:"success",text:" CODICE VALIDO!",details:`Sconto Autorizzato per: ${T.offerTitle}`}),setTimeout(()=>{e(""),s(null)},3e3)}catch(d){console.error("Error validating coupon:",d),s({type:"error",text:" Errore nella validazione",details:"Si  verificato un errore. Riprova."})}r(!1)},c=u=>{u.key==="Enter"&&o()};return a.jsxs("div",{className:"coupon-validation",children:[a.jsxs("div",{className:"validation-header",children:[a.jsx("h2",{children:" Convalida Coupon"}),a.jsx("p",{className:"header-description",children:"Inserisci il codice cliente per verificare e convalidare lo sconto"})]}),a.jsxs("div",{className:"validation-form",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"coupon-code",children:"Codice Cliente"}),a.jsx("input",{id:"coupon-code",type:"text",value:t,onChange:u=>e(u.target.value),onKeyPress:c,placeholder:"es: ABC123",className:"code-input",maxLength:6,disabled:n,autoFocus:!0})]}),a.jsx("button",{className:"btn btn-primary btn-validate",onClick:o,disabled:n||!t.trim(),children:n?"Convalida in corso...":"CONVALIDA CODICE"})]}),i&&a.jsxs("div",{className:`validation-message ${i.type}`,children:[a.jsx("div",{className:"message-text",children:i.text}),i.details&&a.jsx("div",{className:"message-details",children:i.details})]}),a.jsxs("div",{className:"help-section",children:[a.jsx("h3",{children:" Come funziona"}),a.jsxs("ol",{children:[a.jsx("li",{children:"Il cliente mostra il codice da 6 caratteri"}),a.jsx("li",{children:"Inserisci il codice nel campo sopra"}),a.jsx("li",{children:'Click su "CONVALIDA CODICE"'}),a.jsx("li",{children:"Se il codice  valido, autorizza lo sconto"})]})]})]})}function W0(){const[t,e]=b.useState(null),[n,r]=b.useState(!0);b.useEffect(()=>{i()},[]);const i=async()=>{try{const o=ce(G,"config","theme"),c=await fn(o);if(c.exists()){const u=c.data();e(u),s(u)}}catch(o){console.error("Error loading theme:",o)}finally{r(!1)}},s=o=>{const c=document.documentElement;Object.entries(o).forEach(([u,d])=>{if(u.startsWith("color")){const f="--"+u.replace(/([A-Z])/g,"-$1").toLowerCase();c.style.setProperty(f,d)}else if(u.startsWith("fontSize")){const f="--font-size-"+u.replace("fontSize","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}else if(u.startsWith("spacing")){const f="--spacing-"+u.replace("spacing","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}else if(u.startsWith("radius")){const f="--radius-"+u.replace("radius","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}})};return{theme:t,loading:n,reload:i}}function lO({onLogout:t}){const e=jt(),[n,r]=b.useState("orders"),{theme:i}=W0(),s=()=>{t(),e("/admin/login")},o=()=>{switch(n){case"orders":return a.jsx(jy,{});case"products":return a.jsx(YD,{});case"modifications":return a.jsx(iO,{});case"categories":return a.jsx(JD,{});case"promotions":return a.jsx(ZD,{});case"fidelity":return a.jsx(oO,{});case"coupon-validation":return a.jsx(aO,{});case"settings":return a.jsx(rO,{});case"customers":return a.jsx(sO,{});default:return a.jsx(jy,{})}};return a.jsxs("div",{className:"admin-dashboard",children:[a.jsxs("div",{className:"admin-sidebar",children:[a.jsx("div",{className:"admin-logo",children:a.jsx("h2",{children:"ZeroSei Admin"})}),a.jsxs("nav",{className:"admin-nav",children:[a.jsxs("button",{className:`nav-item ${n==="orders"?"active":""}`,onClick:()=>r("orders"),children:[(i==null?void 0:i.iconOrders)||""," Ordini"]}),a.jsxs("button",{className:`nav-item ${n==="products"?"active":""}`,onClick:()=>r("products"),children:[(i==null?void 0:i.iconProducts)||""," Prodotti"]}),a.jsxs("button",{className:`nav-item ${n==="modifications"?"active":""}`,onClick:()=>r("modifications"),children:[(i==null?void 0:i.iconIngredients)||""," Ingredienti"]}),a.jsxs("button",{className:`nav-item ${n==="categories"?"active":""}`,onClick:()=>r("categories"),children:[(i==null?void 0:i.iconCategories)||""," Categorie"]}),a.jsxs("button",{className:`nav-item ${n==="promotions"?"active":""}`,onClick:()=>r("promotions"),children:[(i==null?void 0:i.iconPromotions)||""," Promozioni"]}),a.jsx("button",{className:`nav-item ${n==="fidelity"?"active":""}`,onClick:()=>r("fidelity"),children:" Premi Fidelity"}),a.jsx("button",{className:`nav-item ${n==="coupon-validation"?"active":""}`,onClick:()=>r("coupon-validation"),children:" Convalida Coupon"}),a.jsxs("button",{className:`nav-item ${n==="customers"?"active":""}`,onClick:()=>r("customers"),children:[(i==null?void 0:i.iconCustomers)||""," Clienti"]}),a.jsxs("button",{className:`nav-item ${n==="settings"?"active":""}`,onClick:()=>r("settings"),children:[(i==null?void 0:i.iconSettings)||""," Impostazioni"]})]}),a.jsx("div",{className:"admin-footer",children:a.jsx("button",{className:"btn-logout",onClick:s,children:" Logout"})})]}),a.jsx("div",{className:"admin-content",children:o()})]})}function cO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(null),[o,c]=b.useState([]);b.useEffect(()=>{u()},[]);const u=async()=>{try{console.log(" Loading all products...");const d=await M0();console.log(" Products loaded:",d.length),console.log(" Products:",d),e(d),console.log(" Testing category query for pizze-classiche...");const f=await F0("pizze-classiche");console.log(" Category products loaded:",f.length),console.log(" Category products:",f),c(f)}catch(d){console.error(" Error loading products:",d),s(d.message||"Unknown error")}r(!1)};return n?a.jsx("div",{style:{padding:20},children:"Loading debug data..."}):i?a.jsxs("div",{style:{padding:20,color:"red"},children:["Error: ",i]}):a.jsxs("div",{style:{padding:20,fontFamily:"monospace"},children:[a.jsx("h1",{children:"Debug Products"}),a.jsxs("h2",{children:["All Products: ",t.length]}),a.jsxs("h2",{children:["Pizze Classiche: ",o.length]}),a.jsx("h3",{children:"Category Test Results:"}),a.jsx("pre",{children:JSON.stringify(o,null,2)}),a.jsx("h3",{children:"All Products:"}),a.jsx("pre",{children:JSON.stringify(t,null,2)})]})}function uO(){const[t,e]=b.useState({items:[],total:0}),[n,r]=b.useState(null),[i,s]=b.useState(!1);W0(),b.useEffect(()=>{const u=nE();e(u);const d=localStorage.getItem("user_profile");if(d){const g=JSON.parse(d);r(g),g.id&&!g.id.startsWith("temp_")&&Ph(g.id,{lastAccess:new Date}).catch(m=>console.error("Error updating last access:",m))}const f=localStorage.getItem("admin_authenticated");s(f==="true")},[]);const o=()=>{s(!0)},c=()=>{localStorage.removeItem("admin_authenticated"),s(!1)};return a.jsx(QC,{children:a.jsxs(rv,{children:[a.jsx(gt,{path:"/admin/login",element:i?a.jsx(nv,{to:"/admin/dashboard",replace:!0}):a.jsx(XD,{onLogin:o})}),a.jsx(gt,{path:"/admin/*",element:i?a.jsx(lO,{onLogout:c}):a.jsx(nv,{to:"/admin/login",replace:!0})}),a.jsx(gt,{path:"*",element:a.jsx(SD,{cart:t,userProfile:n,children:a.jsxs(rv,{children:[a.jsx(gt,{path:"/",element:a.jsx(kD,{})}),a.jsx(gt,{path:"/menu",element:a.jsx(jD,{})}),a.jsx(gt,{path:"/menu/:category",element:a.jsx(bD,{cart:t,setCart:e})}),a.jsx(gt,{path:"/product/:id",element:a.jsx(VD,{cart:t,setCart:e})}),a.jsx(gt,{path:"/cart",element:a.jsx(MD,{cart:t,setCart:e,userProfile:n})}),a.jsx(gt,{path:"/profile",element:a.jsx(FD,{userProfile:n,setUserProfile:r})}),a.jsx(gt,{path:"/news",element:a.jsx(UD,{})}),a.jsx(gt,{path:"/offer/:id",element:a.jsx(zD,{userProfile:n})}),a.jsx(gt,{path:"/fidelity",element:a.jsx(KD,{userProfile:n})}),a.jsx(gt,{path:"/debug",element:a.jsx(cO,{})})]})})})]})})}ld.createRoot(document.getElementById("root")).render(a.jsx($y.StrictMode,{children:a.jsx(uO,{})}));
