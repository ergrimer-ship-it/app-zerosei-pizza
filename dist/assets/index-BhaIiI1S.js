function Ax(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Px(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vy={exports:{}},oc={},My={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bo=Symbol.for("react.element"),Rx=Symbol.for("react.portal"),kx=Symbol.for("react.fragment"),jx=Symbol.for("react.strict_mode"),bx=Symbol.for("react.profiler"),Dx=Symbol.for("react.provider"),Ox=Symbol.for("react.context"),Lx=Symbol.for("react.forward_ref"),Vx=Symbol.for("react.suspense"),Mx=Symbol.for("react.memo"),Ux=Symbol.for("react.lazy"),Hm=Symbol.iterator;function Fx(t){return t===null||typeof t!="object"?null:(t=Hm&&t[Hm]||t["@@iterator"],typeof t=="function"?t:null)}var Uy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fy=Object.assign,zy={};function ss(t,e,n){this.props=t,this.context=e,this.refs=zy,this.updater=n||Uy}ss.prototype.isReactComponent={};ss.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ss.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function By(){}By.prototype=ss.prototype;function Dh(t,e,n){this.props=t,this.context=e,this.refs=zy,this.updater=n||Uy}var Oh=Dh.prototype=new By;Oh.constructor=Dh;Fy(Oh,ss.prototype);Oh.isPureReactComponent=!0;var Km=Array.isArray,$y=Object.prototype.hasOwnProperty,Lh={current:null},qy={key:!0,ref:!0,__self:!0,__source:!0};function Wy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$y.call(e,r)&&!qy.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Bo,type:t,key:s,ref:o,props:i,_owner:Lh.current}}function zx(t,e){return{$$typeof:Bo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bo}function Bx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gm=/\/+/g;function wu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bx(""+t.key):e.toString(36)}function Xa(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bo:case Rx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+wu(o,0):r,Km(i)?(n="",t!=null&&(n=t.replace(Gm,"$&/")+"/"),Xa(i,e,n,"",function(d){return d})):i!=null&&(Vh(i)&&(i=zx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Km(t))for(var c=0;c<t.length;c++){s=t[c];var u=r+wu(s,c);o+=Xa(s,e,n,u,i)}else if(u=Fx(t),typeof u=="function")for(t=u.call(t),c=0;!(s=t.next()).done;)s=s.value,u=r+wu(s,c++),o+=Xa(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sa(t,e,n){if(t==null)return t;var r=[],i=0;return Xa(t,r,"","",function(s){return e.call(n,s,i++)}),r}function $x(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pt={current:null},Ya={transition:null},qx={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Ya,ReactCurrentOwner:Lh};function Hy(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Sa,forEach:function(t,e,n){Sa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sa(t,function(){e++}),e},toArray:function(t){return Sa(t,function(e){return e})||[]},only:function(t){if(!Vh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=ss;ee.Fragment=kx;ee.Profiler=bx;ee.PureComponent=Dh;ee.StrictMode=jx;ee.Suspense=Vx;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qx;ee.act=Hy;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Fy({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Lh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)$y.call(e,u)&&!qy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Bo,type:t.type,key:i,ref:s,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:Ox,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Dx,_context:t},t.Consumer=t};ee.createElement=Wy;ee.createFactory=function(t){var e=Wy.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:Lx,render:t}};ee.isValidElement=Vh;ee.lazy=function(t){return{$$typeof:Ux,_payload:{_status:-1,_result:t},_init:$x}};ee.memo=function(t,e){return{$$typeof:Mx,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Ya.transition;Ya.transition={};try{t()}finally{Ya.transition=e}};ee.unstable_act=Hy;ee.useCallback=function(t,e){return pt.current.useCallback(t,e)};ee.useContext=function(t){return pt.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return pt.current.useDeferredValue(t)};ee.useEffect=function(t,e){return pt.current.useEffect(t,e)};ee.useId=function(){return pt.current.useId()};ee.useImperativeHandle=function(t,e,n){return pt.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return pt.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return pt.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return pt.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return pt.current.useReducer(t,e,n)};ee.useRef=function(t){return pt.current.useRef(t)};ee.useState=function(t){return pt.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return pt.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return pt.current.useTransition()};ee.version="18.3.1";My.exports=ee;var b=My.exports;const Ky=Px(b),Wx=Ax({__proto__:null,default:Ky},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hx=b,Kx=Symbol.for("react.element"),Gx=Symbol.for("react.fragment"),Qx=Object.prototype.hasOwnProperty,Xx=Hx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yx={key:!0,ref:!0,__self:!0,__source:!0};function Gy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Qx.call(e,r)&&!Yx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Kx,type:t,key:s,ref:o,props:i,_owner:Xx.current}}oc.Fragment=Gx;oc.jsx=Gy;oc.jsxs=Gy;Vy.exports=oc;var a=Vy.exports,ld={},Qy={exports:{}},Rt={},Xy={exports:{}},Yy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var Z=B.length;B.push(Q);e:for(;0<Z;){var we=Z-1>>>1,de=B[we];if(0<i(de,Q))B[we]=Q,B[Z]=de,Z=we;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],Z=B.pop();if(Z!==Q){B[0]=Z;e:for(var we=0,de=B.length,Re=de>>>1;we<Re;){var fn=2*(we+1)-1,pn=B[fn],mn=fn+1,gn=B[mn];if(0>i(pn,Z))mn<de&&0>i(gn,pn)?(B[we]=gn,B[mn]=Z,we=mn):(B[we]=pn,B[fn]=Z,we=fn);else if(mn<de&&0>i(gn,Z))B[we]=gn,B[mn]=Z,we=mn;else break e}}return Q}function i(B,Q){var Z=B.sortIndex-Q.sortIndex;return Z!==0?Z:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,g=3,v=!1,T=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=B)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function x(B){if(C=!1,S(B),!T)if(n(u)!==null)T=!0,gs(O);else{var Q=n(d);Q!==null&&hn(x,Q.startTime-B)}}function O(B,Q){T=!1,C&&(C=!1,y(_),_=-1),v=!0;var Z=g;try{for(S(Q),m=n(u);m!==null&&(!(m.expirationTime>Q)||B&&!N());){var we=m.callback;if(typeof we=="function"){m.callback=null,g=m.priorityLevel;var de=we(m.expirationTime<=Q);Q=t.unstable_now(),typeof de=="function"?m.callback=de:m===n(u)&&r(u),S(Q)}else r(u);m=n(u)}if(m!==null)var Re=!0;else{var fn=n(d);fn!==null&&hn(x,fn.startTime-Q),Re=!1}return Re}finally{m=null,g=Z,v=!1}}var j=!1,I=null,_=-1,A=5,R=-1;function N(){return!(t.unstable_now()-R<A)}function D(){if(I!==null){var B=t.unstable_now();R=B;var Q=!0;try{Q=I(!0,B)}finally{Q?P():(j=!1,I=null)}}else j=!1}var P;if(typeof E=="function")P=function(){E(D)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Rr=pe.port2;pe.port1.onmessage=D,P=function(){Rr.postMessage(null)}}else P=function(){k(D,0)};function gs(B){I=B,j||(j=!0,P())}function hn(B,Q){_=k(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){T||v||(T=!0,gs(O))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var Z=g;g=Q;try{return B()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=g;g=B;try{return Q()}finally{g=Z}},t.unstable_scheduleCallback=function(B,Q,Z){var we=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,B){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Z+de,B={id:f++,callback:Q,priorityLevel:B,startTime:Z,expirationTime:de,sortIndex:-1},Z>we?(B.sortIndex=Z,e(d,B),n(u)===null&&B===n(d)&&(C?(y(_),_=-1):C=!0,hn(x,Z-we))):(B.sortIndex=de,e(u,B),T||v||(T=!0,gs(O))),B},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(B){var Q=g;return function(){var Z=g;g=Q;try{return B.apply(this,arguments)}finally{g=Z}}}})(Yy);Xy.exports=Yy;var Jx=Xy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx=b,Pt=Jx;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jy=new Set,fo={};function ri(t,e){$i(t,e),$i(t+"Capture",e)}function $i(t,e){for(fo[t]=e,t=0;t<e.length;t++)Jy.add(e[t])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cd=Object.prototype.hasOwnProperty,eI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qm={},Xm={};function tI(t){return cd.call(Xm,t)?!0:cd.call(Qm,t)?!1:eI.test(t)?Xm[t]=!0:(Qm[t]=!0,!1)}function nI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rI(t,e,n,r){if(e===null||typeof e>"u"||nI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ge[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ge[e]=new mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ge[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ge[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ge[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ge[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ge[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ge[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ge[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mh=/[\-:]([a-z])/g;function Uh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mh,Uh);Ge[e]=new mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mh,Uh);Ge[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mh,Uh);Ge[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ge[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ge[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fh(t,e,n,r){var i=Ge.hasOwnProperty(e)?Ge[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rI(e,n,i,r)&&(n=null),r||i===null?tI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mn=Zx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ca=Symbol.for("react.element"),_i=Symbol.for("react.portal"),wi=Symbol.for("react.fragment"),zh=Symbol.for("react.strict_mode"),ud=Symbol.for("react.profiler"),Zy=Symbol.for("react.provider"),e_=Symbol.for("react.context"),Bh=Symbol.for("react.forward_ref"),dd=Symbol.for("react.suspense"),hd=Symbol.for("react.suspense_list"),$h=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),t_=Symbol.for("react.offscreen"),Ym=Symbol.iterator;function Rs(t){return t===null||typeof t!="object"?null:(t=Ym&&t[Ym]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,Eu;function Bs(t){if(Eu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eu=e&&e[1]||""}return`
`+Eu+t}var Tu=!1;function xu(t,e){if(!t||Tu)return"";Tu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,c=s.length-1;1<=o&&0<=c&&i[o]!==s[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==s[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==s[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Tu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bs(t):""}function iI(t){switch(t.tag){case 5:return Bs(t.type);case 16:return Bs("Lazy");case 13:return Bs("Suspense");case 19:return Bs("SuspenseList");case 0:case 2:case 15:return t=xu(t.type,!1),t;case 11:return t=xu(t.type.render,!1),t;case 1:return t=xu(t.type,!0),t;default:return""}}function fd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wi:return"Fragment";case _i:return"Portal";case ud:return"Profiler";case zh:return"StrictMode";case dd:return"Suspense";case hd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case e_:return(t.displayName||"Context")+".Consumer";case Zy:return(t._context.displayName||"Context")+".Provider";case Bh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $h:return e=t.displayName||null,e!==null?e:fd(t.type)||"Memo";case Wn:e=t._payload,t=t._init;try{return fd(t(e))}catch{}}return null}function sI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fd(e);case 8:return e===zh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function n_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oI(t){var e=n_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Na(t){t._valueTracker||(t._valueTracker=oI(t))}function r_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=n_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pd(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function i_(t,e){e=e.checked,e!=null&&Fh(t,"checked",e,!1)}function md(t,e){i_(t,e);var n=vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gd(t,e.type,n):e.hasOwnProperty("defaultValue")&&gd(t,e.type,vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gd(t,e,n){(e!=="number"||yl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $s=Array.isArray;function ji(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function vd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if($s(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vr(n)}}function s_(t,e){var n=vr(e.value),r=vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function o_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?o_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Aa,a_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aI=["Webkit","ms","Moz","O"];Object.keys(Ys).forEach(function(t){aI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ys[e]=Ys[t]})});function l_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ys.hasOwnProperty(t)&&Ys[t]?(""+e).trim():e+"px"}function c_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=l_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var lI=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _d(t,e){if(e){if(lI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function wd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ed=null;function qh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Td=null,bi=null,Di=null;function ng(t){if(t=Wo(t)){if(typeof Td!="function")throw Error(F(280));var e=t.stateNode;e&&(e=dc(e),Td(t.stateNode,t.type,e))}}function u_(t){bi?Di?Di.push(t):Di=[t]:bi=t}function d_(){if(bi){var t=bi,e=Di;if(Di=bi=null,ng(t),e)for(t=0;t<e.length;t++)ng(e[t])}}function h_(t,e){return t(e)}function f_(){}var Iu=!1;function p_(t,e,n){if(Iu)return t(e,n);Iu=!0;try{return h_(t,e,n)}finally{Iu=!1,(bi!==null||Di!==null)&&(f_(),d_())}}function mo(t,e){var n=t.stateNode;if(n===null)return null;var r=dc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var xd=!1;if(An)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){xd=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{xd=!1}function cI(t,e,n,r,i,s,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Js=!1,_l=null,wl=!1,Id=null,uI={onError:function(t){Js=!0,_l=t}};function dI(t,e,n,r,i,s,o,c,u){Js=!1,_l=null,cI.apply(uI,arguments)}function hI(t,e,n,r,i,s,o,c,u){if(dI.apply(this,arguments),Js){if(Js){var d=_l;Js=!1,_l=null}else throw Error(F(198));wl||(wl=!0,Id=d)}}function ii(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function m_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rg(t){if(ii(t)!==t)throw Error(F(188))}function fI(t){var e=t.alternate;if(!e){if(e=ii(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rg(i),t;if(s===r)return rg(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function g_(t){return t=fI(t),t!==null?v_(t):null}function v_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=v_(t);if(e!==null)return e;t=t.sibling}return null}var y_=Pt.unstable_scheduleCallback,ig=Pt.unstable_cancelCallback,pI=Pt.unstable_shouldYield,mI=Pt.unstable_requestPaint,je=Pt.unstable_now,gI=Pt.unstable_getCurrentPriorityLevel,Wh=Pt.unstable_ImmediatePriority,__=Pt.unstable_UserBlockingPriority,El=Pt.unstable_NormalPriority,vI=Pt.unstable_LowPriority,w_=Pt.unstable_IdlePriority,ac=null,nn=null;function yI(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(ac,t,void 0,(t.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:EI,_I=Math.log,wI=Math.LN2;function EI(t){return t>>>=0,t===0?32:31-(_I(t)/wI|0)|0}var Pa=64,Ra=4194304;function qs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=qs(c):(s&=o,s!==0&&(r=qs(s)))}else o=n&~i,o!==0?r=qs(o):s!==0&&(r=qs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ht(e),i=1<<n,r|=t[n],e&=~i;return r}function TI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ht(s),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=TI(c,e)):u<=e&&(t.expiredLanes|=c),s&=~c}}function Sd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function E_(){var t=Pa;return Pa<<=1,!(Pa&4194240)&&(Pa=64),t}function Su(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $o(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ht(e),t[e]=n}function II(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ht(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Hh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ht(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var le=0;function T_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var x_,Kh,I_,S_,C_,Cd=!1,ka=[],sr=null,or=null,ar=null,go=new Map,vo=new Map,Kn=[],SI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sg(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(e.pointerId)}}function js(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wo(e),e!==null&&Kh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function CI(t,e,n,r,i){switch(e){case"focusin":return sr=js(sr,t,e,n,r,i),!0;case"dragenter":return or=js(or,t,e,n,r,i),!0;case"mouseover":return ar=js(ar,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return go.set(s,js(go.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,vo.set(s,js(vo.get(s)||null,t,e,n,r,i)),!0}return!1}function N_(t){var e=Mr(t.target);if(e!==null){var n=ii(e);if(n!==null){if(e=n.tag,e===13){if(e=m_(n),e!==null){t.blockedOn=e,C_(t.priority,function(){I_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ja(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ed=r,n.target.dispatchEvent(r),Ed=null}else return e=Wo(n),e!==null&&Kh(e),t.blockedOn=n,!1;e.shift()}return!0}function og(t,e,n){Ja(t)&&n.delete(e)}function NI(){Cd=!1,sr!==null&&Ja(sr)&&(sr=null),or!==null&&Ja(or)&&(or=null),ar!==null&&Ja(ar)&&(ar=null),go.forEach(og),vo.forEach(og)}function bs(t,e){t.blockedOn===e&&(t.blockedOn=null,Cd||(Cd=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,NI)))}function yo(t){function e(i){return bs(i,t)}if(0<ka.length){bs(ka[0],t);for(var n=1;n<ka.length;n++){var r=ka[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sr!==null&&bs(sr,t),or!==null&&bs(or,t),ar!==null&&bs(ar,t),go.forEach(e),vo.forEach(e),n=0;n<Kn.length;n++)r=Kn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kn.length&&(n=Kn[0],n.blockedOn===null);)N_(n),n.blockedOn===null&&Kn.shift()}var Oi=Mn.ReactCurrentBatchConfig,xl=!0;function AI(t,e,n,r){var i=le,s=Oi.transition;Oi.transition=null;try{le=1,Gh(t,e,n,r)}finally{le=i,Oi.transition=s}}function PI(t,e,n,r){var i=le,s=Oi.transition;Oi.transition=null;try{le=4,Gh(t,e,n,r)}finally{le=i,Oi.transition=s}}function Gh(t,e,n,r){if(xl){var i=Nd(t,e,n,r);if(i===null)Ou(t,e,r,Il,n),sg(t,r);else if(CI(i,t,e,n,r))r.stopPropagation();else if(sg(t,r),e&4&&-1<SI.indexOf(t)){for(;i!==null;){var s=Wo(i);if(s!==null&&x_(s),s=Nd(t,e,n,r),s===null&&Ou(t,e,r,Il,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ou(t,e,r,null,n)}}var Il=null;function Nd(t,e,n,r){if(Il=null,t=qh(r),t=Mr(t),t!==null)if(e=ii(t),e===null)t=null;else if(n=e.tag,n===13){if(t=m_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Il=t,null}function A_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gI()){case Wh:return 1;case __:return 4;case El:case vI:return 16;case w_:return 536870912;default:return 16}default:return 16}}var er=null,Qh=null,Za=null;function P_(){if(Za)return Za;var t,e=Qh,n=e.length,r,i="value"in er?er.value:er.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Za=i.slice(t,1<r?1-r:void 0)}function el(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ja(){return!0}function ag(){return!1}function kt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ja:ag,this.isPropagationStopped=ag,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ja)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ja)},persist:function(){},isPersistent:ja}),e}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xh=kt(os),qo=xe({},os,{view:0,detail:0}),RI=kt(qo),Cu,Nu,Ds,lc=xe({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ds&&(Ds&&t.type==="mousemove"?(Cu=t.screenX-Ds.screenX,Nu=t.screenY-Ds.screenY):Nu=Cu=0,Ds=t),Cu)},movementY:function(t){return"movementY"in t?t.movementY:Nu}}),lg=kt(lc),kI=xe({},lc,{dataTransfer:0}),jI=kt(kI),bI=xe({},qo,{relatedTarget:0}),Au=kt(bI),DI=xe({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),OI=kt(DI),LI=xe({},os,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VI=kt(LI),MI=xe({},os,{data:0}),cg=kt(MI),UI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zI[t])?!!e[t]:!1}function Yh(){return BI}var $I=xe({},qo,{key:function(t){if(t.key){var e=UI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=el(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yh,charCode:function(t){return t.type==="keypress"?el(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?el(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qI=kt($I),WI=xe({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ug=kt(WI),HI=xe({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yh}),KI=kt(HI),GI=xe({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),QI=kt(GI),XI=xe({},lc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YI=kt(XI),JI=[9,13,27,32],Jh=An&&"CompositionEvent"in window,Zs=null;An&&"documentMode"in document&&(Zs=document.documentMode);var ZI=An&&"TextEvent"in window&&!Zs,R_=An&&(!Jh||Zs&&8<Zs&&11>=Zs),dg=" ",hg=!1;function k_(t,e){switch(t){case"keyup":return JI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ei=!1;function eS(t,e){switch(t){case"compositionend":return j_(e);case"keypress":return e.which!==32?null:(hg=!0,dg);case"textInput":return t=e.data,t===dg&&hg?null:t;default:return null}}function tS(t,e){if(Ei)return t==="compositionend"||!Jh&&k_(t,e)?(t=P_(),Za=Qh=er=null,Ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return R_&&e.locale!=="ko"?null:e.data;default:return null}}var nS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nS[t.type]:e==="textarea"}function b_(t,e,n,r){u_(r),e=Sl(e,"onChange"),0<e.length&&(n=new Xh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var eo=null,_o=null;function rS(t){q_(t,0)}function cc(t){var e=Ii(t);if(r_(e))return t}function iS(t,e){if(t==="change")return e}var D_=!1;if(An){var Pu;if(An){var Ru="oninput"in document;if(!Ru){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),Ru=typeof pg.oninput=="function"}Pu=Ru}else Pu=!1;D_=Pu&&(!document.documentMode||9<document.documentMode)}function mg(){eo&&(eo.detachEvent("onpropertychange",O_),_o=eo=null)}function O_(t){if(t.propertyName==="value"&&cc(_o)){var e=[];b_(e,_o,t,qh(t)),p_(rS,e)}}function sS(t,e,n){t==="focusin"?(mg(),eo=e,_o=n,eo.attachEvent("onpropertychange",O_)):t==="focusout"&&mg()}function oS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cc(_o)}function aS(t,e){if(t==="click")return cc(e)}function lS(t,e){if(t==="input"||t==="change")return cc(e)}function cS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gt=typeof Object.is=="function"?Object.is:cS;function wo(t,e){if(Gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cd.call(e,i)||!Gt(t[i],e[i]))return!1}return!0}function gg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vg(t,e){var n=gg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gg(n)}}function L_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?L_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function V_(){for(var t=window,e=yl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yl(t.document)}return e}function Zh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uS(t){var e=V_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&L_(n.ownerDocument.documentElement,n)){if(r!==null&&Zh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=vg(n,s);var o=vg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dS=An&&"documentMode"in document&&11>=document.documentMode,Ti=null,Ad=null,to=null,Pd=!1;function yg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pd||Ti==null||Ti!==yl(r)||(r=Ti,"selectionStart"in r&&Zh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),to&&wo(to,r)||(to=r,r=Sl(Ad,"onSelect"),0<r.length&&(e=new Xh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ti)))}function ba(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xi={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},ku={},M_={};An&&(M_=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);function uc(t){if(ku[t])return ku[t];if(!xi[t])return t;var e=xi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in M_)return ku[t]=e[n];return t}var U_=uc("animationend"),F_=uc("animationiteration"),z_=uc("animationstart"),B_=uc("transitionend"),$_=new Map,_g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(t,e){$_.set(t,e),ri(e,[t])}for(var ju=0;ju<_g.length;ju++){var bu=_g[ju],hS=bu.toLowerCase(),fS=bu[0].toUpperCase()+bu.slice(1);Ir(hS,"on"+fS)}Ir(U_,"onAnimationEnd");Ir(F_,"onAnimationIteration");Ir(z_,"onAnimationStart");Ir("dblclick","onDoubleClick");Ir("focusin","onFocus");Ir("focusout","onBlur");Ir(B_,"onTransitionEnd");$i("onMouseEnter",["mouseout","mouseover"]);$i("onMouseLeave",["mouseout","mouseover"]);$i("onPointerEnter",["pointerout","pointerover"]);$i("onPointerLeave",["pointerout","pointerover"]);ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ri("onBeforeInput",["compositionend","keypress","textInput","paste"]);ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ws));function wg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hI(r,e,void 0,t),t.currentTarget=null}function q_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==s&&i.isPropagationStopped())break e;wg(i,c,d),s=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==s&&i.isPropagationStopped())break e;wg(i,c,d),s=u}}}if(wl)throw t=Id,wl=!1,Id=null,t}function ge(t,e){var n=e[Dd];n===void 0&&(n=e[Dd]=new Set);var r=t+"__bubble";n.has(r)||(W_(e,t,2,!1),n.add(r))}function Du(t,e,n){var r=0;e&&(r|=4),W_(n,t,r,e)}var Da="_reactListening"+Math.random().toString(36).slice(2);function Eo(t){if(!t[Da]){t[Da]=!0,Jy.forEach(function(n){n!=="selectionchange"&&(pS.has(n)||Du(n,!1,t),Du(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Da]||(e[Da]=!0,Du("selectionchange",!1,e))}}function W_(t,e,n,r){switch(A_(e)){case 1:var i=AI;break;case 4:i=PI;break;default:i=Gh}n=i.bind(null,e,n,t),i=void 0,!xd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ou(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=Mr(c),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}c=c.parentNode}}r=r.return}p_(function(){var d=s,f=qh(n),m=[];e:{var g=$_.get(t);if(g!==void 0){var v=Xh,T=t;switch(t){case"keypress":if(el(n)===0)break e;case"keydown":case"keyup":v=qI;break;case"focusin":T="focus",v=Au;break;case"focusout":T="blur",v=Au;break;case"beforeblur":case"afterblur":v=Au;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=jI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=KI;break;case U_:case F_:case z_:v=OI;break;case B_:v=QI;break;case"scroll":v=RI;break;case"wheel":v=YI;break;case"copy":case"cut":case"paste":v=VI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=ug}var C=(e&4)!==0,k=!C&&t==="scroll",y=C?g!==null?g+"Capture":null:g;C=[];for(var E=d,S;E!==null;){S=E;var x=S.stateNode;if(S.tag===5&&x!==null&&(S=x,y!==null&&(x=mo(E,y),x!=null&&C.push(To(E,x,S)))),k)break;E=E.return}0<C.length&&(g=new v(g,T,null,n,f),m.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==Ed&&(T=n.relatedTarget||n.fromElement)&&(Mr(T)||T[Pn]))break e;if((v||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,v?(T=n.relatedTarget||n.toElement,v=d,T=T?Mr(T):null,T!==null&&(k=ii(T),T!==k||T.tag!==5&&T.tag!==6)&&(T=null)):(v=null,T=d),v!==T)){if(C=lg,x="onMouseLeave",y="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(C=ug,x="onPointerLeave",y="onPointerEnter",E="pointer"),k=v==null?g:Ii(v),S=T==null?g:Ii(T),g=new C(x,E+"leave",v,n,f),g.target=k,g.relatedTarget=S,x=null,Mr(f)===d&&(C=new C(y,E+"enter",T,n,f),C.target=S,C.relatedTarget=k,x=C),k=x,v&&T)t:{for(C=v,y=T,E=0,S=C;S;S=mi(S))E++;for(S=0,x=y;x;x=mi(x))S++;for(;0<E-S;)C=mi(C),E--;for(;0<S-E;)y=mi(y),S--;for(;E--;){if(C===y||y!==null&&C===y.alternate)break t;C=mi(C),y=mi(y)}C=null}else C=null;v!==null&&Eg(m,g,v,C,!1),T!==null&&k!==null&&Eg(m,k,T,C,!0)}}e:{if(g=d?Ii(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var O=iS;else if(fg(g))if(D_)O=lS;else{O=oS;var j=sS}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=aS);if(O&&(O=O(t,d))){b_(m,O,n,f);break e}j&&j(t,g,d),t==="focusout"&&(j=g._wrapperState)&&j.controlled&&g.type==="number"&&gd(g,"number",g.value)}switch(j=d?Ii(d):window,t){case"focusin":(fg(j)||j.contentEditable==="true")&&(Ti=j,Ad=d,to=null);break;case"focusout":to=Ad=Ti=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,yg(m,n,f);break;case"selectionchange":if(dS)break;case"keydown":case"keyup":yg(m,n,f)}var I;if(Jh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ei?k_(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(R_&&n.locale!=="ko"&&(Ei||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ei&&(I=P_()):(er=f,Qh="value"in er?er.value:er.textContent,Ei=!0)),j=Sl(d,_),0<j.length&&(_=new cg(_,t,null,n,f),m.push({event:_,listeners:j}),I?_.data=I:(I=j_(n),I!==null&&(_.data=I)))),(I=ZI?eS(t,n):tS(t,n))&&(d=Sl(d,"onBeforeInput"),0<d.length&&(f=new cg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=I))}q_(m,e)})}function To(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mo(t,n),s!=null&&r.unshift(To(t,s,i)),s=mo(t,e),s!=null&&r.push(To(t,s,i))),t=t.return}return r}function mi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Eg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=mo(n,s),u!=null&&o.unshift(To(n,u,c))):i||(u=mo(n,s),u!=null&&o.push(To(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var mS=/\r\n?/g,gS=/\u0000|\uFFFD/g;function Tg(t){return(typeof t=="string"?t:""+t).replace(mS,`
`).replace(gS,"")}function Oa(t,e,n){if(e=Tg(e),Tg(t)!==e&&n)throw Error(F(425))}function Cl(){}var Rd=null,kd=null;function jd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bd=typeof setTimeout=="function"?setTimeout:void 0,vS=typeof clearTimeout=="function"?clearTimeout:void 0,xg=typeof Promise=="function"?Promise:void 0,yS=typeof queueMicrotask=="function"?queueMicrotask:typeof xg<"u"?function(t){return xg.resolve(null).then(t).catch(_S)}:bd;function _S(t){setTimeout(function(){throw t})}function Lu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),yo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);yo(e)}function lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ig(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var as=Math.random().toString(36).slice(2),en="__reactFiber$"+as,xo="__reactProps$"+as,Pn="__reactContainer$"+as,Dd="__reactEvents$"+as,wS="__reactListeners$"+as,ES="__reactHandles$"+as;function Mr(t){var e=t[en];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pn]||n[en]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ig(t);t!==null;){if(n=t[en])return n;t=Ig(t)}return e}t=n,n=t.parentNode}return null}function Wo(t){return t=t[en]||t[Pn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ii(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function dc(t){return t[xo]||null}var Od=[],Si=-1;function Sr(t){return{current:t}}function ye(t){0>Si||(t.current=Od[Si],Od[Si]=null,Si--)}function fe(t,e){Si++,Od[Si]=t.current,t.current=e}var yr={},st=Sr(yr),wt=Sr(!1),Kr=yr;function qi(t,e){var n=t.type.contextTypes;if(!n)return yr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Et(t){return t=t.childContextTypes,t!=null}function Nl(){ye(wt),ye(st)}function Sg(t,e,n){if(st.current!==yr)throw Error(F(168));fe(st,e),fe(wt,n)}function H_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,sI(t)||"Unknown",i));return xe({},n,r)}function Al(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yr,Kr=st.current,fe(st,t),fe(wt,wt.current),!0}function Cg(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=H_(t,e,Kr),r.__reactInternalMemoizedMergedChildContext=t,ye(wt),ye(st),fe(st,t)):ye(wt),fe(wt,n)}var wn=null,hc=!1,Vu=!1;function K_(t){wn===null?wn=[t]:wn.push(t)}function TS(t){hc=!0,K_(t)}function Cr(){if(!Vu&&wn!==null){Vu=!0;var t=0,e=le;try{var n=wn;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wn=null,hc=!1}catch(i){throw wn!==null&&(wn=wn.slice(t+1)),y_(Wh,Cr),i}finally{le=e,Vu=!1}}return null}var Ci=[],Ni=0,Pl=null,Rl=0,bt=[],Dt=0,Gr=null,En=1,Tn="";function Or(t,e){Ci[Ni++]=Rl,Ci[Ni++]=Pl,Pl=t,Rl=e}function G_(t,e,n){bt[Dt++]=En,bt[Dt++]=Tn,bt[Dt++]=Gr,Gr=t;var r=En;t=Tn;var i=32-Ht(r)-1;r&=~(1<<i),n+=1;var s=32-Ht(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,En=1<<32-Ht(e)+i|n<<i|r,Tn=s+t}else En=1<<s|n<<i|r,Tn=t}function ef(t){t.return!==null&&(Or(t,1),G_(t,1,0))}function tf(t){for(;t===Pl;)Pl=Ci[--Ni],Ci[Ni]=null,Rl=Ci[--Ni],Ci[Ni]=null;for(;t===Gr;)Gr=bt[--Dt],bt[Dt]=null,Tn=bt[--Dt],bt[Dt]=null,En=bt[--Dt],bt[Dt]=null}var At=null,St=null,_e=!1,Wt=null;function Q_(t,e){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ng(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,St=lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,St=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gr!==null?{id:En,overflow:Tn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,St=null,!0):!1;default:return!1}}function Ld(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vd(t){if(_e){var e=St;if(e){var n=e;if(!Ng(t,e)){if(Ld(t))throw Error(F(418));e=lr(n.nextSibling);var r=At;e&&Ng(t,e)?Q_(r,n):(t.flags=t.flags&-4097|2,_e=!1,At=t)}}else{if(Ld(t))throw Error(F(418));t.flags=t.flags&-4097|2,_e=!1,At=t}}}function Ag(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function La(t){if(t!==At)return!1;if(!_e)return Ag(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jd(t.type,t.memoizedProps)),e&&(e=St)){if(Ld(t))throw X_(),Error(F(418));for(;e;)Q_(t,e),e=lr(e.nextSibling)}if(Ag(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){St=lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}St=null}}else St=At?lr(t.stateNode.nextSibling):null;return!0}function X_(){for(var t=St;t;)t=lr(t.nextSibling)}function Wi(){St=At=null,_e=!1}function nf(t){Wt===null?Wt=[t]:Wt.push(t)}var xS=Mn.ReactCurrentBatchConfig;function Os(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var c=i.refs;o===null?delete c[s]:c[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Va(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pg(t){var e=t._init;return e(t._payload)}function Y_(t){function e(y,E){if(t){var S=y.deletions;S===null?(y.deletions=[E],y.flags|=16):S.push(E)}}function n(y,E){if(!t)return null;for(;E!==null;)e(y,E),E=E.sibling;return null}function r(y,E){for(y=new Map;E!==null;)E.key!==null?y.set(E.key,E):y.set(E.index,E),E=E.sibling;return y}function i(y,E){return y=hr(y,E),y.index=0,y.sibling=null,y}function s(y,E,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<E?(y.flags|=2,E):S):(y.flags|=2,E)):(y.flags|=1048576,E)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function c(y,E,S,x){return E===null||E.tag!==6?(E=qu(S,y.mode,x),E.return=y,E):(E=i(E,S),E.return=y,E)}function u(y,E,S,x){var O=S.type;return O===wi?f(y,E,S.props.children,x,S.key):E!==null&&(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Wn&&Pg(O)===E.type)?(x=i(E,S.props),x.ref=Os(y,E,S),x.return=y,x):(x=al(S.type,S.key,S.props,null,y.mode,x),x.ref=Os(y,E,S),x.return=y,x)}function d(y,E,S,x){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=Wu(S,y.mode,x),E.return=y,E):(E=i(E,S.children||[]),E.return=y,E)}function f(y,E,S,x,O){return E===null||E.tag!==7?(E=$r(S,y.mode,x,O),E.return=y,E):(E=i(E,S),E.return=y,E)}function m(y,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=qu(""+E,y.mode,S),E.return=y,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ca:return S=al(E.type,E.key,E.props,null,y.mode,S),S.ref=Os(y,null,E),S.return=y,S;case _i:return E=Wu(E,y.mode,S),E.return=y,E;case Wn:var x=E._init;return m(y,x(E._payload),S)}if($s(E)||Rs(E))return E=$r(E,y.mode,S,null),E.return=y,E;Va(y,E)}return null}function g(y,E,S,x){var O=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:c(y,E,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ca:return S.key===O?u(y,E,S,x):null;case _i:return S.key===O?d(y,E,S,x):null;case Wn:return O=S._init,g(y,E,O(S._payload),x)}if($s(S)||Rs(S))return O!==null?null:f(y,E,S,x,null);Va(y,S)}return null}function v(y,E,S,x,O){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(S)||null,c(E,y,""+x,O);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ca:return y=y.get(x.key===null?S:x.key)||null,u(E,y,x,O);case _i:return y=y.get(x.key===null?S:x.key)||null,d(E,y,x,O);case Wn:var j=x._init;return v(y,E,S,j(x._payload),O)}if($s(x)||Rs(x))return y=y.get(S)||null,f(E,y,x,O,null);Va(E,x)}return null}function T(y,E,S,x){for(var O=null,j=null,I=E,_=E=0,A=null;I!==null&&_<S.length;_++){I.index>_?(A=I,I=null):A=I.sibling;var R=g(y,I,S[_],x);if(R===null){I===null&&(I=A);break}t&&I&&R.alternate===null&&e(y,I),E=s(R,E,_),j===null?O=R:j.sibling=R,j=R,I=A}if(_===S.length)return n(y,I),_e&&Or(y,_),O;if(I===null){for(;_<S.length;_++)I=m(y,S[_],x),I!==null&&(E=s(I,E,_),j===null?O=I:j.sibling=I,j=I);return _e&&Or(y,_),O}for(I=r(y,I);_<S.length;_++)A=v(I,y,_,S[_],x),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?_:A.key),E=s(A,E,_),j===null?O=A:j.sibling=A,j=A);return t&&I.forEach(function(N){return e(y,N)}),_e&&Or(y,_),O}function C(y,E,S,x){var O=Rs(S);if(typeof O!="function")throw Error(F(150));if(S=O.call(S),S==null)throw Error(F(151));for(var j=O=null,I=E,_=E=0,A=null,R=S.next();I!==null&&!R.done;_++,R=S.next()){I.index>_?(A=I,I=null):A=I.sibling;var N=g(y,I,R.value,x);if(N===null){I===null&&(I=A);break}t&&I&&N.alternate===null&&e(y,I),E=s(N,E,_),j===null?O=N:j.sibling=N,j=N,I=A}if(R.done)return n(y,I),_e&&Or(y,_),O;if(I===null){for(;!R.done;_++,R=S.next())R=m(y,R.value,x),R!==null&&(E=s(R,E,_),j===null?O=R:j.sibling=R,j=R);return _e&&Or(y,_),O}for(I=r(y,I);!R.done;_++,R=S.next())R=v(I,y,_,R.value,x),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?_:R.key),E=s(R,E,_),j===null?O=R:j.sibling=R,j=R);return t&&I.forEach(function(D){return e(y,D)}),_e&&Or(y,_),O}function k(y,E,S,x){if(typeof S=="object"&&S!==null&&S.type===wi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ca:e:{for(var O=S.key,j=E;j!==null;){if(j.key===O){if(O=S.type,O===wi){if(j.tag===7){n(y,j.sibling),E=i(j,S.props.children),E.return=y,y=E;break e}}else if(j.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Wn&&Pg(O)===j.type){n(y,j.sibling),E=i(j,S.props),E.ref=Os(y,j,S),E.return=y,y=E;break e}n(y,j);break}else e(y,j);j=j.sibling}S.type===wi?(E=$r(S.props.children,y.mode,x,S.key),E.return=y,y=E):(x=al(S.type,S.key,S.props,null,y.mode,x),x.ref=Os(y,E,S),x.return=y,y=x)}return o(y);case _i:e:{for(j=S.key;E!==null;){if(E.key===j)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(y,E.sibling),E=i(E,S.children||[]),E.return=y,y=E;break e}else{n(y,E);break}else e(y,E);E=E.sibling}E=Wu(S,y.mode,x),E.return=y,y=E}return o(y);case Wn:return j=S._init,k(y,E,j(S._payload),x)}if($s(S))return T(y,E,S,x);if(Rs(S))return C(y,E,S,x);Va(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(y,E.sibling),E=i(E,S),E.return=y,y=E):(n(y,E),E=qu(S,y.mode,x),E.return=y,y=E),o(y)):n(y,E)}return k}var Hi=Y_(!0),J_=Y_(!1),kl=Sr(null),jl=null,Ai=null,rf=null;function sf(){rf=Ai=jl=null}function of(t){var e=kl.current;ye(kl),t._currentValue=e}function Md(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Li(t,e){jl=t,rf=Ai=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function Ut(t){var e=t._currentValue;if(rf!==t)if(t={context:t,memoizedValue:e,next:null},Ai===null){if(jl===null)throw Error(F(308));Ai=t,jl.dependencies={lanes:0,firstContext:t}}else Ai=Ai.next=t;return e}var Ur=null;function af(t){Ur===null?Ur=[t]:Ur.push(t)}function Z_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,af(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rn(t,r)}function Rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hn=!1;function lf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ew(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rn(t,n)}return i=r.interleaved,i===null?(e.next=e,af(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rn(t,n)}function tl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hh(t,n)}}function Rg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bl(t,e,n,r){var i=t.updateQueue;Hn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,f=d=u=null,c=s;do{var g=c.lane,v=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var T=t,C=c;switch(g=e,v=n,C.tag){case 1:if(T=C.payload,typeof T=="function"){m=T.call(v,m,g);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=C.payload,g=typeof T=="function"?T.call(v,m,g):T,g==null)break e;m=xe({},m,g);break e;case 2:Hn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[c]:g.push(c))}else v={eventTime:v,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=v,u=m):f=f.next=v,o|=g;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;g=c,c=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xr|=o,t.lanes=o,t.memoizedState=m}}function kg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var Ho={},rn=Sr(Ho),Io=Sr(Ho),So=Sr(Ho);function Fr(t){if(t===Ho)throw Error(F(174));return t}function cf(t,e){switch(fe(So,e),fe(Io,t),fe(rn,Ho),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yd(e,t)}ye(rn),fe(rn,e)}function Ki(){ye(rn),ye(Io),ye(So)}function tw(t){Fr(So.current);var e=Fr(rn.current),n=yd(e,t.type);e!==n&&(fe(Io,t),fe(rn,n))}function uf(t){Io.current===t&&(ye(rn),ye(Io))}var Ee=Sr(0);function Dl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mu=[];function df(){for(var t=0;t<Mu.length;t++)Mu[t]._workInProgressVersionPrimary=null;Mu.length=0}var nl=Mn.ReactCurrentDispatcher,Uu=Mn.ReactCurrentBatchConfig,Qr=0,Te=null,Ve=null,Fe=null,Ol=!1,no=!1,Co=0,IS=0;function Ze(){throw Error(F(321))}function hf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gt(t[n],e[n]))return!1;return!0}function ff(t,e,n,r,i,s){if(Qr=s,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nl.current=t===null||t.memoizedState===null?AS:PS,t=n(r,i),no){s=0;do{if(no=!1,Co=0,25<=s)throw Error(F(301));s+=1,Fe=Ve=null,e.updateQueue=null,nl.current=RS,t=n(r,i)}while(no)}if(nl.current=Ll,e=Ve!==null&&Ve.next!==null,Qr=0,Fe=Ve=Te=null,Ol=!1,e)throw Error(F(300));return t}function pf(){var t=Co!==0;return Co=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Te.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Ft(){if(Ve===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=Fe===null?Te.memoizedState:Fe.next;if(e!==null)Fe=e,Ve=t;else{if(t===null)throw Error(F(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Fe===null?Te.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function No(t,e){return typeof e=="function"?e(t):e}function Fu(t){var e=Ft(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Ve,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=o=null,u=null,d=s;do{var f=d.lane;if((Qr&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,Te.lanes|=f,Xr|=f}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=c,Gt(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Te.lanes|=s,Xr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zu(t){var e=Ft(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Gt(s,e.memoizedState)||(_t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function nw(){}function rw(t,e){var n=Te,r=Ft(),i=e(),s=!Gt(r.memoizedState,i);if(s&&(r.memoizedState=i,_t=!0),r=r.queue,mf(ow.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,Ao(9,sw.bind(null,n,r,i,e),void 0,null),ze===null)throw Error(F(349));Qr&30||iw(n,e,i)}return i}function iw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sw(t,e,n,r){e.value=n,e.getSnapshot=r,aw(e)&&lw(t)}function ow(t,e,n){return n(function(){aw(e)&&lw(t)})}function aw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gt(t,n)}catch{return!0}}function lw(t){var e=Rn(t,1);e!==null&&Kt(e,t,1,-1)}function jg(t){var e=Zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},e.queue=t,t=t.dispatch=NS.bind(null,Te,t),[e.memoizedState,t]}function Ao(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cw(){return Ft().memoizedState}function rl(t,e,n,r){var i=Zt();Te.flags|=t,i.memoizedState=Ao(1|e,n,void 0,r===void 0?null:r)}function fc(t,e,n,r){var i=Ft();r=r===void 0?null:r;var s=void 0;if(Ve!==null){var o=Ve.memoizedState;if(s=o.destroy,r!==null&&hf(r,o.deps)){i.memoizedState=Ao(e,n,s,r);return}}Te.flags|=t,i.memoizedState=Ao(1|e,n,s,r)}function bg(t,e){return rl(8390656,8,t,e)}function mf(t,e){return fc(2048,8,t,e)}function uw(t,e){return fc(4,2,t,e)}function dw(t,e){return fc(4,4,t,e)}function hw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fw(t,e,n){return n=n!=null?n.concat([t]):null,fc(4,4,hw.bind(null,e,t),n)}function gf(){}function pw(t,e){var n=Ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mw(t,e){var n=Ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gw(t,e,n){return Qr&21?(Gt(n,e)||(n=E_(),Te.lanes|=n,Xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function SS(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=Uu.transition;Uu.transition={};try{t(!1),e()}finally{le=n,Uu.transition=r}}function vw(){return Ft().memoizedState}function CS(t,e,n){var r=dr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yw(t))_w(e,n);else if(n=Z_(t,e,n,r),n!==null){var i=ht();Kt(n,t,r,i),ww(n,e,r)}}function NS(t,e,n){var r=dr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yw(t))_w(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,c=s(o,n);if(i.hasEagerState=!0,i.eagerState=c,Gt(c,o)){var u=e.interleaved;u===null?(i.next=i,af(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Z_(t,e,i,r),n!==null&&(i=ht(),Kt(n,t,r,i),ww(n,e,r))}}function yw(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function _w(t,e){no=Ol=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ww(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hh(t,n)}}var Ll={readContext:Ut,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},AS={readContext:Ut,useCallback:function(t,e){return Zt().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:bg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rl(4194308,4,hw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rl(4194308,4,t,e)},useInsertionEffect:function(t,e){return rl(4,2,t,e)},useMemo:function(t,e){var n=Zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CS.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=Zt();return t={current:t},e.memoizedState=t},useState:jg,useDebugValue:gf,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=jg(!1),e=t[0];return t=SS.bind(null,t[1]),Zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,i=Zt();if(_e){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),ze===null)throw Error(F(349));Qr&30||iw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,bg(ow.bind(null,r,s,t),[t]),r.flags|=2048,Ao(9,sw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zt(),e=ze.identifierPrefix;if(_e){var n=Tn,r=En;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Co++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=IS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PS={readContext:Ut,useCallback:pw,useContext:Ut,useEffect:mf,useImperativeHandle:fw,useInsertionEffect:uw,useLayoutEffect:dw,useMemo:mw,useReducer:Fu,useRef:cw,useState:function(){return Fu(No)},useDebugValue:gf,useDeferredValue:function(t){var e=Ft();return gw(e,Ve.memoizedState,t)},useTransition:function(){var t=Fu(No)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:nw,useSyncExternalStore:rw,useId:vw,unstable_isNewReconciler:!1},RS={readContext:Ut,useCallback:pw,useContext:Ut,useEffect:mf,useImperativeHandle:fw,useInsertionEffect:uw,useLayoutEffect:dw,useMemo:mw,useReducer:zu,useRef:cw,useState:function(){return zu(No)},useDebugValue:gf,useDeferredValue:function(t){var e=Ft();return Ve===null?e.memoizedState=t:gw(e,Ve.memoizedState,t)},useTransition:function(){var t=zu(No)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:nw,useSyncExternalStore:rw,useId:vw,unstable_isNewReconciler:!1};function $t(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ud(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pc={isMounted:function(t){return(t=t._reactInternals)?ii(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ht(),i=dr(t),s=Cn(r,i);s.payload=e,n!=null&&(s.callback=n),e=cr(t,s,i),e!==null&&(Kt(e,t,i,r),tl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ht(),i=dr(t),s=Cn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=cr(t,s,i),e!==null&&(Kt(e,t,i,r),tl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ht(),r=dr(t),i=Cn(n,r);i.tag=2,e!=null&&(i.callback=e),e=cr(t,i,r),e!==null&&(Kt(e,t,r,n),tl(e,t,r))}};function Dg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wo(n,r)||!wo(i,s):!0}function Ew(t,e,n){var r=!1,i=yr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ut(s):(i=Et(e)?Kr:st.current,r=e.contextTypes,s=(r=r!=null)?qi(t,i):yr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Og(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pc.enqueueReplaceState(e,e.state,null)}function Fd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},lf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ut(s):(s=Et(e)?Kr:st.current,i.context=qi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ud(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&pc.enqueueReplaceState(i,i.state,null),bl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gi(t,e){try{var n="",r=e;do n+=iI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Bu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kS=typeof WeakMap=="function"?WeakMap:Map;function Tw(t,e,n){n=Cn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ml||(Ml=!0,Yd=r),zd(t,e)},n}function xw(t,e,n){n=Cn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zd(t,e),typeof r!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Lg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=WS.bind(null,t,e,n),e.then(t,t))}function Vg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Mg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cn(-1,1),e.tag=2,cr(n,e,1))),n.lanes|=1),t)}var jS=Mn.ReactCurrentOwner,_t=!1;function dt(t,e,n,r){e.child=t===null?J_(e,null,n,r):Hi(e,t.child,n,r)}function Ug(t,e,n,r,i){n=n.render;var s=e.ref;return Li(e,i),r=ff(t,e,n,r,s,i),n=pf(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kn(t,e,i)):(_e&&n&&ef(e),e.flags|=1,dt(t,e,r,i),e.child)}function Fg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!If(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Iw(t,e,s,r,i)):(t=al(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(o,r)&&t.ref===e.ref)return kn(t,e,i)}return e.flags|=1,t=hr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Iw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(wo(s,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,kn(t,e,i)}return Bd(t,e,n,r,i)}function Sw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(Ri,It),It|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(Ri,It),It|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,fe(Ri,It),It|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,fe(Ri,It),It|=r;return dt(t,e,i,n),e.child}function Cw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bd(t,e,n,r,i){var s=Et(n)?Kr:st.current;return s=qi(e,s),Li(e,i),n=ff(t,e,n,r,s,i),r=pf(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kn(t,e,i)):(_e&&r&&ef(e),e.flags|=1,dt(t,e,n,i),e.child)}function zg(t,e,n,r,i){if(Et(n)){var s=!0;Al(e)}else s=!1;if(Li(e,i),e.stateNode===null)il(t,e),Ew(e,n,r),Fd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ut(d):(d=Et(n)?Kr:st.current,d=qi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Og(e,o,r,d),Hn=!1;var g=e.memoizedState;o.state=g,bl(e,r,o,i),u=e.memoizedState,c!==r||g!==u||wt.current||Hn?(typeof f=="function"&&(Ud(e,n,f,r),u=e.memoizedState),(c=Hn||Dg(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ew(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:$t(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ut(u):(u=Et(n)?Kr:st.current,u=qi(e,u));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&Og(e,o,r,u),Hn=!1,g=e.memoizedState,o.state=g,bl(e,r,o,i);var T=e.memoizedState;c!==m||g!==T||wt.current||Hn?(typeof v=="function"&&(Ud(e,n,v,r),T=e.memoizedState),(d=Hn||Dg(e,n,d,r,g,T,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return $d(t,e,n,r,s,i)}function $d(t,e,n,r,i,s){Cw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Cg(e,n,!1),kn(t,e,s);r=e.stateNode,jS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Hi(e,t.child,null,s),e.child=Hi(e,null,c,s)):dt(t,e,c,s),e.memoizedState=r.state,i&&Cg(e,n,!0),e.child}function Nw(t){var e=t.stateNode;e.pendingContext?Sg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sg(t,e.context,!1),cf(t,e.containerInfo)}function Bg(t,e,n,r,i){return Wi(),nf(i),e.flags|=256,dt(t,e,n,r),e.child}var qd={dehydrated:null,treeContext:null,retryLane:0};function Wd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Aw(t,e,n){var r=e.pendingProps,i=Ee.current,s=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),fe(Ee,i&1),t===null)return Vd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=vc(o,r,0,null),t=$r(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wd(n),e.memoizedState=qd,t):vf(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return bS(t,e,o,r,c,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=hr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=hr(c,s):(s=$r(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Wd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=qd,r}return s=t.child,t=s.sibling,r=hr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vf(t,e){return e=vc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ma(t,e,n,r){return r!==null&&nf(r),Hi(e,t.child,null,n),t=vf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Bu(Error(F(422))),Ma(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=vc({mode:"visible",children:r.children},i,0,null),s=$r(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Hi(e,t.child,null,o),e.child.memoizedState=Wd(o),e.memoizedState=qd,s);if(!(e.mode&1))return Ma(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(F(419)),r=Bu(s,r,void 0),Ma(t,e,o,r)}if(c=(o&t.childLanes)!==0,_t||c){if(r=ze,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rn(t,i),Kt(r,t,i,-1))}return xf(),r=Bu(Error(F(421))),Ma(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=HS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,St=lr(i.nextSibling),At=e,_e=!0,Wt=null,t!==null&&(bt[Dt++]=En,bt[Dt++]=Tn,bt[Dt++]=Gr,En=t.id,Tn=t.overflow,Gr=e),e=vf(e,r.children),e.flags|=4096,e)}function $g(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Md(t.return,e,n)}function $u(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Pw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dt(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$g(t,n,e);else if(t.tag===19)$g(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fe(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Dl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$u(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Dl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$u(e,!0,n,null,s);break;case"together":$u(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function il(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DS(t,e,n){switch(e.tag){case 3:Nw(e),Wi();break;case 5:tw(e);break;case 1:Et(e.type)&&Al(e);break;case 4:cf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;fe(kl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fe(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?Aw(t,e,n):(fe(Ee,Ee.current&1),t=kn(t,e,n),t!==null?t.sibling:null);fe(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Pw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fe(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,Sw(t,e,n)}return kn(t,e,n)}var Rw,Hd,kw,jw;Rw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hd=function(){};kw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fr(rn.current);var s=null;switch(n){case"input":i=pd(t,i),r=pd(t,r),s=[];break;case"select":i=xe({},i,{value:void 0}),r=xe({},r,{value:void 0}),s=[];break;case"textarea":i=vd(t,i),r=vd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cl)}_d(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fo.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ge("scroll",t),s||c===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};jw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ls(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function OS(t,e,n){var r=e.pendingProps;switch(tf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return Et(e.type)&&Nl(),et(e),null;case 3:return r=e.stateNode,Ki(),ye(wt),ye(st),df(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(La(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wt!==null&&(eh(Wt),Wt=null))),Hd(t,e),et(e),null;case 5:uf(e);var i=Fr(So.current);if(n=e.type,t!==null&&e.stateNode!=null)kw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return et(e),null}if(t=Fr(rn.current),La(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[en]=e,r[xo]=s,t=(e.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(i=0;i<Ws.length;i++)ge(Ws[i],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":Jm(r,s),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ge("invalid",r);break;case"textarea":eg(r,s),ge("invalid",r)}_d(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&Oa(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&Oa(r.textContent,c,t),i=["children",""+c]):fo.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ge("scroll",r)}switch(n){case"input":Na(r),Zm(r,s,!0);break;case"textarea":Na(r),tg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=o_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[en]=e,t[xo]=r,Rw(t,e,!1,!1),e.stateNode=t;e:{switch(o=wd(n,r),n){case"dialog":ge("cancel",t),ge("close",t),i=r;break;case"iframe":case"object":case"embed":ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ws.length;i++)ge(Ws[i],t);i=r;break;case"source":ge("error",t),i=r;break;case"img":case"image":case"link":ge("error",t),ge("load",t),i=r;break;case"details":ge("toggle",t),i=r;break;case"input":Jm(t,r),i=pd(t,r),ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=xe({},r,{value:void 0}),ge("invalid",t);break;case"textarea":eg(t,r),i=vd(t,r),ge("invalid",t);break;default:i=r}_d(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var u=c[s];s==="style"?c_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&a_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&po(t,u):typeof u=="number"&&po(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ge("scroll",t):u!=null&&Fh(t,s,u,o))}switch(n){case"input":Na(t),Zm(t,r,!1);break;case"textarea":Na(t),tg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ji(t,!!r.multiple,s,!1):r.defaultValue!=null&&ji(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return et(e),null;case 6:if(t&&e.stateNode!=null)jw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Fr(So.current),Fr(rn.current),La(e)){if(r=e.stateNode,n=e.memoizedProps,r[en]=e,(s=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Oa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Oa(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[en]=e,e.stateNode=r}return et(e),null;case 13:if(ye(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&St!==null&&e.mode&1&&!(e.flags&128))X_(),Wi(),e.flags|=98560,s=!1;else if(s=La(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[en]=e}else Wi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),s=!1}else Wt!==null&&(eh(Wt),Wt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Me===0&&(Me=3):xf())),e.updateQueue!==null&&(e.flags|=4),et(e),null);case 4:return Ki(),Hd(t,e),t===null&&Eo(e.stateNode.containerInfo),et(e),null;case 10:return of(e.type._context),et(e),null;case 17:return Et(e.type)&&Nl(),et(e),null;case 19:if(ye(Ee),s=e.memoizedState,s===null)return et(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ls(s,!1);else{if(Me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Dl(t),o!==null){for(e.flags|=128,Ls(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fe(Ee,Ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&je()>Qi&&(e.flags|=128,r=!0,Ls(s,!1),e.lanes=4194304)}else{if(!r)if(t=Dl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ls(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_e)return et(e),null}else 2*je()-s.renderingStartTime>Qi&&n!==1073741824&&(e.flags|=128,r=!0,Ls(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=je(),e.sibling=null,n=Ee.current,fe(Ee,r?n&1|2:n&1),e):(et(e),null);case 22:case 23:return Tf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?It&1073741824&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function LS(t,e){switch(tf(e),e.tag){case 1:return Et(e.type)&&Nl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ki(),ye(wt),ye(st),df(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return uf(e),null;case 13:if(ye(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Wi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(Ee),null;case 4:return Ki(),null;case 10:return of(e.type._context),null;case 22:case 23:return Tf(),null;case 24:return null;default:return null}}var Ua=!1,rt=!1,VS=typeof WeakSet=="function"?WeakSet:Set,q=null;function Pi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function Kd(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var qg=!1;function MS(t,e){if(Rd=xl,t=V_(),Zh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var v;m!==n||i!==0&&m.nodeType!==3||(c=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===t)break t;if(g===n&&++d===i&&(c=o),g===s&&++f===r&&(u=o),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(kd={focusedElem:t,selectionRange:n},xl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var C=T.memoizedProps,k=T.memoizedState,y=e.stateNode,E=y.getSnapshotBeforeUpdate(e.elementType===e.type?C:$t(e.type,C),k);y.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(x){Ce(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return T=qg,qg=!1,T}function ro(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Kd(e,n,s)}i=i.next}while(i!==r)}}function mc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bw(t){var e=t.alternate;e!==null&&(t.alternate=null,bw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[en],delete e[xo],delete e[Dd],delete e[wS],delete e[ES])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Dw(t){return t.tag===5||t.tag===3||t.tag===4}function Wg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cl));else if(r!==4&&(t=t.child,t!==null))for(Qd(t,e,n),t=t.sibling;t!==null;)Qd(t,e,n),t=t.sibling}function Xd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xd(t,e,n),t=t.sibling;t!==null;)Xd(t,e,n),t=t.sibling}var $e=null,qt=!1;function $n(t,e,n){for(n=n.child;n!==null;)Ow(t,e,n),n=n.sibling}function Ow(t,e,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(ac,n)}catch{}switch(n.tag){case 5:rt||Pi(n,e);case 6:var r=$e,i=qt;$e=null,$n(t,e,n),$e=r,qt=i,$e!==null&&(qt?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(qt?(t=$e,n=n.stateNode,t.nodeType===8?Lu(t.parentNode,n):t.nodeType===1&&Lu(t,n),yo(t)):Lu($e,n.stateNode));break;case 4:r=$e,i=qt,$e=n.stateNode.containerInfo,qt=!0,$n(t,e,n),$e=r,qt=i;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Kd(n,e,o),i=i.next}while(i!==r)}$n(t,e,n);break;case 1:if(!rt&&(Pi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ce(n,e,c)}$n(t,e,n);break;case 21:$n(t,e,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,$n(t,e,n),rt=r):$n(t,e,n);break;default:$n(t,e,n)}}function Hg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VS),e.forEach(function(r){var i=KS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:$e=c.stateNode,qt=!1;break e;case 3:$e=c.stateNode.containerInfo,qt=!0;break e;case 4:$e=c.stateNode.containerInfo,qt=!0;break e}c=c.return}if($e===null)throw Error(F(160));Ow(s,o,i),$e=null,qt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Ce(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Lw(e,t),e=e.sibling}function Lw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bt(e,t),Jt(t),r&4){try{ro(3,t,t.return),mc(3,t)}catch(C){Ce(t,t.return,C)}try{ro(5,t,t.return)}catch(C){Ce(t,t.return,C)}}break;case 1:Bt(e,t),Jt(t),r&512&&n!==null&&Pi(n,n.return);break;case 5:if(Bt(e,t),Jt(t),r&512&&n!==null&&Pi(n,n.return),t.flags&32){var i=t.stateNode;try{po(i,"")}catch(C){Ce(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&i_(i,s),wd(c,o);var d=wd(c,s);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?c_(i,m):f==="dangerouslySetInnerHTML"?a_(i,m):f==="children"?po(i,m):Fh(i,f,m,d)}switch(c){case"input":md(i,s);break;case"textarea":s_(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?ji(i,!!s.multiple,v,!1):g!==!!s.multiple&&(s.defaultValue!=null?ji(i,!!s.multiple,s.defaultValue,!0):ji(i,!!s.multiple,s.multiple?[]:"",!1))}i[xo]=s}catch(C){Ce(t,t.return,C)}}break;case 6:if(Bt(e,t),Jt(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Ce(t,t.return,C)}}break;case 3:if(Bt(e,t),Jt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yo(e.containerInfo)}catch(C){Ce(t,t.return,C)}break;case 4:Bt(e,t),Jt(t);break;case 13:Bt(e,t),Jt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(wf=je())),r&4&&Hg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(rt=(d=rt)||f,Bt(e,t),rt=d):Bt(e,t),Jt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(m=q=f;q!==null;){switch(g=q,v=g.child,g.tag){case 0:case 11:case 14:case 15:ro(4,g,g.return);break;case 1:Pi(g,g.return);var T=g.stateNode;if(typeof T.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(C){Ce(r,n,C)}}break;case 5:Pi(g,g.return);break;case 22:if(g.memoizedState!==null){Gg(m);continue}}v!==null?(v.return=g,q=v):Gg(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=l_("display",o))}catch(C){Ce(t,t.return,C)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(C){Ce(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Bt(e,t),Jt(t),r&4&&Hg(t);break;case 21:break;default:Bt(e,t),Jt(t)}}function Jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Dw(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(po(i,""),r.flags&=-33);var s=Wg(t);Xd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Wg(t);Qd(t,c,o);break;default:throw Error(F(161))}}catch(u){Ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function US(t,e,n){q=t,Vw(t)}function Vw(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ua;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||rt;c=Ua;var d=rt;if(Ua=o,(rt=u)&&!d)for(q=i;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Qg(i):u!==null?(u.return=o,q=u):Qg(i);for(;s!==null;)q=s,Vw(s),s=s.sibling;q=i,Ua=c,rt=d}Kg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Kg(t)}}function Kg(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rt||mc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$t(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&kg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&yo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}rt||e.flags&512&&Gd(e)}catch(g){Ce(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Gg(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Qg(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mc(4,e)}catch(u){Ce(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ce(e,i,u)}}var s=e.return;try{Gd(e)}catch(u){Ce(e,s,u)}break;case 5:var o=e.return;try{Gd(e)}catch(u){Ce(e,o,u)}}}catch(u){Ce(e,e.return,u)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var FS=Math.ceil,Vl=Mn.ReactCurrentDispatcher,yf=Mn.ReactCurrentOwner,Lt=Mn.ReactCurrentBatchConfig,se=0,ze=null,Oe=null,He=0,It=0,Ri=Sr(0),Me=0,Po=null,Xr=0,gc=0,_f=0,io=null,vt=null,wf=0,Qi=1/0,_n=null,Ml=!1,Yd=null,ur=null,Fa=!1,tr=null,Ul=0,so=0,Jd=null,sl=-1,ol=0;function ht(){return se&6?je():sl!==-1?sl:sl=je()}function dr(t){return t.mode&1?se&2&&He!==0?He&-He:xS.transition!==null?(ol===0&&(ol=E_()),ol):(t=le,t!==0||(t=window.event,t=t===void 0?16:A_(t.type)),t):1}function Kt(t,e,n,r){if(50<so)throw so=0,Jd=null,Error(F(185));$o(t,n,r),(!(se&2)||t!==ze)&&(t===ze&&(!(se&2)&&(gc|=n),Me===4&&Gn(t,He)),Tt(t,r),n===1&&se===0&&!(e.mode&1)&&(Qi=je()+500,hc&&Cr()))}function Tt(t,e){var n=t.callbackNode;xI(t,e);var r=Tl(t,t===ze?He:0);if(r===0)n!==null&&ig(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ig(n),e===1)t.tag===0?TS(Xg.bind(null,t)):K_(Xg.bind(null,t)),yS(function(){!(se&6)&&Cr()}),n=null;else{switch(T_(r)){case 1:n=Wh;break;case 4:n=__;break;case 16:n=El;break;case 536870912:n=w_;break;default:n=El}n=Ww(n,Mw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Mw(t,e){if(sl=-1,ol=0,se&6)throw Error(F(327));var n=t.callbackNode;if(Vi()&&t.callbackNode!==n)return null;var r=Tl(t,t===ze?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fl(t,r);else{e=r;var i=se;se|=2;var s=Fw();(ze!==t||He!==e)&&(_n=null,Qi=je()+500,Br(t,e));do try{$S();break}catch(c){Uw(t,c)}while(!0);sf(),Vl.current=s,se=i,Oe!==null?e=0:(ze=null,He=0,e=Me)}if(e!==0){if(e===2&&(i=Sd(t),i!==0&&(r=i,e=Zd(t,i))),e===1)throw n=Po,Br(t,0),Gn(t,r),Tt(t,je()),n;if(e===6)Gn(t,r);else{if(i=t.current.alternate,!(r&30)&&!zS(i)&&(e=Fl(t,r),e===2&&(s=Sd(t),s!==0&&(r=s,e=Zd(t,s))),e===1))throw n=Po,Br(t,0),Gn(t,r),Tt(t,je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Lr(t,vt,_n);break;case 3:if(Gn(t,r),(r&130023424)===r&&(e=wf+500-je(),10<e)){if(Tl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ht(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=bd(Lr.bind(null,t,vt,_n),e);break}Lr(t,vt,_n);break;case 4:if(Gn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ht(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FS(r/1960))-r,10<r){t.timeoutHandle=bd(Lr.bind(null,t,vt,_n),r);break}Lr(t,vt,_n);break;case 5:Lr(t,vt,_n);break;default:throw Error(F(329))}}}return Tt(t,je()),t.callbackNode===n?Mw.bind(null,t):null}function Zd(t,e){var n=io;return t.current.memoizedState.isDehydrated&&(Br(t,e).flags|=256),t=Fl(t,e),t!==2&&(e=vt,vt=n,e!==null&&eh(e)),t}function eh(t){vt===null?vt=t:vt.push.apply(vt,t)}function zS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Gt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gn(t,e){for(e&=~_f,e&=~gc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ht(e),r=1<<n;t[n]=-1,e&=~r}}function Xg(t){if(se&6)throw Error(F(327));Vi();var e=Tl(t,0);if(!(e&1))return Tt(t,je()),null;var n=Fl(t,e);if(t.tag!==0&&n===2){var r=Sd(t);r!==0&&(e=r,n=Zd(t,r))}if(n===1)throw n=Po,Br(t,0),Gn(t,e),Tt(t,je()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lr(t,vt,_n),Tt(t,je()),null}function Ef(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(Qi=je()+500,hc&&Cr())}}function Yr(t){tr!==null&&tr.tag===0&&!(se&6)&&Vi();var e=se;se|=1;var n=Lt.transition,r=le;try{if(Lt.transition=null,le=1,t)return t()}finally{le=r,Lt.transition=n,se=e,!(se&6)&&Cr()}}function Tf(){It=Ri.current,ye(Ri)}function Br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vS(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(tf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nl();break;case 3:Ki(),ye(wt),ye(st),df();break;case 5:uf(r);break;case 4:Ki();break;case 13:ye(Ee);break;case 19:ye(Ee);break;case 10:of(r.type._context);break;case 22:case 23:Tf()}n=n.return}if(ze=t,Oe=t=hr(t.current,null),He=It=e,Me=0,Po=null,_f=gc=Xr=0,vt=io=null,Ur!==null){for(e=0;e<Ur.length;e++)if(n=Ur[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ur=null}return t}function Uw(t,e){do{var n=Oe;try{if(sf(),nl.current=Ll,Ol){for(var r=Te.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ol=!1}if(Qr=0,Fe=Ve=Te=null,no=!1,Co=0,yf.current=null,n===null||n.return===null){Me=1,Po=e,Oe=null;break}e:{var s=t,o=n.return,c=n,u=e;if(e=He,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=Vg(o);if(v!==null){v.flags&=-257,Mg(v,o,c,s,e),v.mode&1&&Lg(s,d,e),e=v,u=d;var T=e.updateQueue;if(T===null){var C=new Set;C.add(u),e.updateQueue=C}else T.add(u);break e}else{if(!(e&1)){Lg(s,d,e),xf();break e}u=Error(F(426))}}else if(_e&&c.mode&1){var k=Vg(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Mg(k,o,c,s,e),nf(Gi(u,c));break e}}s=u=Gi(u,c),Me!==4&&(Me=2),io===null?io=[s]:io.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Tw(s,u,e);Rg(s,y);break e;case 1:c=u;var E=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ur===null||!ur.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=xw(s,c,e);Rg(s,x);break e}}s=s.return}while(s!==null)}Bw(n)}catch(O){e=O,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function Fw(){var t=Vl.current;return Vl.current=Ll,t===null?Ll:t}function xf(){(Me===0||Me===3||Me===2)&&(Me=4),ze===null||!(Xr&268435455)&&!(gc&268435455)||Gn(ze,He)}function Fl(t,e){var n=se;se|=2;var r=Fw();(ze!==t||He!==e)&&(_n=null,Br(t,e));do try{BS();break}catch(i){Uw(t,i)}while(!0);if(sf(),se=n,Vl.current=r,Oe!==null)throw Error(F(261));return ze=null,He=0,Me}function BS(){for(;Oe!==null;)zw(Oe)}function $S(){for(;Oe!==null&&!pI();)zw(Oe)}function zw(t){var e=qw(t.alternate,t,It);t.memoizedProps=t.pendingProps,e===null?Bw(t):Oe=e,yf.current=null}function Bw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LS(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Me=6,Oe=null;return}}else if(n=OS(n,e,It),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);Me===0&&(Me=5)}function Lr(t,e,n){var r=le,i=Lt.transition;try{Lt.transition=null,le=1,qS(t,e,n,r)}finally{Lt.transition=i,le=r}return null}function qS(t,e,n,r){do Vi();while(tr!==null);if(se&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(II(t,s),t===ze&&(Oe=ze=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fa||(Fa=!0,Ww(El,function(){return Vi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Lt.transition,Lt.transition=null;var o=le;le=1;var c=se;se|=4,yf.current=null,MS(t,n),Lw(n,t),uS(kd),xl=!!Rd,kd=Rd=null,t.current=n,US(n),mI(),se=c,le=o,Lt.transition=s}else t.current=n;if(Fa&&(Fa=!1,tr=t,Ul=i),s=t.pendingLanes,s===0&&(ur=null),yI(n.stateNode),Tt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ml)throw Ml=!1,t=Yd,Yd=null,t;return Ul&1&&t.tag!==0&&Vi(),s=t.pendingLanes,s&1?t===Jd?so++:(so=0,Jd=t):so=0,Cr(),null}function Vi(){if(tr!==null){var t=T_(Ul),e=Lt.transition,n=le;try{if(Lt.transition=null,le=16>t?16:t,tr===null)var r=!1;else{if(t=tr,tr=null,Ul=0,se&6)throw Error(F(331));var i=se;for(se|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var c=s.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:ro(8,f,s)}var m=f.child;if(m!==null)m.return=f,q=m;else for(;q!==null;){f=q;var g=f.sibling,v=f.return;if(bw(f),f===d){q=null;break}if(g!==null){g.return=v,q=g;break}q=v}}}var T=s.alternate;if(T!==null){var C=T.child;if(C!==null){T.child=null;do{var k=C.sibling;C.sibling=null,C=k}while(C!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ro(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,q=y;break e}q=s.return}}var E=t.current;for(q=E;q!==null;){o=q;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,q=S;else e:for(o=E;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:mc(9,c)}}catch(O){Ce(c,c.return,O)}if(c===o){q=null;break e}var x=c.sibling;if(x!==null){x.return=c.return,q=x;break e}q=c.return}}if(se=i,Cr(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(ac,t)}catch{}r=!0}return r}finally{le=n,Lt.transition=e}}return!1}function Yg(t,e,n){e=Gi(n,e),e=Tw(t,e,1),t=cr(t,e,1),e=ht(),t!==null&&($o(t,1,e),Tt(t,e))}function Ce(t,e,n){if(t.tag===3)Yg(t,t,n);else for(;e!==null;){if(e.tag===3){Yg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ur===null||!ur.has(r))){t=Gi(n,t),t=xw(e,t,1),e=cr(e,t,1),t=ht(),e!==null&&($o(e,1,t),Tt(e,t));break}}e=e.return}}function WS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ht(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(He&n)===n&&(Me===4||Me===3&&(He&130023424)===He&&500>je()-wf?Br(t,0):_f|=n),Tt(t,e)}function $w(t,e){e===0&&(t.mode&1?(e=Ra,Ra<<=1,!(Ra&130023424)&&(Ra=4194304)):e=1);var n=ht();t=Rn(t,e),t!==null&&($o(t,e,n),Tt(t,n))}function HS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$w(t,n)}function KS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),$w(t,n)}var qw;qw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,DS(t,e,n);_t=!!(t.flags&131072)}else _t=!1,_e&&e.flags&1048576&&G_(e,Rl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;il(t,e),t=e.pendingProps;var i=qi(e,st.current);Li(e,n),i=ff(null,e,r,t,i,n);var s=pf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(s=!0,Al(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lf(e),i.updater=pc,e.stateNode=i,i._reactInternals=e,Fd(e,r,t,n),e=$d(null,e,r,!0,s,n)):(e.tag=0,_e&&s&&ef(e),dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(il(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=QS(r),t=$t(r,t),i){case 0:e=Bd(null,e,r,t,n);break e;case 1:e=zg(null,e,r,t,n);break e;case 11:e=Ug(null,e,r,t,n);break e;case 14:e=Fg(null,e,r,$t(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$t(r,i),Bd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$t(r,i),zg(t,e,r,i,n);case 3:e:{if(Nw(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ew(t,e),bl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Gi(Error(F(423)),e),e=Bg(t,e,r,n,i);break e}else if(r!==i){i=Gi(Error(F(424)),e),e=Bg(t,e,r,n,i);break e}else for(St=lr(e.stateNode.containerInfo.firstChild),At=e,_e=!0,Wt=null,n=J_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wi(),r===i){e=kn(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return tw(e),t===null&&Vd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,jd(r,i)?o=null:s!==null&&jd(r,s)&&(e.flags|=32),Cw(t,e),dt(t,e,o,n),e.child;case 6:return t===null&&Vd(e),null;case 13:return Aw(t,e,n);case 4:return cf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hi(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$t(r,i),Ug(t,e,r,i,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,fe(kl,r._currentValue),r._currentValue=o,s!==null)if(Gt(s.value,o)){if(s.children===i.children&&!wt.current){e=kn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Cn(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Md(s.return,n,e),c.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(F(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Md(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Li(e,n),i=Ut(i),r=r(i),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,i=$t(r,e.pendingProps),i=$t(r.type,i),Fg(t,e,r,i,n);case 15:return Iw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$t(r,i),il(t,e),e.tag=1,Et(r)?(t=!0,Al(e)):t=!1,Li(e,n),Ew(e,r,i),Fd(e,r,i,n),$d(null,e,r,!0,t,n);case 19:return Pw(t,e,n);case 22:return Sw(t,e,n)}throw Error(F(156,e.tag))};function Ww(t,e){return y_(t,e)}function GS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,e,n,r){return new GS(t,e,n,r)}function If(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QS(t){if(typeof t=="function")return If(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bh)return 11;if(t===$h)return 14}return 2}function hr(t,e){var n=t.alternate;return n===null?(n=Ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function al(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")If(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case wi:return $r(n.children,i,s,e);case zh:o=8,i|=8;break;case ud:return t=Ot(12,n,e,i|2),t.elementType=ud,t.lanes=s,t;case dd:return t=Ot(13,n,e,i),t.elementType=dd,t.lanes=s,t;case hd:return t=Ot(19,n,e,i),t.elementType=hd,t.lanes=s,t;case t_:return vc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Zy:o=10;break e;case e_:o=9;break e;case Bh:o=11;break e;case $h:o=14;break e;case Wn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Ot(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $r(t,e,n,r){return t=Ot(7,t,r,e),t.lanes=n,t}function vc(t,e,n,r){return t=Ot(22,t,r,e),t.elementType=t_,t.lanes=n,t.stateNode={isHidden:!1},t}function qu(t,e,n){return t=Ot(6,t,null,e),t.lanes=n,t}function Wu(t,e,n){return e=Ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Su(0),this.expirationTimes=Su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Su(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Sf(t,e,n,r,i,s,o,c,u){return t=new XS(t,e,n,c,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ot(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lf(s),t}function YS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_i,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hw(t){if(!t)return yr;t=t._reactInternals;e:{if(ii(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Et(n))return H_(t,n,e)}return e}function Kw(t,e,n,r,i,s,o,c,u){return t=Sf(n,r,!0,t,i,s,o,c,u),t.context=Hw(null),n=t.current,r=ht(),i=dr(n),s=Cn(r,i),s.callback=e??null,cr(n,s,i),t.current.lanes=i,$o(t,i,r),Tt(t,r),t}function yc(t,e,n,r){var i=e.current,s=ht(),o=dr(i);return n=Hw(n),e.context===null?e.context=n:e.pendingContext=n,e=Cn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=cr(i,e,o),t!==null&&(Kt(t,i,o,s),tl(t,i,o)),o}function zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cf(t,e){Jg(t,e),(t=t.alternate)&&Jg(t,e)}function JS(){return null}var Gw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nf(t){this._internalRoot=t}_c.prototype.render=Nf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));yc(t,e,null,null)};_c.prototype.unmount=Nf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yr(function(){yc(null,t,null,null)}),e[Pn]=null}};function _c(t){this._internalRoot=t}_c.prototype.unstable_scheduleHydration=function(t){if(t){var e=S_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kn.length&&e!==0&&e<Kn[n].priority;n++);Kn.splice(n,0,t),n===0&&N_(t)}};function Af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zg(){}function ZS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=zl(o);s.call(d)}}var o=Kw(e,r,t,0,null,!1,!1,"",Zg);return t._reactRootContainer=o,t[Pn]=o.current,Eo(t.nodeType===8?t.parentNode:t),Yr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=zl(u);c.call(d)}}var u=Sf(t,0,!1,null,null,!1,!1,"",Zg);return t._reactRootContainer=u,t[Pn]=u.current,Eo(t.nodeType===8?t.parentNode:t),Yr(function(){yc(e,u,n,r)}),u}function Ec(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var c=i;i=function(){var u=zl(o);c.call(u)}}yc(e,o,t,i)}else o=ZS(n,e,t,i,r);return zl(o)}x_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qs(e.pendingLanes);n!==0&&(Hh(e,n|1),Tt(e,je()),!(se&6)&&(Qi=je()+500,Cr()))}break;case 13:Yr(function(){var r=Rn(t,1);if(r!==null){var i=ht();Kt(r,t,1,i)}}),Cf(t,1)}};Kh=function(t){if(t.tag===13){var e=Rn(t,134217728);if(e!==null){var n=ht();Kt(e,t,134217728,n)}Cf(t,134217728)}};I_=function(t){if(t.tag===13){var e=dr(t),n=Rn(t,e);if(n!==null){var r=ht();Kt(n,t,e,r)}Cf(t,e)}};S_=function(){return le};C_=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};Td=function(t,e,n){switch(e){case"input":if(md(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=dc(r);if(!i)throw Error(F(90));r_(r),md(r,i)}}}break;case"textarea":s_(t,n);break;case"select":e=n.value,e!=null&&ji(t,!!n.multiple,e,!1)}};h_=Ef;f_=Yr;var eC={usingClientEntryPoint:!1,Events:[Wo,Ii,dc,u_,d_,Ef]},Vs={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tC={bundleType:Vs.bundleType,version:Vs.version,rendererPackageName:Vs.rendererPackageName,rendererConfig:Vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=g_(t),t===null?null:t.stateNode},findFiberByHostInstance:Vs.findFiberByHostInstance||JS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{ac=za.inject(tC),nn=za}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eC;Rt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Af(e))throw Error(F(200));return YS(t,e,null,n)};Rt.createRoot=function(t,e){if(!Af(t))throw Error(F(299));var n=!1,r="",i=Gw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Sf(t,1,!1,null,null,n,!1,r,i),t[Pn]=e.current,Eo(t.nodeType===8?t.parentNode:t),new Nf(e)};Rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=g_(e),t=t===null?null:t.stateNode,t};Rt.flushSync=function(t){return Yr(t)};Rt.hydrate=function(t,e,n){if(!wc(e))throw Error(F(200));return Ec(null,t,e,!0,n)};Rt.hydrateRoot=function(t,e,n){if(!Af(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Gw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Kw(e,null,t,1,n??null,i,!1,s,o),t[Pn]=e.current,Eo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new _c(e)};Rt.render=function(t,e,n){if(!wc(e))throw Error(F(200));return Ec(null,t,e,!1,n)};Rt.unmountComponentAtNode=function(t){if(!wc(t))throw Error(F(40));return t._reactRootContainer?(Yr(function(){Ec(null,null,t,!1,function(){t._reactRootContainer=null,t[Pn]=null})}),!0):!1};Rt.unstable_batchedUpdates=Ef;Rt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wc(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Ec(t,e,n,!1,r)};Rt.version="18.3.1-next-f1338f8080-20240426";function Qw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qw)}catch(t){console.error(t)}}Qw(),Qy.exports=Rt;var nC=Qy.exports,ev=nC;ld.createRoot=ev.createRoot,ld.hydrateRoot=ev.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ro(){return Ro=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ro.apply(this,arguments)}var nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(nr||(nr={}));const tv="popstate";function rC(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:c="",hash:u=""}=si(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),th("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof s=="string"?s:Bl(s))}function r(i,s){Tc(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return sC(e,n,r,t)}function be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Tc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iC(){return Math.random().toString(36).substr(2,8)}function nv(t,e){return{usr:t.state,key:t.key,idx:e}}function th(t,e,n,r){return n===void 0&&(n=null),Ro({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?si(e):e,{state:n,key:e&&e.key||r||iC()})}function Bl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function si(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,c=nr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Ro({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){c=nr.Pop;let k=f(),y=k==null?null:k-d;d=k,u&&u({action:c,location:C.location,delta:y})}function g(k,y){c=nr.Push;let E=th(C.location,k,y);n&&n(E,k),d=f()+1;let S=nv(E,d),x=C.createHref(E);try{o.pushState(S,"",x)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(x)}s&&u&&u({action:c,location:C.location,delta:1})}function v(k,y){c=nr.Replace;let E=th(C.location,k,y);n&&n(E,k),d=f();let S=nv(E,d),x=C.createHref(E);o.replaceState(S,"",x),s&&u&&u({action:c,location:C.location,delta:0})}function T(k){let y=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof k=="string"?k:Bl(k);return E=E.replace(/ $/,"%20"),be(y,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,y)}let C={get action(){return c},get location(){return t(i,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(tv,m),u=k,()=>{i.removeEventListener(tv,m),u=null}},createHref(k){return e(i,k)},createURL:T,encodeLocation(k){let y=T(k);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:v,go(k){return o.go(k)}};return C}var rv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rv||(rv={}));function oC(t,e,n){return n===void 0&&(n="/"),aC(t,e,n)}function aC(t,e,n,r){let i=typeof e=="string"?si(e):e,s=Pf(i.pathname||"/",n);if(s==null)return null;let o=Xw(t);lC(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=wC(s);c=vC(o[u],d)}return c}function Xw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(be(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=fr([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(be(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Xw(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:mC(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,o);else for(let u of Yw(s.path))i(s,o,u)}),e}function Yw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Yw(r.join("/")),c=[];return c.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function lC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cC=/^:[\w-]+$/,uC=3,dC=2,hC=1,fC=10,pC=-2,iv=t=>t==="*";function mC(t,e){let n=t.split("/"),r=n.length;return n.some(iv)&&(r+=pC),e&&(r+=dC),n.filter(i=>!iv(i)).reduce((i,s)=>i+(cC.test(s)?uC:s===""?hC:fC),r)}function gC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function vC(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",m=yC({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:fr([s,m.pathname]),pathnameBase:SC(fr([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=fr([s,m.pathnameBase]))}return o}function yC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_C(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:v}=f;if(g==="*"){let C=c[m]||"";o=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const T=c[m];return v&&!T?d[g]=void 0:d[g]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function _C(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Tc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function wC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const EC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TC=t=>EC.test(t);function xC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?si(t):t,s;if(n)if(TC(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Tc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=sv(n.substring(1),"/"):s=sv(n,e)}else s=e;return{pathname:s,search:CC(r),hash:NC(i)}}function sv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Hu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rf(t,e){let n=IC(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function kf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=si(t):(i=Ro({},t),be(!i.pathname||!i.pathname.includes("?"),Hu("?","pathname","search",i)),be(!i.pathname||!i.pathname.includes("#"),Hu("#","pathname","hash",i)),be(!i.search||!i.search.includes("#"),Hu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=xC(i,c),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const fr=t=>t.join("/").replace(/\/\/+/g,"/"),SC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function AC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Jw=["post","put","patch","delete"];new Set(Jw);const PC=["get",...Jw];new Set(PC);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ko(){return ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ko.apply(this,arguments)}const jf=b.createContext(null),RC=b.createContext(null),Nr=b.createContext(null),xc=b.createContext(null),Un=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Zw=b.createContext(null);function kC(t,e){let{relative:n}=e===void 0?{}:e;ls()||be(!1);let{basename:r,navigator:i}=b.useContext(Nr),{hash:s,pathname:o,search:c}=tE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:fr([r,o])),i.createHref({pathname:u,search:c,hash:s})}function ls(){return b.useContext(xc)!=null}function Ko(){return ls()||be(!1),b.useContext(xc).location}function eE(t){b.useContext(Nr).static||b.useLayoutEffect(t)}function jt(){let{isDataRoute:t}=b.useContext(Un);return t?qC():jC()}function jC(){ls()||be(!1);let t=b.useContext(jf),{basename:e,future:n,navigator:r}=b.useContext(Nr),{matches:i}=b.useContext(Un),{pathname:s}=Ko(),o=JSON.stringify(Rf(i,n.v7_relativeSplatPath)),c=b.useRef(!1);return eE(()=>{c.current=!0}),b.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=kf(d,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:fr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,s,t])}function bf(){let{matches:t}=b.useContext(Un),e=t[t.length-1];return e?e.params:{}}function tE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(Nr),{matches:i}=b.useContext(Un),{pathname:s}=Ko(),o=JSON.stringify(Rf(i,r.v7_relativeSplatPath));return b.useMemo(()=>kf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function bC(t,e){return DC(t,e)}function DC(t,e,n,r){ls()||be(!1);let{navigator:i}=b.useContext(Nr),{matches:s}=b.useContext(Un),o=s[s.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Ko(),f;if(e){var m;let k=typeof e=="string"?si(e):e;u==="/"||(m=k.pathname)!=null&&m.startsWith(u)||be(!1),f=k}else f=d;let g=f.pathname||"/",v=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let T=oC(t,{pathname:v}),C=UC(T&&T.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:fr([u,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:fr([u,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r);return e&&C?b.createElement(xc.Provider,{value:{location:ko({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:nr.Pop}},C):C}function OC(){let t=$C(),e=AC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const LC=b.createElement(OC,null);class VC extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Un.Provider,{value:this.props.routeContext},b.createElement(Zw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MC(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(jf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Un.Provider,{value:e},r)}function UC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let f=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||be(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:v}=n,T=m.route.loader&&g[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let v,T=!1,C=null,k=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,C=m.route.errorElement||LC,u&&(d<0&&g===0?(WC("route-fallback"),T=!0,k=null):d===g&&(T=!0,k=m.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,g+1)),E=()=>{let S;return v?S=C:T?S=k:m.route.Component?S=b.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=f,b.createElement(MC,{match:m,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:S})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?b.createElement(VC,{location:n.location,revalidation:n.revalidation,component:C,error:v,children:E(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):E()},null)}var nE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nE||{}),rE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rE||{});function FC(t){let e=b.useContext(jf);return e||be(!1),e}function zC(t){let e=b.useContext(RC);return e||be(!1),e}function BC(t){let e=b.useContext(Un);return e||be(!1),e}function iE(t){let e=BC(),n=e.matches[e.matches.length-1];return n.route.id||be(!1),n.route.id}function $C(){var t;let e=b.useContext(Zw),n=zC(),r=iE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function qC(){let{router:t}=FC(nE.UseNavigateStable),e=iE(rE.UseNavigateStable),n=b.useRef(!1);return eE(()=>{n.current=!0}),b.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ko({fromRouteId:e},s)))},[t,e])}const ov={};function WC(t,e,n){ov[t]||(ov[t]=!0)}function HC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function av(t){let{to:e,replace:n,state:r,relative:i}=t;ls()||be(!1);let{future:s,static:o}=b.useContext(Nr),{matches:c}=b.useContext(Un),{pathname:u}=Ko(),d=jt(),f=kf(e,Rf(c,s.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(f);return b.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:i}),[d,m,i,n,r]),null}function gt(t){be(!1)}function KC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=nr.Pop,navigator:s,static:o=!1,future:c}=t;ls()&&be(!1);let u=e.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:u,navigator:s,static:o,future:ko({v7_relativeSplatPath:!1},c)}),[u,c,s,o]);typeof r=="string"&&(r=si(r));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:T="default"}=r,C=b.useMemo(()=>{let k=Pf(f,u);return k==null?null:{location:{pathname:k,search:m,hash:g,state:v,key:T},navigationType:i}},[u,f,m,g,v,T,i]);return C==null?null:b.createElement(Nr.Provider,{value:d},b.createElement(xc.Provider,{children:n,value:C}))}function lv(t){let{children:e,location:n}=t;return bC(nh(e),n)}new Promise(()=>{});function nh(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){n.push.apply(n,nh(r.props.children,s));return}r.type!==gt&&be(!1),!r.props.index||!r.props.children||be(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=nh(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rh(){return rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rh.apply(this,arguments)}function GC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function QC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XC(t,e){return t.button===0&&(!e||e==="_self")&&!QC(t)}const YC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],JC="6";try{window.__reactRouterVersion=JC}catch{}const ZC="startTransition",cv=Wx[ZC];function eN(t){let{basename:e,children:n,future:r,window:i}=t,s=b.useRef();s.current==null&&(s.current=rC({window:i,v5Compat:!0}));let o=s.current,[c,u]=b.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=b.useCallback(m=>{d&&cv?cv(()=>u(m)):u(m)},[u,d]);return b.useLayoutEffect(()=>o.listen(f),[o,f]),b.useEffect(()=>HC(r),[r]),b.createElement(KC,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const tN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uv=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=GC(e,YC),{basename:v}=b.useContext(Nr),T,C=!1;if(typeof d=="string"&&nN.test(d)&&(T=d,tN))try{let S=new URL(window.location.href),x=d.startsWith("//")?new URL(S.protocol+d):new URL(d),O=Pf(x.pathname,v);x.origin===S.origin&&O!=null?d=O+x.search+x.hash:C=!0}catch{}let k=kC(d,{relative:i}),y=rN(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:m});function E(S){r&&r(S),S.defaultPrevented||y(S)}return b.createElement("a",rh({},g,{href:T||k,onClick:C||s?r:E,ref:n,target:u}))});var dv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dv||(dv={}));var hv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hv||(hv={}));function rN(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:c}=e===void 0?{}:e,u=jt(),d=Ko(),f=tE(t,{relative:o});return b.useCallback(m=>{if(XC(m,n)){m.preventDefault();let g=r!==void 0?r:Bl(d)===Bl(f);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:c})}},[d,u,f,r,i,n,t,s,o,c])}const sE="zerosei_cart";function oE(){try{const t=localStorage.getItem(sE);if(t)return JSON.parse(t)}catch(t){console.error("Error loading cart:",t)}return{items:[],total:0}}function Ic(t){try{localStorage.setItem(sE,JSON.stringify(t))}catch(e){console.error("Error saving cart:",e)}}function Sc(t){const e=t.modifications?t.modifications.reduce((n,r)=>n+r.price,0):0;return t.product.price+e}function Df(t){return t.reduce((e,n)=>{const r=Sc(n);return e+r*n.quantity},0)}function fv(t){return!t||t.length===0?"":t.map(e=>e.id).sort().join("|")}function aE(t,e,n=1,r,i){const s=fv(i),o=t.items.findIndex(d=>{const f=fv(d.modifications);return d.product.id===e.id&&f===s});let c;o>=0?(c=[...t.items],c[o]={...c[o],quantity:c[o].quantity+n,notes:r?c[o].notes?`${c[o].notes}, ${r}`:r:c[o].notes}):c=[...t.items,{product:e,quantity:n,notes:r,modifications:i}];const u={items:c,total:Df(c)};return Ic(u),u}function lE(t,e){const n=t.items.filter((i,s)=>s!==e),r={items:n,total:Df(n)};return Ic(r),r}function iN(t,e,n){if(n<=0)return lE(t,e);const r=t.items.map((s,o)=>o===e?{...s,quantity:n}:s),i={items:r,total:Df(r)};return Ic(i),i}function sN(){const t={items:[],total:0};return Ic(t),t}function oN(t){return t.items.reduce((e,n)=>e+n.quantity,0)}var pv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},aN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},uE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,m=(s&3)<<4|c>>4;let g=(c&15)<<2|d>>6,v=d&63;u||(v=64,o||(g=64)),r.push(n[f],n[m],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||m==null)throw new lN;const g=s<<2|c>>4;if(r.push(g),d!==64){const v=c<<4&240|d>>2;if(r.push(v),m!==64){const T=d<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cN=function(t){const e=cE(t);return uE.encodeByteArray(e,!0)},$l=function(t){return cN(t).replace(/\./g,"")},dE=function(t){try{return uE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=()=>uN().__FIREBASE_DEFAULTS__,hN=()=>{if(typeof process>"u"||typeof pv>"u")return;const t=pv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dE(t[1]);return e&&JSON.parse(e)},Cc=()=>{try{return dN()||hN()||fN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hE=t=>{var e,n;return(n=(e=Cc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Of=t=>{const e=hE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},fE=()=>{var t;return(t=Cc())===null||t===void 0?void 0:t.config},pE=t=>{var e;return(e=Cc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$l(JSON.stringify(n)),$l(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function gN(){var t;const e=(t=Cc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _N(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wN(){const t=ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function EN(){return!gN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TN(){try{return typeof indexedDB=="object"}catch{return!1}}function xN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="FirebaseError";class Yt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=IN,Object.setPrototypeOf(this,Yt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Go.prototype.create)}}class Go{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?SN(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Yt(i,c,r)}}function SN(t,e){return t.replace(CN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const CN=/\{\$([^}]+)}/g;function NN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ql(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(mv(s)&&mv(o)){if(!ql(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function AN(t,e){const n=new PN(t,e);return n.subscribe.bind(n)}class PN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");RN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ku),i.error===void 0&&(i.error=Ku),i.complete===void 0&&(i.complete=Ku);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ku(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class jn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bN(e))try{this.getOrInitializeService({instanceIdentifier:Vr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Vr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vr){return this.instances.has(e)}getOptions(e=Vr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vr){return this.component?this.component.multipleInstances?e:Vr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jN(t){return t===Vr?void 0:t}function bN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const ON={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},LN=ne.INFO,VN={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},MN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=VN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lf{constructor(e){this.name=e,this._logLevel=LN,this._logHandler=MN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ON[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const UN=(t,e)=>e.some(n=>t instanceof n);let gv,vv;function FN(){return gv||(gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zN(){return vv||(vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gE=new WeakMap,ih=new WeakMap,vE=new WeakMap,Gu=new WeakMap,Vf=new WeakMap;function BN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(pr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gE.set(n,t)}).catch(()=>{}),Vf.set(e,t),e}function $N(t){if(ih.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ih.set(t,e)}let sh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ih.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qN(t){sh=t(sh)}function WN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qu(this),e,...n);return vE.set(r,e.sort?e.sort():[e]),pr(r)}:zN().includes(t)?function(...e){return t.apply(Qu(this),e),pr(gE.get(this))}:function(...e){return pr(t.apply(Qu(this),e))}}function HN(t){return typeof t=="function"?WN(t):(t instanceof IDBTransaction&&$N(t),UN(t,FN())?new Proxy(t,sh):t)}function pr(t){if(t instanceof IDBRequest)return BN(t);if(Gu.has(t))return Gu.get(t);const e=HN(t);return e!==t&&(Gu.set(t,e),Vf.set(e,t)),e}const Qu=t=>Vf.get(t);function KN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),c=pr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(pr(o.result),u.oldVersion,u.newVersion,pr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const GN=["get","getKey","getAll","getAllKeys","count"],QN=["put","add","delete","clear"],Xu=new Map;function yv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xu.get(e))return Xu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=QN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||GN.includes(n)))return;const s=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return Xu.set(e,s),s}qN(t=>({...t,get:(e,n,r)=>yv(e,n)||t.get(e,n,r),has:(e,n)=>!!yv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const oh="@firebase/app",_v="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new Lf("@firebase/app"),JN="@firebase/app-compat",ZN="@firebase/analytics-compat",eA="@firebase/analytics",tA="@firebase/app-check-compat",nA="@firebase/app-check",rA="@firebase/auth",iA="@firebase/auth-compat",sA="@firebase/database",oA="@firebase/data-connect",aA="@firebase/database-compat",lA="@firebase/functions",cA="@firebase/functions-compat",uA="@firebase/installations",dA="@firebase/installations-compat",hA="@firebase/messaging",fA="@firebase/messaging-compat",pA="@firebase/performance",mA="@firebase/performance-compat",gA="@firebase/remote-config",vA="@firebase/remote-config-compat",yA="@firebase/storage",_A="@firebase/storage-compat",wA="@firebase/firestore",EA="@firebase/vertexai-preview",TA="@firebase/firestore-compat",xA="firebase",IA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="[DEFAULT]",SA={[oh]:"fire-core",[JN]:"fire-core-compat",[eA]:"fire-analytics",[ZN]:"fire-analytics-compat",[nA]:"fire-app-check",[tA]:"fire-app-check-compat",[rA]:"fire-auth",[iA]:"fire-auth-compat",[sA]:"fire-rtdb",[oA]:"fire-data-connect",[aA]:"fire-rtdb-compat",[lA]:"fire-fn",[cA]:"fire-fn-compat",[uA]:"fire-iid",[dA]:"fire-iid-compat",[hA]:"fire-fcm",[fA]:"fire-fcm-compat",[pA]:"fire-perf",[mA]:"fire-perf-compat",[gA]:"fire-rc",[vA]:"fire-rc-compat",[yA]:"fire-gcs",[_A]:"fire-gcs-compat",[wA]:"fire-fst",[TA]:"fire-fst-compat",[EA]:"fire-vertex","fire-js":"fire-js",[xA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new Map,CA=new Map,lh=new Map;function wv(t,e){try{t.container.addComponent(e)}catch(n){bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _r(t){const e=t.name;if(lh.has(e))return bn.debug(`There were multiple attempts to register component ${e}.`),!1;lh.set(e,t);for(const n of Wl.values())wv(n,t);for(const n of CA.values())wv(n,t);return!0}function Xo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new Go("app","Firebase",NA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=IA;function yE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ah,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw mr.create("bad-app-name",{appName:String(i)});if(n||(n=fE()),!n)throw mr.create("no-options");const s=Wl.get(i);if(s){if(ql(n,s.options)&&ql(r,s.config))return s;throw mr.create("duplicate-app",{appName:i})}const o=new DN(i);for(const u of lh.values())o.addComponent(u);const c=new AA(n,r,o);return Wl.set(i,c),c}function Nc(t=ah){const e=Wl.get(t);if(!e&&t===ah&&fE())return yE();if(!e)throw mr.create("no-app",{appName:t});return e}function Vt(t,e,n){var r;let i=(r=SA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bn.warn(c.join(" "));return}_r(new jn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="firebase-heartbeat-database",RA=1,jo="firebase-heartbeat-store";let Yu=null;function _E(){return Yu||(Yu=KN(PA,RA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jo)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),Yu}async function kA(t){try{const n=(await _E()).transaction(jo),r=await n.objectStore(jo).get(wE(t));return await n.done,r}catch(e){if(e instanceof Yt)bn.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bn.warn(n.message)}}}async function Ev(t,e){try{const r=(await _E()).transaction(jo,"readwrite");await r.objectStore(jo).put(e,wE(t)),await r.done}catch(n){if(n instanceof Yt)bn.warn(n.message);else{const r=mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bn.warn(r.message)}}}function wE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=1024,bA=30*24*60*60*1e3;class DA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Tv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=bA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tv(),{heartbeatsToSend:r,unsentEntries:i}=OA(this._heartbeatsCache.heartbeats),s=$l(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return bn.warn(n),""}}}function Tv(){return new Date().toISOString().substring(0,10)}function OA(t,e=jA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TN()?xN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xv(t){return $l(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){_r(new jn("platform-logger",e=>new XN(e),"PRIVATE")),_r(new jn("heartbeat",e=>new DA(e),"PRIVATE")),Vt(oh,_v,t),Vt(oh,_v,"esm2017"),Vt("fire-js","")}VA("");var MA="firebase",UA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt(MA,UA,"app");var Iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qr,EE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function A(){}A.prototype=_.prototype,I.D=_.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(R,N,D){for(var P=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)P[pe-2]=arguments[pe];return _.prototype[N].apply(R,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,_,A){A||(A=0);var R=Array(16);if(typeof _=="string")for(var N=0;16>N;++N)R[N]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(N=0;16>N;++N)R[N]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=I.g[0],A=I.g[1],N=I.g[2];var D=I.g[3],P=_+(D^A&(N^D))+R[0]+3614090360&4294967295;_=A+(P<<7&4294967295|P>>>25),P=D+(N^_&(A^N))+R[1]+3905402710&4294967295,D=_+(P<<12&4294967295|P>>>20),P=N+(A^D&(_^A))+R[2]+606105819&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(_^N&(D^_))+R[3]+3250441966&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(D^A&(N^D))+R[4]+4118548399&4294967295,_=A+(P<<7&4294967295|P>>>25),P=D+(N^_&(A^N))+R[5]+1200080426&4294967295,D=_+(P<<12&4294967295|P>>>20),P=N+(A^D&(_^A))+R[6]+2821735955&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(_^N&(D^_))+R[7]+4249261313&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(D^A&(N^D))+R[8]+1770035416&4294967295,_=A+(P<<7&4294967295|P>>>25),P=D+(N^_&(A^N))+R[9]+2336552879&4294967295,D=_+(P<<12&4294967295|P>>>20),P=N+(A^D&(_^A))+R[10]+4294925233&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(_^N&(D^_))+R[11]+2304563134&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(D^A&(N^D))+R[12]+1804603682&4294967295,_=A+(P<<7&4294967295|P>>>25),P=D+(N^_&(A^N))+R[13]+4254626195&4294967295,D=_+(P<<12&4294967295|P>>>20),P=N+(A^D&(_^A))+R[14]+2792965006&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(_^N&(D^_))+R[15]+1236535329&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(N^D&(A^N))+R[1]+4129170786&4294967295,_=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(_^A))+R[6]+3225465664&4294967295,D=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(D^_))+R[11]+643717713&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^_&(N^D))+R[0]+3921069994&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(N^D&(A^N))+R[5]+3593408605&4294967295,_=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(_^A))+R[10]+38016083&4294967295,D=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(D^_))+R[15]+3634488961&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^_&(N^D))+R[4]+3889429448&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(N^D&(A^N))+R[9]+568446438&4294967295,_=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(_^A))+R[14]+3275163606&4294967295,D=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(D^_))+R[3]+4107603335&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^_&(N^D))+R[8]+1163531501&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(N^D&(A^N))+R[13]+2850285829&4294967295,_=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(_^A))+R[2]+4243563512&4294967295,D=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(D^_))+R[7]+1735328473&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^_&(N^D))+R[12]+2368359562&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(A^N^D)+R[5]+4294588738&4294967295,_=A+(P<<4&4294967295|P>>>28),P=D+(_^A^N)+R[8]+2272392833&4294967295,D=_+(P<<11&4294967295|P>>>21),P=N+(D^_^A)+R[11]+1839030562&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^_)+R[14]+4259657740&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(A^N^D)+R[1]+2763975236&4294967295,_=A+(P<<4&4294967295|P>>>28),P=D+(_^A^N)+R[4]+1272893353&4294967295,D=_+(P<<11&4294967295|P>>>21),P=N+(D^_^A)+R[7]+4139469664&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^_)+R[10]+3200236656&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(A^N^D)+R[13]+681279174&4294967295,_=A+(P<<4&4294967295|P>>>28),P=D+(_^A^N)+R[0]+3936430074&4294967295,D=_+(P<<11&4294967295|P>>>21),P=N+(D^_^A)+R[3]+3572445317&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^_)+R[6]+76029189&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(A^N^D)+R[9]+3654602809&4294967295,_=A+(P<<4&4294967295|P>>>28),P=D+(_^A^N)+R[12]+3873151461&4294967295,D=_+(P<<11&4294967295|P>>>21),P=N+(D^_^A)+R[15]+530742520&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^_)+R[2]+3299628645&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(N^(A|~D))+R[0]+4096336452&4294967295,_=A+(P<<6&4294967295|P>>>26),P=D+(A^(_|~N))+R[7]+1126891415&4294967295,D=_+(P<<10&4294967295|P>>>22),P=N+(_^(D|~A))+R[14]+2878612391&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~_))+R[5]+4237533241&4294967295,A=N+(P<<21&4294967295|P>>>11),P=_+(N^(A|~D))+R[12]+1700485571&4294967295,_=A+(P<<6&4294967295|P>>>26),P=D+(A^(_|~N))+R[3]+2399980690&4294967295,D=_+(P<<10&4294967295|P>>>22),P=N+(_^(D|~A))+R[10]+4293915773&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~_))+R[1]+2240044497&4294967295,A=N+(P<<21&4294967295|P>>>11),P=_+(N^(A|~D))+R[8]+1873313359&4294967295,_=A+(P<<6&4294967295|P>>>26),P=D+(A^(_|~N))+R[15]+4264355552&4294967295,D=_+(P<<10&4294967295|P>>>22),P=N+(_^(D|~A))+R[6]+2734768916&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~_))+R[13]+1309151649&4294967295,A=N+(P<<21&4294967295|P>>>11),P=_+(N^(A|~D))+R[4]+4149444226&4294967295,_=A+(P<<6&4294967295|P>>>26),P=D+(A^(_|~N))+R[11]+3174756917&4294967295,D=_+(P<<10&4294967295|P>>>22),P=N+(_^(D|~A))+R[2]+718787259&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~_))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var A=_-this.blockSize,R=this.B,N=this.h,D=0;D<_;){if(N==0)for(;D<=A;)i(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<_;)if(R[N++]=I.charCodeAt(D++),N==this.blockSize){i(this,R),N=0;break}}else for(;D<_;)if(R[N++]=I[D++],N==this.blockSize){i(this,R),N=0;break}}this.h=N,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var A=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=A&255,A/=256;for(this.u(I),I=Array(16),_=A=0;4>_;++_)for(var R=0;32>R;R+=8)I[A++]=this.g[_]>>>R&255;return I};function s(I,_){var A=c;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=_(I)}function o(I,_){this.h=_;for(var A=[],R=!0,N=I.length-1;0<=N;N--){var D=I[N]|0;R&&D==_||(A[N]=D,R=!1)}this.g=A}var c={};function u(I){return-128<=I&&128>I?s(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return k(d(-I));for(var _=[],A=1,R=0;I>=A;R++)_[R]=I/A|0,A*=4294967296;return new o(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return k(f(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(_,8)),R=m,N=0;N<I.length;N+=8){var D=Math.min(8,I.length-N),P=parseInt(I.substring(N,N+D),_);8>D?(D=d(Math.pow(_,D)),R=R.j(D).add(d(P))):(R=R.j(A),R=R.add(d(P)))}return R}var m=u(0),g=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-k(this).m();for(var I=0,_=1,A=0;A<this.g.length;A++){var R=this.i(A);I+=(0<=R?R:4294967296+R)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(C(this))return"-"+k(this).toString(I);for(var _=d(Math.pow(I,6)),A=this,R="";;){var N=x(A,_).g;A=y(A,N.j(_));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=N,T(A))return D+R;for(;6>D.length;)D="0"+D;R=D+R}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function C(I){return I.h==-1}t.l=function(I){return I=y(this,I),C(I)?-1:T(I)?0:1};function k(I){for(var _=I.g.length,A=[],R=0;R<_;R++)A[R]=~I.g[R];return new o(A,~I.h).add(g)}t.abs=function(){return C(this)?k(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),A=[],R=0,N=0;N<=_;N++){var D=R+(this.i(N)&65535)+(I.i(N)&65535),P=(D>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);R=P>>>16,D&=65535,P&=65535,A[N]=P<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(I,_){return I.add(k(_))}t.j=function(I){if(T(this)||T(I))return m;if(C(this))return C(I)?k(this).j(k(I)):k(k(this).j(I));if(C(I))return k(this.j(k(I)));if(0>this.l(v)&&0>I.l(v))return d(this.m()*I.m());for(var _=this.g.length+I.g.length,A=[],R=0;R<2*_;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<I.g.length;N++){var D=this.i(R)>>>16,P=this.i(R)&65535,pe=I.i(N)>>>16,Rr=I.i(N)&65535;A[2*R+2*N]+=P*Rr,E(A,2*R+2*N),A[2*R+2*N+1]+=D*Rr,E(A,2*R+2*N+1),A[2*R+2*N+1]+=P*pe,E(A,2*R+2*N+1),A[2*R+2*N+2]+=D*pe,E(A,2*R+2*N+2)}for(R=0;R<_;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=_;R<2*_;R++)A[R]=0;return new o(A,0)};function E(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function S(I,_){this.g=I,this.h=_}function x(I,_){if(T(_))throw Error("division by zero");if(T(I))return new S(m,m);if(C(I))return _=x(k(I),_),new S(k(_.g),k(_.h));if(C(_))return _=x(I,k(_)),new S(k(_.g),_.h);if(30<I.g.length){if(C(I)||C(_))throw Error("slowDivide_ only works with positive integers.");for(var A=g,R=_;0>=R.l(I);)A=O(A),R=O(R);var N=j(A,1),D=j(R,1);for(R=j(R,2),A=j(A,2);!T(R);){var P=D.add(R);0>=P.l(I)&&(N=N.add(A),D=P),R=j(R,1),A=j(A,1)}return _=y(I,N.j(_)),new S(N,_)}for(N=m;0<=I.l(_);){for(A=Math.max(1,Math.floor(I.m()/_.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),D=d(A),P=D.j(_);C(P)||0<P.l(I);)A-=R,D=d(A),P=D.j(_);T(D)&&(D=g),N=N.add(D),I=y(I,P)}return new S(N,I)}t.A=function(I){return x(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),A=[],R=0;R<_;R++)A[R]=this.i(R)&I.i(R);return new o(A,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),A=[],R=0;R<_;R++)A[R]=this.i(R)|I.i(R);return new o(A,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),A=[],R=0;R<_;R++)A[R]=this.i(R)^I.i(R);return new o(A,this.h^I.h)};function O(I){for(var _=I.g.length+1,A=[],R=0;R<_;R++)A[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(A,I.h)}function j(I,_){var A=_>>5;_%=32;for(var R=I.g.length-A,N=[],D=0;D<R;D++)N[D]=0<_?I.i(D+A)>>>_|I.i(D+A+1)<<32-_:I.i(D+A);return new o(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,EE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,qr=o}).apply(typeof Iv<"u"?Iv:typeof self<"u"?self:typeof window<"u"?window:{});var Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TE,Hs,xE,ll,ch,IE,SE,CE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ba=="object"&&Ba];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var L=l[w];if(!(L in p))break e;p=p[L]}l=l[l.length-1],w=p[l],h=h(w),h!=w&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var p=0,w=!1,L={next:function(){if(!w&&p<l.length){var V=p++;return{value:h(V,l[V]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),l.apply(h,L)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function v(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var w=p.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function T(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(w,L,V){for(var z=Array(arguments.length-2),he=2;he<arguments.length;he++)z[he-2]=arguments[he];return h.prototype[L].apply(w,z)}}function C(l){const h=l.length;if(0<h){const p=Array(h);for(let w=0;w<h;w++)p[w]=l[w];return p}return[]}function k(l,h){for(let p=1;p<arguments.length;p++){const w=arguments[p];if(u(w)){const L=l.length||0,V=w.length||0;l.length=L+V;for(let z=0;z<V;z++)l[L+z]=w[z]}else l.push(w)}}class y{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(l){return/^[\s\xa0]*$/.test(l)}function S(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function x(l){return x[" "](l),l}x[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function j(l,h,p){for(const w in l)h.call(p,l[w],w,l)}function I(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function _(l){const h={};for(const p in l)h[p]=l[p];return h}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(l,h){let p,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(p in w)l[p]=w[p];for(let V=0;V<A.length;V++)p=A[V],Object.prototype.hasOwnProperty.call(w,p)&&(l[p]=w[p])}}function N(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function D(l){c.setTimeout(()=>{throw l},0)}function P(){var l=Q;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class pe{constructor(){this.h=this.g=null}add(h,p){const w=Rr.get();w.set(h,p),this.h?this.h.next=w:this.g=w,this.h=w}}var Rr=new y(()=>new gs,l=>l.reset());class gs{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let hn,B=!1,Q=new pe,Z=()=>{const l=c.Promise.resolve(void 0);hn=()=>{l.then(we)}};var we=()=>{for(var l;l=P();){try{l.h.call(l.g)}catch(p){D(p)}var h=Rr;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var fn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function pn(l,h){if(Re.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(O){e:{try{x(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:mn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&pn.aa.h.call(this)}}T(pn,Re);var mn={2:"touch",3:"pen",4:"mouse"};pn.prototype.h=function(){pn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var gn="closure_listenable_"+(1e6*Math.random()|0),Y0=0;function J0(l,h,p,w,L){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!w,this.ha=L,this.key=++Y0,this.da=this.fa=!1}function aa(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function la(l){this.src=l,this.g={},this.h=0}la.prototype.add=function(l,h,p,w,L){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var z=Jc(l,h,w,L);return-1<z?(h=l[z],p||(h.fa=!1)):(h=new J0(h,this.src,V,!!w,L),h.fa=p,l.push(h)),h};function Yc(l,h){var p=h.type;if(p in l.g){var w=l.g[p],L=Array.prototype.indexOf.call(w,h,void 0),V;(V=0<=L)&&Array.prototype.splice.call(w,L,1),V&&(aa(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Jc(l,h,p,w){for(var L=0;L<l.length;++L){var V=l[L];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==w)return L}return-1}var Zc="closure_lm_"+(1e6*Math.random()|0),eu={};function Kp(l,h,p,w,L){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Kp(l,h[V],p,w,L);return null}return p=Xp(p),l&&l[gn]?l.K(h,p,d(w)?!!w.capture:!1,L):Z0(l,h,p,!1,w,L)}function Z0(l,h,p,w,L,V){if(!h)throw Error("Invalid event type");var z=d(L)?!!L.capture:!!L,he=nu(l);if(he||(l[Zc]=he=new la(l)),p=he.add(h,p,w,z,V),p.proxy)return p;if(w=ex(),p.proxy=w,w.src=l,w.listener=p,l.addEventListener)fn||(L=z),L===void 0&&(L=!1),l.addEventListener(h.toString(),w,L);else if(l.attachEvent)l.attachEvent(Qp(h.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ex(){function l(p){return h.call(l.src,l.listener,p)}const h=tx;return l}function Gp(l,h,p,w,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)Gp(l,h[V],p,w,L);else w=d(w)?!!w.capture:!!w,p=Xp(p),l&&l[gn]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],p=Jc(V,p,w,L),-1<p&&(aa(V[p]),Array.prototype.splice.call(V,p,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=nu(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Jc(h,p,w,L)),(p=-1<l?h[l]:null)&&tu(p))}function tu(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[gn])Yc(h.i,l);else{var p=l.type,w=l.proxy;h.removeEventListener?h.removeEventListener(p,w,l.capture):h.detachEvent?h.detachEvent(Qp(p),w):h.addListener&&h.removeListener&&h.removeListener(w),(p=nu(h))?(Yc(p,l),p.h==0&&(p.src=null,h[Zc]=null)):aa(l)}}}function Qp(l){return l in eu?eu[l]:eu[l]="on"+l}function tx(l,h){if(l.da)l=!0;else{h=new pn(h,this);var p=l.listener,w=l.ha||l.src;l.fa&&tu(l),l=p.call(w,h)}return l}function nu(l){return l=l[Zc],l instanceof la?l:null}var ru="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xp(l){return typeof l=="function"?l:(l[ru]||(l[ru]=function(h){return l.handleEvent(h)}),l[ru])}function Xe(){de.call(this),this.i=new la(this),this.M=this,this.F=null}T(Xe,de),Xe.prototype[gn]=!0,Xe.prototype.removeEventListener=function(l,h,p,w){Gp(this,l,h,p,w)};function lt(l,h){var p,w=l.F;if(w)for(p=[];w;w=w.F)p.push(w);if(l=l.M,w=h.type||h,typeof h=="string")h=new Re(h,l);else if(h instanceof Re)h.target=h.target||l;else{var L=h;h=new Re(w,l),R(h,L)}if(L=!0,p)for(var V=p.length-1;0<=V;V--){var z=h.g=p[V];L=ca(z,w,!0,h)&&L}if(z=h.g=l,L=ca(z,w,!0,h)&&L,L=ca(z,w,!1,h)&&L,p)for(V=0;V<p.length;V++)z=h.g=p[V],L=ca(z,w,!1,h)&&L}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],w=0;w<p.length;w++)aa(p[w]);delete l.g[h],l.h--}}this.F=null},Xe.prototype.K=function(l,h,p,w){return this.i.add(String(l),h,!1,p,w)},Xe.prototype.L=function(l,h,p,w){return this.i.add(String(l),h,!0,p,w)};function ca(l,h,p,w){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,V=0;V<h.length;++V){var z=h[V];if(z&&!z.da&&z.capture==p){var he=z.listener,Be=z.ha||z.src;z.fa&&Yc(l.i,z),L=he.call(Be,w)!==!1&&L}}return L&&!w.defaultPrevented}function Yp(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Jp(l){l.g=Yp(()=>{l.g=null,l.i&&(l.i=!1,Jp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class nx extends de{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Jp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(l){de.call(this),this.h=l,this.g={}}T(vs,de);var Zp=[];function em(l){j(l.g,function(h,p){this.g.hasOwnProperty(p)&&tu(h)},l),l.g={}}vs.prototype.N=function(){vs.aa.N.call(this),em(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var iu=c.JSON.stringify,rx=c.JSON.parse,ix=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function su(){}su.prototype.h=null;function tm(l){return l.h||(l.h=l.i())}function nm(){}var ys={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ou(){Re.call(this,"d")}T(ou,Re);function au(){Re.call(this,"c")}T(au,Re);var kr={},rm=null;function ua(){return rm=rm||new Xe}kr.La="serverreachability";function im(l){Re.call(this,kr.La,l)}T(im,Re);function _s(l){const h=ua();lt(h,new im(h))}kr.STAT_EVENT="statevent";function sm(l,h){Re.call(this,kr.STAT_EVENT,l),this.stat=h}T(sm,Re);function ct(l){const h=ua();lt(h,new sm(h,l))}kr.Ma="timingevent";function om(l,h){Re.call(this,kr.Ma,l),this.size=h}T(om,Re);function ws(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Es(){this.g=!0}Es.prototype.xa=function(){this.g=!1};function sx(l,h,p,w,L,V){l.info(function(){if(l.g)if(V)for(var z="",he=V.split("&"),Be=0;Be<he.length;Be++){var oe=he[Be].split("=");if(1<oe.length){var Ye=oe[0];oe=oe[1];var Je=Ye.split("_");z=2<=Je.length&&Je[1]=="type"?z+(Ye+"="+oe+"&"):z+(Ye+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+h+`
`+p+`
`+z})}function ox(l,h,p,w,L,V,z){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+h+`
`+p+`
`+V+" "+z})}function di(l,h,p,w){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+lx(l,p)+(w?" "+w:"")})}function ax(l,h){l.info(function(){return"TIMEOUT: "+h})}Es.prototype.info=function(){};function lx(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var w=p[l];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return iu(p)}catch{return h}}var da={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},am={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lu;function ha(){}T(ha,su),ha.prototype.g=function(){return new XMLHttpRequest},ha.prototype.i=function(){return{}},lu=new ha;function Fn(l,h,p,w){this.j=l,this.i=h,this.l=p,this.R=w||1,this.U=new vs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lm}function lm(){this.i=null,this.g="",this.h=!1}var cm={},cu={};function uu(l,h,p){l.L=1,l.v=ga(vn(h)),l.m=p,l.P=!0,um(l,null)}function um(l,h){l.F=Date.now(),fa(l),l.A=vn(l.v);var p=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Im(p.i,"t",w),l.C=0,p=l.j.J,l.h=new lm,l.g=Bm(l.j,p?h:null,!l.m),0<l.O&&(l.M=new nx(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,w=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Zp[0]=L.toString()),L=Zp);for(var V=0;V<L.length;V++){var z=Kp(p,L[V],w||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),_s(),sx(l.i,l.u,l.A,l.l,l.R,l.m)}Fn.prototype.ca=function(l){l=l.target;const h=this.M;h&&yn(l)==3?h.j():this.Y(l)},Fn.prototype.Y=function(l){try{if(l==this.g)e:{const Je=yn(this.g);var h=this.g.Ba();const pi=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||km(this.g)))){this.J||Je!=4||h==7||(h==8||0>=pi?_s(3):_s(2)),du(this);var p=this.g.Z();this.X=p;t:if(dm(this)){var w=km(this.g);l="";var L=w.length,V=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jr(this),Ts(this);var z="";break t}this.h.i=new c.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,l+=this.h.i.decode(w[h],{stream:!(V&&h==L-1)});w.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=p==200,ox(this.i,this.u,this.A,this.l,this.R,Je,p),this.o){if(this.T&&!this.K){t:{if(this.g){var he,Be=this.g;if((he=Be.g?Be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(he)){var oe=he;break t}}oe=null}if(p=oe)di(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hu(this,p);else{this.o=!1,this.s=3,ct(12),jr(this),Ts(this);break e}}if(this.P){p=!0;let zt;for(;!this.J&&this.C<z.length;)if(zt=cx(this,z),zt==cu){Je==4&&(this.s=4,ct(14),p=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==cm){this.s=4,ct(15),di(this.i,this.l,z,"[Invalid Chunk]"),p=!1;break}else di(this.i,this.l,zt,null),hu(this,zt);if(dm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||z.length!=0||this.h.h||(this.s=1,ct(16),p=!1),this.o=this.o&&p,!p)di(this.i,this.l,z,"[Invalid Chunked Response]"),jr(this),Ts(this);else if(0<z.length&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.ba&&!Ye.M&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),yu(Ye),Ye.M=!0,ct(11))}}else di(this.i,this.l,z,null),hu(this,z);Je==4&&jr(this),this.o&&!this.J&&(Je==4?Mm(this.j,this):(this.o=!1,fa(this)))}else Cx(this.g),p==400&&0<z.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),jr(this),Ts(this)}}}catch{}finally{}};function dm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function cx(l,h){var p=l.C,w=h.indexOf(`
`,p);return w==-1?cu:(p=Number(h.substring(p,w)),isNaN(p)?cm:(w+=1,w+p>h.length?cu:(h=h.slice(w,w+p),l.C=w+p,h)))}Fn.prototype.cancel=function(){this.J=!0,jr(this)};function fa(l){l.S=Date.now()+l.I,hm(l,l.I)}function hm(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ws(g(l.ba,l),h)}function du(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Fn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ax(this.i,this.A),this.L!=2&&(_s(),ct(17)),jr(this),this.s=2,Ts(this)):hm(this,this.S-l)};function Ts(l){l.j.G==0||l.J||Mm(l.j,l)}function jr(l){du(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,em(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function hu(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||fu(p.h,l))){if(!l.K&&fu(p.h,l)&&p.G==3){try{var w=p.Da.g.parse(h)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Ta(p),wa(p);else break e;vu(p),ct(18)}}else p.za=L[1],0<p.za-p.T&&37500>L[2]&&p.F&&p.v==0&&!p.C&&(p.C=ws(g(p.Za,p),6e3));if(1>=mm(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Dr(p,11)}else if((l.K||p.g==l)&&Ta(p),!E(h))for(L=p.Da.g.parse(h),h=0;h<L.length;h++){let oe=L[h];if(p.T=oe[0],oe=oe[1],p.G==2)if(oe[0]=="c"){p.K=oe[1],p.ia=oe[2];const Ye=oe[3];Ye!=null&&(p.la=Ye,p.j.info("VER="+p.la));const Je=oe[4];Je!=null&&(p.Aa=Je,p.j.info("SVER="+p.Aa));const pi=oe[5];pi!=null&&typeof pi=="number"&&0<pi&&(w=1.5*pi,p.L=w,p.j.info("backChannelRequestTimeoutMs_="+w)),w=p;const zt=l.g;if(zt){const Ia=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var V=w.h;V.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(pu(V,V.h),V.h=null))}if(w.D){const _u=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;_u&&(w.ya=_u,me(w.I,w.D,_u))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),w=p;var z=l;if(w.qa=zm(w,w.J?w.ia:null,w.W),z.K){gm(w.h,z);var he=z,Be=w.L;Be&&(he.I=Be),he.B&&(du(he),fa(he)),w.g=z}else Lm(w);0<p.i.length&&Ea(p)}else oe[0]!="stop"&&oe[0]!="close"||Dr(p,7);else p.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?Dr(p,7):gu(p):oe[0]!="noop"&&p.l&&p.l.ta(oe),p.v=0)}}_s(4)}catch{}}var ux=class{constructor(l,h){this.g=l,this.map=h}};function fm(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function mm(l){return l.h?1:l.g?l.g.size:0}function fu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function pu(l,h){l.g?l.g.add(h):l.h=h}function gm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}fm.prototype.cancel=function(){if(this.i=vm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function vm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return C(l.i)}function dx(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,w=0;w<p;w++)h.push(l[w]);return h}h=[],p=0;for(w in l)h[p++]=l[w];return h}function hx(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const w in l)h[p++]=w;return h}}}function ym(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=hx(l),w=dx(l),L=w.length,V=0;V<L;V++)h.call(void 0,w[V],p&&p[V],l)}var _m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fx(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var w=l[p].indexOf("="),L=null;if(0<=w){var V=l[p].substring(0,w);L=l[p].substring(w+1)}else V=l[p];h(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function br(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof br){this.h=l.h,pa(this,l.j),this.o=l.o,this.g=l.g,ma(this,l.s),this.l=l.l;var h=l.i,p=new Ss;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),wm(this,p),this.m=l.m}else l&&(h=String(l).match(_m))?(this.h=!1,pa(this,h[1]||"",!0),this.o=xs(h[2]||""),this.g=xs(h[3]||"",!0),ma(this,h[4]),this.l=xs(h[5]||"",!0),wm(this,h[6]||"",!0),this.m=xs(h[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}br.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Is(h,Em,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Is(h,Em,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Is(p,p.charAt(0)=="/"?gx:mx,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Is(p,yx)),l.join("")};function vn(l){return new br(l)}function pa(l,h,p){l.j=p?xs(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function ma(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function wm(l,h,p){h instanceof Ss?(l.i=h,_x(l.i,l.h)):(p||(h=Is(h,vx)),l.i=new Ss(h,l.h))}function me(l,h,p){l.i.set(h,p)}function ga(l){return me(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function xs(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Is(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,px),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function px(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Em=/[#\/\?@]/g,mx=/[#\?:]/g,gx=/[#\?]/g,vx=/[#\?@]/g,yx=/#/g;function Ss(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function zn(l){l.g||(l.g=new Map,l.h=0,l.i&&fx(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ss.prototype,t.add=function(l,h){zn(this),this.i=null,l=hi(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Tm(l,h){zn(l),h=hi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function xm(l,h){return zn(l),h=hi(l,h),l.g.has(h)}t.forEach=function(l,h){zn(this),this.g.forEach(function(p,w){p.forEach(function(L){l.call(h,L,w,this)},this)},this)},t.na=function(){zn(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let w=0;w<h.length;w++){const L=l[w];for(let V=0;V<L.length;V++)p.push(h[w])}return p},t.V=function(l){zn(this);let h=[];if(typeof l=="string")xm(this,l)&&(h=h.concat(this.g.get(hi(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return zn(this),this.i=null,l=hi(this,l),xm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Im(l,h,p){Tm(l,h),0<p.length&&(l.i=null,l.g.set(hi(l,h),C(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var w=h[p];const V=encodeURIComponent(String(w)),z=this.V(w);for(w=0;w<z.length;w++){var L=V;z[w]!==""&&(L+="="+encodeURIComponent(String(z[w]))),l.push(L)}}return this.i=l.join("&")};function hi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function _x(l,h){h&&!l.j&&(zn(l),l.i=null,l.g.forEach(function(p,w){var L=w.toLowerCase();w!=L&&(Tm(this,w),Im(this,L,p))},l)),l.j=h}function wx(l,h){const p=new Es;if(c.Image){const w=new Image;w.onload=v(Bn,p,"TestLoadImage: loaded",!0,h,w),w.onerror=v(Bn,p,"TestLoadImage: error",!1,h,w),w.onabort=v(Bn,p,"TestLoadImage: abort",!1,h,w),w.ontimeout=v(Bn,p,"TestLoadImage: timeout",!1,h,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else h(!1)}function Ex(l,h){const p=new Es,w=new AbortController,L=setTimeout(()=>{w.abort(),Bn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:w.signal}).then(V=>{clearTimeout(L),V.ok?Bn(p,"TestPingServer: ok",!0,h):Bn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),Bn(p,"TestPingServer: error",!1,h)})}function Bn(l,h,p,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(p)}catch{}}function Tx(){this.g=new ix}function xx(l,h,p){const w=p||"";try{ym(l,function(L,V){let z=L;d(L)&&(z=iu(L)),h.push(w+V+"="+encodeURIComponent(z))})}catch(L){throw h.push(w+"type="+encodeURIComponent("_badmap")),L}}function va(l){this.l=l.Ub||null,this.j=l.eb||!1}T(va,su),va.prototype.g=function(){return new ya(this.l,this.j)},va.prototype.i=function(l){return function(){return l}}({});function ya(l,h){Xe.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ya,Xe),t=ya.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Ns(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Cs(this):Ns(this),this.readyState==3&&Sm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Cs(this))},t.Qa=function(l){this.g&&(this.response=l,Cs(this))},t.ga=function(){this.g&&Cs(this)};function Cs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ns(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Ns(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ya.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Cm(l){let h="";return j(l,function(p,w){h+=w,h+=":",h+=p,h+=`\r
`}),h}function mu(l,h,p){e:{for(w in p){var w=!1;break e}w=!0}w||(p=Cm(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):me(l,h,p))}function Se(l){Xe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Se,Xe);var Ix=/^https?$/i,Sx=["POST","PUT"];t=Se.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lu.g(),this.v=this.o?tm(this.o):tm(lu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){Nm(this,V);return}if(l=p||"",p=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)p.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const V of w.keys())p.set(V,w.get(V));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),L=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Sx,h,void 0))||w||L||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of p)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rm(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Nm(this,V)}};function Nm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Am(l),_a(l)}function Am(l){l.A||(l.A=!0,lt(l,"complete"),lt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,lt(this,"complete"),lt(this,"abort"),_a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pm(this):this.bb())},t.bb=function(){Pm(this)};function Pm(l){if(l.h&&typeof o<"u"&&(!l.v[1]||yn(l)!=4||l.Z()!=2)){if(l.u&&yn(l)==4)Yp(l.Ea,0,l);else if(lt(l,"readystatechange"),yn(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var w;if(w=z===0){var L=String(l.D).match(_m)[1]||null;!L&&c.self&&c.self.location&&(L=c.self.location.protocol.slice(0,-1)),w=!Ix.test(L?L.toLowerCase():"")}p=w}if(p)lt(l,"complete"),lt(l,"success");else{l.m=6;try{var V=2<yn(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",Am(l)}}finally{_a(l)}}}}function _a(l,h){if(l.g){Rm(l);const p=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||lt(l,"ready");try{p.onreadystatechange=w}catch{}}}function Rm(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function yn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),rx(h)}};function km(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Cx(l){const h={};l=(l.g&&2<=yn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(E(l[w]))continue;var p=N(l[w]);const L=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=h[L]||[];h[L]=V,V.push(p)}I(h,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function jm(l){this.Aa=0,this.i=[],this.j=new Es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=As("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=As("baseRetryDelayMs",5e3,l),this.cb=As("retryDelaySeedMs",1e4,l),this.Wa=As("forwardChannelMaxRetries",2,l),this.wa=As("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new fm(l&&l.concurrentRequestLimit),this.Da=new Tx,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jm.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,w){ct(0),this.W=l,this.H=h||{},p&&w!==void 0&&(this.H.OSID=p,this.H.OAID=w),this.F=this.X,this.I=zm(this,null,this.W),Ea(this)};function gu(l){if(bm(l),l.G==3){var h=l.U++,p=vn(l.I);if(me(p,"SID",l.K),me(p,"RID",h),me(p,"TYPE","terminate"),Ps(l,p),h=new Fn(l,l.j,h),h.L=2,h.v=ga(vn(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=Bm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),fa(h)}Fm(l)}function wa(l){l.g&&(yu(l),l.g.cancel(),l.g=null)}function bm(l){wa(l),l.u&&(c.clearTimeout(l.u),l.u=null),Ta(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ea(l){if(!pm(l.h)&&!l.s){l.s=!0;var h=l.Ga;hn||Z(),B||(hn(),B=!0),Q.add(h,l),l.B=0}}function Nx(l,h){return mm(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ws(g(l.Ga,l,h),Um(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Fn(this,this.j,l);let V=this.o;if(this.S&&(V?(V=_(V),R(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var w=this.i[p];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(h+=w,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Om(this,L,h),p=vn(this.I),me(p,"RID",l),me(p,"CVER",22),this.D&&me(p,"X-HTTP-Session-Id",this.D),Ps(this,p),V&&(this.O?h="headers="+encodeURIComponent(String(Cm(V)))+"&"+h:this.m&&mu(p,this.m,V)),pu(this.h,L),this.Ua&&me(p,"TYPE","init"),this.P?(me(p,"$req",h),me(p,"SID","null"),L.T=!0,uu(L,p,null)):uu(L,p,h),this.G=2}}else this.G==3&&(l?Dm(this,l):this.i.length==0||pm(this.h)||Dm(this))};function Dm(l,h){var p;h?p=h.l:p=l.U++;const w=vn(l.I);me(w,"SID",l.K),me(w,"RID",p),me(w,"AID",l.T),Ps(l,w),l.m&&l.o&&mu(w,l.m,l.o),p=new Fn(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Om(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),pu(l.h,p),uu(p,w,h)}function Ps(l,h){l.H&&j(l.H,function(p,w){me(h,w,p)}),l.l&&ym({},function(p,w){me(h,w,p)})}function Om(l,h,p){p=Math.min(l.i.length,p);var w=l.l?g(l.l.Na,l.l,l):null;e:{var L=l.i;let V=-1;for(;;){const z=["count="+p];V==-1?0<p?(V=L[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let he=!0;for(let Be=0;Be<p;Be++){let oe=L[Be].g;const Ye=L[Be].map;if(oe-=V,0>oe)V=Math.max(0,L[Be].g-100),he=!1;else try{xx(Ye,z,"req"+oe+"_")}catch{w&&w(Ye)}}if(he){w=z.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,w}function Lm(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;hn||Z(),B||(hn(),B=!0),Q.add(h,l),l.v=0}}function vu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ws(g(l.Fa,l),Um(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Vm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ws(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),wa(this),Vm(this))};function yu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Vm(l){l.g=new Fn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=vn(l.qa);me(h,"RID","rpc"),me(h,"SID",l.K),me(h,"AID",l.T),me(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&me(h,"TO",l.ja),me(h,"TYPE","xmlhttp"),Ps(l,h),l.m&&l.o&&mu(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=ga(vn(h)),p.m=null,p.P=!0,um(p,l)}t.Za=function(){this.C!=null&&(this.C=null,wa(this),vu(this),ct(19))};function Ta(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Mm(l,h){var p=null;if(l.g==h){Ta(l),yu(l),l.g=null;var w=2}else if(fu(l.h,h))p=h.D,gm(l.h,h),w=1;else return;if(l.G!=0){if(h.o)if(w==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var L=l.B;w=ua(),lt(w,new om(w,p)),Ea(l)}else Lm(l);else if(L=h.s,L==3||L==0&&0<h.X||!(w==1&&Nx(l,h)||w==2&&vu(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),L){case 1:Dr(l,5);break;case 4:Dr(l,10);break;case 3:Dr(l,6);break;default:Dr(l,2)}}}function Um(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Dr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),w=l.Xa;const L=!w;w=new br(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||pa(w,"https"),ga(w),L?wx(w.toString(),p):Ex(w.toString(),p)}else ct(2);l.G=0,l.l&&l.l.sa(h),Fm(l),bm(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Fm(l){if(l.G=0,l.ka=[],l.l){const h=vm(l.h);(h.length!=0||l.i.length!=0)&&(k(l.ka,h),k(l.ka,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.ra()}}function zm(l,h,p){var w=p instanceof br?vn(p):new br(p);if(w.g!="")h&&(w.g=h+"."+w.g),ma(w,w.s);else{var L=c.location;w=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var V=new br(null);w&&pa(V,w),h&&(V.g=h),L&&ma(V,L),p&&(V.l=p),w=V}return p=l.D,h=l.ya,p&&h&&me(w,p,h),me(w,"VER",l.la),Ps(l,w),w}function Bm(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Se(new va({eb:p})):new Se(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $m(){}t=$m.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xa(){}xa.prototype.g=function(l,h){return new xt(l,h)};function xt(l,h){Xe.call(this),this.g=new jm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!E(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new fi(this)}T(xt,Xe),xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){gu(this.g)},xt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=iu(l),l=p);h.i.push(new ux(h.Ya++,l)),h.G==3&&Ea(h)},xt.prototype.N=function(){this.g.l=null,delete this.j,gu(this.g),delete this.g,xt.aa.N.call(this)};function qm(l){ou.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}T(qm,ou);function Wm(){au.call(this),this.status=1}T(Wm,au);function fi(l){this.g=l}T(fi,$m),fi.prototype.ua=function(){lt(this.g,"a")},fi.prototype.ta=function(l){lt(this.g,new qm(l))},fi.prototype.sa=function(l){lt(this.g,new Wm)},fi.prototype.ra=function(){lt(this.g,"b")},xa.prototype.createWebChannel=xa.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,CE=function(){return new xa},SE=function(){return ua()},IE=kr,ch={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,ll=da,am.COMPLETE="complete",xE=am,nm.EventType=ys,ys.OPEN="a",ys.CLOSE="b",ys.ERROR="c",ys.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,Hs=nm,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,TE=Se}).apply(typeof Ba<"u"?Ba:typeof self<"u"?self:typeof window<"u"?window:{});const Sv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new Lf("@firebase/firestore");function Ms(){return Jr.logLevel}function W(t,...e){if(Jr.logLevel<=ne.DEBUG){const n=e.map(Mf);Jr.debug(`Firestore (${cs}): ${t}`,...n)}}function Dn(t,...e){if(Jr.logLevel<=ne.ERROR){const n=e.map(Mf);Jr.error(`Firestore (${cs}): ${t}`,...n)}}function Xi(t,...e){if(Jr.logLevel<=ne.WARN){const n=e.map(Mf);Jr.warn(`Firestore (${cs}): ${t}`,...n)}}function Mf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t="Unexpected state"){const e=`FIRESTORE (${cs}) INTERNAL ASSERTION FAILED: `+t;throw Dn(e),new Error(e)}function ce(t,e){t||G()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Yt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nt.UNAUTHENTICATED))}shutdown(){}}class zA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BA{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Nn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Nn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Nn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new NE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new nt(e)}}class $A{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new $A(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ce(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new WA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=KA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function Yi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return re.fromMillis(Date.now())}static fromDate(e){return re.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new re(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new re(0,0))}static max(){return new X(new re(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return bo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends bo{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const GA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends bo{construct(e,n,r){return new We(e,n,r)}static isValidIdentifier(e){return GA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new We(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new $(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new $(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(n)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(ve.fromString(e))}static fromName(e){return new H(ve.fromString(e).popFirst(5))}static empty(){return new H(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new ve(e.slice()))}}function QA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new re(n+1,0):new re(n,r));return new wr(i,H.empty(),e)}function XA(t){return new wr(t.readTime,t.key,-1)}class wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wr(X.min(),H.empty(),-1)}static max(){return new wr(X.max(),H.empty(),-1)}}function YA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==JA)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function eP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Uf.oe=-1;function Ac(t){return t==null}function Hl(t){return t===0&&1/t==-1/0}function tP(t){return typeof t=="number"&&Number.isInteger(t)&&!Hl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ai(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||qe.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $a(this.root,e,this.comparator,!1)}getReverseIterator(){return new $a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $a(this.root,e,this.comparator,!0)}}class $a{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qe{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??qe.RED,this.left=i??qe.EMPTY,this.right=s??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new qe(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return qe.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,i,s){return this}insert(e,n,r){return new qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nv(this.data.getIterator())}getIteratorFrom(e){return new Nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class Nv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new Ct([])}unionWith(e){let n=new Ke(We.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ct(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RE("Invalid base64 string: "+s):s}}(e);return new Qe(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const nP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(ce(!!t),typeof t=="string"){let e=0;const n=nP.exec(t);if(ce(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function zf(t){const e=t.mapValue.fields.__previous_value__;return Ff(e)?zf(e):e}function Do(t){const e=Er(t.mapValue.fields.__local_write_time__.timestampValue);return new re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,i,s,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Oo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Oo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa={mapValue:{}};function ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ff(t)?4:sP(t)?9007199254740991:iP(t)?10:11:G()}function cn(t,e){if(t===e)return!0;const n=ei(t);if(n!==ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Do(t).isEqual(Do(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Er(i.timestampValue),c=Er(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zr(i.bytesValue).isEqual(Zr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ke(i.geoPointValue.latitude)===ke(s.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ke(i.integerValue)===ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ke(i.doubleValue),c=ke(s.doubleValue);return o===c?Hl(o)===Hl(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Yi(t.arrayValue.values||[],e.arrayValue.values||[],cn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Cv(o)!==Cv(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!cn(o[u],c[u])))return!1;return!0}(t,e);default:return G()}}function Lo(t,e){return(t.values||[]).find(n=>cn(n,e))!==void 0}function Ji(t,e){if(t===e)return 0;const n=ei(t),r=ei(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=ke(s.integerValue||s.doubleValue),u=ke(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Av(t.timestampValue,e.timestampValue);case 4:return Av(Do(t),Do(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(s,o){const c=Zr(s),u=Zr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ae(c[d],u[d]);if(f!==0)return f}return ae(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=ae(ke(s.latitude),ke(o.latitude));return c!==0?c:ae(ke(s.longitude),ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Pv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,d,f;const m=s.fields||{},g=o.fields||{},v=(c=m.value)===null||c===void 0?void 0:c.arrayValue,T=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=ae(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((f=T==null?void 0:T.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:Pv(v,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===qa.mapValue&&o===qa.mapValue)return 0;if(s===qa.mapValue)return 1;if(o===qa.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=ae(u[m],f[m]);if(g!==0)return g;const v=Ji(c[u[m]],d[f[m]]);if(v!==0)return v}return ae(u.length,f.length)}(t.mapValue,e.mapValue);default:throw G()}}function Av(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Er(t),r=Er(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function Pv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ji(n[i],r[i]);if(s)return s}return ae(n.length,r.length)}function Zi(t){return uh(t)}function uh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Er(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=uh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${uh(n.fields[o])}`;return i+"}"}(t.mapValue):G()}function Rv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dh(t){return!!t&&"integerValue"in t}function Bf(t){return!!t&&"arrayValue"in t}function kv(t){return!!t&&"nullValue"in t}function jv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cl(t){return!!t&&"mapValue"in t}function iP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function oo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ai(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=oo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.value=e}static empty(){return new yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oo(n)}setAll(e){let n=We.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=oo(o):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());cl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ai(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new yt(oo(this.value))}}function kE(t){const e=[];return ai(t.fields,(n,r)=>{const i=new We([n]);if(cl(r)){const s=kE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ct(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new it(e,0,X.min(),X.min(),X.min(),yt.empty(),0)}static newFoundDocument(e,n,r,i){return new it(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new it(e,2,n,X.min(),X.min(),yt.empty(),0)}static newUnknownDocument(e,n){return new it(e,3,n,X.min(),X.min(),yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof it&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new it(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.position=e,this.inclusive=n}}function bv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=Ji(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Dv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n="asc"){this.field=e,this.dir=n}}function oP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{}class Le extends jE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lP(e,n,r):n==="array-contains"?new dP(e,r):n==="in"?new hP(e,r):n==="not-in"?new fP(e,r):n==="array-contains-any"?new pP(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cP(e,r):new uP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ji(n,this.value)):n!==null&&ei(this.value)===ei(n)&&this.matchesComparison(Ji(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qt extends jE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Qt(e,n)}matches(e){return bE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bE(t){return t.op==="and"}function DE(t){return aP(t)&&bE(t)}function aP(t){for(const e of t.filters)if(e instanceof Qt)return!1;return!0}function hh(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+Zi(t.value);if(DE(t))return t.filters.map(e=>hh(e)).join(",");{const e=t.filters.map(n=>hh(n)).join(",");return`${t.op}(${e})`}}function OE(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&cn(r.value,i.value)}(t,e):t instanceof Qt?function(r,i){return i instanceof Qt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&OE(o,i.filters[c]),!0):!1}(t,e):void G()}function LE(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${Zi(n.value)}`}(t):t instanceof Qt?function(n){return n.op.toString()+" {"+n.getFilters().map(LE).join(" ,")+"}"}(t):"Filter"}class lP extends Le{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class cP extends Le{constructor(e,n){super(e,"in",n),this.keys=VE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uP extends Le{constructor(e,n){super(e,"not-in",n),this.keys=VE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class dP extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bf(n)&&Lo(n.arrayValue,this.value)}}class hP extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lo(this.value.arrayValue,n)}}class fP extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Lo(this.value.arrayValue,n)}}class pP extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}}function Ov(t,e=null,n=[],r=[],i=null,s=null,o=null){return new mP(t,e,n,r,i,s,o)}function $f(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ac(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zi(r)).join(",")),e.ue=n}return e.ue}function qf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dv(t.startAt,e.startAt)&&Dv(t.endAt,e.endAt)}function fh(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gP(t,e,n,r,i,s,o,c){return new us(t,e,n,r,i,s,o,c)}function Wf(t){return new us(t)}function Lv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ME(t){return t.collectionGroup!==null}function ao(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ke(We.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Vo(s,r))}),n.has(We.keyField().canonicalString())||e.ce.push(new Vo(We.keyField(),r))}return e.ce}function sn(t){const e=J(t);return e.le||(e.le=vP(e,ao(t))),e.le}function vP(t,e){if(t.limitType==="F")return Ov(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Vo(i.field,s)});const n=t.endAt?new Kl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kl(t.startAt.position,t.startAt.inclusive):null;return Ov(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ph(t,e){const n=t.filters.concat([e]);return new us(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gl(t,e,n){return new us(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pc(t,e){return qf(sn(t),sn(e))&&t.limitType===e.limitType}function UE(t){return`${$f(sn(t))}|lt:${t.limitType}`}function gi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>LE(i)).join(", ")}]`),Ac(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Zi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Zi(i)).join(",")),`Target(${r})`}(sn(t))}; limitType=${t.limitType})`}function Rc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ao(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const d=bv(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,ao(r),i)||r.endAt&&!function(o,c,u){const d=bv(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,ao(r),i))}(t,e)}function yP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function FE(t){return(e,n)=>{let r=!1;for(const i of ao(t)){const s=_P(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _P(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,c){const u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Ji(u,d):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ai(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return PE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new Ie(H.comparator);function On(){return wP}const zE=new Ie(H.comparator);function Ks(...t){let e=zE;for(const n of t)e=e.insert(n.key,n);return e}function BE(t){let e=zE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zr(){return lo()}function $E(){return lo()}function lo(){return new ds(t=>t.toString(),(t,e)=>t.isEqual(e))}const EP=new Ie(H.comparator),TP=new Ke(H.comparator);function te(...t){let e=TP;for(const n of t)e=e.add(n);return e}const xP=new Ke(ae);function IP(){return xP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hl(e)?"-0":e}}function qE(t){return{integerValue:""+t}}function SP(t,e){return tP(e)?qE(e):Hf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(){this._=void 0}}function CP(t,e,n){return t instanceof Mo?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ff(s)&&(s=zf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Uo?HE(t,e):t instanceof Fo?KE(t,e):function(i,s){const o=WE(i,s),c=Vv(o)+Vv(i.Pe);return dh(o)&&dh(i.Pe)?qE(c):Hf(i.serializer,c)}(t,e)}function NP(t,e,n){return t instanceof Uo?HE(t,e):t instanceof Fo?KE(t,e):n}function WE(t,e){return t instanceof Ql?function(r){return dh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Mo extends kc{}class Uo extends kc{constructor(e){super(),this.elements=e}}function HE(t,e){const n=GE(e);for(const r of t.elements)n.some(i=>cn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fo extends kc{constructor(e){super(),this.elements=e}}function KE(t,e){let n=GE(e);for(const r of t.elements)n=n.filter(i=>!cn(i,r));return{arrayValue:{values:n}}}class Ql extends kc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Vv(t){return ke(t.integerValue||t.doubleValue)}function GE(t){return Bf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n){this.field=e,this.transform=n}}function PP(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Uo&&i instanceof Uo||r instanceof Fo&&i instanceof Fo?Yi(r.elements,i.elements,cn):r instanceof Ql&&i instanceof Ql?cn(r.Pe,i.Pe):r instanceof Mo&&i instanceof Mo}(t.transform,e.transform)}class RP{constructor(e,n){this.version=e,this.transformResults=n}}class Mt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mt}static exists(e){return new Mt(void 0,e)}static updateTime(e){return new Mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ul(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jc{}function QE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kf(t.key,Mt.none()):new Zo(t.key,t.data,Mt.none());{const n=t.data,r=yt.empty();let i=new Ke(We.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ar(t.key,r,new Ct(i.toArray()),Mt.none())}}function kP(t,e,n){t instanceof Zo?function(i,s,o){const c=i.value.clone(),u=Uv(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ar?function(i,s,o){if(!ul(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=Uv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(XE(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function co(t,e,n,r){return t instanceof Zo?function(s,o,c,u){if(!ul(s.precondition,o))return c;const d=s.value.clone(),f=Fv(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ar?function(s,o,c,u){if(!ul(s.precondition,o))return c;const d=Fv(s.fieldTransforms,u,o),f=o.data;return f.setAll(XE(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,c){return ul(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function jP(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=WE(r.transform,i||null);s!=null&&(n===null&&(n=yt.empty()),n.set(r.field,s))}return n||null}function Mv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yi(r,i,(s,o)=>PP(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zo extends jc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ar extends jc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Uv(t,e,n){const r=new Map;ce(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,NP(o,c,n[i]))}return r}function Fv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,CP(s,o,e))}return r}class Kf extends jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bP extends jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&kP(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$E();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;const u=QE(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&Yi(this.mutations,e.mutations,(n,r)=>Mv(n,r))&&Yi(this.baseMutations,e.baseMutations,(n,r)=>Mv(n,r))}}class Gf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ce(e.mutations.length===r.length);let i=function(){return EP}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Gf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,ie;function VP(t){switch(t){default:return G();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function YE(t){if(t===void 0)return Dn("GRPC error has no .code"),M.UNKNOWN;switch(t){case De.OK:return M.OK;case De.CANCELLED:return M.CANCELLED;case De.UNKNOWN:return M.UNKNOWN;case De.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case De.INTERNAL:return M.INTERNAL;case De.UNAVAILABLE:return M.UNAVAILABLE;case De.UNAUTHENTICATED:return M.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case De.NOT_FOUND:return M.NOT_FOUND;case De.ALREADY_EXISTS:return M.ALREADY_EXISTS;case De.PERMISSION_DENIED:return M.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case De.ABORTED:return M.ABORTED;case De.OUT_OF_RANGE:return M.OUT_OF_RANGE;case De.UNIMPLEMENTED:return M.UNIMPLEMENTED;case De.DATA_LOSS:return M.DATA_LOSS;default:return G()}}(ie=De||(De={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=new qr([4294967295,4294967295],0);function zv(t){const e=MP().encode(t),n=new EE;return n.update(e),new Uint8Array(n.digest())}function Bv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qr([n,r],0),new qr([i,s],0)]}class Qf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gs(`Invalid padding: ${n}`);if(r<0)throw new Gs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=qr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(qr.fromNumber(r)));return i.compare(UP)===1&&(i=new qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=zv(e),[r,i]=Bv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Qf(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=zv(e),[r,i]=Bv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ea.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bc(X.min(),i,new Ie(ae),On(),te())}}class ea{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ea(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class JE{constructor(e,n){this.targetId=e,this.me=n}}class ZE{constructor(e,n,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $v{constructor(){this.fe=0,this.ge=Wv(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:G()}}),new ea(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Wv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class FP{constructor(e){this.Le=e,this.Be=new Map,this.ke=On(),this.qe=qv(),this.Qe=new Ie(ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(fh(s))if(r===0){const o=new H(s.path);this.Ue(n,o,it.newNoDocument(o,X.min()))}else ce(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,c;try{o=Zr(r).toUint8Array()}catch(u){if(u instanceof RE)return Xi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Qf(o,i,s)}catch(u){return Xi(u instanceof Gs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const c=this.Je(o);if(c){if(s.current&&fh(c.target)){const u=new H(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,it.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=te();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new bc(e,n,this.Qe,this.ke,r);return this.ke=On(),this.qe=qv(),this.Qe=new Ie(ae),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new $v,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ke(ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $v),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function qv(){return new Ie(H.comparator)}function Wv(){return new Ie(H.comparator)}const zP={asc:"ASCENDING",desc:"DESCENDING"},BP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$P={and:"AND",or:"OR"};class qP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mh(t,e){return t.useProto3Json||Ac(e)?e:{value:e}}function Xl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WP(t,e){return Xl(t,e.toTimestamp())}function on(t){return ce(!!t),X.fromTimestamp(function(n){const r=Er(n);return new re(r.seconds,r.nanos)}(t))}function Xf(t,e){return gh(t,e).canonicalString()}function gh(t,e){const n=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tT(t){const e=ve.fromString(t);return ce(oT(e)),e}function vh(t,e){return Xf(t.databaseId,e.path)}function Ju(t,e){const n=tT(e);if(n.get(1)!==t.databaseId.projectId)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(rT(n))}function nT(t,e){return Xf(t.databaseId,e)}function HP(t){const e=tT(t);return e.length===4?ve.emptyPath():rT(e)}function yh(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rT(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Hv(t,e,n){return{name:vh(t,e),fields:n.value.mapValue.fields}}function KP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(ce(f===void 0||typeof f=="string"),Qe.fromBase64String(f||"")):(ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Qe.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?M.UNKNOWN:YE(d.code);return new $(f,d.message||"")}(o);n=new ZE(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ju(t,r.document.name),s=on(r.document.updateTime),o=r.document.createTime?on(r.document.createTime):X.min(),c=new yt({mapValue:{fields:r.document.fields}}),u=it.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new dl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ju(t,r.document),s=r.readTime?on(r.readTime):X.min(),o=it.newNoDocument(i,s),c=r.removedTargetIds||[];n=new dl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ju(t,r.document),s=r.removedTargetIds||[];n=new dl([],s,i,null)}else{if(!("filter"in e))return G();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new LP(i,s),c=r.targetId;n=new JE(c,o)}}return n}function GP(t,e){let n;if(e instanceof Zo)n={update:Hv(t,e.key,e.value)};else if(e instanceof Kf)n={delete:vh(t,e.key)};else if(e instanceof Ar)n={update:Hv(t,e.key,e.data),updateMask:rR(e.fieldMask)};else{if(!(e instanceof bP))return G();n={verify:vh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const c=o.transform;if(c instanceof Mo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Uo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ql)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:WP(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:G()}(t,e.precondition)),n}function QP(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?on(i.updateTime):on(s);return o.isEqual(X.min())&&(o=on(s)),new RP(o,i.transformResults||[])}(n,e))):[]}function XP(t,e){return{documents:[nT(t,e.path)]}}function YP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nT(t,i);const s=function(d){if(d.length!==0)return sT(Qt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:vi(g.field),direction:eR(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=mh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function JP(t){let e=HP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ce(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(m){const g=iT(m);return g instanceof Qt&&DE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(T){return new Vo(yi(T.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Ac(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,v=m.values||[];return new Kl(v,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,v=m.values||[];return new Kl(v,g)}(n.endAt)),gP(e,i,o,s,c,"F",u,d)}function ZP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yi(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=yi(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=yi(n.unaryFilter.field);return Le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yi(n.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return Le.create(yi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qt.create(n.compositeFilter.filters.map(r=>iT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function eR(t){return zP[t]}function tR(t){return BP[t]}function nR(t){return $P[t]}function vi(t){return{fieldPath:t.canonicalString()}}function yi(t){return We.fromServerFormat(t.fieldPath)}function sT(t){return t instanceof Le?function(n){if(n.op==="=="){if(jv(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NAN"}};if(kv(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jv(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NOT_NAN"}};if(kv(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vi(n.field),op:tR(n.op),value:n.value}}}(t):t instanceof Qt?function(n){const r=n.getFilters().map(i=>sT(i));return r.length===1?r[0]:{compositeFilter:{op:nR(n.op),filters:r}}}(t):G()}function rR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r,i,s=X.min(),o=X.min(),c=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.ct=e}}function sR(t){const e=JP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.un=new aR}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(wr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class aR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ke(ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ke(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new es(0)}static kn(){return new es(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.changes=new ds(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&co(r.mutation,i,Ct.empty(),re.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const i=zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ks();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=On();const o=lo(),c=function(){return lo()}();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Ar)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),co(f.mutation,d,f.mutation.getFieldMask(),re.now())):o.set(d.key,Ct.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return c.set(d,new cR(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=lo();let i=new Ie((o,c)=>o-c),s=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Ct.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(i.get(c.batchId)||te()).add(u);i=i.insert(c.batchId,m)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=$E();f.forEach(g=>{if(!s.has(g)){const v=QE(n.get(g),r.get(g));v!==null&&m.set(g,v),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ME(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(zr());let c=-1,u=s;return o.next(d=>U.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,te())).next(f=>({batchId:c,changes:BE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=Ks();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ks();return this.indexManager.getCollectionParents(e,s).next(c=>U.forEach(c,u=>{const d=function(m,g){return new us(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,it.newInvalidDocument(f)))});let c=Ks();return o.forEach((u,d)=>{const f=s.get(u);f!==void 0&&co(f.mutation,d,Ct.empty(),re.now()),Rc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:on(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:sR(i.bundledQuery),readTime:on(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.overlays=new Ie(H.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=zr();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=zr(),s=n.length+1,o=new H(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ie((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=zr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=zr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return U.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new OP(n,r));let s=this.Ir.get(n);s===void 0&&(s=te(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this.Tr=new Ke(Ue.Er),this.dr=new Ke(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ue(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ue(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new H(new ve([])),r=new Ue(n,e),i=new Ue(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new H(new ve([])),r=new Ue(n,e),i=new Ue(n,e+1);let s=te();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ue(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||ae(e.wr,n.wr)}static Ar(e,n){return ae(e.wr,n.wr)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ke(Ue.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new DP(s,n,r,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new Ue(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ue(n,0),i=new Ue(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const c=this.Dr(o.wr);s.push(c)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(ae);return n.forEach(i=>{const s=new Ue(i,0),o=new Ue(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;H.isDocumentKey(s)||(s=s.child(""));const o=new Ue(new H(s),0);let c=new Ke(ae);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),U.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new Ue(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ue(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.Mr=e,this.docs=function(){return new Ie(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():it.newInvalidDocument(n))}getEntries(e,n){let r=On();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():it.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=On();const o=n.path,c=new H(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||YA(XA(f),r)<=0||(i.has(f.key)||Rc(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){G()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new gR(this)}getSize(e){return U.resolve(this.size)}}class gR extends lR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.persistence=e,this.Nr=new ds(n=>$f(n),qf),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Yf,this.targetCount=0,this.kr=es.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new es(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Uf(0),this.Kr=!1,this.Kr=!0,this.$r=new fR,this.referenceDelegate=e(this),this.Ur=new vR(this),this.indexManager=new oR,this.remoteDocumentCache=function(i){return new mR(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new iR(n),this.Gr=new dR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new pR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new _R(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class _R extends ZA{constructor(e){super(),this.currentSequenceNumber=e}}class Jf{constructor(e){this.persistence=e,this.Jr=new Yf,this.Yr=null}static Zr(e){return new Jf(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=H.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=te(),i=te();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Zf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return EN()?8:eP(ot())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new wR;return this.Xi(e,n,o).next(c=>{if(s.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ms()<=ne.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",gi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Ms()<=ne.DEBUG&&W("QueryEngine","Query:",gi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ms()<=ne.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",gi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(n))):U.resolve())}Yi(e,n){if(Lv(n))return U.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gl(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=te(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,Gl(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return Lv(n)||i.isEqual(X.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(Ms()<=ne.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gi(n)),this.rs(e,o,n,QA(i,-1)).next(c=>c))})}ts(e,n){let r=new Ke(FE(e));return n.forEach((i,s)=>{Rc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ms()<=ne.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",gi(n)),this.Ji.getDocumentsMatchingQuery(e,n,wr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ie(ae),this._s=new ds(s=>$f(s),qf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function xR(t,e,n,r){return new TR(t,e,n,r)}async function aT(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let u=te();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function IR(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let v=U.resolve();return g.forEach(T=>{v=v.next(()=>f.getEntry(u,T)).next(C=>{const k=d.docVersions.get(T);ce(k!==null),C.version.compareTo(k)<0&&(m.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=te();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function lT(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function SR(t,e){const n=J(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((f,m)=>{const g=i.get(m);if(!g)return;c.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,m)));let v=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(Qe.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(m,v),function(C,k,y){return C.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(g,v,f)&&c.push(n.Ur.updateTargetData(s,v))});let u=On(),d=te();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(CR(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(X.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return U.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.os=i,s))}function CR(t,e,n){let r=te(),i=te();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=On();return n.forEach((c,u)=>{const d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):W("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function NR(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AR(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ir(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function _h(t,e,n){const r=J(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Jo(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Kv(t,e,n){const r=J(t);let i=X.min(),s=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=J(u),g=m._s.get(f);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(d,f)}(r,o,sn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:X.min(),n?s:te())).next(c=>(PR(r,yP(e),c),{documents:c,Ts:s})))}function PR(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Gv{constructor(){this.activeTargetIds=IP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RR{constructor(){this.so=new Gv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Gv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa=null;function Zu(){return Wa===null?Wa=function(){return 268435456+Math.round(2147483648*Math.random())}():Wa++,"0x"+Wa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tt="WebChannelConnection";class DR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const c=Zu(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(n,u,d,i).then(f=>(W("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw Xi("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,c){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=jR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Zu();return new Promise((o,c)=>{const u=new TE;u.setWithCredentials(!0),u.listenOnce(xE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ll.NO_ERROR:const f=u.getResponseJson();W(tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case ll.TIMEOUT:W(tt,`RPC '${e}' ${s} timed out`),c(new $(M.DEADLINE_EXCEEDED,"Request time out"));break;case ll.HTTP_ERROR:const m=u.getStatus();if(W(tt,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const T=function(k){const y=k.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(y)>=0?y:M.UNKNOWN}(v.status);c(new $(T,v.message))}else c(new $(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new $(M.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{W(tt,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);W(tt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=Zu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=CE(),c=SE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");W(tt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);let g=!1,v=!1;const T=new bR({Io:k=>{v?W(tt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(g||(W(tt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),g=!0),W(tt,`RPC '${e}' stream ${i} sending:`,k),m.send(k))},To:()=>m.close()}),C=(k,y,E)=>{k.listen(y,S=>{try{E(S)}catch(x){setTimeout(()=>{throw x},0)}})};return C(m,Hs.EventType.OPEN,()=>{v||(W(tt,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),C(m,Hs.EventType.CLOSE,()=>{v||(v=!0,W(tt,`RPC '${e}' stream ${i} transport closed`),T.So())}),C(m,Hs.EventType.ERROR,k=>{v||(v=!0,Xi(tt,`RPC '${e}' stream ${i} transport errored:`,k),T.So(new $(M.UNAVAILABLE,"The operation could not be completed")))}),C(m,Hs.EventType.MESSAGE,k=>{var y;if(!v){const E=k.data[0];ce(!!E);const S=E,x=S.error||((y=S[0])===null||y===void 0?void 0:y.error);if(x){W(tt,`RPC '${e}' stream ${i} received error:`,x);const O=x.status;let j=function(A){const R=De[A];if(R!==void 0)return YE(R)}(O),I=x.message;j===void 0&&(j=M.INTERNAL,I="Unknown error status: "+O+" with message "+x.message),v=!0,T.So(new $(j,I)),m.close()}else W(tt,`RPC '${e}' stream ${i} received:`,E),T.bo(E)}}),C(c,IE.STAT_EVENT,k=>{k.stat===ch.PROXY?W(tt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===ch.NOPROXY&&W(tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){return new qP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Dn(n.toString()),Dn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new $(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OR extends uT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=KP(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?on(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=yh(this.serializer),n.addTarget=function(s,o){let c;const u=o.target;if(c=fh(u)?{documents:XP(s,u)}:{query:YP(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=eT(s,o.resumeToken);const d=mh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(X.min())>0){c.readTime=Xl(s,o.snapshotVersion.toTimestamp());const d=mh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=ZP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=yh(this.serializer),n.removeTarget=e,this.a_(n)}}class LR extends uT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=QP(e.writeResults,e.commitTime),r=on(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=yh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,gh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,gh(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class MR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Dn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{li(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=J(u);d.L_.add(4),await ta(d),d.q_.set("Unknown"),d.L_.delete(4),await Oc(d)}(this))})}),this.q_=new MR(r,i)}}async function Oc(t){if(li(t))for(const e of t.B_)await e(!0)}async function ta(t){for(const e of t.B_)await e(!1)}function dT(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),rp(n)?np(n):hs(n).r_()&&tp(n,e))}function ep(t,e){const n=J(t),r=hs(n);n.N_.delete(e),r.r_()&&hT(n,e),n.N_.size===0&&(r.r_()?r.o_():li(n)&&n.q_.set("Unknown"))}function tp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hs(t).A_(e)}function hT(t,e){t.Q_.xe(e),hs(t).R_(e)}function np(t){t.Q_=new FP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),hs(t).start(),t.q_.v_()}function rp(t){return li(t)&&!hs(t).n_()&&t.N_.size>0}function li(t){return J(t).L_.size===0}function fT(t){t.Q_=void 0}async function FR(t){t.q_.set("Online")}async function zR(t){t.N_.forEach((e,n)=>{tp(t,e)})}async function BR(t,e){fT(t),rp(t)?(t.q_.M_(e),np(t)):t.q_.set("Unknown")}async function $R(t,e,n){if(t.q_.set("Online"),e instanceof ZE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yl(t,r)}else if(e instanceof dl?t.Q_.Ke(e):e instanceof JE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await lT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const c=s.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(Qe.EMPTY_BYTE_STRING,f.snapshotVersion)),hT(s,u);const m=new ir(f.target,u,d,f.sequenceNumber);tp(s,m)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Yl(t,r)}}async function Yl(t,e,n){if(!Jo(e))throw e;t.L_.add(1),await ta(t),t.q_.set("Offline"),n||(n=()=>lT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Oc(t)})}function pT(t,e){return e().catch(n=>Yl(t,n,e))}async function Lc(t){const e=J(t),n=Tr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qR(e);)try{const i=await NR(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,WR(e,i)}catch(i){await Yl(e,i)}mT(e)&&gT(e)}function qR(t){return li(t)&&t.O_.length<10}function WR(t,e){t.O_.push(e);const n=Tr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mT(t){return li(t)&&!Tr(t).n_()&&t.O_.length>0}function gT(t){Tr(t).start()}async function HR(t){Tr(t).p_()}async function KR(t){const e=Tr(t);for(const n of t.O_)e.m_(n.mutations)}async function GR(t,e,n){const r=t.O_.shift(),i=Gf.from(r,e,n);await pT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Lc(t)}async function QR(t,e){e&&Tr(t).V_&&await async function(r,i){if(function(o){return VP(o)&&o!==M.ABORTED}(i.code)){const s=r.O_.shift();Tr(r).s_(),await pT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Lc(r)}}(t,e),mT(t)&&gT(t)}async function Xv(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=li(n);n.L_.add(3),await ta(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Oc(n)}async function XR(t,e){const n=J(t);e?(n.L_.delete(2),await Oc(n)):e||(n.L_.add(2),await ta(n),n.q_.set("Unknown"))}function hs(t){return t.K_||(t.K_=function(n,r,i){const s=J(n);return s.w_(),new OR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:FR.bind(null,t),Ro:zR.bind(null,t),mo:BR.bind(null,t),d_:$R.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),rp(t)?np(t):t.q_.set("Unknown")):(await t.K_.stop(),fT(t))})),t.K_}function Tr(t){return t.U_||(t.U_=function(n,r,i){const s=J(n);return s.w_(),new LR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:HR.bind(null,t),mo:QR.bind(null,t),f_:KR.bind(null,t),g_:GR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Lc(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,c=new ip(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sp(t,e){if(Dn("AsyncQueue",`${e}: ${t}`),Jo(t))return new $(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Ks(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new Mi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Mi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.W_=new Ie(H.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ts{constructor(e,n,r,i,s,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new ts(e,n,Mi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class JR{constructor(){this.queries=Jv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=J(n),s=i.queries;i.queries=Jv(),s.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new $(M.ABORTED,"Firestore shutting down"))}}function Jv(){return new ds(t=>UE(t),Pc)}async function vT(t,e){const n=J(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new YR,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=sp(o,`Initialization of query '${gi(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&op(n)}async function yT(t,e){const n=J(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZR(t,e){const n=J(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&op(n)}function ek(t,e,n){const r=J(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function op(t){t.Y_.forEach(e=>{e.next()})}var wh,Zv;(Zv=wh||(wh={})).ea="default",Zv.Cache="cache";class _T{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ts(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==wh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.key=e}}class ET{constructor(e){this.key=e}}class tk{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=FE(e),this.Ra=new Mi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Yv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const g=i.get(f),v=Rc(this.query,m)?m:null,T=!!g&&this.mutatedKeys.has(g.key),C=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let k=!1;g&&v?g.data.isEqual(v.data)?T!==C&&(r.track({type:3,doc:v}),k=!0):this.ga(g,v)||(r.track({type:2,doc:v}),k=!0,(u&&this.Aa(v,u)>0||d&&this.Aa(v,d)<0)&&(c=!0)):!g&&v?(r.track({type:0,doc:v}),k=!0):g&&!v&&(r.track({type:1,doc:g}),k=!0,(u||d)&&(c=!0)),k&&(v?(o=o.add(v),s=C?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(v,T){const C=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return C(v)-C(T)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new ts(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Yv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ET(r))}),this.da.forEach(r=>{e.has(r)||n.push(new wT(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ts.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class nk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rk{constructor(e){this.key=e,this.va=!1}}class ik{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ds(c=>UE(c),Pc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ie(H.comparator),this.Na=new Map,this.La=new Yf,this.Ba={},this.ka=new Map,this.qa=es.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sk(t,e,n=!0){const r=NT(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await TT(r,e,n,!0),i}async function ok(t,e){const n=NT(t);await TT(n,e,!0,!1)}async function TT(t,e,n,r){const i=await AR(t.localStore,sn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await ak(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&dT(t.remoteStore,i),c}async function ak(t,e,n,r,i){t.Ka=(m,g,v)=>async function(C,k,y,E){let S=k.view.ma(y);S.ns&&(S=await Kv(C.localStore,k.query,!1).then(({documents:I})=>k.view.ma(I,S)));const x=E&&E.targetChanges.get(k.targetId),O=E&&E.targetMismatches.get(k.targetId)!=null,j=k.view.applyChanges(S,C.isPrimaryClient,x,O);return ty(C,k.targetId,j.wa),j.snapshot}(t,m,g,v);const s=await Kv(t.localStore,e,!0),o=new tk(e,s.Ts),c=o.ma(s.documents),u=ea.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);ty(t,n,d.wa);const f=new nk(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function lk(t,e,n){const r=J(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Pc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _h(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ep(r.remoteStore,i.targetId),Eh(r,i.targetId)}).catch(Yo)):(Eh(r,i.targetId),await _h(r.localStore,i.targetId,!0))}async function ck(t,e){const n=J(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ep(n.remoteStore,r.targetId))}async function uk(t,e,n){const r=vk(t);try{const i=await function(o,c){const u=J(o),d=re.now(),f=c.reduce((v,T)=>v.add(T.key),te());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=On(),C=te();return u.cs.getEntries(v,f).next(k=>{T=k,T.forEach((y,E)=>{E.isValidDocument()||(C=C.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,T)).next(k=>{m=k;const y=[];for(const E of c){const S=jP(E,m.get(E.key).overlayedDocument);S!=null&&y.push(new Ar(E.key,S,kE(S.value.mapValue),Mt.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,y,c)}).next(k=>{g=k;const y=k.applyToLocalDocumentSet(m,C);return u.documentOverlayCache.saveOverlays(v,k.batchId,y)})}).then(()=>({batchId:g.batchId,changes:BE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ie(ae)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,n),await na(r,i.changes),await Lc(r.remoteStore)}catch(i){const s=sp(i,"Failed to persist write");n.reject(s)}}async function xT(t,e){const n=J(t);try{const r=await SR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ce(o.va):i.removedDocuments.size>0&&(ce(o.va),o.va=!1))}),await na(n,r,e)}catch(r){await Yo(r)}}function ey(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=J(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(c)&&(d=!0)}),d&&op(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dk(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ie(H.comparator);o=o.insert(s,it.newNoDocument(s,X.min()));const c=te().add(s),u=new bc(X.min(),new Map,new Ie(ae),o,c);await xT(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),ap(r)}else await _h(r.localStore,e,!1).then(()=>Eh(r,e,n)).catch(Yo)}async function hk(t,e){const n=J(t),r=e.batch.batchId;try{const i=await IR(n.localStore,e);ST(n,r,null),IT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await na(n,i)}catch(i){await Yo(i)}}async function fk(t,e,n){const r=J(t);try{const i=await function(o,c){const u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(ce(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);ST(r,e,n),IT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await na(r,i)}catch(i){await Yo(i)}}function IT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ST(t,e,n){const r=J(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Eh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||CT(t,r)})}function CT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ep(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ap(t))}function ty(t,e,n){for(const r of n)r instanceof wT?(t.La.addReference(r.key,e),pk(t,r)):r instanceof ET?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||CT(t,r.key)):G()}function pk(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),ap(t))}function ap(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new H(ve.fromString(e)),r=t.qa.next();t.Na.set(r,new rk(n)),t.Oa=t.Oa.insert(n,r),dT(t.remoteStore,new ir(sn(Wf(n.path)),r,"TargetPurposeLimboResolution",Uf.oe))}}async function na(t,e,n){const r=J(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Zf.Wi(u.targetId,d);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,d){const f=J(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.$i,v=>f.persistence.referenceDelegate.addReference(m,g.targetId,v)).next(()=>U.forEach(g.Ui,v=>f.persistence.referenceDelegate.removeReference(m,g.targetId,v)))))}catch(m){if(!Jo(m))throw m;W("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const v=f.os.get(g),T=v.snapshotVersion,C=v.withLastLimboFreeSnapshotVersion(T);f.os=f.os.insert(g,C)}}}(r.localStore,s))}async function mk(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await aT(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new $(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await na(n,r.hs)}}function gk(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let i=te();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function NT(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dk.bind(null,e),e.Ca.d_=ZR.bind(null,e.eventManager),e.Ca.$a=ek.bind(null,e.eventManager),e}function vk(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fk.bind(null,e),e}class Jl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return xR(this.persistence,new ER,e.initialUser,this.serializer)}Ga(e){return new yR(Jf.Zr,this.serializer)}Wa(e){return new RR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jl.provider={build:()=>new Jl};class Th{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ey(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mk.bind(null,this.syncEngine),await XR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JR}()}createDatastore(e){const n=Dc(e.databaseInfo.databaseId),r=function(s){return new DR(s)}(e.databaseInfo);return function(s,o,c,u){return new VR(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new UR(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>ey(this.syncEngine,n,0),function(){return Qv.D()?new Qv:new kR}())}createSyncEngine(e,n){return function(i,s,o,c,u,d,f){const m=new ik(i,s,o,c,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=J(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ta(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Th.provider={build:()=>new Th};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Dn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nt.UNAUTHENTICATED,this.clientId=AE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function td(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await aT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ny(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _k(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Xv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Xv(e.remoteStore,i)),t._onlineComponents=e}async function _k(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await td(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Xi("Error using user provided cache. Falling back to memory cache: "+n),await td(t,new Jl)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await td(t,new Jl);return t._offlineComponents}async function PT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await ny(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await ny(t,new Th))),t._onlineComponents}function wk(t){return PT(t).then(e=>e.syncEngine)}async function RT(t){const e=await PT(t),n=e.eventManager;return n.onListen=sk.bind(null,e.syncEngine),n.onUnlisten=lk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ok.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ck.bind(null,e.syncEngine),n}function Ek(t,e,n={}){const r=new Nn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const f=new AT({next:g=>{f.Za(),o.enqueueAndForget(()=>yT(s,m));const v=g.docs.has(c);!v&&g.fromCache?d.reject(new $(M.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&u&&u.source==="server"?d.reject(new $(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new _T(Wf(c.path),f,{includeMetadataChanges:!0,_a:!0});return vT(s,m)}(await RT(t),t.asyncQueue,e,n,r)),r.promise}function Tk(t,e,n={}){const r=new Nn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const f=new AT({next:g=>{f.Za(),o.enqueueAndForget(()=>yT(s,m)),g.fromCache&&u.source==="server"?d.reject(new $(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new _T(c,f,{includeMetadataChanges:!0,_a:!0});return vT(s,m)}(await RT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e,n){if(!n)throw new $(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xk(t,e,n,r){if(e===!0&&r===!0)throw new $(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iy(t){if(!H.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sy(t){if(H.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function Xt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vc(t);throw new $(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FA;switch(r.type){case"firstParty":return new qA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ry.get(n);r&&(W("ComponentProvider","Removing Datastore"),ry.delete(n),r.terminate())}(this),Promise.resolve()}}function Ik(t,e,n,r={}){var i;const s=(t=Xt(t,Mc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=nt.MOCK_USER;else{c=mE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new $(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nt(d)}t._authCredentials=new zA(new NE(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pr(this.firestore,e,this._query)}}class ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}}class gr extends Pr{constructor(e,n,r){super(e,n,Wf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new H(e))}withConverter(e){return new gr(this.firestore,e,this._path)}}function at(t,e,...n){if(t=Ne(t),jT("collection","path",e),t instanceof Mc){const r=ve.fromString(e,...n);return sy(r),new gr(t,null,r)}{if(!(t instanceof ft||t instanceof gr))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return sy(r),new gr(t.firestore,null,r)}}function ue(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=AE.newId()),jT("doc","path",e),t instanceof Mc){const r=ve.fromString(e,...n);return iy(r),new ft(t,null,new H(r))}{if(!(t instanceof ft||t instanceof gr))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return iy(r),new ft(t.firestore,t instanceof gr?t.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cT(this,"async_queue_retry"),this.Vu=()=>{const r=ed();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ed();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Nn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Jo(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Dn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=ip.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&G()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ci extends Mc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ay,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ay(e),this._firestoreClient=void 0,await e}}}function Sk(t,e){const n=typeof t=="object"?t:Nc(),r=typeof t=="string"?t:"(default)",i=Xo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Of("firestore");s&&Ik(i,...s)}return i}function lp(t){if(t._terminated)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ck(t),t._firestoreClient}function Ck(t){var e,n,r;const i=t._freezeSettings(),s=function(c,u,d,f){return new rP(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,kT(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new yk(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ns(Qe.fromBase64String(e))}catch(n){throw new $(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ns(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=/^__.*__$/;class Ak{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zo(e,this.data,n,this.fieldTransforms)}}class bT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function DT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class dp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new dp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(DT(this.Cu)&&Nk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Pk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Dc(e)}Qu(e,n,r,i=!1){return new dp({Cu:e,methodName:n,qu:r,path:We.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zc(t){const e=t._freezeSettings(),n=Dc(t._databaseId);return new Pk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function OT(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);fp("Data must be an object, but it was:",o,r);const c=LT(r,o);let u,d;if(s.merge)u=new Ct(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const g=xh(e,m,n);if(!o.contains(g))throw new $(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);MT(f,g)||f.push(g)}u=new Ct(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new Ak(new yt(c),u,d)}class Bc extends Fc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bc}}class hp extends Fc{_toFieldTransform(e){return new AP(e.path,new Mo)}isEqual(e){return e instanceof hp}}function Rk(t,e,n,r){const i=t.Qu(1,e,n);fp("Data must be an object, but it was:",i,r);const s=[],o=yt.empty();ai(r,(u,d)=>{const f=pp(e,u,n);d=Ne(d);const m=i.Nu(f);if(d instanceof Bc)s.push(f);else{const g=ra(d,m);g!=null&&(s.push(f),o.set(f,g))}});const c=new Ct(s);return new bT(o,c,i.fieldTransforms)}function kk(t,e,n,r,i,s){const o=t.Qu(1,e,n),c=[xh(e,r,n)],u=[i];if(s.length%2!=0)throw new $(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)c.push(xh(e,s[g])),u.push(s[g+1]);const d=[],f=yt.empty();for(let g=c.length-1;g>=0;--g)if(!MT(d,c[g])){const v=c[g];let T=u[g];T=Ne(T);const C=o.Nu(v);if(T instanceof Bc)d.push(v);else{const k=ra(T,C);k!=null&&(d.push(v),f.set(v,k))}}const m=new Ct(d);return new bT(f,m,o.fieldTransforms)}function jk(t,e,n,r=!1){return ra(n,t.Qu(r?4:3,e))}function ra(t,e){if(VT(t=Ne(t)))return fp("Unsupported field value:",e,t),LT(t,e);if(t instanceof Fc)return function(r,i){if(!DT(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const c of r){let u=ra(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=re.fromDate(r);return{timestampValue:Xl(i.serializer,s)}}if(r instanceof re){const s=new re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xl(i.serializer,s)}}if(r instanceof cp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ns)return{bytesValue:eT(i.serializer,r._byteString)};if(r instanceof ft){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof up)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Hf(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Vc(r)}`)}(t,e)}function LT(t,e){const n={};return PE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ai(t,(r,i)=>{const s=ra(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function VT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof re||t instanceof cp||t instanceof ns||t instanceof ft||t instanceof Fc||t instanceof up)}function fp(t,e,n){if(!VT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Vc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function xh(t,e,n){if((e=Ne(e))instanceof Uc)return e._internalPath;if(typeof e=="string")return pp(t,e);throw Zl("Field path arguments must be of type string or ",t,!1,void 0,n)}const bk=new RegExp("[~\\*/\\[\\]]");function pp(t,e,n){if(e.search(bk)>=0)throw Zl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uc(...e.split("."))._internalPath}catch{throw Zl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new $(M.INVALID_ARGUMENT,c+t+u)}function MT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Dk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($c("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Dk extends UT{data(){return super.data()}}function $c(t,e){return typeof e=="string"?pp(t,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mp{}class gp extends mp{}function ui(t,e,...n){let r=[];e instanceof mp&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof vp).length,c=s.filter(u=>u instanceof qc).length;if(o>1||o>0&&c>0)throw new $(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class qc extends gp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qc(e,n,r)}_apply(e){const n=this._parse(e);return FT(e._query,n),new Pr(e.firestore,e.converter,ph(e._query,n))}_parse(e){const n=zc(e.firestore);return function(s,o,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){cy(m,f);const v=[];for(const T of m)v.push(ly(u,s,T));g={arrayValue:{values:v}}}else g=ly(u,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||cy(m,f),g=jk(c,o,m,f==="in"||f==="not-in");return Le.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function rs(t,e,n){const r=e,i=$c("where",t);return qc._create(i,r,n)}class vp extends mp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const u of c)FT(o,u),o=ph(o,u)}(e._query,n),new Pr(e.firestore,e.converter,ph(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yp extends gp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new yp(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vo(s,o)}(e._query,this._field,this._direction);return new Pr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new us(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function _p(t,e="asc"){const n=e,r=$c("orderBy",t);return yp._create(r,n)}class wp extends gp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new wp(e,n,r)}_apply(e){return new Pr(e.firestore,e.converter,Gl(e._query,this._limit,this._limitType))}}function Lk(t){return wp._create("limit",t,"F")}function ly(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new $(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ME(e)&&n.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!H.isDocumentKey(r))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rv(t,new H(r))}if(n instanceof ft)return Rv(t,n._key);throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vc(n)}.`)}function cy(t,e){if(!Array.isArray(t)||t.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FT(t,e){const n=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Vk{convertValue(e,n="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ai(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ke(o.doubleValue));return new up(s)}convertGeoPoint(e){return new cp(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Do(e));default:return null}}convertTimestamp(e){const n=Er(e);return new re(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);ce(oT(r));const i=new Oo(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||Dn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class BT extends UT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($c("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class hl extends BT{data(e={}){return super.data(e)}}class Mk{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hl(this._firestore,this._userDataWriter,r.key,r,new Qs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new hl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qs(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const u=new hl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qs(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:Uk(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Uk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t){t=Xt(t,ft);const e=Xt(t.firestore,ci);return Ek(lp(e),t._key).then(n=>Fk(e,t,n))}class $T extends Vk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ns(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function dn(t){t=Xt(t,Pr);const e=Xt(t.firestore,ci),n=lp(e),r=new $T(e);return Ok(t._query),Tk(n,t._query).then(i=>new Mk(e,r,t,i))}function xr(t,e,n){t=Xt(t,ft);const r=Xt(t.firestore,ci),i=zT(t.converter,e,n);return Hc(r,[OT(zc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Mt.none())])}function fs(t,e,n,...r){t=Xt(t,ft);const i=Xt(t.firestore,ci),s=zc(i);let o;return o=typeof(e=Ne(e))=="string"||e instanceof Uc?kk(s,"updateDoc",t._key,e,n,r):Rk(s,"updateDoc",t._key,e),Hc(i,[o.toMutation(t._key,Mt.exists(!0))])}function Wc(t){return Hc(Xt(t.firestore,ci),[new Kf(t._key,Mt.none())])}function ps(t,e){const n=Xt(t.firestore,ci),r=ue(t),i=zT(t.converter,e);return Hc(n,[OT(zc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Mt.exists(!1))]).then(()=>r)}function Hc(t,e){return function(r,i){const s=new Nn;return r.asyncQueue.enqueueAndForget(async()=>uk(await wk(r),i,s)),s.promise}(lp(t),e)}function Fk(t,e,n){const r=n.docs.get(e._key),i=new $T(t);return new BT(t,i,e._key,r,new Qs(n.hasPendingWrites,n.fromCache),e.converter)}function qT(){return new hp("serverTimestamp")}(function(e,n=!0){(function(i){cs=i})(oi),_r(new jn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),c=new ci(new BA(r.getProvider("auth-internal")),new HA(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Vt(Sv,"4.7.3",e),Vt(Sv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firebasestorage.googleapis.com",HT="storageBucket",zk=2*60*1e3,Bk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe extends Yt{constructor(e,n,r=0){super(nd(e),`Firebase Storage: ${n} (${nd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ae;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ae||(Ae={}));function nd(t){return"storage/"+t}function Ep(){const t="An unknown error occurred, please check the error payload for server response.";return new Pe(Ae.UNKNOWN,t)}function $k(t){return new Pe(Ae.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function qk(t){return new Pe(Ae.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Wk(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pe(Ae.UNAUTHENTICATED,t)}function Hk(){return new Pe(Ae.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Kk(t){return new Pe(Ae.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Gk(){return new Pe(Ae.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Qk(){return new Pe(Ae.CANCELED,"User canceled the upload/download.")}function Xk(t){return new Pe(Ae.INVALID_URL,"Invalid URL '"+t+"'.")}function Yk(t){return new Pe(Ae.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Jk(){return new Pe(Ae.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+HT+"' property when initializing the app?")}function Zk(){return new Pe(Ae.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ej(){return new Pe(Ae.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tj(t){return new Pe(Ae.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ih(t){return new Pe(Ae.INVALID_ARGUMENT,t)}function KT(){return new Pe(Ae.APP_DELETED,"The Firebase app was deleted.")}function nj(t){return new Pe(Ae.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uo(t,e){return new Pe(Ae.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Us(t){throw new Pe(Ae.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Nt.makeFromUrl(e,n)}catch{return new Nt(e,"")}if(r.path==="")return r;throw Yk(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(x){x.path_=decodeURIComponent(x.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${f}/b/${i}/o${g}`,"i"),T={bucket:1,path:3},C=n===WT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",y=new RegExp(`^https?://${C}/${i}/${k}`,"i"),S=[{regex:c,indices:u,postModify:s},{regex:v,indices:T,postModify:d},{regex:y,indices:{bucket:1,path:2},postModify:d}];for(let x=0;x<S.length;x++){const O=S[x],j=O.regex.exec(e);if(j){const I=j[O.indices.bucket];let _=j[O.indices.path];_||(_=""),r=new Nt(I,_),O.postModify(r);break}}if(r==null)throw Xk(e);return r}}class rj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t,e,n){let r=1,i=null,s=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...k){d||(d=!0,e.apply(null,k))}function m(k){i=setTimeout(()=>{i=null,t(v,u())},k)}function g(){s&&clearTimeout(s)}function v(k,...y){if(d){g();return}if(k){g(),f.call(null,k,...y);return}if(u()||o){g(),f.call(null,k,...y);return}r<64&&(r*=2);let S;c===1?(c=2,S=0):S=(r+Math.random())*1e3,m(S)}let T=!1;function C(k){T||(T=!0,g(),!d&&(i!==null?(k||(c=2),clearTimeout(i),m(0)):k||(c=1)))}return m(0),s=setTimeout(()=>{o=!0,C(!0)},n),C}function sj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t){return t!==void 0}function aj(t){return typeof t=="object"&&!Array.isArray(t)}function Tp(t){return typeof t=="string"||t instanceof String}function uy(t){return xp()&&t instanceof Blob}function xp(){return typeof Blob<"u"}function dy(t,e,n,r){if(r<e)throw Ih(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ih(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function GT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Wr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Wr||(Wr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n,r,i,s,o,c,u,d,f,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,T)=>{this.resolve_=v,this.reject_=T,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ha(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===Wr.NO_ERROR,u=s.getStatus();if(!c||lj(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Wr.ABORT;r(!1,new Ha(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Ha(d,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());oj(u)?s(u):s()}catch(u){o(u)}else if(c!==null){const u=Ep();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?KT():Qk();o(u)}else{const u=Gk();o(u)}};this.canceled_?n(!1,new Ha(!1,null,!0)):this.backoffId_=ij(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ha{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function uj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function dj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function fj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function pj(t,e,n,r,i,s,o=!0){const c=GT(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return hj(d,e),uj(d,n),dj(d,s),fj(d,r),new cj(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gj(...t){const e=mj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(xp())return new Blob(t);throw new Pe(Ae.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function vj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t){if(typeof atob>"u")throw tj("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rd{constructor(e,n){this.data=e,this.contentType=n||null}}function _j(t,e){switch(t){case tn.RAW:return new rd(QT(e));case tn.BASE64:case tn.BASE64URL:return new rd(XT(t,e));case tn.DATA_URL:return new rd(Ej(e),Tj(e))}throw Ep()}function QT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function wj(t){let e;try{e=decodeURIComponent(t)}catch{throw uo(tn.DATA_URL,"Malformed data URL.")}return QT(e)}function XT(t,e){switch(t){case tn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw uo(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case tn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw uo(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=yj(e)}catch(i){throw i.message.includes("polyfill")?i:uo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class YT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw uo(tn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=xj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Ej(t){const e=new YT(t);return e.base64?XT(tn.BASE64,e.rest):wj(e.rest)}function Tj(t){return new YT(t).contentType}function xj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){let r=0,i="";uy(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(uy(this.data_)){const r=this.data_,i=vj(r,e,n);return i===null?null:new Qn(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Qn(r,!0)}}static getBlob(...e){if(xp()){const n=e.map(r=>r instanceof Qn?r.data_:r);return new Qn(gj.apply(null,n))}else{const n=e.map(o=>Tp(o)?_j(tn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)i[s++]=o[c]}),new Qn(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){let e;try{e=JSON.parse(t)}catch{return null}return aj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Sj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ZT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t,e){return e}class ut{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Cj}}let Ka=null;function Nj(t){return!Tp(t)||t.length<2?t:ZT(t)}function e0(){if(Ka)return Ka;const t=[];t.push(new ut("bucket")),t.push(new ut("generation")),t.push(new ut("metageneration")),t.push(new ut("name","fullPath",!0));function e(s,o){return Nj(o)}const n=new ut("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ut("size");return i.xform=r,t.push(i),t.push(new ut("timeCreated")),t.push(new ut("updated")),t.push(new ut("md5Hash",null,!0)),t.push(new ut("cacheControl",null,!0)),t.push(new ut("contentDisposition",null,!0)),t.push(new ut("contentEncoding",null,!0)),t.push(new ut("contentLanguage",null,!0)),t.push(new ut("contentType",null,!0)),t.push(new ut("metadata","customMetadata",!0)),Ka=t,Ka}function Aj(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Nt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Pj(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Aj(r,t),r}function t0(t,e,n){const r=JT(e);return r===null?null:Pj(t,r,n)}function Rj(t,e,n,r){const i=JT(e);if(i===null||!Tp(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const f=t.bucket,m=t.fullPath,g="/b/"+o(f)+"/o/"+o(m),v=Ip(g,n,r),T=GT({alt:"media",token:d});return v+T})[0]}function kj(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class n0{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t){if(!t)throw Ep()}function jj(t,e){function n(r,i){const s=t0(t,i,e);return r0(s!==null),s}return n}function bj(t,e){function n(r,i){const s=t0(t,i,e);return r0(s!==null),Rj(s,i,t.host,t._protocol)}return n}function i0(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Hk():i=Wk():n.getStatus()===402?i=qk(t.bucket):n.getStatus()===403?i=Kk(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Dj(t){const e=i0(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=$k(t.path)),s.serverResponse=i.serverResponse,s}return n}function Oj(t,e,n){const r=e.fullServerUrl(),i=Ip(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new n0(i,s,bj(t,n),o);return c.errorHandler=Dj(e),c}function Lj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Vj(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Lj(null,e)),r}function Mj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let S="";for(let x=0;x<2;x++)S=S+Math.random().toString().slice(2);return S}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=Vj(e,r,i),f=kj(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",v=Qn.getBlob(m,r,g);if(v===null)throw Zk();const T={name:d.fullPath},C=Ip(s,t.host,t._protocol),k="POST",y=t.maxUploadRetryTime,E=new n0(C,k,jj(t,n),y);return E.urlParams=T,E.headers=o,E.body=v.uploadData(),E.errorHandler=i0(e),E}class Uj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Us("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Us("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Us("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Us("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Us("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Fj extends Uj{initXhr(){this.xhr_.responseType="text"}}function s0(){return new Fj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n){this._service=e,n instanceof Nt?this._location=n:this._location=Nt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ti(e,n)}get root(){const e=new Nt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZT(this._location.path)}get storage(){return this._service}get parent(){const e=Ij(this._location.path);if(e===null)return null;const n=new Nt(this._location.bucket,e);return new ti(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw nj(e)}}function zj(t,e,n){t._throwIfRoot("uploadBytes");const r=Mj(t.storage,t._location,e0(),new Qn(e,!0),n);return t.storage.makeRequestWithTokens(r,s0).then(i=>({metadata:i,ref:t}))}function Bj(t){t._throwIfRoot("getDownloadURL");const e=Oj(t.storage,t._location,e0());return t.storage.makeRequestWithTokens(e,s0).then(n=>{if(n===null)throw ej();return n})}function $j(t,e){const n=Sj(t._location.path,e),r=new Nt(t._location.bucket,n);return new ti(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(t){return/^[A-Za-z]+:\/\//.test(t)}function Wj(t,e){return new ti(t,e)}function o0(t,e){if(t instanceof Sp){const n=t;if(n._bucket==null)throw Jk();const r=new ti(n,n._bucket);return e!=null?o0(r,e):r}else return e!==void 0?$j(t,e):t}function Hj(t,e){if(e&&qj(e)){if(t instanceof Sp)return Wj(t,e);throw Ih("To use ref(service, url), the first argument must be a Storage instance.")}else return o0(t,e)}function hy(t,e){const n=e==null?void 0:e[HT];return n==null?null:Nt.makeFromBucketSpec(n,t)}function Kj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:mE(i,t.app.options.projectId))}class Sp{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=WT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zk,this._maxUploadRetryTime=Bk,this._requests=new Set,i!=null?this._bucket=Nt.makeFromBucketSpec(i,this._host):this._bucket=hy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Nt.makeFromBucketSpec(this._url,e):this._bucket=hy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ti(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new rj(KT());{const o=pj(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const fy="@firebase/storage",py="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="storage";function Cp(t,e,n){return t=Ne(t),zj(t,e,n)}function Np(t){return t=Ne(t),Bj(t)}function Ap(t,e){return t=Ne(t),Hj(t,e)}function Gj(t=Nc(),e){t=Ne(t);const r=Xo(t,a0).getImmediate({identifier:e}),i=Of("storage");return i&&Qj(r,...i),r}function Qj(t,e,n,r={}){Kj(t,e,n,r)}function Xj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Sp(n,r,i,e,oi)}function Yj(){_r(new jn(a0,Xj,"PUBLIC").setMultipleInstances(!0)),Vt(fy,py,""),Vt(fy,py,"esm2017")}Yj();function Pp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function l0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jj=l0,c0=new Go("auth","Firebase",l0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Lf("@firebase/auth");function Zj(t,...e){ec.logLevel<=ne.WARN&&ec.warn(`Auth (${oi}): ${t}`,...e)}function fl(t,...e){ec.logLevel<=ne.ERROR&&ec.error(`Auth (${oi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,...e){throw Rp(t,...e)}function an(t,...e){return Rp(t,...e)}function u0(t,e,n){const r=Object.assign(Object.assign({},Jj()),{[e]:n});return new Go("auth","Firebase",r).create(e,{appName:t.name})}function Hr(t){return u0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return c0.create(t,...e)}function K(t,e,...n){if(!t)throw Rp(e,...n)}function xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fl(e),new Error(e)}function Vn(t,e){t||xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function e1(){return my()==="http:"||my()==="https:"}function my(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e1()||yN()||"connection"in navigator)?navigator.onLine:!0}function n1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vn(n>e,"Short delay should be less than long delay!"),this.isMobile=mN()||_N()}get(){return t1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(t,e){Vn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=new ia(3e4,6e4);function jp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ms(t,e,n,r,i={}){return h0(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const c=Qo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},s);return vN()||(d.referrerPolicy="no-referrer"),d0.fetch()(f0(t,t.config.apiHost,n,c),d)})}async function h0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},r1),e);try{const i=new o1(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ga(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ga(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ga(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ga(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw u0(t,f,d);Ln(t,f)}}catch(i){if(i instanceof Yt)throw i;Ln(t,"network-request-failed",{message:String(i)})}}async function s1(t,e,n,r,i={}){const s=await ms(t,e,n,r,i);return"mfaPendingCredential"in s&&Ln(t,"multi-factor-auth-required",{_serverResponse:s}),s}function f0(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?kp(t.config,i):`${t.config.apiScheme}://${i}`}class o1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(an(this.auth,"network-request-failed")),i1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ga(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=an(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(t,e){return ms(t,"POST","/v1/accounts:delete",e)}async function p0(t,e){return ms(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function l1(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),i=bp(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ho(id(i.auth_time)),issuedAtTime:ho(id(i.iat)),expirationTime:ho(id(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function id(t){return Number(t)*1e3}function bp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return fl("JWT malformed, contained fewer than 3 sections"),null;try{const i=dE(n);return i?JSON.parse(i):(fl("Failed to decode base64 JWT payload"),null)}catch(i){return fl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function gy(t){const e=bp(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yt&&c1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function c1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ho(this.lastLoginAt),this.creationTime=ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await zo(t,p0(n,{idToken:r}));K(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?m0(s.providerUserInfo):[],c=h1(t.providerData,o),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Ch(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function d1(t){const e=Ne(t);await tc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function h1(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function m0(t){return t.map(e=>{var{providerId:n}=e,r=Pp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(t,e){const n=await h0(t,{},async()=>{const r=Qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=f0(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",d0.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function p1(t,e){return ms(t,"POST","/v2/accounts:revokeToken",jp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=gy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await f1(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ui;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ui,this.toJSON())}_performRefresh(){return xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class In{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Pp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new u1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ch(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await zo(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return l1(this,e)}reload(){return d1(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new In(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(Hr(this.auth));const e=await this.getIdToken();return await zo(this,a1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(c=n.tenantId)!==null&&c!==void 0?c:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=n.createdAt)!==null&&d!==void 0?d:void 0,E=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:S,emailVerified:x,isAnonymous:O,providerData:j,stsTokenManager:I}=n;K(S&&I,e,"internal-error");const _=Ui.fromJSON(this.name,I);K(typeof S=="string",e,"internal-error"),qn(m,e.name),qn(g,e.name),K(typeof x=="boolean",e,"internal-error"),K(typeof O=="boolean",e,"internal-error"),qn(v,e.name),qn(T,e.name),qn(C,e.name),qn(k,e.name),qn(y,e.name),qn(E,e.name);const A=new In({uid:S,auth:e,email:g,emailVerified:x,displayName:m,isAnonymous:O,photoURL:T,phoneNumber:v,tenantId:C,stsTokenManager:_,createdAt:y,lastLoginAt:E});return j&&Array.isArray(j)&&(A.providerData=j.map(R=>Object.assign({},R))),k&&(A._redirectEventId=k),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ui;i.updateFromServerResponse(n);const s=new In({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await tc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];K(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?m0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Ui;c.updateFromIdToken(r);const u=new In({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ch(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=new Map;function Sn(t){Vn(t instanceof Function,"Expected a class definition");let e=vy.get(t);return e?(Vn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}g0.type="NONE";const yy=g0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t,e,n){return`firebase:${t}:${e}:${n}`}class Fi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=pl(this.userKey,i.apiKey,s),this.fullPersistenceKey=pl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?In._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fi(Sn(yy),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Sn(yy);const o=pl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){const m=In._fromJSON(e,f);d!==s&&(c=m),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Fi(s,e,r):(s=u[0],c&&await s._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Fi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(w0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(v0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(T0(e))return"Blackberry";if(x0(e))return"Webos";if(y0(e))return"Safari";if((e.includes("chrome/")||_0(e))&&!e.includes("edge/"))return"Chrome";if(E0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function v0(t=ot()){return/firefox\//i.test(t)}function y0(t=ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _0(t=ot()){return/crios\//i.test(t)}function w0(t=ot()){return/iemobile/i.test(t)}function E0(t=ot()){return/android/i.test(t)}function T0(t=ot()){return/blackberry/i.test(t)}function x0(t=ot()){return/webos/i.test(t)}function Dp(t=ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function m1(t=ot()){var e;return Dp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function g1(){return wN()&&document.documentMode===10}function I0(t=ot()){return Dp(t)||E0(t)||x0(t)||T0(t)||/windows phone/i.test(t)||w0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t,e=[]){let n;switch(t){case"Browser":n=_y(ot());break;case"Worker":n=`${_y(ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,c)=>{try{const u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(t,e={}){return ms(t,"GET","/v2/passwordPolicy",jp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=6;class w1{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wy(this),this.idTokenSubscription=new wy(this),this.beforeStateQueue=new v1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Fi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await p0(this,{idToken:e}),r=await In._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(rr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=n1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(Hr(this));const n=e?Ne(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(Hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(Hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await y1(this),n=new w1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Go("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await p1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await Fi.create(this,[Sn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=S0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Zj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Op(t){return Ne(t)}class wy{constructor(e){this.auth=e,this.observer=null,this.addObserver=AN(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T1(t){Lp=t}function x1(t){return Lp.loadJS(t)}function I1(){return Lp.gapiScript}function S1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t,e){const n=Xo(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ql(s,e??{}))return i;Ln(i,"already-initialized")}return n.initialize({options:e})}function N1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function A1(t,e,n){const r=Op(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=C0(e),{host:o,port:c}=P1(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),R1()}function C0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P1(t){const e=C0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ey(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ey(o)}}}function Ey(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function R1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xn("not implemented")}_getIdTokenResponse(e){return xn("not implemented")}_linkToIdToken(e,n){return xn("not implemented")}_getReauthenticationResolver(e){return xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zi(t,e){return s1(t,"POST","/v1/accounts:signInWithIdp",jp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="http://localhost";class ni extends N0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ni(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Pp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ni(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return zi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zi(e,n)}buildRequest(){const e={requestUri:k1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends A0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends sa{constructor(){super("facebook.com")}static credential(e){return ni._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xn.credential(e.oauthAccessToken)}catch{return null}}}Xn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends sa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ni._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yn.credential(n,r)}catch{return null}}}Yn.GOOGLE_SIGN_IN_METHOD="google.com";Yn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends sa{constructor(){super("github.com")}static credential(e){return ni._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jn.credential(e.oauthAccessToken)}catch{return null}}}Jn.GITHUB_SIGN_IN_METHOD="github.com";Jn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends sa{constructor(){super("twitter.com")}static credential(e,n){return ni._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zn.credential(n,r)}catch{return null}}}Zn.TWITTER_SIGN_IN_METHOD="twitter.com";Zn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await In._fromIdTokenResponse(e,r,i),o=Ty(r);return new is({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ty(r);return new is({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ty(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends Yt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,nc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new nc(e,n,r,i)}}function P0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nc._fromErrorAndOperation(t,s,e,r):s})}async function j1(t,e,n=!1){const r=await zo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return is._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(t,e,n=!1){const{auth:r}=t;if(rr(r.app))return Promise.reject(Hr(r));const i="reauthenticate";try{const s=await zo(t,P0(r,i,e,t),n);K(s.idToken,r,"internal-error");const o=bp(s.idToken);K(o,r,"internal-error");const{sub:c}=o;return K(t.uid===c,r,"user-mismatch"),is._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ln(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(t,e,n=!1){if(rr(t.app))return Promise.reject(Hr(t));const r="signIn",i=await P0(t,r,e),s=await is._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function O1(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function L1(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}const rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rc,"1"),this.storage.removeItem(rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=1e3,M1=10;class k0 extends R0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);g1()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,M1):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},V1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}k0.type="LOCAL";const U1=k0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0 extends R0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}j0.type="SESSION";const b0=j0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Kc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,s)),u=await F1(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{const d=Vp("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(g.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return window}function B1(t){ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(){return typeof ln().WorkerGlobalScope<"u"&&typeof ln().importScripts=="function"}async function $1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function q1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function W1(){return D0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="firebaseLocalStorageDb",H1=1,ic="firebaseLocalStorage",L0="fbase_key";class oa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gc(t,e){return t.transaction([ic],e?"readwrite":"readonly").objectStore(ic)}function K1(){const t=indexedDB.deleteDatabase(O0);return new oa(t).toPromise()}function Nh(){const t=indexedDB.open(O0,H1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ic,{keyPath:L0})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ic)?e(r):(r.close(),await K1(),e(await Nh()))})})}async function xy(t,e,n){const r=Gc(t,!0).put({[L0]:e,value:n});return new oa(r).toPromise()}async function G1(t,e){const n=Gc(t,!1).get(e),r=await new oa(n).toPromise();return r===void 0?null:r.value}function Iy(t,e){const n=Gc(t,!0).delete(e);return new oa(n).toPromise()}const Q1=800,X1=3;class V0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>X1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return D0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kc._getInstance(W1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await $1(),!this.activeServiceWorker)return;this.sender=new z1(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||q1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nh();return await xy(e,rc,"1"),await Iy(e,rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>G1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Iy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Gc(i,!1).getAll();return new oa(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V0.type="LOCAL";const Y1=V0;new ia(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t,e){return e?Sn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends N0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Z1(t){return D1(t.auth,new Mp(t),t.bypassAuthState)}function eb(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),b1(n,new Mp(t),t.bypassAuthState)}async function tb(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),j1(n,new Mp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z1;case"linkViaPopup":case"linkViaRedirect":return tb;case"reauthViaPopup":case"reauthViaRedirect":return eb;default:Ln(this.auth,"internal-error")}}resolve(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=new ia(2e3,1e4);class ki extends M0{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ki.currentPopupAction&&ki.currentPopupAction.cancel(),ki.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){Vn(this.filter.length===1,"Popup operations only handle one event");const e=Vp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ki.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nb.get())};e()}}ki.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="pendingRedirect",ml=new Map;class ib extends M0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ml.get(this.auth._key());if(!e){try{const r=await sb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ml.set(this.auth._key(),e)}return this.bypassAuthState||ml.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sb(t,e){const n=lb(e),r=ab(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ob(t,e){ml.set(t._key(),e)}function ab(t){return Sn(t._redirectPersistence)}function lb(t){return pl(rb,t.config.apiKey,t.name)}async function cb(t,e,n=!1){if(rr(t.app))return Promise.reject(Hr(t));const r=Op(t),i=J1(r,e),o=await new ib(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=10*60*1e3;class db{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!U0(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(an(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ub&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sy(e))}saveEventToCache(e){this.cachedEventUids.add(Sy(e)),this.lastProcessedEventTime=Date.now()}}function Sy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function U0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fb(t,e={}){return ms(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mb=/^https?/;async function gb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fb(t);for(const n of e)try{if(vb(n))return}catch{}Ln(t,"unauthorized-domain")}function vb(t){const e=Sh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mb.test(n))return!1;if(pb.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=new ia(3e4,6e4);function Cy(){const t=ln().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _b(t){return new Promise((e,n)=>{var r,i,s;function o(){Cy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cy(),n(an(t,"network-request-failed"))},timeout:yb.get()})}if(!((i=(r=ln().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ln().gapi)===null||s===void 0)&&s.load)o();else{const c=S1("iframefcb");return ln()[c]=()=>{gapi.load?o():n(an(t,"network-request-failed"))},x1(`${I1()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw gl=null,e})}let gl=null;function wb(t){return gl=gl||_b(t),gl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new ia(5e3,15e3),Tb="__/auth/iframe",xb="emulator/auth/iframe",Ib={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cb(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kp(e,xb):`https://${t.config.authDomain}/${Tb}`,r={apiKey:e.apiKey,appName:t.name,v:oi},i=Sb.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Qo(r).slice(1)}`}async function Nb(t){const e=await wb(t),n=ln().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:Cb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ib,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=an(t,"network-request-failed"),c=ln().setTimeout(()=>{s(o)},Eb.get());function u(){ln().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pb=500,Rb=600,kb="_blank",jb="http://localhost";class Ny{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bb(t,e,n,r=Pb,i=Rb){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Ab),{width:r.toString(),height:i.toString(),top:s,left:o}),d=ot().toLowerCase();n&&(c=_0(d)?kb:n),v0(d)&&(e=e||jb,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[v,T])=>`${g}${v}=${T},`,"");if(m1(d)&&c!=="_self")return Db(e||"",c),new Ny(null);const m=window.open(e||"",c,f);K(m,t,"popup-blocked");try{m.focus()}catch{}return new Ny(m)}function Db(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="__/auth/handler",Lb="emulator/auth/handler",Vb=encodeURIComponent("fac");async function Ay(t,e,n,r,i,s){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oi,eventId:i};if(e instanceof A0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",NN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof sa){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${Vb}=${encodeURIComponent(u)}`:"";return`${Mb(t)}?${Qo(c).slice(1)}${d}`}function Mb({config:t}){return t.emulator?kp(t,Lb):`https://${t.authDomain}/${Ob}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd="webStorageSupport";class Ub{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b0,this._completeRedirectFn=cb,this._overrideRedirectResult=ob}async _openPopup(e,n,r,i){var s;Vn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ay(e,n,r,Sh(),i);return bb(e,o,Vp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Ay(e,n,r,Sh(),i);return B1(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Vn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Nb(e),r=new db(e);return n.register("authEvent",i=>(K(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sd,{type:sd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[sd];o!==void 0&&n(!!o),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return I0()||y0()||Dp()}}const Fb=Ub;var Py="@firebase/auth",Ry="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $b(t){_r(new jn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S0(t)},d=new E1(r,i,s,u);return N1(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_r(new jn("auth-internal",e=>{const n=Op(e.getProvider("auth").getImmediate());return(r=>new zb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vt(Py,Ry,Bb(t)),Vt(Py,Ry,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=5*60,Wb=pE("authIdTokenMaxAge")||qb;let ky=null;const Hb=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Wb)return;const i=n==null?void 0:n.token;ky!==i&&(ky=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Kb(t=Nc()){const e=Xo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=C1(t,{popupRedirectResolver:Fb,persistence:[Y1,U1,b0]}),r=pE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Hb(s.toString());L1(n,o,()=>o(n.currentUser)),O1(n,c=>o(c))}}const i=hE("auth");return i&&A1(n,`http://${i}`),n}function Gb(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}T1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=an("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Gb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$b("Browser");const Qb={apiKey:"AIzaSyDf7bTYBUCJiVj8L-7nKxuWU8ueGdXc1W0",authDomain:"app-zerosei-pizza.firebaseapp.com",projectId:"app-zerosei-pizza",storageBucket:"app-zerosei-pizza.firebasestorage.app",messagingSenderId:"912128427084",appId:"1:912128427084:web:9f99ba64f9bd2c97f520e9"},Qc=yE(Qb),Y=Sk(Qc),Up=Gj(Qc);Kb(Qc);async function F0(){const t=at(Y,"products");return(await dn(t)).docs.map(n=>{var r,i;return{id:n.id,...n.data(),createdAt:(r=n.data().createdAt)==null?void 0:r.toDate(),updatedAt:(i=n.data().updatedAt)==null?void 0:i.toDate()}})}async function z0(t){const e=at(Y,"products"),n=ui(e,rs("category","==",t),rs("available","==",!0));return(await dn(n)).docs.map(i=>{var s,o;return{id:i.id,...i.data(),createdAt:(s=i.data().createdAt)==null?void 0:s.toDate(),updatedAt:(o=i.data().updatedAt)==null?void 0:o.toDate()}})}async function Xb(t){var r,i;const e=ue(Y,"products",t),n=await un(e);return n.exists()?{id:n.id,...n.data(),createdAt:(r=n.data().createdAt)==null?void 0:r.toDate(),updatedAt:(i=n.data().updatedAt)==null?void 0:i.toDate()}:null}async function Yb(t){const e=at(Y,"products");return(await ps(e,{...t,createdAt:re.now(),updatedAt:re.now()})).id}async function Jb(t,e){const n=ue(Y,"products",t);await fs(n,{...e,updatedAt:re.now()})}async function Zb(t){const e=ue(Y,"products",t);await Wc(e)}async function B0(){const t=at(Y,"categories"),e=ui(t,_p("order","asc"));return(await dn(e)).docs.map(r=>({id:r.id,...r.data()}))}async function eD(t){const e=at(Y,"categories");return(await ps(e,t)).id}async function tD(t,e){const n=ue(Y,"categories",t);await fs(n,e)}async function nD(t){const e=ue(Y,"categories",t);await Wc(e)}async function rD(t){const e=at(Y,"users");return(await ps(e,{...t,createdAt:re.now(),updatedAt:re.now()})).id}async function Ah(t,e){const n=ue(Y,"users",t);await xr(n,{...e,updatedAt:re.now()},{merge:!0})}async function iD(t){var s,o;const e=at(Y,"users"),n=ui(e,rs("phone","==",t),Lk(1)),r=await dn(n);if(r.empty)return null;const i=r.docs[0];return{id:i.id,...i.data(),createdAt:(s=i.data().createdAt)==null?void 0:s.toDate(),updatedAt:(o=i.data().updatedAt)==null?void 0:o.toDate()}}const od=t=>{if(t)return typeof t.toDate=="function"?t.toDate():t instanceof Date?t:new Date(t)};async function sD(){const t=at(Y,"users");try{const e=await dn(t);return console.log(`Fetched ${e.size} users`),e.docs.map(n=>{const r=n.data();return{id:n.id,...r,createdAt:od(r.createdAt),updatedAt:od(r.updatedAt),lastAccess:od(r.lastAccess)}})}catch(e){return console.error("Error fetching users:",e),[]}}async function Ph(t){const e=at(Y,"orders");return(await ps(e,{...t,createdAt:re.now(),updatedAt:re.now()})).id}async function oD(){const t=at(Y,"orders"),e=ui(t,_p("createdAt","desc"));return(await dn(e)).docs.map(r=>{var i,s;return{id:r.id,...r.data(),createdAt:(i=r.data().createdAt)==null?void 0:i.toDate(),updatedAt:(s=r.data().updatedAt)==null?void 0:s.toDate()}})}async function aD(t,e){const n=ue(Y,"orders",t);await fs(n,{status:e,updatedAt:re.now()})}async function Fp(){const t=at(Y,"promotions"),e=ui(t,_p("createdAt","desc"));return(await dn(e)).docs.map(r=>{var i,s,o,c;return{id:r.id,...r.data(),validFrom:(i=r.data().validFrom)==null?void 0:i.toDate(),validTo:(s=r.data().validTo)==null?void 0:s.toDate(),createdAt:(o=r.data().createdAt)==null?void 0:o.toDate(),updatedAt:(c=r.data().updatedAt)==null?void 0:c.toDate()}})}async function lD(t){const e=at(Y,"promotions");return(await ps(e,{...t,validFrom:re.fromDate(t.validFrom),validTo:re.fromDate(t.validTo),createdAt:re.now(),updatedAt:re.now()})).id}async function cD(t,e){const n=ue(Y,"promotions",t),r={...e,updatedAt:re.now()};e.validFrom&&(r.validFrom=re.fromDate(e.validFrom)),e.validTo&&(r.validTo=re.fromDate(e.validTo)),await fs(n,r)}async function uD(t){const e=ue(Y,"promotions",t);await Wc(e)}function dD(){const[t,e]=b.useState(null),[n,r]=b.useState(!1);b.useEffect(()=>{i()},[]);const i=async()=>{try{const u=(await Fp()).filter(d=>d.active&&d.showAsPopup&&s(d));if(u.length>0){const d=u[0];JSON.parse(localStorage.getItem("seenPromotions")||"[]").includes(d.id)||(e(d),r(!0))}}catch(c){console.error("Error loading popup promotion:",c)}},s=c=>{const u=new Date;return u>=new Date(c.validFrom)&&u<=new Date(c.validTo)},o=(c=!1)=>{if(c&&t){const u=JSON.parse(localStorage.getItem("seenPromotions")||"[]");u.push(t.id),localStorage.setItem("seenPromotions",JSON.stringify(u))}r(!1)};return!n||!t?null:a.jsx("div",{className:"promotion-popup-overlay",onClick:()=>o(!1),children:a.jsxs("div",{className:"promotion-popup",onClick:c=>c.stopPropagation(),children:[a.jsx("button",{className:"popup-close",onClick:()=>o(!1),children:""}),t.imageUrl&&a.jsx("div",{className:"popup-image",children:a.jsx("img",{src:t.imageUrl,alt:t.title})}),a.jsxs("div",{className:"popup-content",children:[a.jsx("h2",{children:t.title}),a.jsx("p",{children:t.description}),a.jsxs("div",{className:"popup-actions",children:[a.jsx("button",{className:"btn btn-primary",onClick:()=>o(!1),children:"Ho capito!"}),a.jsx("button",{className:"btn btn-text",onClick:()=>o(!0),children:"Non mostrare pi"})]})]})]})})}function hD({children:t,cart:e}){const[n,r]=b.useState(!1),[i,s]=b.useState(""),[o,c]=b.useState(60),u=jt(),d=oN(e);b.useEffect(()=>{(async()=>{try{const T=ue(Y,"config","general"),C=await un(T);C.exists()&&(C.data().logoUrl&&s(C.data().logoUrl),C.data().logoSize&&c(C.data().logoSize))}catch(T){console.error("Error loading logo:",T)}})()},[]);const f=()=>r(!n),m=()=>r(!1),g=[{path:"/",label:"Home",icon:""},{path:"/menu",label:"Men",icon:""},{path:"/news",label:"Novit e Offerte",icon:""},{path:"/fidelity",label:"Fidelity Card",icon:""},{path:"/profile",label:"Profilo",icon:""}];return a.jsxs("div",{className:"layout",children:[a.jsx("header",{className:"header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"menu-btn",onClick:f,"aria-label":"Menu",children:a.jsx("span",{className:"menu-icon",children:""})}),a.jsx(uv,{to:"/",className:"logo",children:i?a.jsx("img",{src:i,alt:"ZeroSei Pizza",className:"logo-image",style:{height:`${o}px`,objectFit:"contain"}}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"logo-text",children:"ZeroSei"}),a.jsx("span",{className:"logo-emoji",children:""})]})}),a.jsxs("button",{className:"cart-btn",onClick:()=>u("/cart"),"aria-label":"Carrello",children:[a.jsx("span",{className:"cart-icon",children:""}),d>0&&a.jsx("span",{className:"cart-badge",children:d})]})]})}),a.jsx("div",{className:`sidebar-overlay ${n?"active":""}`,onClick:m}),a.jsxs("aside",{className:`sidebar ${n?"open":""}`,children:[a.jsxs("div",{className:"sidebar-header",children:[a.jsx("h2",{children:"Menu"}),a.jsx("button",{className:"close-btn",onClick:m,children:""})]}),a.jsx("nav",{className:"sidebar-nav",children:g.map(v=>a.jsxs(uv,{to:v.path,className:"sidebar-link",onClick:m,children:[a.jsx("span",{className:"sidebar-icon",children:v.icon}),a.jsx("span",{children:v.label})]},v.path))}),a.jsx("div",{className:"sidebar-footer",children:a.jsxs("div",{className:"social-links",children:[a.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Instagram"}),a.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Facebook"}),a.jsx("a",{href:"https://zerosei.it",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Sito Web"})]})})]}),a.jsx("main",{className:"main-content",children:t}),a.jsx("footer",{className:"footer",children:a.jsx("div",{className:"footer-content",children:a.jsx("p",{children:" 2025 ZeroSei Pizza. Tutti i diritti riservati."})})}),a.jsx(dD,{})]})}const $0="+390456180120";function fD(){return`tel:${$0}`}async function q0(t,e,n){try{if(console.log("Saving phone order..."),!t||t.items.length===0){const r={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Cliente",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"Telefonico",phone:(e==null?void 0:e.phone)||"",email:""},items:[],total:0,status:"pending",source:"phone",notes:"Chiamata telefonica avviata da app"};await Ph(r),console.log("Phone call event saved to Firestore")}else{const r=t.items.map(s=>({productId:s.product.id,productName:s.product.name,quantity:s.quantity,price:s.product.price,notes:s.notes,modifications:s.modifications})),i={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Cliente",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"Telefonico",phone:(e==null?void 0:e.phone)||"",email:""},items:r,total:t.total,status:"pending",source:"phone",notes:(n==null?void 0:n.notes)||"Ordine telefonico da app",deliveryAddress:(n==null?void 0:n.deliveryType)==="delivery"&&(n!=null&&n.deliveryAddress)?`${n.deliveryAddress.street}, ${n.deliveryAddress.city} - ${n.deliveryAddress.doorbell}`:null};await Ph(i),console.log("Phone order saved to Firestore with cart data")}}catch(r){console.error("Error saving phone order:",r)}window.location.href=fD()}function pD(){return $0.replace(/(\+\d{2})(\d{3})(\d{3})(\d{4})/,"$1 $2 $3 $4")}const mD="393792407433";function gD(t,e,n){let r=` *Nuovo Ordine ZeroSei Pizza*

`;if(e&&(r+=` *Cliente:* ${e.name}
`,r+=` *Telefono:* ${e.phone}

`),n&&(n.deliveryType==="pickup"?(r+=` *Ritiro in Pizzeria*
`,n.pickupTime&&(r+=` *Orario preferito:* ${n.pickupTime}
`),r+=`
`):(r+=` *Consegna a Domicilio*
`,n.deliveryAddress&&(r+=` *Indirizzo:* ${n.deliveryAddress.street}, ${n.deliveryAddress.city}
`,r+=` *Campanello:* ${n.deliveryAddress.doorbell}
`),n.pickupTime&&(r+=` *Orario preferito:* ${n.pickupTime}
`),r+=`
`)),r+=`*Prodotti:*
`,t.items.forEach((i,s)=>{const o=Sc(i);r+=`${s+1}. *${i.product.name}* x${i.quantity}
`,i.modifications&&i.modifications.length>0&&(r+=`    ${i.modifications.map(c=>c.name).join(", ")}
`),r+=`    ${(o*i.quantity).toFixed(2)}
`,i.notes&&(r+=`    Note: ${i.notes}
`)}),r+=`
*Totale: ${t.total.toFixed(2)}*
`,(n==null?void 0:n.deliveryType)==="delivery"&&(r+=`_(escluse eventuali spese di trasporto)_
`),r+=`
`,n){let i="";switch(n.paymentMethod){case"cash":i="Contanti";break;case"pos":i="POS";break;case"satispay":i="Satispay";break}r+=` *Pagamento:* ${i}
`}return n!=null&&n.notes&&(r+=`
 *Note:* ${n.notes}`),r}function vD(t,e,n){const r=gD(t,e,n),i=encodeURIComponent(r);return`https://wa.me/${mD}?text=${i}`}async function zp(t,e,n){const r=vD(t,e,n);window.open(r,"_blank");try{const i={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Guest",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"",phone:(e==null?void 0:e.phone)||"",email:""},items:t.items.map(s=>({productId:s.product.id,productName:s.product.name,quantity:s.quantity,price:Sc(s),notes:s.notes,modifications:s.modifications})),total:t.total,status:"pending",source:"whatsapp",deliveryAddress:n!=null&&n.deliveryAddress?`${n.deliveryAddress.street}, ${n.deliveryAddress.city} (Campanello: ${n.deliveryAddress.doorbell})`:null,notes:(n==null?void 0:n.notes)||null};await Ph(i),console.log("Order saved to Firestore")}catch(i){console.error("Error saving order to Firestore:",i)}}const ad={heroTitle:"Benvenuto da ZeroSei ",heroSubtitle:"La migliore pizza napoletana d'asporto della citt",featuresTitle:"Perch scegliere ZeroSei?",features:[{id:"feature1",icon:"",title:"Forno a Legna",description:"Pizza cotta nel tradizionale forno a legna"},{id:"feature2",icon:"",title:"Ingredienti Freschi",description:"Solo ingredienti di prima qualit"},{id:"feature3",icon:"",title:"Servizio Veloce",description:"Pronta in 15-20 minuti"},{id:"feature4",icon:"",title:"Ricetta Napoletana",description:"Autentica tradizione partenopea"}],buttons:[{id:"menu",icon:"",title:"Men",description:"Scopri le nostre pizze",color:"#E74C3C",visible:!0,order:1},{id:"phone",icon:"",title:"Chiama Ora",description:pD(),color:"#27AE60",visible:!0,order:2},{id:"whatsapp",icon:"",title:"Ordina su WhatsApp",description:"Ordine rapido e facile",color:"#25D366",visible:!0,order:3},{id:"fidelity",icon:"",title:"Fidelity Card",description:"I tuoi punti fedelt",color:"#F39C12",visible:!0,order:4}]};function yD(){const t=jt(),[e,n]=b.useState(ad),[r,i]=b.useState(!0);b.useEffect(()=>{s()},[]);const s=async()=>{try{const f=ue(Y,"config","home"),m=await un(f);m.exists()&&n({...ad,...m.data()})}catch(f){console.error("Error loading home config:",f)}i(!1)},o=()=>{const f=oE(),m=localStorage.getItem("user_profile");let g;if(m){const v=JSON.parse(m);g={name:`${v.firstName} ${v.lastName}`,phone:v.phone}}zp(f,g)},c=()=>{q0()},u=f=>{switch(f){case"menu":t("/menu");break;case"phone":c();break;case"whatsapp":o();break;case"fidelity":t("/fidelity");break;case"news":t("/news");break}};if(r)return a.jsx("div",{className:"home-screen fade-in",children:a.jsx("div",{className:"loading",children:"Caricamento..."})});const d=e.buttons.filter(f=>f.visible).sort((f,m)=>f.order-m.order);return a.jsxs("div",{className:"home-screen fade-in",children:[a.jsx("section",{className:"hero",children:a.jsxs("div",{className:"hero-content",children:[a.jsx("h1",{className:"hero-title",children:e.heroTitle}),a.jsx("p",{className:"hero-subtitle",children:e.heroSubtitle})]})}),a.jsx("section",{className:"cta-section",children:a.jsx("div",{className:"cta-grid",children:d.map(f=>a.jsxs("button",{className:"cta-card",style:{background:`linear-gradient(135deg, ${f.color} 0%, ${f.color}dd 100%)`,borderColor:f.color},onClick:()=>u(f.id),children:[f.imageUrl?a.jsx("img",{src:f.imageUrl,alt:f.title,className:"cta-icon-image"}):a.jsx("span",{className:"cta-icon",children:f.icon}),a.jsx("h3",{children:f.title}),a.jsx("p",{children:f.description})]},f.id))})}),a.jsxs("section",{className:"info-section",children:[a.jsx("h2",{children:e.featuresTitle||"Perch scegliere ZeroSei?"}),a.jsx("div",{className:"features-grid",children:(e.features||ad.features||[]).map(f=>a.jsxs("div",{className:"feature",children:[a.jsx("span",{className:"feature-icon",children:f.icon}),a.jsx("h4",{children:f.title}),a.jsx("p",{children:f.description})]},f.id))})]}),a.jsxs("section",{className:"social-section",children:[a.jsx("h3",{children:"Seguici sui social"}),a.jsxs("div",{className:"social-buttons",children:[a.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"social-btn instagram",children:" Instagram"}),a.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"social-btn facebook",children:" Facebook"}),a.jsx("a",{href:"https://www.zeroseilapizzadasporto.it",target:"_blank",rel:"noopener noreferrer",className:"social-btn website",children:" Sito Web"})]})]})]})}function _D(){const t=jt(),[e,n]=b.useState([]),[r,i]=b.useState(!0);b.useEffect(()=>{s()},[]);const s=async()=>{try{const u=await B0();n(u)}catch(u){console.error("Error loading categories:",u)}i(!1)},o=u=>{const d=["var(--color-primary)","#9B59B6","var(--color-secondary)","var(--color-accent)","#3498DB","#F1C40F","#E74C3C","#1ABC9C"];return d[u%d.length]},c=u=>({"Pizze Veraci":"pizze-veraci","Pizze Classiche":"pizze-classiche","Le Nostre Proposte":"proposte",Proposte:"proposte",Calzoni:"calzoni",Bevande:"bevande",Birre:"birre"})[u]||u.toLowerCase().replace(/\s+/g,"-");return r?a.jsxs("div",{className:"menu-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Nostro Men"}),a.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Caricamento categorie..."})]}):a.jsxs("div",{className:"menu-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Nostro Men"}),a.jsx("div",{className:"categories-grid",children:e.map((u,d)=>a.jsxs("button",{className:"category-card",onClick:()=>t(`/menu/${c(u.name)}`),style:{"--category-color":o(d)},children:[a.jsx("div",{className:"category-icon",children:u.icon||""}),a.jsxs("div",{className:"category-content",children:[a.jsx("h3",{children:u.name}),a.jsx("p",{children:u.description||""})]}),a.jsx("div",{className:"category-arrow",children:""})]},u.id))})]})}function wD({cart:t,setCart:e}){const{category:n}=bf(),r=jt(),[i,s]=b.useState([]),[o,c]=b.useState(""),[u,d]=b.useState(!0);b.useEffect(()=>{f()},[n]);const f=async()=>{d(!0),console.log(" ProductListScreen: Loading products for category:",n);try{if(n){const T=await z0(n);console.log(" ProductListScreen: Products loaded:",T.length,T),s(T)}else console.log(" ProductListScreen: No category specified")}catch(T){console.error(" ProductListScreen: Error loading products:",T)}d(!1)},m=i.filter(T=>{var C,k;return T.name.toLowerCase().includes(o.toLowerCase())||(((C=T.ingredients)==null?void 0:C.some(y=>y.toLowerCase().includes(o.toLowerCase())))??!1)||(((k=T.description)==null?void 0:k.toLowerCase().includes(o.toLowerCase()))??!1)}).sort((T,C)=>C.price-T.price),g=T=>{switch(T){case"pizze-veraci":return"Pizze Veraci";case"pizze-classiche":return"Pizze Classiche";case"proposte":return"Le Nostre Proposte";case"calzoni":return"Calzoni";case"bevande":return"Bevande";case"birre":return"Birre";default:return"Prodotti"}},v=(T,C)=>{T.stopPropagation();const k=aE(t,C,1);e(k)};return a.jsxs("div",{className:"product-list-screen fade-in",children:[a.jsxs("div",{className:"list-header",children:[a.jsx("button",{className:"back-btn",onClick:()=>r("/menu"),children:" Indietro"}),a.jsx("h1",{children:g(n)})]}),a.jsxs("div",{className:"search-bar",children:[a.jsx("span",{className:"search-icon",children:""}),a.jsx("input",{type:"text",placeholder:"Cerca pizze o ingredienti...",value:o,onChange:T=>c(T.target.value)})]}),u?a.jsx("div",{className:"loading",children:"Caricamento..."}):a.jsxs("div",{className:"products-grid",children:[m.map(T=>{var k,y,E;const C=((k=T.imageUrl)!=null&&k.startsWith("http")?T.imageUrl:null)||((y=T.image)!=null&&y.startsWith("http")?T.image:null)||T.imageUrl||T.image;return a.jsxs("div",{className:"product-card",onClick:()=>r(`/product/${T.id}`),children:[C&&a.jsx("div",{className:"product-list-image-container",children:a.jsx("img",{src:C,alt:T.name,className:"product-list-image",onError:S=>S.currentTarget.style.display="none"})}),a.jsxs("div",{className:"product-info",children:[a.jsx("h3",{children:T.name}),a.jsx("p",{className:"ingredients",children:T.description||((E=T.ingredients)==null?void 0:E.join(", "))||""}),a.jsxs("p",{className:"price",children:["",T.price.toFixed(2)]})]}),a.jsx("button",{className:"add-btn",onClick:S=>v(S,T),children:"+"})]},T.id)}),m.length===0&&a.jsx("div",{className:"no-results",children:a.jsx("p",{children:"Nessun prodotto trovato."})})]})]})}const Xc="modifications";async function W0(){try{const t=await dn(at(Y,Xc)),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e}catch(t){return console.error("Error loading modifications:",t),[]}}async function ED(t){try{console.log("Saving modification:",t);const e=ue(Y,Xc,t.id),n={name:t.name,price:t.price,type:t.type,available:t.available,category:t.category};console.log("Data to save:",n),await xr(e,n),console.log("Modification saved successfully")}catch(e){throw console.error("Error saving modification:",e),e}}async function TD(t){try{await Wc(ue(Y,Xc,t))}catch(e){throw console.error("Error deleting modification:",e),e}}async function xD(t,e){try{const n=ue(Y,Xc,t);await fs(n,{available:e})}catch(n){throw console.error("Error updating modification availability:",n),n}}function ID({cart:t,setCart:e}){var R;const{id:n}=bf(),r=jt(),[i,s]=b.useState(null),[o,c]=b.useState(1),[u,d]=b.useState(""),[f,m]=b.useState([]),[g,v]=b.useState([]),[T,C]=b.useState(!0);b.useEffect(()=>{y(),k()},[n]);const k=async()=>{const N=await W0();v(N)},y=async()=>{if(n){try{const N=await Xb(n);s(N)}catch(N){console.error("Error loading product:",N)}C(!1)}},E=N=>{const D=o+N;D>=1&&c(D)},S=N=>{m(D=>D.find(pe=>pe.id===N.id)?D.filter(pe=>pe.id!==N.id):[...D,N])},x=()=>f.reduce((N,D)=>N+D.price,0),O=()=>i?(i.price+x())*o:0,j=()=>{if(i){const N=aE(t,i,o,u,f);e(N),r(-1)}},I=()=>{if(i){const N={items:[{product:i,quantity:o,notes:u,modifications:f}],total:O()},D=localStorage.getItem("user_profile");let P;if(D){const pe=JSON.parse(D);P={name:`${pe.firstName} ${pe.lastName}`,phone:pe.phone}}zp(N,P)}};if(T)return a.jsx("div",{className:"loading",children:"Caricamento..."});if(!i)return a.jsx("div",{className:"error",children:"Prodotto non trovato"});const A=i.imageUrl&&i.imageUrl.startsWith("http")?i.imageUrl:i.image&&i.image.startsWith("http")?i.image:i.imageUrl||i.image;return a.jsxs("div",{className:"product-detail-screen fade-in",children:[a.jsx("button",{className:"back-btn-floating",onClick:()=>r(-1),children:""}),a.jsxs("div",{className:"product-image-container",children:[A?a.jsx("img",{src:A,alt:i.name,className:"product-image",onError:N=>{var D;console.error("Error loading image:",A),N.currentTarget.style.display="none",(D=N.currentTarget.nextElementSibling)==null||D.classList.remove("hidden")}}):a.jsx("div",{className:"product-image-placeholder",children:""}),a.jsx("div",{className:"product-image-placeholder hidden",children:""})]}),a.jsxs("div",{className:"product-details-content",children:[a.jsxs("div",{className:"product-header",children:[a.jsx("h1",{children:i.name}),a.jsxs("span",{className:"product-price",children:["",i.price.toFixed(2)]})]}),a.jsx("p",{className:"product-ingredients",children:i.description||((R=i.ingredients)==null?void 0:R.join(", "))||"Nessuna descrizione disponibile"}),!i.category.includes("bevande")&&!i.category.includes("birre")&&a.jsxs("div",{className:"modifications-section",children:[a.jsx("h3",{children:"Aggiungi ingredienti"}),["Formaggi","Salumi","Verdure","Altro"].map(N=>{const D=g.filter(P=>P.category===N&&P.available);return D.length===0?null:a.jsxs("div",{className:"modification-category",children:[a.jsx("h4",{children:N}),a.jsx("div",{className:"modification-grid",children:D.map(P=>a.jsxs("button",{className:`modification-btn ${f.find(pe=>pe.id===P.id)?"selected":""}`,onClick:()=>S(P),children:[a.jsx("span",{className:"mod-name",children:P.name}),a.jsxs("span",{className:"mod-price",children:["+",P.price.toFixed(2)]})]},P.id))})]},N)})]}),a.jsxs("div",{className:"notes-section",children:[a.jsx("label",{htmlFor:"notes",children:"Note per la cucina"}),a.jsx("textarea",{id:"notes",placeholder:"Es: Ben cotta, no basilico...",value:u,onChange:N=>d(N.target.value),rows:3})]}),a.jsxs("div",{className:"quantity-selector",children:[a.jsx("button",{className:"qty-btn",onClick:()=>E(-1),disabled:o<=1,children:"-"}),a.jsx("span",{className:"qty-value",children:o}),a.jsx("button",{className:"qty-btn",onClick:()=>E(1),children:"+"})]}),a.jsxs("div",{className:"action-buttons",children:[a.jsxs("button",{className:"btn btn-primary add-to-cart-btn",onClick:j,children:["Aggiungi al carrello - ",O().toFixed(2)]}),a.jsx("button",{className:"btn btn-whatsapp order-now-btn",onClick:I,children:"Ordina subito su WhatsApp"})]})]})]})}function SD({cart:t,setCart:e,userProfile:n}){const r=jt(),[i,s]=b.useState(""),[o,c]=b.useState(""),[u,d]=b.useState("pickup"),[f,m]=b.useState(""),[g,v]=b.useState(""),[T,C]=b.useState(""),[k,y]=b.useState(""),[E,S]=b.useState("cash"),[x,O]=b.useState(""),j=(N,D)=>{const P=iN(t,N,D);e(P)},I=N=>{const D=lE(t,N);e(D)},_=()=>{if(window.confirm("Sei sicuro di voler svuotare il carrello?")){const N=sN();e(N)}},A=()=>{console.log("WhatsApp order button clicked");let N;if(n)N={name:`${n.firstName} ${n.lastName}`,phone:n.phone};else if(i&&o)N={name:i,phone:o};else{alert("Per favore inserisci il tuo nome e numero di telefono o accedi al profilo.");return}if(u==="delivery"){if(!g||!T||!k){alert("Per favore compila tutti i campi dell'indirizzo di consegna.");return}if(!f){alert("Per favore seleziona un orario di consegna.");return}}const D={deliveryType:u,pickupTime:f,deliveryAddress:u==="delivery"?{street:g,city:T,doorbell:k}:void 0,paymentMethod:E,notes:x};console.log("Opening WhatsApp with:",{cart:t,userInfo:N,orderDetails:D}),zp(t,N,D)},R=()=>{console.log("Phone call button clicked");let N;n?N={name:`${n.firstName} ${n.lastName}`,phone:n.phone}:i&&o&&(N={name:i,phone:o});const D={deliveryType:u,pickupTime:f,deliveryAddress:u==="delivery"?{street:g,city:T,doorbell:k}:void 0,paymentMethod:E,notes:x};console.log("Calling pizzeria with:",{cart:t,userInfo:N,orderDetails:D}),q0(t,N,D)};return t.items.length===0?a.jsx("div",{className:"cart-screen empty fade-in",children:a.jsxs("div",{className:"empty-state",children:[a.jsx("span",{className:"empty-icon",children:""}),a.jsx("h2",{children:"Il tuo carrello  vuoto"}),a.jsx("p",{children:"Aggiungi qualche pizza deliziosa!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>r("/menu"),children:"Vai al Men"})]})}):a.jsxs("div",{className:"cart-screen fade-in",children:[a.jsxs("div",{className:"cart-header",children:[a.jsx("h1",{children:"Il tuo Ordine"}),a.jsx("button",{className:"clear-btn",onClick:_,children:"Svuota"})]}),a.jsx("div",{className:"cart-items",children:t.items.map((N,D)=>{const P=Sc(N);return a.jsxs("div",{className:"cart-item",children:[a.jsxs("div",{className:"item-info",children:[a.jsx("h3",{children:N.product.name}),a.jsxs("p",{className:"item-price",children:["",P.toFixed(2)," cad."]}),N.modifications&&N.modifications.length>0&&a.jsx("div",{className:"item-modifications",children:N.modifications.map(pe=>a.jsxs("span",{className:"mod-tag",children:["+ ",pe.name]},pe.id))}),N.notes&&a.jsxs("p",{className:"item-notes",children:[" ",N.notes]})]}),a.jsxs("div",{className:"item-actions",children:[a.jsxs("div",{className:"qty-control",children:[a.jsx("button",{onClick:()=>j(D,N.quantity-1),children:"-"}),a.jsx("span",{children:N.quantity}),a.jsx("button",{onClick:()=>j(D,N.quantity+1),children:"+"})]}),a.jsxs("div",{className:"item-total",children:["",(P*N.quantity).toFixed(2)]}),a.jsx("button",{className:"remove-btn",onClick:()=>I(D),children:""})]})]},`${N.product.id}-${D}`)})}),a.jsx("div",{className:"cart-summary",children:a.jsxs("div",{className:"summary-row total",children:[a.jsx("span",{children:"Totale"}),a.jsxs("span",{children:["",t.total.toFixed(2)]})]})}),a.jsxs("div",{className:"quick-order-section",children:[a.jsxs("p",{className:"quick-order-hint",children:[" ",a.jsx("strong",{children:"Ordine veloce?"})," Chiama direttamente!"]}),a.jsxs("button",{className:"btn btn-secondary full-width",onClick:R,children:[a.jsx("span",{className:"icon",children:""})," Chiama Ora - 045 618 0120"]})]}),a.jsxs("div",{className:"whatsapp-order-section",children:[a.jsx("h3",{children:"Ordina su WhatsApp"}),a.jsx("p",{className:"section-hint",children:"Compila i dettagli per ricevere il riepilogo completo"}),!n&&a.jsxs("div",{className:"guest-info-inline",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"guestName",children:"Nome e Cognome *"}),a.jsx("input",{type:"text",id:"guestName",className:"input",placeholder:"Nome e Cognome",value:i,onChange:N=>s(N.target.value)})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"guestPhone",children:"Telefono *"}),a.jsx("input",{type:"tel",id:"guestPhone",className:"input",placeholder:"Numero di Telefono",value:o,onChange:N=>c(N.target.value)})]})]}),a.jsxs("div",{className:"delivery-options-wrapper",children:[a.jsx("label",{className:"section-label",children:"Modalit di Ritiro *"}),a.jsxs("div",{className:"delivery-options",children:[a.jsxs("button",{className:`delivery-option ${u==="pickup"?"active":""}`,onClick:()=>d("pickup"),children:[a.jsx("span",{className:"option-icon",children:""}),a.jsx("span",{className:"option-label",children:"Ritiro in Pizzeria"})]}),a.jsxs("button",{className:`delivery-option ${u==="delivery"?"active":""}`,onClick:()=>d("delivery"),children:[a.jsx("span",{className:"option-icon",children:""}),a.jsx("span",{className:"option-label",children:"Consegna a Domicilio"})]})]}),u==="pickup"&&a.jsxs("div",{className:"pickup-details",children:[a.jsx("label",{htmlFor:"pickupTime",children:"Orario Preferito (opzionale)"}),a.jsx("input",{type:"time",id:"pickupTime",className:"input",value:f,onChange:N=>m(N.target.value)})]}),u==="delivery"&&a.jsxs("div",{className:"delivery-details",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"street",children:"Via e Numero Civico *"}),a.jsx("input",{type:"text",id:"street",className:"input",placeholder:"Es: Via Roma, 123",value:g,onChange:N=>v(N.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"city",children:"Paese/Citt *"}),a.jsx("input",{type:"text",id:"city",className:"input",placeholder:"Es: Verona",value:T,onChange:N=>C(N.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"doorbell",children:"Nome sul Campanello *"}),a.jsx("input",{type:"text",id:"doorbell",className:"input",placeholder:"Nome e Cognome",value:k,onChange:N=>y(N.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"deliveryTime",children:"Orario di Consegna *"}),a.jsx("input",{type:"time",id:"deliveryTime",className:"input",value:f,onChange:N=>m(N.target.value),required:!0})]}),a.jsx("label",{className:"section-label",children:"Metodo di Pagamento *"}),a.jsxs("div",{className:"payment-options",children:[a.jsx("button",{className:`payment-option ${E==="cash"?"active":""}`,onClick:()=>S("cash"),children:" Contanti"}),a.jsx("button",{className:`payment-option ${E==="pos"?"active":""}`,onClick:()=>S("pos"),children:" POS"}),a.jsx("button",{className:`payment-option ${E==="satispay"?"active":""}`,onClick:()=>S("satispay"),children:" Satispay"})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"orderNotes",children:"Note Aggiuntive (opzionale)"}),a.jsx("textarea",{id:"orderNotes",className:"input",placeholder:"Es: Suonare al citofono, non al campanello...",value:x,onChange:N=>O(N.target.value),rows:2})]})]}),a.jsxs("button",{className:"btn btn-whatsapp full-width",onClick:A,children:[a.jsx("span",{className:"icon",children:""})," Invia Ordine su WhatsApp"]}),!n&&a.jsxs("p",{className:"profile-hint",children:[" ",a.jsx("span",{onClick:()=>r("/profile"),className:"link",children:"Crea un profilo"})," per salvare i tuoi dati"]})]})]})}function CD({userProfile:t,setUserProfile:e}){const[n,r]=b.useState({firstName:"",lastName:"",phone:"",email:""}),[i,s]=b.useState(!1),[o,c]=b.useState(null);b.useEffect(()=>{t?r({firstName:t.firstName,lastName:t.lastName,phone:t.phone,email:t.email}):s(!0)},[t]);const u=f=>{const{name:m,value:g}=f.target;r(v=>({...v,[m]:g}))},d=async f=>{if(f.preventDefault(),!n.firstName||!n.lastName||!n.phone){c({type:"error",text:"Per favore compila tutti i campi obbligatori."});return}try{const m={id:(t==null?void 0:t.id)||"",firstName:n.firstName,lastName:n.lastName,phone:n.phone,email:n.email,loyaltyPoints:(t==null?void 0:t.loyaltyPoints)||0,createdAt:(t==null?void 0:t.createdAt)||new Date,updatedAt:new Date};if(t!=null&&t.id)await Ah(t.id,m);else{const g=await iD(n.phone);if(g)m.id=g.id,m.loyaltyPoints=g.loyaltyPoints,m.createdAt=g.createdAt,await Ah(g.id,m);else{const v=await rD(m);m.id=v}}localStorage.setItem("user_profile",JSON.stringify(m)),e(m),s(!1),c({type:"success",text:"Profilo salvato con successo!"})}catch(m){console.error("Error saving profile:",m),c({type:"error",text:"Errore nel salvataggio del profilo. Riprova."})}setTimeout(()=>c(null),3e3)};return a.jsxs("div",{className:"profile-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Tuo Profilo"}),o&&a.jsx("div",{className:`message ${o.type}`,children:o.text}),a.jsxs("div",{className:"profile-card",children:[a.jsxs("div",{className:"profile-header",children:[a.jsx("div",{className:"avatar-circle",children:n.firstName?n.firstName[0].toUpperCase():""}),!i&&a.jsxs("div",{className:"profile-summary",children:[a.jsxs("h2",{children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]}),a.jsx("p",{children:t==null?void 0:t.phone})]})]}),a.jsxs("form",{onSubmit:d,className:"profile-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"firstName",children:"Nome *"}),a.jsx("input",{type:"text",id:"firstName",name:"firstName",value:n.firstName,onChange:u,disabled:!i,placeholder:"Il tuo nome",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"lastName",children:"Cognome *"}),a.jsx("input",{type:"text",id:"lastName",name:"lastName",value:n.lastName,onChange:u,disabled:!i,placeholder:"Il tuo cognome",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"phone",children:"Telefono *"}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:u,disabled:!i,placeholder:"Il tuo numero di cellulare",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:u,disabled:!i,placeholder:"La tua email (opzionale)",className:"input"})]}),a.jsx("div",{className:"form-actions",children:i?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>s(!1),disabled:!t,children:"Annulla"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Salva Profilo"})]}):a.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>s(!0),children:"Modifica Dati"})})]})]}),a.jsxs("div",{className:"info-box",children:[a.jsx("h3",{children:" Perch serve il profilo?"}),a.jsx("p",{children:"I tuoi dati servono solo per pre-compilare i messaggi WhatsApp per gli ordini e per associare la tua Fidelity Card. Non vengono inviati a server esterni se non quando invii un ordine o usi la Fidelity Card."})]})]})}function ND(){const t=jt(),[e,n]=b.useState([]),[r,i]=b.useState(!0);b.useEffect(()=>{s()},[]);const s=async()=>{try{const d=(await Fp()).filter(f=>f.active);n(d)}catch(u){console.error("Error loading promotions:",u)}i(!1)},o=u=>new Date(u).toLocaleDateString("it-IT",{day:"numeric",month:"short",year:"numeric"}),c=u=>{const d=new Date;return d>=new Date(u.validFrom)&&d<=new Date(u.validTo)};return r?a.jsxs("div",{className:"news-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Novit e Offerte"}),a.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Caricamento offerte..."})]}):a.jsxs("div",{className:"news-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Novit e Offerte"}),e.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:[a.jsx("p",{children:"Nessuna offerta disponibile al momento."}),a.jsx("p",{style:{fontSize:"0.9rem",marginTop:"8px"},children:"Torna presto per scoprire le nostre promozioni!"})]}):a.jsx("div",{className:"news-grid",children:e.map(u=>a.jsxs("div",{className:"news-card clickable",onClick:()=>t(`/offer/${u.id}`),children:[u.imageUrl?a.jsx("img",{src:u.imageUrl,alt:u.title,className:"news-image"}):a.jsx("div",{className:"news-icon",children:""}),a.jsxs("div",{className:"news-content",children:[a.jsxs("span",{className:"news-date",children:[o(u.validFrom)," - ",o(u.validTo)]}),!c(u)&&a.jsx("span",{className:"news-badge expired",children:"Scaduta"}),a.jsx("h3",{children:u.title}),a.jsx("p",{children:u.description})]})]},u.id))})]})}function AD({userProfile:t}){const{id:e}=bf(),n=jt(),[r,i]=b.useState(null),[s,o]=b.useState(!0),[c,u]=b.useState(!1),[d,f]=b.useState(null),[m,g]=b.useState(null),[v,T]=b.useState(null);b.useEffect(()=>{C()},[e,t]);const C=async()=>{var O,j,I,_;if(e){try{const A=ue(Y,"promotions",e),R=await un(A);if(R.exists()){const N=R.data(),D={id:R.id,title:N.title,description:N.description,imageUrl:N.imageUrl,validFrom:((O=N.validFrom)==null?void 0:O.toDate())||new Date,validTo:((j=N.validTo)==null?void 0:j.toDate())||new Date,active:N.active,showAsPopup:N.showAsPopup,createdAt:((I=N.createdAt)==null?void 0:I.toDate())||new Date,updatedAt:((_=N.updatedAt)==null?void 0:_.toDate())||new Date};if(i(D),t){const P=await k(t.id,R.id);P&&(g(P),P.status==="active"&&f(P.code))}}else T("Offerta non trovata")}catch(A){console.error("Error loading offer:",A),T("Errore nel caricamento dell'offerta")}o(!1)}},k=async(O,j)=>{try{const I=at(Y,"GeneratedCoupons"),_=ui(I,rs("userId","==",O),rs("offerId","==",j)),A=await dn(_);return A.size>0?{...A.docs[0].data(),id:A.docs[0].id}:null}catch(I){return console.error("Error checking offer activation:",I),null}},y=()=>{const O="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let j="";for(let I=0;I<6;I++)j+=O.charAt(Math.floor(Math.random()*O.length));return j},E=async()=>{if(!t){T("Devi essere loggato per attivare un'offerta");return}if(r){u(!0),T(null);try{const O=await k(t.id,r.id);if(O){O.status==="active"?(f(O.code),g(O)):(T("Hai gi utilizzato questa offerta."),g(O)),u(!1);return}const j=y(),I={userId:t.id,offerId:r.id,offerTitle:r.title,code:j,status:"active",createdAt:qT()};await ps(at(Y,"GeneratedCoupons"),I),f(j),g({...I,code:j})}catch(O){console.error("Error activating offer:",O),T("Errore nell'attivazione dell'offerta. Riprova.")}u(!1)}},S=O=>new Date(O).toLocaleDateString("it-IT",{day:"numeric",month:"long",year:"numeric"});if(!t)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsxs("div",{className:"login-prompt",children:[a.jsx("span",{className:"lock-icon",children:""}),a.jsx("h2",{children:"Accedi per attivare le offerte"}),a.jsx("p",{children:"Crea un profilo per ricevere codici sconto esclusivi!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>n("/profile"),children:"Crea Profilo"})]})});if(s)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsx("div",{style:{textAlign:"center",padding:"40px"},children:"Caricamento..."})});if(v&&!r)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsxs("div",{className:"error-message",children:[a.jsx("p",{children:v}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/news"),children:"Torna alle offerte"})]})});if(!r)return null;const x=new Date>=new Date(r.validFrom)&&new Date<=new Date(r.validTo);return a.jsxs("div",{className:"offer-detail-screen fade-in",children:[a.jsx("button",{className:"back-button",onClick:()=>n("/news"),children:" Torna alle offerte"}),a.jsxs("div",{className:"offer-detail-card",children:[r.imageUrl&&a.jsx("img",{src:r.imageUrl,alt:r.title,className:"offer-detail-image"}),a.jsxs("div",{className:"offer-detail-content",children:[a.jsx("h1",{className:"offer-title",children:r.title}),a.jsxs("div",{className:"offer-validity",children:[a.jsx("span",{className:`validity-badge ${x?"valid":"expired"}`,children:x?" Offerta Valida":" Offerta Scaduta"}),a.jsxs("p",{className:"validity-dates",children:["Dal ",S(r.validFrom)," al ",S(r.validTo)]})]}),a.jsx("p",{className:"offer-description",children:r.description}),m&&m.status==="redeemed"&&a.jsxs("div",{className:"alert alert-warning",children:[a.jsx("strong",{children:" Offerta gi utilizzata"}),a.jsx("p",{children:"Hai gi riscattato questa offerta. Non puoi riattivarla."})]}),d&&(!m||m.status==="active")&&a.jsx("div",{className:"coupon-generated",children:a.jsxs("div",{className:"coupon-box",children:[a.jsx("h2",{children:" Offerta Attivata!"}),a.jsxs("div",{className:"coupon-code",children:[a.jsx("span",{className:"code-label",children:"Il tuo codice :"}),a.jsx("span",{className:"code-value",children:d})]}),a.jsxs("p",{className:"coupon-instructions",children:[" ",a.jsx("strong",{children:"Mostra questo codice in cassa"})," per ricevere lo sconto"]})]})}),!m&&x&&a.jsxs("div",{className:"activation-section",children:[v&&a.jsx("div",{className:"alert alert-error",children:v}),a.jsx("button",{className:"btn btn-primary btn-large",onClick:E,disabled:c,children:c?"Attivazione in corso...":" ATTIVA QUESTA OFFERTA"}),a.jsx("p",{className:"help-text",children:"Attiva l'offerta per ricevere il tuo codice sconto personale"})]}),!x&&a.jsx("div",{className:"alert alert-warning",children:"Questa offerta non  pi valida"})]})]})]})}const PD="modulepreload",RD=function(t){return"/app-zerosei-pizza/"+t},jy={},kD=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=RD(u),u in jy)return;jy[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":PD,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="type.googleapis.com/google.protobuf.Int64Value",bD="type.googleapis.com/google.protobuf.UInt64Value";function H0(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Rh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Rh(e));if(typeof t=="function"||typeof t=="object")return H0(t,e=>Rh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function sc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case jD:case bD:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>sc(e)):typeof t=="function"||typeof t=="object"?H0(t,e=>sc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bi extends Yt{constructor(e,n,r){super(`${Bp}/${e}`,n||""),this.details=r}}function DD(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function OD(t,e){let n=DD(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!by[o])return new Bi("internal","internal");n=by[o],r=o}const c=s.message;typeof c=="string"&&(r=c),i=s.details,i!==void 0&&(i=sc(i))}}catch{}return n==="ok"?null:new Bi(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh="us-central1";function VD(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Bi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class MD{constructor(e,n,r,i,s=kh,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new LD(n,r,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(s);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=kh}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function UD(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function FD(t,e,n){return r=>BD(t,e,r,{})}async function zD(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function BD(t,e,n,r){const i=t._url(e);return $D(t,i,n,r)}async function $D(t,e,n,r){n=Rh(n);const i={data:n},s={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=o.appCheckToken);const c=r.timeout||7e4,u=VD(c),d=await Promise.race([zD(e,i,s,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!d)throw new Bi("cancelled","Firebase Functions instance was deleted.");const f=OD(d.status,d.json);if(f)throw f;if(!d.json)throw new Bi("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new Bi("internal","Response is missing data field.");return{data:sc(m)}}const Dy="@firebase/functions",Oy="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="auth-internal",WD="app-check-internal",HD="messaging-internal";function KD(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(qD),c=r.getProvider(HD),u=r.getProvider(WD);return new MD(s,o,c,u,i,t)};_r(new jn(Bp,n,"PUBLIC").setMultipleInstances(!0)),Vt(Dy,Oy,e),Vt(Dy,Oy,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t=Nc(),e=kh){const r=Xo(Ne(t),Bp).getImmediate({identifier:e}),i=Of("functions");return i&&QD(r,...i),r}function QD(t,e,n){UD(Ne(t),e,n)}function $p(t,e,n){return FD(Ne(t),e)}KD(fetch.bind(self));const qp=GD(Qc);let vl="052ee020-a2bb-4383-9ab0-dfef25dd8345",Xs=null,jh=0;function K0(t){vl=t,localStorage.setItem("cassacloud_api_key",t),Xs=null,jh=0}function Wp(){return vl||(vl=localStorage.getItem("cassacloud_api_key")||"052ee020-a2bb-4383-9ab0-dfef25dd8345"),vl}async function Hp(){try{if(Xs&&Date.now()<jh)return Xs;const t=Wp();if(!t)throw new Error("Chiave API non configurata");const r=(await $p(qp,"getAccessToken")({apiKey:t})).data;if(r.success)return Xs=r.accessToken,jh=Date.now()+(r.expiresIn-600)*1e3,Xs;throw new Error("Risposta API non valida (success=false)")}catch(t){throw console.error("Error getting access token via Cloud Function:",t),new Error(t.message||"Errore sconosciuto nel recupero del token")}}async function G0(t){try{const e=await Hp();if(!e)return console.warn("Could not obtain access token"),{customerId:t,points:0,tier:"Member",lastUpdated:new Date};const i=(await $p(qp,"getLoyaltyPoints")({accessToken:e,customerId:t})).data;return i.success?{customerId:i.customerId,points:i.points,tier:i.tier,lastUpdated:new Date(i.lastUpdated)}:{customerId:t,points:0,tier:"Member",lastUpdated:new Date}}catch(e){return console.error("Error fetching loyalty points via Cloud Function:",e),{customerId:t,points:0,tier:"Member",lastUpdated:new Date}}}async function Q0(){try{return await Hp(),{success:!0}}catch(t){return console.error("Error testing Cassa in Cloud connection:",t),{success:!1,error:t.message||"Errore sconosciuto durante il test di connessione"}}}async function bh(t){try{const e=await Hp();if(!e)return console.warn("Could not obtain access token"),null;const i=(await $p(qp,"searchCustomer")({accessToken:e,...t})).data;return i.success&&i.customer?i.customer:null}catch(e){return console.error("Error searching customer:",e),null}}async function XD(t){if(t.cassaCloudId)return t.cassaCloudId;if(t.email){const e=await bh({email:t.email});if(e)return e.id}if(t.phone){const e=t.phone.replace(/\D/g,""),n=await bh({phone:e});if(n)return n.id}return null}const YD=Object.freeze(Object.defineProperty({__proto__:null,getCassaCloudApiKey:Wp,getLoyaltyPoints:G0,linkCustomerProfile:XD,searchCustomer:bh,setCassaCloudApiKey:K0,testCassaCloudConnection:Q0},Symbol.toStringTag,{value:"Module"}));function JD({userProfile:t}){const e=jt(),[n,r]=b.useState(null),[i,s]=b.useState([]),[o,c]=b.useState(!1),[u,d]=b.useState(!0);b.useEffect(()=>{f()},[]),b.useEffect(()=>{t&&(c(!0),(async()=>{let g=t.cassaCloudId;if(console.log("Initial customerId from profile:",g),!g)try{console.log("Searching for customer profile with:",t.email,t.phone);const{linkCustomerProfile:v}=await kD(async()=>{const{linkCustomerProfile:C}=await Promise.resolve().then(()=>YD);return{linkCustomerProfile:C}},void 0),T=await v(t);console.log("Search result foundId:",T),T?(g=T,console.log("Found Cassa in Cloud ID:",g)):console.warn("Customer not found in Cassa in Cloud")}catch(v){console.error("Error linking profile:",v)}g?(console.log("Fetching points for customerId:",g),G0(g).then(v=>{console.log("Loyalty data received:",v),r(v),c(!1)})):(console.log("No customerId available, skipping points fetch"),c(!1))})())},[t]);const f=async()=>{d(!0);try{const m=ue(Y,"config","rewards"),g=await un(m);if(g.exists()){const T=(g.data().rewards||[]).filter(C=>C.available);s(T)}else s([])}catch(m){console.error("Error loading rewards:",m),s([])}d(!1)};return t?a.jsxs("div",{className:"fidelity-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Fidelity Card"}),a.jsx("div",{className:"card-container",children:a.jsx("div",{className:"digital-card",children:a.jsxs("div",{className:"card-front",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("span",{className:"card-logo",children:"ZeroSei "}),a.jsx("span",{className:"card-tier",children:(n==null?void 0:n.tier)||"Member"})]}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"points-display",children:[a.jsx("span",{className:"points-value",children:o?"...":(n==null?void 0:n.points)||0}),a.jsx("span",{className:"points-label",children:"Punti"})]})}),a.jsxs("div",{className:"card-footer",children:[a.jsxs("span",{className:"card-holder",children:[t.firstName," ",t.lastName]}),a.jsxs("span",{className:"card-id",children:["ID: ",t.phone]})]})]})})}),a.jsxs("div",{className:"rewards-section",children:[a.jsx("h2",{children:"Premi Disponibili"}),u?a.jsx("div",{className:"loading-rewards",children:"Caricamento premi..."}):i.length===0?a.jsx("div",{className:"no-rewards",children:a.jsx("p",{children:"Nessun premio disponibile al momento."})}):a.jsx("div",{className:"rewards-list",children:i.map(m=>a.jsxs("div",{className:"reward-item",children:[a.jsx("div",{className:"reward-icon",children:m.imageUrl||""}),a.jsxs("div",{className:"reward-info",children:[a.jsx("h3",{children:m.name}),a.jsx("p",{children:m.description}),a.jsxs("p",{className:"reward-points-required",children:[m.pointsRequired," Punti"]})]})]},m.id))})]}),a.jsx("div",{className:"info-box mt-xl",children:a.jsx("p",{children:"I punti vengono aggiornati automaticamente dopo ogni acquisto in cassa."})})]}):a.jsx("div",{className:"fidelity-screen fade-in",children:a.jsxs("div",{className:"login-prompt",children:[a.jsx("span",{className:"lock-icon",children:""}),a.jsx("h2",{children:"Accedi per vedere la tua Fidelity Card"}),a.jsx("p",{children:"Crea un profilo per accumulare punti e ricevere premi!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>e("/profile"),children:"Crea Profilo"})]})})}const ZD="zerosei2024";function eO({onLogin:t}){const[e,n]=b.useState(""),[r,i]=b.useState(""),s=jt(),o=c=>{c.preventDefault(),e===ZD?(localStorage.setItem("admin_authenticated","true"),t(),s("/admin/dashboard")):(i("Password non corretta"),n(""))};return a.jsx("div",{className:"admin-login-screen",children:a.jsxs("div",{className:"admin-login-container",children:[a.jsxs("div",{className:"admin-login-header",children:[a.jsx("h1",{children:" ZeroSei Pizza"}),a.jsx("h2",{children:"Pannello Amministratore"})]}),a.jsxs("form",{onSubmit:o,className:"admin-login-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:e,onChange:c=>{n(c.target.value),i("")},placeholder:"Inserisci la password admin",autoFocus:!0})]}),r&&a.jsx("div",{className:"error-message",children:r}),a.jsx("button",{type:"submit",className:"btn-login",children:"Accedi"})]}),a.jsx("button",{className:"btn-back",onClick:()=>s("/"),children:" Torna al sito"})]})})}function tO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(""),[f,m]=b.useState(!1),[g,v]=b.useState({name:"",description:"",price:0,category:"pizze-veraci",image:"/placeholder-pizza.jpg",available:!0});b.useEffect(()=>{T()},[]);const T=async()=>{r(!0);try{const j=await F0();e(j)}catch(j){console.error("Error loading products:",j),alert("Errore nel caricamento dei prodotti")}r(!1)},C=async j=>{j.preventDefault();try{const I={...g,imageUrl:g.image};o?(await Jb(o.id,I),alert("Prodotto aggiornato con successo!")):(await Yb(I),alert("Prodotto creato con successo!")),S(),T()}catch(I){console.error("Error saving product:",I),alert("Errore nel salvataggio del prodotto")}},k=j=>{c(j),v({name:j.name,description:j.description||"",price:j.price,category:j.category,image:j.image||"/placeholder-pizza.jpg",available:j.available}),s(!0)},y=async j=>{if(confirm(`Sei sicuro di voler eliminare "${j.name}"?`))try{await Zb(j.id),alert("Prodotto eliminato con successo!"),T()}catch(I){console.error("Error deleting product:",I),alert("Errore nell'eliminazione del prodotto")}},E=async j=>{var _;const I=(_=j.target.files)==null?void 0:_[0];if(I){m(!0);try{const A=Ap(Up,`products/${Date.now()}_${I.name}`);await Cp(A,I);const R=await Np(A);v(N=>({...N,image:R}))}catch(A){console.error("Error uploading image:",A),alert("Errore durante il caricamento dell'immagine")}finally{m(!1)}}},S=()=>{v({name:"",description:"",price:0,category:"pizze-veraci",image:"/placeholder-pizza.jpg",available:!0}),c(null),s(!1)},x=t.filter(j=>{var I;return j.name.toLowerCase().includes(u.toLowerCase())||((I=j.description)==null?void 0:I.toLowerCase().includes(u.toLowerCase()))}),O=j=>({"pizze-veraci":"Pizze Veraci","pizze-classiche":"Pizze Classiche",proposte:"Le Nostre Proposte",calzoni:"Calzoni",bevande:"Bevande",birre:"Birre"})[j];return n?a.jsx("div",{className:"loading",children:"Caricamento prodotti..."}):a.jsxs("div",{className:"product-management",children:[a.jsxs("div",{className:"pm-header",children:[a.jsx("h2",{children:"Gestione Prodotti"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>s(!i),children:i?" Chiudi":"+ Nuovo Prodotto"})]}),i&&a.jsxs("div",{className:"product-form-container",children:[a.jsx("h3",{children:o?"Modifica Prodotto":"Nuovo Prodotto"}),a.jsxs("form",{onSubmit:C,className:"product-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:g.name,onChange:j=>v({...g,name:j.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Prezzo () *"}),a.jsx("input",{type:"number",step:"0.01",value:g.price,onChange:j=>v({...g,price:parseFloat(j.target.value)}),required:!0})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("textarea",{value:g.description,onChange:j=>v({...g,description:j.target.value}),rows:3})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Categoria *"}),a.jsxs("select",{value:g.category,onChange:j=>v({...g,category:j.target.value}),required:!0,children:[a.jsx("option",{value:"pizze-veraci",children:"Pizze Veraci"}),a.jsx("option",{value:"pizze-classiche",children:"Pizze Classiche"}),a.jsx("option",{value:"proposte",children:"Le Nostre Proposte"}),a.jsx("option",{value:"calzoni",children:"Calzoni"}),a.jsx("option",{value:"bevande",children:"Bevande"}),a.jsx("option",{value:"birre",children:"Birre"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Immagine prodotto"}),a.jsxs("div",{className:"image-upload-container",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:E,disabled:f,className:"file-input"}),f&&a.jsx("span",{className:"upload-status",children:"Caricamento in corso..."}),g.image&&g.image!=="/placeholder-pizza.jpg"&&a.jsx("div",{className:"image-preview",children:a.jsx("img",{src:g.image,alt:"Anteprima",style:{height:"50px",objectFit:"cover",marginTop:"10px",borderRadius:"4px"}})})]}),a.jsx("input",{type:"text",placeholder:"O incolla URL immagine",value:g.image,onChange:j=>v({...g,image:j.target.value}),style:{marginTop:"10px"}})]})]}),a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:g.available,onChange:j=>v({...g,available:j.target.checked})})," ","Disponibile"]})}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:f,children:[o?"Aggiorna":"Crea"," Prodotto"]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:S,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"pm-search",children:[a.jsx("input",{type:"text",placeholder:"Cerca prodotti...",value:u,onChange:j=>d(j.target.value)}),a.jsxs("span",{className:"product-count",children:[x.length," prodotti"]})]}),a.jsxs("div",{className:"products-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Nome"}),a.jsx("th",{children:"Categoria"}),a.jsx("th",{children:"Prezzo"}),a.jsx("th",{children:"Stato"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:x.map(j=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("strong",{children:j.name}),j.description&&a.jsx("div",{className:"product-desc",children:j.description})]}),a.jsx("td",{children:a.jsx("span",{className:"category-badge",children:O(j.category)})}),a.jsxs("td",{className:"price-cell",children:["",j.price.toFixed(2)]}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${j.available?"available":"unavailable"}`,children:j.available?"Disponibile":"Non disponibile"})}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>k(j),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>y(j),title:"Elimina",children:""})]})]},j.id))})]}),x.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun prodotto trovato"})})]})]})}function nO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState({name:"",description:"",icon:"",order:0,imageUrl:""});b.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const C=await B0();e(C)}catch(C){console.error("Error loading categories:",C),alert("Errore nel caricamento delle categorie")}r(!1)},m=async C=>{C.preventDefault();try{o?(await tD(o.id,u),alert("Categoria aggiornata con successo!")):(await eD(u),alert("Categoria creata con successo!")),T(),f()}catch(k){console.error("Error saving category:",k),alert("Errore nel salvataggio della categoria")}},g=C=>{c(C),d({name:C.name,description:C.description||"",icon:C.icon||"",order:C.order,imageUrl:C.imageUrl||""}),s(!0)},v=async C=>{if(confirm(`Sei sicuro di voler eliminare la categoria "${C.name}"?`))try{await nD(C.id),alert("Categoria eliminata con successo!"),f()}catch(k){console.error("Error deleting category:",k),alert("Errore nell'eliminazione della categoria")}},T=()=>{d({name:"",description:"",icon:"",order:0,imageUrl:""}),c(null),s(!1)};return n?a.jsx("div",{className:"loading",children:"Caricamento categorie..."}):a.jsxs("div",{className:"category-management",children:[a.jsxs("div",{className:"cm-header",children:[a.jsx("h2",{children:"Gestione Categorie"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>s(!i),children:i?" Chiudi":"+ Nuova Categoria"})]}),i&&a.jsxs("div",{className:"category-form-container",children:[a.jsx("h3",{children:o?"Modifica Categoria":"Nuova Categoria"}),a.jsxs("form",{onSubmit:m,className:"category-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:u.name,onChange:C=>d({...u,name:C.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Ordine *"}),a.jsx("input",{type:"number",value:u.order,onChange:C=>d({...u,order:parseInt(C.target.value)}),required:!0}),a.jsx("small",{style:{color:"#666",fontSize:"0.85rem"},children:"Ordine di visualizzazione nel menu"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("textarea",{value:u.description,onChange:C=>d({...u,description:C.target.value}),rows:3})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",placeholder:"es. ",value:u.icon,onChange:C=>d({...u,icon:C.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"URL Immagine"}),a.jsx("input",{type:"text",placeholder:"URL dell'immagine della categoria",value:u.imageUrl,onChange:C=>d({...u,imageUrl:C.target.value})})]})]}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[o?"Aggiorna":"Crea"," Categoria"]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:T,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"categories-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Ordine"}),a.jsx("th",{children:"Nome"}),a.jsx("th",{children:"Descrizione"}),a.jsx("th",{children:"Icona"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:t.map(C=>a.jsxs("tr",{children:[a.jsx("td",{className:"order-cell",children:C.order}),a.jsx("td",{children:a.jsx("strong",{children:C.name})}),a.jsx("td",{children:a.jsx("div",{className:"category-desc",children:C.description||"-"})}),a.jsx("td",{className:"icon-cell",children:C.icon||"-"}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>g(C),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>v(C),title:"Elimina",children:""})]})]},C.id))})]}),t.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessuna categoria trovata"})})]})]})}function rO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState({title:"",description:"",imageUrl:"",validFrom:new Date,validTo:new Date(Date.now()+7*24*60*60*1e3),active:!0,showAsPopup:!1});b.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const y=await Fp();e(y)}catch(y){console.error("Error loading promotions:",y),alert("Errore nel caricamento delle promozioni")}r(!1)},m=async y=>{y.preventDefault();try{o?(await cD(o.id,u),alert("Promozione aggiornata con successo!")):(await lD(u),alert("Promozione creata con successo!")),T(),f()}catch(E){console.error("Error saving promotion:",E),alert("Errore nel salvataggio della promozione")}},g=y=>{c(y),d({title:y.title,description:y.description,imageUrl:y.imageUrl||"",validFrom:y.validFrom,validTo:y.validTo,active:y.active,showAsPopup:y.showAsPopup||!1}),s(!0)},v=async y=>{if(confirm(`Sei sicuro di voler eliminare "${y.title}"?`))try{await uD(y.id),alert("Promozione eliminata con successo!"),f()}catch(E){console.error("Error deleting promotion:",E),alert("Errore nell'eliminazione della promozione")}},T=()=>{d({title:"",description:"",imageUrl:"",validFrom:new Date,validTo:new Date(Date.now()+7*24*60*60*1e3),active:!0,showAsPopup:!1}),c(null),s(!1)},C=y=>new Date(y).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"}),k=y=>{const E=new Date(y),S=E.getFullYear(),x=String(E.getMonth()+1).padStart(2,"0"),O=String(E.getDate()).padStart(2,"0");return`${S}-${x}-${O}`};return n?a.jsx("div",{className:"loading",children:"Caricamento promozioni..."}):a.jsxs("div",{className:"promotion-management",children:[a.jsxs("div",{className:"pm-header",children:[a.jsx("h2",{children:"Gestione Promozioni e News"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>s(!i),children:i?" Chiudi":"+ Nuova Promozione"})]}),i&&a.jsxs("div",{className:"promotion-form-container",children:[a.jsx("h3",{children:o?"Modifica Promozione":"Nuova Promozione"}),a.jsxs("form",{onSubmit:m,className:"promotion-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Titolo *"}),a.jsx("input",{type:"text",value:u.title,onChange:y=>d({...u,title:y.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione *"}),a.jsx("textarea",{value:u.description,onChange:y=>d({...u,description:y.target.value}),rows:4,required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"URL Immagine"}),a.jsx("input",{type:"text",placeholder:"URL dell'immagine della promozione",value:u.imageUrl,onChange:y=>d({...u,imageUrl:y.target.value})})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Valida dal *"}),a.jsx("input",{type:"date",value:k(u.validFrom),onChange:y=>d({...u,validFrom:new Date(y.target.value)}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Valida fino al *"}),a.jsx("input",{type:"date",value:k(u.validTo),onChange:y=>d({...u,validTo:new Date(y.target.value)}),required:!0})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:u.active,onChange:y=>d({...u,active:y.target.checked})})," ","Attiva"]})}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:u.showAsPopup,onChange:y=>d({...u,showAsPopup:y.target.checked})})," ","Mostra come Popup"]}),a.jsx("small",{style:{color:"#666",fontSize:"0.85rem",marginTop:"4px"},children:"La promozione apparir come popup all'apertura dell'app"})]})]}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[o?"Aggiorna":"Crea"," Promozione"]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:T,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"promotions-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Titolo"}),a.jsx("th",{children:"Periodo"}),a.jsx("th",{children:"Stato"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:t.map(y=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("strong",{children:y.title}),a.jsx("div",{className:"promotion-desc",children:y.description})]}),a.jsx("td",{children:a.jsxs("div",{className:"date-range",children:[C(y.validFrom)," - ",C(y.validTo)]})}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${y.active?"active":"inactive"}`,children:y.active?"Attiva":"Non attiva"})}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>g(y),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>v(y),title:"Elimina",children:""})]})]},y.id))})]}),t.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessuna promozione trovata"})})]})]})}function Ly(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState("all"),[o,c]=b.useState(null);b.useEffect(()=>{u()},[]);const u=async()=>{r(!0);try{const y=await oD();e(y)}catch(y){console.error("Error loading orders:",y),alert("Errore nel caricamento degli ordini")}r(!1)},d=async(y,E)=>{try{await aD(y,E),e(t.map(S=>S.id===y?{...S,status:E}:S)),o&&o.id===y&&c({...o,status:E})}catch(S){console.error("Error updating order status:",S),alert("Errore nell'aggiornamento dello stato")}},f=y=>{switch(y){case"pending":return"In Attesa";case"confirmed":return"Confermato";case"preparing":return"In Preparazione";case"ready":return"Pronto";case"delivered":return"Consegnato";case"cancelled":return"Annullato";default:return y}},m=y=>{switch(y){case"pending":return"#ff9800";case"confirmed":return"#2196f3";case"preparing":return"#9c27b0";case"ready":return"#009688";case"delivered":return"#4caf50";case"cancelled":return"#f44336";default:return"#9e9e9e"}},g=y=>{switch(y){case"whatsapp":return"";case"phone":return"";case"web":return"";default:return""}},v=i==="all"?t:t.filter(y=>y.status===i),T=new Date;T.setHours(0,0,0,0);const C=t.filter(y=>{const E=new Date(y.createdAt);return E.setHours(0,0,0,0),E.getTime()===T.getTime()}),k={totalToday:C.length,whatsappToday:C.filter(y=>y.source==="whatsapp").length,phoneToday:C.filter(y=>y.source==="phone").length,revenueToday:C.reduce((y,E)=>y+(E.total||0),0)};return n?a.jsx("div",{className:"loading",children:"Caricamento ordini..."}):a.jsxs("div",{className:"order-management",children:[a.jsxs("div",{className:"om-header",children:[a.jsx("h2",{children:"Gestione Ordini"}),a.jsx("button",{className:"btn btn-outline",onClick:u,children:" Aggiorna"})]}),a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Ordini Oggi"}),a.jsx("p",{className:"stat-value",children:k.totalToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"WhatsApp"}),a.jsx("p",{className:"stat-value",children:k.whatsappToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Telefono"}),a.jsx("p",{className:"stat-value",children:k.phoneToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Incasso Oggi"}),a.jsxs("p",{className:"stat-value",children:["",k.revenueToday.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"om-content",children:[a.jsxs("div",{className:"orders-list-container",children:[a.jsx("div",{className:"filters",children:a.jsxs("select",{value:i,onChange:y=>s(y.target.value),className:"status-filter",children:[a.jsx("option",{value:"all",children:"Tutti gli stati"}),a.jsx("option",{value:"pending",children:"In Attesa"}),a.jsx("option",{value:"confirmed",children:"Confermati"}),a.jsx("option",{value:"preparing",children:"In Preparazione"}),a.jsx("option",{value:"ready",children:"Pronti"}),a.jsx("option",{value:"delivered",children:"Consegnati"}),a.jsx("option",{value:"cancelled",children:"Annullati"})]})}),a.jsx("div",{className:"orders-list",children:v.length===0?a.jsx("div",{className:"empty-state",children:"Nessun ordine trovato"}):v.map(y=>a.jsxs("div",{className:`order-card ${(o==null?void 0:o.id)===y.id?"selected":""}`,onClick:()=>c(y),children:[a.jsxs("div",{className:"order-card-header",children:[a.jsx("span",{className:"order-source",title:y.source,children:g(y.source)}),a.jsx("span",{className:"order-date",children:new Date(y.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),a.jsx("span",{className:"order-status-badge",style:{backgroundColor:m(y.status)},children:f(y.status)})]}),a.jsxs("div",{className:"order-card-body",children:[a.jsxs("h4",{children:[y.userProfile.firstName," ",y.userProfile.lastName]}),a.jsxs("p",{className:"order-total",children:["",y.total.toFixed(2)]})]})]},y.id))})]}),o?a.jsxs("div",{className:"order-details-panel",children:[a.jsxs("div",{className:"od-header",children:[a.jsx("h3",{children:"Dettaglio Ordine"}),a.jsx("button",{className:"close-details",onClick:()=>c(null),children:""})]}),a.jsxs("div",{className:"od-content",children:[a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Cliente"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Nome:"})," ",o.userProfile.firstName," ",o.userProfile.lastName]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Telefono:"})," ",o.userProfile.phone]}),o.deliveryAddress&&a.jsxs("p",{children:[a.jsx("strong",{children:"Indirizzo:"})," ",o.deliveryAddress]})]}),a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Prodotti"}),a.jsx("ul",{className:"od-items",children:o.items.map((y,E)=>a.jsxs("li",{children:[a.jsxs("div",{className:"od-item-main",children:[a.jsxs("span",{children:[y.quantity,"x ",y.productName]}),a.jsxs("span",{children:["",(y.price*y.quantity).toFixed(2)]})]}),y.modifications&&y.modifications.length>0&&a.jsx("div",{className:"od-item-mods",children:y.modifications.map(S=>`+ ${S.name}`).join(", ")}),y.notes&&a.jsxs("div",{className:"od-item-notes",children:[" ",y.notes]})]},E))}),a.jsxs("div",{className:"od-total",children:[a.jsx("span",{children:"Totale"}),a.jsxs("span",{children:["",o.total.toFixed(2)]})]})]}),o.notes&&a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Note Ordine"}),a.jsx("p",{children:o.notes})]}),a.jsxs("div",{className:"od-actions",children:[a.jsx("h4",{children:"Aggiorna Stato"}),a.jsxs("div",{className:"status-buttons",children:[a.jsx("button",{className:`btn-status ${o.status==="confirmed"?"active":""}`,onClick:()=>d(o.id,"confirmed"),style:{borderColor:"#2196f3",color:"#2196f3"},children:"Conferma"}),a.jsx("button",{className:`btn-status ${o.status==="preparing"?"active":""}`,onClick:()=>d(o.id,"preparing"),style:{borderColor:"#9c27b0",color:"#9c27b0"},children:"In Prep."}),a.jsx("button",{className:`btn-status ${o.status==="ready"?"active":""}`,onClick:()=>d(o.id,"ready"),style:{borderColor:"#009688",color:"#009688"},children:"Pronto"}),a.jsx("button",{className:`btn-status ${o.status==="delivered"?"active":""}`,onClick:()=>d(o.id,"delivered"),style:{borderColor:"#4caf50",color:"#4caf50"},children:"Consegnato"}),a.jsx("button",{className:`btn-status ${o.status==="cancelled"?"active":""}`,onClick:()=>d(o.id,"cancelled"),style:{borderColor:"#f44336",color:"#f44336"},children:"Annulla"})]})]})]})]}):a.jsx("div",{className:"order-details-placeholder",children:a.jsx("p",{children:"Seleziona un ordine per visualizzare i dettagli"})})]})]})}function iO(){const[t,e]=b.useState(""),[n,r]=b.useState(!1),[i,s]=b.useState(null);b.useEffect(()=>{const u=Wp();u&&e(u)},[]);const o=()=>{K0(t),s({success:!0,message:"Chiave API salvata con successo!"}),setTimeout(()=>s(null),3e3)},c=async()=>{r(!0),s(null);try{const u=await Q0();u.success?s({success:!0,message:" Connessione a Cassa in Cloud riuscita!"}):s({success:!1,message:` Errore: ${u.error}`})}catch(u){s({success:!1,message:` Errore imprevisto: ${u.message}`})}r(!1)};return a.jsxs("div",{className:"cassa-cloud-settings",children:[a.jsx("h2",{children:"Impostazioni Cassa in Cloud"}),a.jsx("p",{className:"description",children:"Configura l'integrazione con Cassa in Cloud per sincronizzare i punti fedelt dei clienti."}),a.jsxs("div",{className:"settings-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"apiKey",children:"Chiave API"}),a.jsx("input",{id:"apiKey",type:"text",className:"input",value:t,onChange:u=>e(u.target.value),placeholder:"Inserisci la chiave API di Cassa in Cloud"}),a.jsx("small",{children:"Puoi trovare la chiave API nelle impostazioni del tuo account Cassa in Cloud."})]}),a.jsxs("div",{className:"button-group",children:[a.jsx("button",{className:"btn btn-primary",onClick:o,disabled:!t,children:" Salva"}),a.jsx("button",{className:"btn btn-secondary",onClick:c,disabled:!t||n,children:n?" Test in corso...":" Testa Connessione"})]}),i&&a.jsx("div",{className:`test-result ${i.success?"success":"error"}`,children:i.message})]}),a.jsxs("div",{className:"info-section",children:[a.jsx("h3",{children:" Come configurare"}),a.jsxs("ol",{children:[a.jsxs("li",{children:["Accedi al tuo account ",a.jsx("strong",{children:"Cassa in Cloud"})]}),a.jsxs("li",{children:["Vai su ",a.jsx("strong",{children:"Impostazioni  API Keys"})]}),a.jsx("li",{children:"Copia la chiave API valida"}),a.jsxs("li",{children:["Incollala nel campo sopra e clicca ",a.jsx("strong",{children:"Salva"})]}),a.jsxs("li",{children:["Clicca ",a.jsx("strong",{children:"Testa Connessione"})," per verificare"]})]})]}),a.jsxs("div",{className:"api-info",children:[a.jsx("h3",{children:" Informazioni API"}),a.jsxs("div",{className:"info-grid",children:[a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"URL Base:"}),a.jsx("code",{children:"https://my.cassanova.com/api"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"Endpoint Fedelt:"}),a.jsx("code",{children:"/fidelitypointsaccounts"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"Autenticazione:"}),a.jsx("span",{children:"OAuth2 (Bearer Token)"})]})]})]})]})}const Fs={colorPrimary:"#E74C3C",colorPrimaryDark:"#C0392B",colorPrimaryLight:"#EC7063",colorSecondary:"#27AE60",colorSecondaryDark:"#229954",colorSecondaryLight:"#58D68D",colorAccent:"#F39C12",colorAccentDark:"#D68910",colorBg:"#FFFFFF",colorBgSecondary:"#F8F9FA",colorBgTertiary:"#ECF0F1",colorText:"#2C3E50",colorTextSecondary:"#7F8C8D",colorTextLight:"#95A5A6",colorBorder:"#E0E0E0",fontSizeBase:"1rem",fontSizeSm:"0.875rem",fontSizeLg:"1.125rem",fontSizeXl:"1.25rem",fontSize2xl:"1.5rem",fontSize3xl:"2rem",fontSize4xl:"2.5rem",spacingSm:"0.5rem",spacingMd:"1rem",spacingLg:"1.5rem",spacingXl:"2rem",spacing2xl:"3rem",radiusSm:"0.25rem",radiusMd:"0.5rem",radiusLg:"1rem",radiusXl:"1.5rem",iconOrders:"",iconProducts:"",iconIngredients:"",iconCategories:"",iconPromotions:"",iconCustomers:"",iconSettings:"",statusBarColor:"#000000",statusBarStyle:"black"};function sO(){const[t,e]=b.useState(Fs),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState("colors");b.useEffect(()=>{u()},[]),b.useEffect(()=>{d(t)},[t]);const u=async()=>{r(!0);try{const v=ue(Y,"config","theme"),T=await un(v);if(T.exists()){const C={...Fs,...T.data()};e(C),d(C)}}catch(v){console.error("Error loading theme:",v)}r(!1)},d=v=>{const T=document.documentElement;T.style.setProperty("--color-primary",v.colorPrimary),T.style.setProperty("--color-primary-dark",v.colorPrimaryDark),T.style.setProperty("--color-primary-light",v.colorPrimaryLight),T.style.setProperty("--color-secondary",v.colorSecondary),T.style.setProperty("--color-secondary-dark",v.colorSecondaryDark),T.style.setProperty("--color-secondary-light",v.colorSecondaryLight),T.style.setProperty("--color-accent",v.colorAccent),T.style.setProperty("--color-accent-dark",v.colorAccentDark),T.style.setProperty("--color-bg",v.colorBg),T.style.setProperty("--color-bg-secondary",v.colorBgSecondary),T.style.setProperty("--color-bg-tertiary",v.colorBgTertiary),T.style.setProperty("--color-text",v.colorText),T.style.setProperty("--color-text-secondary",v.colorTextSecondary),T.style.setProperty("--color-text-light",v.colorTextLight),T.style.setProperty("--color-border",v.colorBorder),T.style.setProperty("--font-size-base",v.fontSizeBase),T.style.setProperty("--font-size-sm",v.fontSizeSm),T.style.setProperty("--font-size-lg",v.fontSizeLg),T.style.setProperty("--font-size-xl",v.fontSizeXl),T.style.setProperty("--font-size-2xl",v.fontSize2xl),T.style.setProperty("--font-size-3xl",v.fontSize3xl),T.style.setProperty("--font-size-4xl",v.fontSize4xl),T.style.setProperty("--spacing-sm",v.spacingSm),T.style.setProperty("--spacing-md",v.spacingMd),T.style.setProperty("--spacing-lg",v.spacingLg),T.style.setProperty("--spacing-xl",v.spacingXl),T.style.setProperty("--spacing-2xl",v.spacing2xl),T.style.setProperty("--radius-sm",v.radiusSm),T.style.setProperty("--radius-md",v.radiusMd),T.style.setProperty("--radius-lg",v.radiusLg),T.style.setProperty("--radius-xl",v.radiusXl)},f=async()=>{s(!0);try{await xr(ue(Y,"config","theme"),{...t,updatedAt:new Date}),alert("Tema salvato con successo! ")}catch(v){console.error("Error saving theme:",v),alert("Errore nel salvataggio del tema")}s(!1)},m=async()=>{if(confirm("Sei sicuro di voler ripristinare il tema predefinito?")){e(Fs),d(Fs);try{await xr(ue(Y,"config","theme"),{...Fs,updatedAt:new Date}),alert("Tema ripristinato! ")}catch(v){console.error("Error resetting theme:",v)}}},g=(v,T)=>{e(C=>({...C,[v]:T}))};return n?a.jsx("div",{className:"loading",children:"Caricamento tema..."}):a.jsxs("div",{className:"theme-customizer",children:[a.jsxs("div",{className:"theme-header",children:[a.jsx("h2",{children:" Personalizzazione Tema"}),a.jsx("p",{className:"theme-description",children:"Personalizza tutti gli aspetti estetici dell'applicazione"})]}),a.jsxs("div",{className:"theme-tabs",children:[a.jsx("button",{className:`theme-tab ${o==="colors"?"active":""}`,onClick:()=>c("colors"),children:" Colori"}),a.jsx("button",{className:`theme-tab ${o==="typography"?"active":""}`,onClick:()=>c("typography"),children:" Tipografia"}),a.jsx("button",{className:`theme-tab ${o==="spacing"?"active":""}`,onClick:()=>c("spacing"),children:" Spaziature"}),a.jsx("button",{className:`theme-tab ${o==="radius"?"active":""}`,onClick:()=>c("radius"),children:" Arrotondamenti"}),a.jsx("button",{className:`theme-tab ${o==="icons"?"active":""}`,onClick:()=>c("icons"),children:" Icone Admin"})]}),a.jsxs("div",{className:"theme-content",children:[o==="colors"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Colori Primari"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Primario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimary,onChange:v=>g("colorPrimary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimary,onChange:v=>g("colorPrimary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Primario Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimaryDark,onChange:v=>g("colorPrimaryDark",v.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimaryDark,onChange:v=>g("colorPrimaryDark",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Primario Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimaryLight,onChange:v=>g("colorPrimaryLight",v.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimaryLight,onChange:v=>g("colorPrimaryLight",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Secondari"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondary,onChange:v=>g("colorSecondary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondary,onChange:v=>g("colorSecondary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Secondario Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondaryDark,onChange:v=>g("colorSecondaryDark",v.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondaryDark,onChange:v=>g("colorSecondaryDark",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Secondario Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondaryLight,onChange:v=>g("colorSecondaryLight",v.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondaryLight,onChange:v=>g("colorSecondaryLight",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Accent"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Accent"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorAccent,onChange:v=>g("colorAccent",v.target.value)}),a.jsx("input",{type:"text",value:t.colorAccent,onChange:v=>g("colorAccent",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Accent Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorAccentDark,onChange:v=>g("colorAccentDark",v.target.value)}),a.jsx("input",{type:"text",value:t.colorAccentDark,onChange:v=>g("colorAccentDark",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Sfondo"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Principale"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBg,onChange:v=>g("colorBg",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBg,onChange:v=>g("colorBg",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBgSecondary,onChange:v=>g("colorBgSecondary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBgSecondary,onChange:v=>g("colorBgSecondary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Terziario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBgTertiary,onChange:v=>g("colorBgTertiary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBgTertiary,onChange:v=>g("colorBgTertiary",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Testo"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Principale"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorText,onChange:v=>g("colorText",v.target.value)}),a.jsx("input",{type:"text",value:t.colorText,onChange:v=>g("colorText",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorTextSecondary,onChange:v=>g("colorTextSecondary",v.target.value)}),a.jsx("input",{type:"text",value:t.colorTextSecondary,onChange:v=>g("colorTextSecondary",v.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorTextLight,onChange:v=>g("colorTextLight",v.target.value)}),a.jsx("input",{type:"text",value:t.colorTextLight,onChange:v=>g("colorTextLight",v.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Altri Colori"}),a.jsx("div",{className:"color-grid",children:a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Bordi"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBorder,onChange:v=>g("colorBorder",v.target.value)}),a.jsx("input",{type:"text",value:t.colorBorder,onChange:v=>g("colorBorder",v.target.value),className:"color-text-input"})]})]})}),a.jsx("h3",{children:" Status Bar Mobile"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Status Bar"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.statusBarColor||"#000000",onChange:v=>g("statusBarColor",v.target.value)}),a.jsx("input",{type:"text",value:t.statusBarColor||"#000000",onChange:v=>g("statusBarColor",v.target.value),className:"color-text-input"})]}),a.jsx("p",{className:"hint",children:" Colore della barra superiore del telefono"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Stile Status Bar iOS"}),a.jsxs("select",{value:t.statusBarStyle||"black",onChange:v=>g("statusBarStyle",v.target.value),className:"select-input",children:[a.jsx("option",{value:"default",children:"Default (bianco)"}),a.jsx("option",{value:"black",children:"Black (nero)"}),a.jsx("option",{value:"black-translucent",children:"Black Translucent"})]}),a.jsx("p",{className:"hint",children:" Stile per iPhone/iPad"})]})]})]}),o==="typography"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Dimensioni Font"}),a.jsxs("div",{className:"typography-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Base (16px default)"}),a.jsx("input",{type:"text",value:t.fontSizeBase,onChange:v=>g("fontSizeBase",v.target.value),placeholder:"1rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Small"}),a.jsx("input",{type:"text",value:t.fontSizeSm,onChange:v=>g("fontSizeSm",v.target.value),placeholder:"0.875rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Large"}),a.jsx("input",{type:"text",value:t.fontSizeLg,onChange:v=>g("fontSizeLg",v.target.value),placeholder:"1.125rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font XL"}),a.jsx("input",{type:"text",value:t.fontSizeXl,onChange:v=>g("fontSizeXl",v.target.value),placeholder:"1.25rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 2XL"}),a.jsx("input",{type:"text",value:t.fontSize2xl,onChange:v=>g("fontSize2xl",v.target.value),placeholder:"1.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 3XL"}),a.jsx("input",{type:"text",value:t.fontSize3xl,onChange:v=>g("fontSize3xl",v.target.value),placeholder:"2rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 4XL"}),a.jsx("input",{type:"text",value:t.fontSize4xl,onChange:v=>g("fontSize4xl",v.target.value),placeholder:"2.5rem"})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 1rem, 1.5rem) o px (es: 16px, 24px)"})]}),o==="spacing"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Spaziature"}),a.jsxs("div",{className:"spacing-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Small"}),a.jsx("input",{type:"text",value:t.spacingSm,onChange:v=>g("spacingSm",v.target.value),placeholder:"0.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Medium"}),a.jsx("input",{type:"text",value:t.spacingMd,onChange:v=>g("spacingMd",v.target.value),placeholder:"1rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Large"}),a.jsx("input",{type:"text",value:t.spacingLg,onChange:v=>g("spacingLg",v.target.value),placeholder:"1.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing XL"}),a.jsx("input",{type:"text",value:t.spacingXl,onChange:v=>g("spacingXl",v.target.value),placeholder:"2rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing 2XL"}),a.jsx("input",{type:"text",value:t.spacing2xl,onChange:v=>g("spacing2xl",v.target.value),placeholder:"3rem"})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 1rem, 2rem) o px (es: 16px, 32px)"})]}),o==="radius"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Arrotondamenti Bordi"}),a.jsxs("div",{className:"radius-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Small"}),a.jsx("input",{type:"text",value:t.radiusSm,onChange:v=>g("radiusSm",v.target.value),placeholder:"0.25rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusSm}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Medium"}),a.jsx("input",{type:"text",value:t.radiusMd,onChange:v=>g("radiusMd",v.target.value),placeholder:"0.5rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusMd}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Large"}),a.jsx("input",{type:"text",value:t.radiusLg,onChange:v=>g("radiusLg",v.target.value),placeholder:"1rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusLg}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius XL"}),a.jsx("input",{type:"text",value:t.radiusXl,onChange:v=>g("radiusXl",v.target.value),placeholder:"1.5rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusXl}})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 0.5rem, 1rem) o px (es: 8px, 16px)"})]}),o==="icons"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Icone Sidebar Admin"}),a.jsxs("div",{className:"icons-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Ordini"}),a.jsx("input",{type:"text",value:t.iconOrders,onChange:v=>g("iconOrders",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconOrders})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Prodotti"}),a.jsx("input",{type:"text",value:t.iconProducts,onChange:v=>g("iconProducts",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconProducts})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Ingredienti"}),a.jsx("input",{type:"text",value:t.iconIngredients,onChange:v=>g("iconIngredients",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconIngredients})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Categorie"}),a.jsx("input",{type:"text",value:t.iconCategories,onChange:v=>g("iconCategories",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconCategories})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Promozioni"}),a.jsx("input",{type:"text",value:t.iconPromotions,onChange:v=>g("iconPromotions",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconPromotions})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Clienti"}),a.jsx("input",{type:"text",value:t.iconCustomers,onChange:v=>g("iconCustomers",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconCustomers})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Impostazioni"}),a.jsx("input",{type:"text",value:t.iconSettings,onChange:v=>g("iconSettings",v.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconSettings})]})]}),a.jsx("p",{className:"hint",children:" Usa emoji o caratteri speciali (max 2 caratteri)"})]})]}),a.jsxs("div",{className:"theme-actions",children:[a.jsx("button",{className:"btn-reset",onClick:m,disabled:i,children:" Ripristina Default"}),a.jsx("button",{className:"btn-save",onClick:f,disabled:i,children:i?" Salvataggio...":" Salva Modifiche"})]})]})}const zs={heroTitle:"Benvenuto da ZeroSei ",heroSubtitle:"La migliore pizza napoletana d'asporto della citt",featuresTitle:"Perch scegliere ZeroSei?",features:[{id:"feature1",icon:"",title:"Forno a Legna",description:"Pizza cotta nel tradizionale forno a legna"},{id:"feature2",icon:"",title:"Ingredienti Freschi",description:"Solo ingredienti di prima qualit"},{id:"feature3",icon:"",title:"Servizio Veloce",description:"Pronta in 15-20 minuti"},{id:"feature4",icon:"",title:"Ricetta Napoletana",description:"Autentica tradizione partenopea"}],buttons:[{id:"menu",icon:"",title:"Men",description:"Scopri le nostre pizze",color:"#E74C3C",visible:!0,order:1},{id:"phone",icon:"",title:"Chiama Ora",description:"Contattaci telefonicamente",color:"#27AE60",visible:!0,order:2},{id:"whatsapp",icon:"",title:"Ordina su WhatsApp",description:"Ordine rapido e facile",color:"#25D366",visible:!0,order:3},{id:"fidelity",icon:"",title:"Fidelity Card",description:"I tuoi punti fedelt",color:"#F39C12",visible:!0,order:4},{id:"news",icon:"",title:"Novit e Offerte",description:"Scopri le ultime promozioni",color:"#9B59B6",visible:!0,order:5}]};function oO(){const[t,e]=b.useState(zs),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null);b.useEffect(()=>{u()},[]);const u=async()=>{var x;r(!0);try{const O=ue(Y,"config","home"),j=await un(O);if(j.exists()){const I=j.data(),_=new Set(((x=I.buttons)==null?void 0:x.map(N=>N.id))||[]),A=zs.buttons.filter(N=>!_.has(N.id)),R=[...I.buttons||[],...A];e({...zs,...I,buttons:R})}}catch(O){console.error("Error loading home config:",O)}r(!1)},d=async()=>{s(!0);try{const x=t.buttons.map(O=>{const j={...O};return Object.keys(j).forEach(I=>{j[I]===void 0&&delete j[I]}),j});await xr(ue(Y,"config","home"),{heroTitle:t.heroTitle,heroSubtitle:t.heroSubtitle,featuresTitle:t.featuresTitle,features:t.features,buttons:x,updatedAt:new Date}),alert(" Modifiche salvate con successo!")}catch(x){console.error("Error saving config:",x),alert(" Errore nel salvataggio")}s(!1)},f=async()=>{if(confirm("Sei sicuro di voler ripristinare le impostazioni predefinite?")){e(zs);try{await xr(ue(Y,"config","home"),{...zs,updatedAt:new Date}),alert(" Impostazioni ripristinate!")}catch(x){console.error("Error resetting:",x)}}},m=x=>{e(O=>({...O,heroTitle:x}))},g=x=>{e(O=>({...O,heroSubtitle:x}))},v=x=>{e(O=>({...O,featuresTitle:x}))},T=(x,O,j)=>{e(I=>({...I,features:(I.features||[]).map(_=>_.id===x?{..._,[O]:j}:_)}))},C=(x,O,j)=>{e(I=>({...I,buttons:I.buttons.map(_=>_.id===x?{..._,[O]:j}:_)}))},k=x=>{e(O=>({...O,buttons:O.buttons.map(j=>j.id===x?{...j,visible:!j.visible}:j)}))},y=(x,O)=>{const j=[...t.buttons],I=j.findIndex(_=>_.id===x);O==="up"&&I>0?[j[I],j[I-1]]=[j[I-1],j[I]]:O==="down"&&I<j.length-1&&([j[I],j[I+1]]=[j[I+1],j[I]]),j.forEach((_,A)=>{_.order=A+1}),e(_=>({..._,buttons:j}))},E=async(x,O)=>{var I;const j=(I=O.target.files)==null?void 0:I[0];if(j){c(x);try{const _=Ap(Up,`home-buttons/${x}_${Date.now()}_${j.name}`);await Cp(_,j);const A=await Np(_);C(x,"imageUrl",A),alert(" Immagine caricata con successo!")}catch(_){console.error("Error uploading image:",_),alert(" Errore nel caricamento dell'immagine")}c(null)}},S=x=>{confirm("Vuoi rimuovere l'immagine e tornare all'icona emoji?")&&C(x,"imageUrl",void 0)};return n?a.jsx("div",{className:"loading",children:"Caricamento..."}):a.jsxs("div",{className:"home-customizer",children:[a.jsxs("div",{className:"customizer-header",children:[a.jsx("h2",{children:" Personalizza Pagina Home"}),a.jsx("p",{className:"customizer-description",children:"Modifica testi, colori e visibilit dei bottoni della home page"})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:" Testi Principali"}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo Principale"}),a.jsx("input",{type:"text",value:t.heroTitle,onChange:x=>m(x.target.value),placeholder:"Benvenuto da ZeroSei "})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Sottotitolo"}),a.jsx("input",{type:"text",value:t.heroSubtitle,onChange:x=>g(x.target.value),placeholder:"La migliore pizza napoletana..."})]})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:" Bottoni Home"}),a.jsx("p",{className:"section-hint",children:"Personalizza i bottoni della home page. Puoi modificare testi, colori, icone e decidere quali mostrare."}),a.jsx("div",{className:"buttons-list",children:t.buttons.map((x,O)=>a.jsxs("div",{className:`button-card ${x.visible?"":"disabled"}`,children:[a.jsxs("div",{className:"button-card-header",children:[a.jsxs("div",{className:"button-preview",style:{backgroundColor:x.color},children:[x.imageUrl?a.jsx("img",{src:x.imageUrl,alt:x.title,className:"preview-image"}):a.jsx("span",{className:"preview-icon",children:x.icon}),a.jsxs("div",{className:"preview-text",children:[a.jsx("strong",{children:x.title}),a.jsx("small",{children:x.description})]})]}),a.jsxs("div",{className:"button-controls",children:[a.jsx("button",{className:"control-btn",onClick:()=>y(x.id,"up"),disabled:O===0,title:"Sposta su",children:""}),a.jsx("button",{className:"control-btn",onClick:()=>y(x.id,"down"),disabled:O===t.buttons.length-1,title:"Sposta gi",children:""}),a.jsx("button",{className:`control-btn ${x.visible?"visible":"hidden"}`,onClick:()=>k(x.id),title:x.visible?"Nascondi":"Mostra",children:x.visible?"":""})]})]}),a.jsxs("div",{className:"button-card-body",children:[a.jsxs("div",{className:"input-row",children:[a.jsxs("div",{className:"input-group small",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",value:x.icon,onChange:j=>C(x.id,"icon",j.target.value),maxLength:2})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo"}),a.jsx("input",{type:"text",value:x.title,onChange:j=>C(x.id,"title",j.target.value)})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:x.description,onChange:j=>C(x.id,"description",j.target.value)})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Immagine Personalizzata"}),x.imageUrl?a.jsxs("div",{className:"image-preview-container",children:[a.jsx("img",{src:x.imageUrl,alt:x.title,className:"uploaded-image-preview"}),a.jsx("button",{type:"button",className:"btn-remove-image",onClick:()=>S(x.id),children:" Rimuovi Immagine"})]}):a.jsxs("label",{className:"upload-image-btn",children:[o===x.id?" Caricamento...":" Carica Immagine",a.jsx("input",{type:"file",accept:"image/*",onChange:j=>E(x.id,j),disabled:o===x.id,hidden:!0})]}),a.jsx("small",{className:"hint-text",children:x.imageUrl?"L'immagine sostituisce l'icona emoji":"Carica un'immagine per sostituire l'emoji"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Colore"}),a.jsxs("div",{className:"color-picker-group",children:[a.jsx("input",{type:"color",value:x.color,onChange:j=>C(x.id,"color",j.target.value)}),a.jsx("input",{type:"text",value:x.color,onChange:j=>C(x.id,"color",j.target.value),className:"color-text"}),a.jsxs("div",{className:"color-presets",children:[a.jsx("button",{className:"preset-color",style:{backgroundColor:"#E74C3C"},onClick:()=>C(x.id,"color","#E74C3C"),title:"Rosso"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#27AE60"},onClick:()=>C(x.id,"color","#27AE60"),title:"Verde"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#25D366"},onClick:()=>C(x.id,"color","#25D366"),title:"WhatsApp"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#F39C12"},onClick:()=>C(x.id,"color","#F39C12"),title:"Arancione"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#3498DB"},onClick:()=>C(x.id,"color","#3498DB"),title:"Blu"})]})]})]})]})]},x.id))})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:' Sezione "Perch scegliere ZeroSei"'}),a.jsx("p",{className:"section-hint",children:"Personalizza il titolo e le 4 card che mostrano i punti di forza della pizzeria."}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo Sezione"}),a.jsx("input",{type:"text",value:t.featuresTitle||"",onChange:x=>v(x.target.value),placeholder:"Perch scegliere ZeroSei?"})]}),a.jsx("div",{className:"features-list",children:(t.features||[]).map(x=>a.jsxs("div",{className:"feature-card-edit",children:[a.jsxs("div",{className:"input-row",children:[a.jsxs("div",{className:"input-group small",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",value:x.icon,onChange:O=>T(x.id,"icon",O.target.value),maxLength:2})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo"}),a.jsx("input",{type:"text",value:x.title,onChange:O=>T(x.id,"title",O.target.value)})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:x.description,onChange:O=>T(x.id,"description",O.target.value)})]})]},x.id))})]}),a.jsxs("div",{className:"customizer-actions",children:[a.jsx("button",{className:"btn-reset",onClick:f,disabled:i,children:" Ripristina Default"}),a.jsx("button",{className:"btn-save",onClick:d,disabled:i,children:i?" Salvataggio...":" Salva Modifiche"})]})]})}function aO(){const[t,e]=b.useState("general"),[n,r]=b.useState(""),[i,s]=b.useState(60),[o,c]=b.useState(!1),[u,d]=b.useState(!0);b.useEffect(()=>{m()},[]),b.useEffect(()=>{n&&f(n)},[n]);const f=C=>{let k=document.querySelector("link[rel='icon']");k||(k=document.createElement("link"),k.rel="icon",document.head.appendChild(k)),k.href=C;let y=document.querySelector("link[rel='apple-touch-icon']");y||(y=document.createElement("link"),y.rel="apple-touch-icon",document.head.appendChild(y)),y.href=C},m=async()=>{d(!0);try{const C=ue(Y,"config","general"),k=await un(C);k.exists()&&(r(k.data().logoUrl||""),s(k.data().logoSize||60))}catch(C){console.error("Error loading settings:",C)}d(!1)},g=async C=>{var y;const k=(y=C.target.files)==null?void 0:y[0];if(k){c(!0);try{const E=Ap(Up,`config/logo_${Date.now()}_${k.name}`);await Cp(E,k);const S=await Np(E);r(S),f(S),await v(S,i)}catch(E){console.error("Error uploading image:",E),alert("Errore durante il caricamento dell'immagine")}c(!1)}},v=async(C,k)=>{try{await xr(ue(Y,"config","general"),{logoUrl:C,logoSize:k,updatedAt:new Date}),alert(" Impostazioni salvate!")}catch(y){console.error("Error saving settings:",y),alert(" Errore nel salvataggio")}},T=async C=>{s(C),n&&await v(n,C)};return u?a.jsx("div",{className:"settings-container",children:a.jsx("div",{className:"loading",children:"Caricamento..."})}):a.jsxs("div",{className:"settings-container",children:[a.jsx("h2",{className:"settings-title",children:" Impostazioni"}),a.jsxs("div",{className:"settings-tabs",children:[a.jsx("button",{className:`settings-tab ${t==="general"?"active":""}`,onClick:()=>e("general"),children:" Generale"}),a.jsx("button",{className:`settings-tab ${t==="home"?"active":""}`,onClick:()=>e("home"),children:" Pagina Home"}),a.jsx("button",{className:`settings-tab ${t==="theme"?"active":""}`,onClick:()=>e("theme"),children:" Tema Globale"})]}),a.jsxs("div",{className:"settings-tab-content",children:[t==="general"&&a.jsxs("div",{className:"tab-panel",children:[a.jsxs("div",{className:"settings-section",children:[a.jsx("h3",{children:" Logo Pizzeria"}),a.jsxs("div",{className:"logo-upload-container",children:[n&&a.jsx("div",{className:"logo-preview",children:a.jsx("img",{src:n,alt:"Logo",style:{height:`${i}px`}})}),a.jsxs("label",{className:"upload-button",children:[o?" Caricamento...":" Carica Logo",a.jsx("input",{type:"file",accept:"image/*",onChange:g,disabled:o,hidden:!0})]})]}),n&&a.jsxs("div",{className:"logo-size-control",children:[a.jsxs("label",{children:["Dimensione Logo: ",i,"px"]}),a.jsx("input",{type:"range",min:"30",max:"150",value:i,onChange:C=>T(Number(C.target.value))})]})]}),a.jsx(iO,{})]}),t==="home"&&a.jsx("div",{className:"tab-panel",children:a.jsx(oO,{})}),t==="theme"&&a.jsx("div",{className:"tab-panel",children:a.jsx(sO,{})})]})]})}function lO(){const[t,e]=b.useState([]),[n,r]=b.useState(null),[i,s]=b.useState(!1),[o,c]=b.useState(!0),[u,d]=b.useState({name:"",price:0,type:"add",available:!0,category:"Altro"});b.useEffect(()=>{f()},[]);const f=async()=>{c(!0);const y=await W0();e(y),c(!1)},m=y=>{r(y),d(y),s(!1)},g=()=>{s(!0),r(null),d({id:`m${Date.now()}`,name:"",price:0,type:"add",available:!0,category:"Altro"})},v=async()=>{if(!u.name||u.price===void 0){alert("Compila tutti i campi obbligatori");return}const y={id:u.id||`m${Date.now()}`,name:u.name,price:u.price,type:u.type||"add",available:u.available??!0,category:u.category||"Altro"};try{await ED(y),await f(),alert("Ingrediente salvato con successo!"),C()}catch(E){console.error("Error saving modification:",E),alert("Errore nel salvare l'ingrediente")}},T=async y=>{if(confirm("Sei sicuro di voler eliminare questo ingrediente?"))try{await TD(y),await f(),alert("Ingrediente eliminato con successo!")}catch(E){console.error("Error deleting modification:",E),alert("Errore nell'eliminare l'ingrediente")}},C=()=>{r(null),s(!1),d({name:"",price:0,type:"add",available:!0,category:"Altro"})},k=async y=>{const E=t.find(S=>S.id===y);if(E)try{await xD(y,!E.available),await f()}catch(S){console.error("Error toggling availability:",S),alert("Errore nell'aggiornare la disponibilit")}};return o?a.jsx("div",{className:"modification-management",children:a.jsx("p",{children:"Caricamento..."})}):a.jsxs("div",{className:"modification-management",children:[a.jsxs("div",{className:"management-header",children:[a.jsx("h2",{children:"Gestione Ingredienti Extra"}),a.jsx("button",{className:"btn btn-primary",onClick:g,children:"+ Aggiungi Ingrediente"})]}),(i||n)&&a.jsxs("div",{className:"modification-form",children:[a.jsx("h3",{children:i?"Nuovo Ingrediente":"Modifica Ingrediente"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:u.name,onChange:y=>d({...u,name:y.target.value}),placeholder:"Es: Mozzarella di Bufala"})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Prezzo () *"}),a.jsx("input",{type:"number",step:"0.50",min:"0",value:u.price,onChange:y=>d({...u,price:parseFloat(y.target.value)})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Categoria *"}),a.jsxs("select",{value:u.category,onChange:y=>d({...u,category:y.target.value}),children:[a.jsx("option",{value:"Formaggi",children:"Formaggi"}),a.jsx("option",{value:"Salumi",children:"Salumi"}),a.jsx("option",{value:"Verdure",children:"Verdure"}),a.jsx("option",{value:"Altro",children:"Altro"})]})]})]}),a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:u.available,onChange:y=>d({...u,available:y.target.checked})}),"Disponibile"]})}),a.jsxs("div",{className:"form-actions",children:[a.jsx("button",{className:"btn btn-secondary",onClick:C,children:"Annulla"}),a.jsx("button",{className:"btn btn-primary",onClick:v,children:"Salva"})]})]}),a.jsx("div",{className:"modifications-list",children:["Formaggi","Salumi","Verdure","Altro"].map(y=>{const E=t.filter(S=>S.category===y);return E.length===0?null:a.jsxs("div",{className:"category-section",children:[a.jsx("h3",{children:y}),a.jsx("div",{className:"modifications-grid",children:E.map(S=>a.jsxs("div",{className:`modification-card ${S.available?"":"unavailable"}`,children:[a.jsxs("div",{className:"mod-info",children:[a.jsx("h4",{children:S.name}),a.jsxs("p",{className:"mod-price",children:["",S.price.toFixed(2)]}),a.jsx("span",{className:`availability-badge ${S.available?"available":"unavailable"}`,children:S.available?"Disponibile":"Non disponibile"})]}),a.jsxs("div",{className:"mod-actions",children:[a.jsx("button",{className:"btn-icon",onClick:()=>k(S.id),title:S.available?"Disabilita":"Abilita",children:S.available?"":""}),a.jsx("button",{className:"btn-icon",onClick:()=>m(S),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon delete",onClick:()=>T(S.id),title:"Elimina",children:""})]})]},S.id))})]},y)})})]})}function cO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState("");b.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await sD();e(d)}catch(d){console.error("Error loading customers:",d),alert("Errore nel caricamento dei clienti")}finally{r(!1)}},c=t.filter(d=>{var C,k,y;const f=i.toLowerCase(),m=((C=d.firstName)==null?void 0:C.toLowerCase())||"",g=((k=d.lastName)==null?void 0:k.toLowerCase())||"",v=d.phone||"",T=((y=d.email)==null?void 0:y.toLowerCase())||"";return m.includes(f)||g.includes(f)||v.includes(i)||T.includes(f)}),u=t.reduce((d,f)=>d+(f.loyaltyPoints||0),0);return n?a.jsx("div",{className:"customer-management",children:a.jsxs("div",{className:"loading-state",children:[a.jsx("span",{className:"loading-spinner",children:""}),a.jsx("p",{children:"Caricamento clienti..."})]})}):a.jsxs("div",{className:"customer-management fade-in",children:[a.jsxs("div",{className:"customer-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("h2",{children:"Gestione Clienti"}),a.jsx("button",{onClick:o,className:"btn-icon",title:"Ricarica lista",children:""})]}),a.jsxs("div",{className:"customer-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-value",children:t.length}),a.jsx("span",{className:"stat-label",children:"Clienti Totali"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-value",children:u}),a.jsx("span",{className:"stat-label",children:"Punti Emessi"})]})]})]}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Cerca per nome, telefono o email...",value:i,onChange:d=>s(d.target.value),className:"search-input"})}),a.jsx("div",{className:"customers-table-container",children:c.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun cliente trovato."})}):a.jsxs("table",{className:"customers-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Cliente"}),a.jsx("th",{children:"Contatti"}),a.jsx("th",{children:"Punti Fedelt"}),a.jsx("th",{children:"Registrato il"}),a.jsx("th",{children:"Ultimo Accesso"})]})}),a.jsx("tbody",{children:c.map(d=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"customer-name",children:[d.firstName," ",d.lastName]})}),a.jsxs("td",{children:[a.jsxs("div",{className:"customer-phone",children:[" ",d.phone]}),a.jsxs("div",{className:"customer-email",children:[" ",d.email]})]}),a.jsx("td",{children:a.jsxs("span",{className:"loyalty-points",children:[" ",d.loyaltyPoints||0]})}),a.jsx("td",{children:a.jsx("span",{className:"registration-date",children:d.createdAt?new Date(d.createdAt).toLocaleDateString("it-IT"):"-"})}),a.jsx("td",{children:a.jsx("span",{className:"registration-date",children:d.lastAccess?new Date(d.lastAccess).toLocaleDateString("it-IT")+" "+new Date(d.lastAccess).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}):"-"})})]},d.id))})]})})]})}const Qa=[{id:"reward1",name:"Bibita in omaggio",description:"Una bibita a scelta",pointsRequired:100,imageUrl:"",available:!0},{id:"reward2",name:"Pizza Margherita",description:"Pizza Margherita omaggio",pointsRequired:200,imageUrl:"",available:!0},{id:"reward3",name:"Dolce a scelta",description:"Un dolce della casa",pointsRequired:150,imageUrl:"",available:!0}];function uO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState({name:"",description:"",pointsRequired:100,imageUrl:""});b.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const x=ue(Y,"config","rewards"),O=await un(x);if(O.exists()){const j=O.data();e(j.rewards||Qa)}else e(Qa),await m(Qa)}catch(x){console.error("Error loading rewards:",x),e(Qa)}r(!1)},m=async x=>{s(!0);try{await xr(ue(Y,"config","rewards"),{rewards:x,updatedAt:new Date}),e(x),alert(" Premi salvati con successo!")}catch(O){console.error("Error saving rewards:",O),alert(" Errore nel salvataggio")}s(!1)},g=()=>{if(!u.name||u.pointsRequired<=0){alert("Inserisci nome e punti validi");return}const x={id:`reward_${Date.now()}`,name:u.name,description:u.description,pointsRequired:u.pointsRequired,imageUrl:u.imageUrl,available:!0};m([...t,x]),S()},v=()=>{if(!o||!u.name||u.pointsRequired<=0){alert("Inserisci dati validi");return}const x=t.map(O=>O.id===o?{...O,...u}:O);m(x),S()},T=x=>{c(x.id),d({name:x.name,description:x.description,pointsRequired:x.pointsRequired,imageUrl:x.imageUrl||""})},C=x=>{if(confirm("Sei sicuro di voler eliminare questo premio?")){const O=t.filter(j=>j.id!==x);m(O)}},k=x=>{const O=t.map(j=>j.id===x?{...j,available:!j.available}:j);m(O)},y=x=>{if(x===0)return;const O=[...t];[O[x],O[x-1]]=[O[x-1],O[x]],m(O)},E=x=>{if(x===t.length-1)return;const O=[...t];[O[x],O[x+1]]=[O[x+1],O[x]],m(O)},S=()=>{c(null),d({name:"",description:"",pointsRequired:100,imageUrl:""})};return n?a.jsx("div",{className:"rewards-management",children:a.jsx("div",{className:"loading",children:"Caricamento..."})}):a.jsxs("div",{className:"rewards-management",children:[a.jsxs("div",{className:"rewards-header",children:[a.jsx("h2",{children:" Gestione Premi Fidelity"}),a.jsx("p",{className:"rewards-description",children:"Configura i premi che i clienti possono visualizzare nella loro Fidelity Card"})]}),a.jsxs("div",{className:"rewards-form",children:[a.jsx("h3",{children:o?"Modifica Premio":"Nuovo Premio"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Icona (Emoji)"}),a.jsx("input",{type:"text",value:u.imageUrl,onChange:x=>d({...u,imageUrl:x.target.value}),placeholder:"",maxLength:2})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome Premio *"}),a.jsx("input",{type:"text",value:u.name,onChange:x=>d({...u,name:x.target.value}),placeholder:"Es: Bibita in omaggio"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Punti Richiesti *"}),a.jsx("input",{type:"number",value:u.pointsRequired,onChange:x=>d({...u,pointsRequired:Number(x.target.value)}),min:"1"})]}),a.jsxs("div",{className:"form-group full-width",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:u.description,onChange:x=>d({...u,description:x.target.value}),placeholder:"Descrizione breve del premio"})]})]}),a.jsx("div",{className:"form-actions",children:o?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:v,className:"btn btn-primary",disabled:i,children:" Aggiorna"}),a.jsx("button",{onClick:S,className:"btn btn-outline",children:" Annulla"})]}):a.jsx("button",{onClick:g,className:"btn btn-primary",disabled:i,children:" Aggiungi Premio"})})]}),a.jsxs("div",{className:"rewards-list",children:[a.jsxs("h3",{children:["Premi Configurati (",t.length,")"]}),t.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun premio configurato. Aggiungi il primo premio!"})}):a.jsx("div",{className:"rewards-grid",children:t.map((x,O)=>a.jsxs("div",{className:`reward-card ${x.available?"":"inactive"}`,children:[a.jsx("div",{className:"reward-icon-large",children:x.imageUrl}),a.jsxs("div",{className:"reward-content",children:[a.jsx("h4",{children:x.name}),a.jsx("p",{className:"reward-desc",children:x.description}),a.jsxs("p",{className:"reward-points",children:[x.pointsRequired," Punti"]}),a.jsx("span",{className:`reward-status ${x.available?"active":"inactive"}`,children:x.available?" Attivo":" Disattivato"})]}),a.jsxs("div",{className:"reward-actions",children:[a.jsx("button",{onClick:()=>y(O),disabled:O===0,className:"btn-icon",title:"Sposta su",children:""}),a.jsx("button",{onClick:()=>E(O),disabled:O===t.length-1,className:"btn-icon",title:"Sposta gi",children:""}),a.jsx("button",{onClick:()=>k(x.id),className:"btn-icon",title:x.available?"Disattiva":"Attiva",children:x.available?"":""}),a.jsx("button",{onClick:()=>T(x),className:"btn-icon",title:"Modifica",children:""}),a.jsx("button",{onClick:()=>C(x.id),className:"btn-icon btn-danger",title:"Elimina",children:""})]})]},x.id))})]})]})}function dO(){const[t,e]=b.useState(""),[n,r]=b.useState(!1),[i,s]=b.useState(null),o=async()=>{var u;if(!t.trim()){s({type:"error",text:" Inserisci un codice"});return}r(!0),s(null);try{const d=t.trim().toUpperCase(),f=at(Y,"GeneratedCoupons"),m=ui(f,rs("code","==",d)),g=await dn(m);if(g.empty){s({type:"error",text:" Codice Inesistente",details:`Il codice "${d}" non  stato trovato nel sistema.`}),r(!1);return}const v=g.docs[0],T=v.data();if(T.status==="redeemed"){const C=(u=T.redeemedAt)==null?void 0:u.toDate(),k=C?C.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Data sconosciuta";s({type:"warning",text:" ATTENZIONE: Codice gi utilizzato in precedenza!",details:`Questo codice  stato gi riscattato il ${k}`}),r(!1);return}await fs(ue(Y,"GeneratedCoupons",v.id),{status:"redeemed",redeemedAt:qT()}),s({type:"success",text:" CODICE VALIDO!",details:`Sconto Autorizzato per: ${T.offerTitle}`}),setTimeout(()=>{e(""),s(null)},3e3)}catch(d){console.error("Error validating coupon:",d),s({type:"error",text:" Errore nella validazione",details:"Si  verificato un errore. Riprova."})}r(!1)},c=u=>{u.key==="Enter"&&o()};return a.jsxs("div",{className:"coupon-validation",children:[a.jsxs("div",{className:"validation-header",children:[a.jsx("h2",{children:" Convalida Coupon"}),a.jsx("p",{className:"header-description",children:"Inserisci il codice cliente per verificare e convalidare lo sconto"})]}),a.jsxs("div",{className:"validation-form",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"coupon-code",children:"Codice Cliente"}),a.jsx("input",{id:"coupon-code",type:"text",value:t,onChange:u=>e(u.target.value),onKeyPress:c,placeholder:"es: ABC123",className:"code-input",maxLength:6,disabled:n,autoFocus:!0})]}),a.jsx("button",{className:"btn btn-primary btn-validate",onClick:o,disabled:n||!t.trim(),children:n?"Convalida in corso...":"CONVALIDA CODICE"})]}),i&&a.jsxs("div",{className:`validation-message ${i.type}`,children:[a.jsx("div",{className:"message-text",children:i.text}),i.details&&a.jsx("div",{className:"message-details",children:i.details})]}),a.jsxs("div",{className:"help-section",children:[a.jsx("h3",{children:" Come funziona"}),a.jsxs("ol",{children:[a.jsx("li",{children:"Il cliente mostra il codice da 6 caratteri"}),a.jsx("li",{children:"Inserisci il codice nel campo sopra"}),a.jsx("li",{children:'Click su "CONVALIDA CODICE"'}),a.jsx("li",{children:"Se il codice  valido, autorizza lo sconto"})]})]})]})}function X0(){const[t,e]=b.useState(null),[n,r]=b.useState(!0);b.useEffect(()=>{i()},[]);const i=async()=>{try{const o=ue(Y,"config","theme"),c=await un(o);if(c.exists()){const u=c.data();e(u),s(u)}}catch(o){console.error("Error loading theme:",o)}finally{r(!1)}},s=o=>{const c=document.documentElement;Object.entries(o).forEach(([u,d])=>{if(u.startsWith("color")){const f="--"+u.replace(/([A-Z])/g,"-$1").toLowerCase();c.style.setProperty(f,d)}else if(u.startsWith("fontSize")){const f="--font-size-"+u.replace("fontSize","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}else if(u.startsWith("spacing")){const f="--spacing-"+u.replace("spacing","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}else if(u.startsWith("radius")){const f="--radius-"+u.replace("radius","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}})};return{theme:t,loading:n,reload:i}}function hO({onLogout:t}){const e=jt(),[n,r]=b.useState("orders"),{theme:i}=X0(),s=()=>{t(),e("/admin/login")},o=()=>{switch(n){case"orders":return a.jsx(Ly,{});case"products":return a.jsx(tO,{});case"modifications":return a.jsx(lO,{});case"categories":return a.jsx(nO,{});case"promotions":return a.jsx(rO,{});case"fidelity":return a.jsx(uO,{});case"coupon-validation":return a.jsx(dO,{});case"settings":return a.jsx(aO,{});case"customers":return a.jsx(cO,{});default:return a.jsx(Ly,{})}};return a.jsxs("div",{className:"admin-dashboard",children:[a.jsxs("div",{className:"admin-sidebar",children:[a.jsx("div",{className:"admin-logo",children:a.jsx("h2",{children:"ZeroSei Admin"})}),a.jsxs("nav",{className:"admin-nav",children:[a.jsxs("button",{className:`nav-item ${n==="orders"?"active":""}`,onClick:()=>r("orders"),children:[(i==null?void 0:i.iconOrders)||""," Ordini"]}),a.jsxs("button",{className:`nav-item ${n==="products"?"active":""}`,onClick:()=>r("products"),children:[(i==null?void 0:i.iconProducts)||""," Prodotti"]}),a.jsxs("button",{className:`nav-item ${n==="modifications"?"active":""}`,onClick:()=>r("modifications"),children:[(i==null?void 0:i.iconIngredients)||""," Ingredienti"]}),a.jsxs("button",{className:`nav-item ${n==="categories"?"active":""}`,onClick:()=>r("categories"),children:[(i==null?void 0:i.iconCategories)||""," Categorie"]}),a.jsxs("button",{className:`nav-item ${n==="promotions"?"active":""}`,onClick:()=>r("promotions"),children:[(i==null?void 0:i.iconPromotions)||""," Promozioni"]}),a.jsx("button",{className:`nav-item ${n==="fidelity"?"active":""}`,onClick:()=>r("fidelity"),children:" Premi Fidelity"}),a.jsx("button",{className:`nav-item ${n==="coupon-validation"?"active":""}`,onClick:()=>r("coupon-validation"),children:" Convalida Coupon"}),a.jsxs("button",{className:`nav-item ${n==="customers"?"active":""}`,onClick:()=>r("customers"),children:[(i==null?void 0:i.iconCustomers)||""," Clienti"]}),a.jsxs("button",{className:`nav-item ${n==="settings"?"active":""}`,onClick:()=>r("settings"),children:[(i==null?void 0:i.iconSettings)||""," Impostazioni"]})]}),a.jsx("div",{className:"admin-footer",children:a.jsx("button",{className:"btn-logout",onClick:s,children:" Logout"})})]}),a.jsx("div",{className:"admin-content",children:o()})]})}function fO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(null),[o,c]=b.useState([]);b.useEffect(()=>{u()},[]);const u=async()=>{try{console.log(" Loading all products...");const d=await F0();console.log(" Products loaded:",d.length),console.log(" Products:",d),e(d),console.log(" Testing category query for pizze-classiche...");const f=await z0("pizze-classiche");console.log(" Category products loaded:",f.length),console.log(" Category products:",f),c(f)}catch(d){console.error(" Error loading products:",d),s(d.message||"Unknown error")}r(!1)};return n?a.jsx("div",{style:{padding:20},children:"Loading debug data..."}):i?a.jsxs("div",{style:{padding:20,color:"red"},children:["Error: ",i]}):a.jsxs("div",{style:{padding:20,fontFamily:"monospace"},children:[a.jsx("h1",{children:"Debug Products"}),a.jsxs("h2",{children:["All Products: ",t.length]}),a.jsxs("h2",{children:["Pizze Classiche: ",o.length]}),a.jsx("h3",{children:"Category Test Results:"}),a.jsx("pre",{children:JSON.stringify(o,null,2)}),a.jsx("h3",{children:"All Products:"}),a.jsx("pre",{children:JSON.stringify(t,null,2)})]})}function pO(){const[t,e]=b.useState({items:[],total:0}),[n,r]=b.useState(null),[i,s]=b.useState(!1);X0(),b.useEffect(()=>{const u=oE();e(u);const d=localStorage.getItem("user_profile");if(d){const m=JSON.parse(d);r(m),m.id&&!m.id.startsWith("temp_")&&Ah(m.id,{lastAccess:new Date}).catch(g=>console.error("Error updating last access:",g))}const f=localStorage.getItem("admin_authenticated");s(f==="true")},[]);const o=()=>{s(!0)},c=()=>{localStorage.removeItem("admin_authenticated"),s(!1)};return a.jsx(eN,{children:a.jsxs(lv,{children:[a.jsx(gt,{path:"/admin/login",element:i?a.jsx(av,{to:"/admin/dashboard",replace:!0}):a.jsx(eO,{onLogin:o})}),a.jsx(gt,{path:"/admin/*",element:i?a.jsx(hO,{onLogout:c}):a.jsx(av,{to:"/admin/login",replace:!0})}),a.jsx(gt,{path:"*",element:a.jsx(hD,{cart:t,userProfile:n,children:a.jsxs(lv,{children:[a.jsx(gt,{path:"/",element:a.jsx(yD,{})}),a.jsx(gt,{path:"/menu",element:a.jsx(_D,{})}),a.jsx(gt,{path:"/menu/:category",element:a.jsx(wD,{cart:t,setCart:e})}),a.jsx(gt,{path:"/product/:id",element:a.jsx(ID,{cart:t,setCart:e})}),a.jsx(gt,{path:"/cart",element:a.jsx(SD,{cart:t,setCart:e,userProfile:n})}),a.jsx(gt,{path:"/profile",element:a.jsx(CD,{userProfile:n,setUserProfile:r})}),a.jsx(gt,{path:"/news",element:a.jsx(ND,{})}),a.jsx(gt,{path:"/offer/:id",element:a.jsx(AD,{userProfile:n})}),a.jsx(gt,{path:"/fidelity",element:a.jsx(JD,{userProfile:n})}),a.jsx(gt,{path:"/debug",element:a.jsx(fO,{})})]})})})]})})}ld.createRoot(document.getElementById("root")).render(a.jsx(Ky.StrictMode,{children:a.jsx(pO,{})}));
