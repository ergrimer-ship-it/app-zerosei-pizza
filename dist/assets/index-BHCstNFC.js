function Bx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function $x(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var My={exports:{}},dc={},Uy={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bo=Symbol.for("react.element"),qx=Symbol.for("react.portal"),Wx=Symbol.for("react.fragment"),Hx=Symbol.for("react.strict_mode"),Gx=Symbol.for("react.profiler"),Kx=Symbol.for("react.provider"),Qx=Symbol.for("react.context"),Xx=Symbol.for("react.forward_ref"),Yx=Symbol.for("react.suspense"),Jx=Symbol.for("react.memo"),Zx=Symbol.for("react.lazy"),Hm=Symbol.iterator;function eS(t){return t===null||typeof t!="object"?null:(t=Hm&&t[Hm]||t["@@iterator"],typeof t=="function"?t:null)}var Fy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zy=Object.assign,By={};function cs(t,e,n){this.props=t,this.context=e,this.refs=By,this.updater=n||Fy}cs.prototype.isReactComponent={};cs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $y(){}$y.prototype=cs.prototype;function Uh(t,e,n){this.props=t,this.context=e,this.refs=By,this.updater=n||Fy}var Fh=Uh.prototype=new $y;Fh.constructor=Uh;zy(Fh,cs.prototype);Fh.isPureReactComponent=!0;var Gm=Array.isArray,qy=Object.prototype.hasOwnProperty,zh={current:null},Wy={key:!0,ref:!0,__self:!0,__source:!0};function Hy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)qy.call(e,r)&&!Wy.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Bo,type:t,key:s,ref:o,props:i,_owner:zh.current}}function tS(t,e){return{$$typeof:Bo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bo}function nS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Km=/\/+/g;function Ru(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nS(""+t.key):e.toString(36)}function Za(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bo:case qx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ru(o,0):r,Gm(i)?(n="",t!=null&&(n=t.replace(Km,"$&/")+"/"),Za(i,e,n,"",function(d){return d})):i!=null&&(Bh(i)&&(i=tS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Km,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Gm(t))for(var c=0;c<t.length;c++){s=t[c];var u=r+Ru(s,c);o+=Za(s,e,n,u,i)}else if(u=eS(t),typeof u=="function")for(t=u.call(t),c=0;!(s=t.next()).done;)s=s.value,u=r+Ru(s,c++),o+=Za(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Na(t,e,n){if(t==null)return t;var r=[],i=0;return Za(t,r,"","",function(s){return e.call(n,s,i++)}),r}function rS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},el={transition:null},iS={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:el,ReactCurrentOwner:zh};function Gy(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Na,forEach:function(t,e,n){Na(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Na(t,function(){e++}),e},toArray:function(t){return Na(t,function(e){return e})||[]},only:function(t){if(!Bh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=cs;te.Fragment=Wx;te.Profiler=Gx;te.PureComponent=Uh;te.StrictMode=Hx;te.Suspense=Yx;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iS;te.act=Gy;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=zy({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=zh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)qy.call(e,u)&&!Wy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Bo,type:t.type,key:i,ref:s,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:Qx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Kx,_context:t},t.Consumer=t};te.createElement=Hy;te.createFactory=function(t){var e=Hy.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:Xx,render:t}};te.isValidElement=Bh;te.lazy=function(t){return{$$typeof:Zx,_payload:{_status:-1,_result:t},_init:rS}};te.memo=function(t,e){return{$$typeof:Jx,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=el.transition;el.transition={};try{t()}finally{el.transition=e}};te.unstable_act=Gy;te.useCallback=function(t,e){return gt.current.useCallback(t,e)};te.useContext=function(t){return gt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};te.useEffect=function(t,e){return gt.current.useEffect(t,e)};te.useId=function(){return gt.current.useId()};te.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return gt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};te.useRef=function(t){return gt.current.useRef(t)};te.useState=function(t){return gt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return gt.current.useTransition()};te.version="18.3.1";Uy.exports=te;var b=Uy.exports;const Ky=$x(b),sS=Bx({__proto__:null,default:Ky},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oS=b,aS=Symbol.for("react.element"),lS=Symbol.for("react.fragment"),cS=Object.prototype.hasOwnProperty,uS=oS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dS={key:!0,ref:!0,__self:!0,__source:!0};function Qy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cS.call(e,r)&&!dS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:aS,type:t,key:s,ref:o,props:i,_owner:uS.current}}dc.Fragment=lS;dc.jsx=Qy;dc.jsxs=Qy;My.exports=dc;var a=My.exports,vd={},Xy={exports:{}},bt={},Yy={exports:{}},Jy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,X){var Z=B.length;B.push(X);e:for(;0<Z;){var we=Z-1>>>1,he=B[we];if(0<i(he,X))B[we]=X,B[Z]=he,Z=we;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var X=B[0],Z=B.pop();if(Z!==X){B[0]=Z;e:for(var we=0,he=B.length,ke=he>>>1;we<ke;){var vn=2*(we+1)-1,yn=B[vn],_n=vn+1,wn=B[_n];if(0>i(yn,Z))_n<he&&0>i(wn,yn)?(B[we]=wn,B[_n]=Z,we=_n):(B[we]=yn,B[vn]=Z,we=vn);else if(_n<he&&0>i(wn,Z))B[we]=wn,B[_n]=Z,we=_n;else break e}}return X}function i(B,X){var Z=B.sortIndex-X.sortIndex;return Z!==0?Z:B.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,v=null,m=3,g=!1,x=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(B){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=B)r(d),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(d)}}function S(B){if(E=!1,I(B),!x)if(n(u)!==null)x=!0,nn(O);else{var X=n(d);X!==null&&gn(S,X.startTime-B)}}function O(B,X){x=!1,E&&(E=!1,y(_),_=-1),g=!0;var Z=m;try{for(I(X),v=n(u);v!==null&&(!(v.expirationTime>X)||B&&!N());){var we=v.callback;if(typeof we=="function"){v.callback=null,m=v.priorityLevel;var he=we(v.expirationTime<=X);X=t.unstable_now(),typeof he=="function"?v.callback=he:v===n(u)&&r(u),I(X)}else r(u);v=n(u)}if(v!==null)var ke=!0;else{var vn=n(d);vn!==null&&gn(S,vn.startTime-X),ke=!1}return ke}finally{v=null,m=Z,g=!1}}var D=!1,C=null,_=-1,A=5,P=-1;function N(){return!(t.unstable_now()-P<A)}function j(){if(C!==null){var B=t.unstable_now();P=B;var X=!0;try{X=C(!0,B)}finally{X?k():(D=!1,C=null)}}else D=!1}var k;if(typeof w=="function")k=function(){w(j)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,mn=re.port2;re.port1.onmessage=j,k=function(){mn.postMessage(null)}}else k=function(){R(j,0)};function nn(B){C=B,D||(D=!0,k())}function gn(B,X){_=R(function(){B(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,nn(O))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var Z=m;m=X;try{return B()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=m;m=B;try{return X()}finally{m=Z}},t.unstable_scheduleCallback=function(B,X,Z){var we=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,B){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Z+he,B={id:f++,callback:X,priorityLevel:B,startTime:Z,expirationTime:he,sortIndex:-1},Z>we?(B.sortIndex=Z,e(d,B),n(u)===null&&B===n(d)&&(E?(y(_),_=-1):E=!0,gn(S,Z-we))):(B.sortIndex=he,e(u,B),x||g||(x=!0,nn(O))),B},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(B){var X=m;return function(){var Z=m;m=X;try{return B.apply(this,arguments)}finally{m=Z}}}})(Jy);Yy.exports=Jy;var hS=Yy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS=b,kt=hS;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zy=new Set,fo={};function li(t,e){Ki(t,e),Ki(t+"Capture",e)}function Ki(t,e){for(fo[t]=e,t=0;t<e.length;t++)Zy.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yd=Object.prototype.hasOwnProperty,pS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qm={},Xm={};function mS(t){return yd.call(Xm,t)?!0:yd.call(Qm,t)?!1:pS.test(t)?Xm[t]=!0:(Qm[t]=!0,!1)}function gS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vS(t,e,n,r){if(e===null||typeof e>"u"||gS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var $h=/[\-:]([a-z])/g;function qh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($h,qh);Xe[e]=new vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($h,qh);Xe[e]=new vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($h,qh);Xe[e]=new vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new vt(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wh(t,e,n,r){var i=Xe.hasOwnProperty(e)?Xe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vS(e,n,i,r)&&(n=null),r||i===null?mS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bn=fS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Aa=Symbol.for("react.element"),Si=Symbol.for("react.portal"),Ii=Symbol.for("react.fragment"),Hh=Symbol.for("react.strict_mode"),_d=Symbol.for("react.profiler"),e_=Symbol.for("react.provider"),t_=Symbol.for("react.context"),Gh=Symbol.for("react.forward_ref"),wd=Symbol.for("react.suspense"),Ed=Symbol.for("react.suspense_list"),Kh=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),n_=Symbol.for("react.offscreen"),Ym=Symbol.iterator;function ks(t){return t===null||typeof t!="object"?null:(t=Ym&&t[Ym]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Object.assign,Pu;function $s(t){if(Pu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pu=e&&e[1]||""}return`
`+Pu+t}var ku=!1;function ju(t,e){if(!t||ku)return"";ku=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,c=s.length-1;1<=o&&0<=c&&i[o]!==s[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==s[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==s[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{ku=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$s(t):""}function yS(t){switch(t.tag){case 5:return $s(t.type);case 16:return $s("Lazy");case 13:return $s("Suspense");case 19:return $s("SuspenseList");case 0:case 2:case 15:return t=ju(t.type,!1),t;case 11:return t=ju(t.type.render,!1),t;case 1:return t=ju(t.type,!0),t;default:return""}}function Td(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ii:return"Fragment";case Si:return"Portal";case _d:return"Profiler";case Hh:return"StrictMode";case wd:return"Suspense";case Ed:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case t_:return(t.displayName||"Context")+".Consumer";case e_:return(t._context.displayName||"Context")+".Provider";case Gh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kh:return e=t.displayName||null,e!==null?e:Td(t.type)||"Memo";case Xn:e=t._payload,t=t._init;try{return Td(t(e))}catch{}}return null}function _S(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Td(e);case 8:return e===Hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function r_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wS(t){var e=r_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ra(t){t._valueTracker||(t._valueTracker=wS(t))}function i_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=r_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function El(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xd(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function s_(t,e){e=e.checked,e!=null&&Wh(t,"checked",e,!1)}function Sd(t,e){s_(t,e);var n=xr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Id(t,e.type,n):e.hasOwnProperty("defaultValue")&&Id(t,e.type,xr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Id(t,e,n){(e!=="number"||El(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qs=Array.isArray;function Vi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(qs(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xr(n)}}function o_(t,e){var n=xr(e.value),r=xr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function a_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?a_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pa,l_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pa=Pa||document.createElement("div"),Pa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ES=["Webkit","ms","Moz","O"];Object.keys(Ys).forEach(function(t){ES.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ys[e]=Ys[t]})});function c_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ys.hasOwnProperty(t)&&Ys[t]?(""+e).trim():e+"px"}function u_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=c_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var TS=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ad(t,e){if(e){if(TS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Rd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pd=null;function Qh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kd=null,Mi=null,Ui=null;function ng(t){if(t=Wo(t)){if(typeof kd!="function")throw Error(F(280));var e=t.stateNode;e&&(e=gc(e),kd(t.stateNode,t.type,e))}}function d_(t){Mi?Ui?Ui.push(t):Ui=[t]:Mi=t}function h_(){if(Mi){var t=Mi,e=Ui;if(Ui=Mi=null,ng(t),e)for(t=0;t<e.length;t++)ng(e[t])}}function f_(t,e){return t(e)}function p_(){}var bu=!1;function m_(t,e,n){if(bu)return t(e,n);bu=!0;try{return f_(t,e,n)}finally{bu=!1,(Mi!==null||Ui!==null)&&(p_(),h_())}}function mo(t,e){var n=t.stateNode;if(n===null)return null;var r=gc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var jd=!1;if(jn)try{var js={};Object.defineProperty(js,"passive",{get:function(){jd=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{jd=!1}function xS(t,e,n,r,i,s,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Js=!1,Tl=null,xl=!1,bd=null,SS={onError:function(t){Js=!0,Tl=t}};function IS(t,e,n,r,i,s,o,c,u){Js=!1,Tl=null,xS.apply(SS,arguments)}function CS(t,e,n,r,i,s,o,c,u){if(IS.apply(this,arguments),Js){if(Js){var d=Tl;Js=!1,Tl=null}else throw Error(F(198));xl||(xl=!0,bd=d)}}function ci(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function g_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rg(t){if(ci(t)!==t)throw Error(F(188))}function NS(t){var e=t.alternate;if(!e){if(e=ci(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rg(i),t;if(s===r)return rg(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function v_(t){return t=NS(t),t!==null?y_(t):null}function y_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=y_(t);if(e!==null)return e;t=t.sibling}return null}var __=kt.unstable_scheduleCallback,ig=kt.unstable_cancelCallback,AS=kt.unstable_shouldYield,RS=kt.unstable_requestPaint,be=kt.unstable_now,PS=kt.unstable_getCurrentPriorityLevel,Xh=kt.unstable_ImmediatePriority,w_=kt.unstable_UserBlockingPriority,Sl=kt.unstable_NormalPriority,kS=kt.unstable_LowPriority,E_=kt.unstable_IdlePriority,hc=null,ln=null;function jS(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(hc,t,void 0,(t.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:OS,bS=Math.log,DS=Math.LN2;function OS(t){return t>>>=0,t===0?32:31-(bS(t)/DS|0)|0}var ka=64,ja=4194304;function Ws(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Il(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=Ws(c):(s&=o,s!==0&&(r=Ws(s)))}else o=n&~i,o!==0?r=Ws(o):s!==0&&(r=Ws(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xt(e),i=1<<n,r|=t[n],e&=~i;return r}function LS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Xt(s),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=LS(c,e)):u<=e&&(t.expiredLanes|=c),s&=~c}}function Dd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function T_(){var t=ka;return ka<<=1,!(ka&4194240)&&(ka=64),t}function Du(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $o(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xt(e),t[e]=n}function MS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Xt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ue=0;function x_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var S_,Jh,I_,C_,N_,Od=!1,ba=[],ur=null,dr=null,hr=null,go=new Map,vo=new Map,Jn=[],US="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sg(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(e.pointerId)}}function bs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wo(e),e!==null&&Jh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function FS(t,e,n,r,i){switch(e){case"focusin":return ur=bs(ur,t,e,n,r,i),!0;case"dragenter":return dr=bs(dr,t,e,n,r,i),!0;case"mouseover":return hr=bs(hr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return go.set(s,bs(go.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,vo.set(s,bs(vo.get(s)||null,t,e,n,r,i)),!0}return!1}function A_(t){var e=$r(t.target);if(e!==null){var n=ci(e);if(n!==null){if(e=n.tag,e===13){if(e=g_(n),e!==null){t.blockedOn=e,N_(t.priority,function(){I_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ld(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Pd=r,n.target.dispatchEvent(r),Pd=null}else return e=Wo(n),e!==null&&Jh(e),t.blockedOn=n,!1;e.shift()}return!0}function og(t,e,n){tl(t)&&n.delete(e)}function zS(){Od=!1,ur!==null&&tl(ur)&&(ur=null),dr!==null&&tl(dr)&&(dr=null),hr!==null&&tl(hr)&&(hr=null),go.forEach(og),vo.forEach(og)}function Ds(t,e){t.blockedOn===e&&(t.blockedOn=null,Od||(Od=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,zS)))}function yo(t){function e(i){return Ds(i,t)}if(0<ba.length){Ds(ba[0],t);for(var n=1;n<ba.length;n++){var r=ba[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ur!==null&&Ds(ur,t),dr!==null&&Ds(dr,t),hr!==null&&Ds(hr,t),go.forEach(e),vo.forEach(e),n=0;n<Jn.length;n++)r=Jn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jn.length&&(n=Jn[0],n.blockedOn===null);)A_(n),n.blockedOn===null&&Jn.shift()}var Fi=Bn.ReactCurrentBatchConfig,Cl=!0;function BS(t,e,n,r){var i=ue,s=Fi.transition;Fi.transition=null;try{ue=1,Zh(t,e,n,r)}finally{ue=i,Fi.transition=s}}function $S(t,e,n,r){var i=ue,s=Fi.transition;Fi.transition=null;try{ue=4,Zh(t,e,n,r)}finally{ue=i,Fi.transition=s}}function Zh(t,e,n,r){if(Cl){var i=Ld(t,e,n,r);if(i===null)qu(t,e,r,Nl,n),sg(t,r);else if(FS(i,t,e,n,r))r.stopPropagation();else if(sg(t,r),e&4&&-1<US.indexOf(t)){for(;i!==null;){var s=Wo(i);if(s!==null&&S_(s),s=Ld(t,e,n,r),s===null&&qu(t,e,r,Nl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else qu(t,e,r,null,n)}}var Nl=null;function Ld(t,e,n,r){if(Nl=null,t=Qh(r),t=$r(t),t!==null)if(e=ci(t),e===null)t=null;else if(n=e.tag,n===13){if(t=g_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nl=t,null}function R_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PS()){case Xh:return 1;case w_:return 4;case Sl:case kS:return 16;case E_:return 536870912;default:return 16}default:return 16}}var sr=null,ef=null,nl=null;function P_(){if(nl)return nl;var t,e=ef,n=e.length,r,i="value"in sr?sr.value:sr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return nl=i.slice(t,1<r?1-r:void 0)}function rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Da(){return!0}function ag(){return!1}function Dt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Da:ag,this.isPropagationStopped=ag,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Da)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Da)},persist:function(){},isPersistent:Da}),e}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tf=Dt(us),qo=Se({},us,{view:0,detail:0}),qS=Dt(qo),Ou,Lu,Os,fc=Se({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Os&&(Os&&t.type==="mousemove"?(Ou=t.screenX-Os.screenX,Lu=t.screenY-Os.screenY):Lu=Ou=0,Os=t),Ou)},movementY:function(t){return"movementY"in t?t.movementY:Lu}}),lg=Dt(fc),WS=Se({},fc,{dataTransfer:0}),HS=Dt(WS),GS=Se({},qo,{relatedTarget:0}),Vu=Dt(GS),KS=Se({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),QS=Dt(KS),XS=Se({},us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YS=Dt(XS),JS=Se({},us,{data:0}),cg=Dt(JS),ZS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tI[t])?!!e[t]:!1}function nf(){return nI}var rI=Se({},qo,{key:function(t){if(t.key){var e=ZS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nf,charCode:function(t){return t.type==="keypress"?rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iI=Dt(rI),sI=Se({},fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ug=Dt(sI),oI=Se({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nf}),aI=Dt(oI),lI=Se({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),cI=Dt(lI),uI=Se({},fc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dI=Dt(uI),hI=[9,13,27,32],rf=jn&&"CompositionEvent"in window,Zs=null;jn&&"documentMode"in document&&(Zs=document.documentMode);var fI=jn&&"TextEvent"in window&&!Zs,k_=jn&&(!rf||Zs&&8<Zs&&11>=Zs),dg=" ",hg=!1;function j_(t,e){switch(t){case"keyup":return hI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ci=!1;function pI(t,e){switch(t){case"compositionend":return b_(e);case"keypress":return e.which!==32?null:(hg=!0,dg);case"textInput":return t=e.data,t===dg&&hg?null:t;default:return null}}function mI(t,e){if(Ci)return t==="compositionend"||!rf&&j_(t,e)?(t=P_(),nl=ef=sr=null,Ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return k_&&e.locale!=="ko"?null:e.data;default:return null}}var gI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gI[t.type]:e==="textarea"}function D_(t,e,n,r){d_(r),e=Al(e,"onChange"),0<e.length&&(n=new tf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var eo=null,_o=null;function vI(t){W_(t,0)}function pc(t){var e=Ri(t);if(i_(e))return t}function yI(t,e){if(t==="change")return e}var O_=!1;if(jn){var Mu;if(jn){var Uu="oninput"in document;if(!Uu){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),Uu=typeof pg.oninput=="function"}Mu=Uu}else Mu=!1;O_=Mu&&(!document.documentMode||9<document.documentMode)}function mg(){eo&&(eo.detachEvent("onpropertychange",L_),_o=eo=null)}function L_(t){if(t.propertyName==="value"&&pc(_o)){var e=[];D_(e,_o,t,Qh(t)),m_(vI,e)}}function _I(t,e,n){t==="focusin"?(mg(),eo=e,_o=n,eo.attachEvent("onpropertychange",L_)):t==="focusout"&&mg()}function wI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pc(_o)}function EI(t,e){if(t==="click")return pc(e)}function TI(t,e){if(t==="input"||t==="change")return pc(e)}function xI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jt=typeof Object.is=="function"?Object.is:xI;function wo(t,e){if(Jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yd.call(e,i)||!Jt(t[i],e[i]))return!1}return!0}function gg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vg(t,e){var n=gg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gg(n)}}function V_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?V_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function M_(){for(var t=window,e=El();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=El(t.document)}return e}function sf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SI(t){var e=M_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&V_(n.ownerDocument.documentElement,n)){if(r!==null&&sf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=vg(n,s);var o=vg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var II=jn&&"documentMode"in document&&11>=document.documentMode,Ni=null,Vd=null,to=null,Md=!1;function yg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Md||Ni==null||Ni!==El(r)||(r=Ni,"selectionStart"in r&&sf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),to&&wo(to,r)||(to=r,r=Al(Vd,"onSelect"),0<r.length&&(e=new tf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ni)))}function Oa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ai={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionend:Oa("Transition","TransitionEnd")},Fu={},U_={};jn&&(U_=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function mc(t){if(Fu[t])return Fu[t];if(!Ai[t])return t;var e=Ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in U_)return Fu[t]=e[n];return t}var F_=mc("animationend"),z_=mc("animationiteration"),B_=mc("animationstart"),$_=mc("transitionend"),q_=new Map,_g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){q_.set(t,e),li(e,[t])}for(var zu=0;zu<_g.length;zu++){var Bu=_g[zu],CI=Bu.toLowerCase(),NI=Bu[0].toUpperCase()+Bu.slice(1);Pr(CI,"on"+NI)}Pr(F_,"onAnimationEnd");Pr(z_,"onAnimationIteration");Pr(B_,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr($_,"onTransitionEnd");Ki("onMouseEnter",["mouseout","mouseover"]);Ki("onMouseLeave",["mouseout","mouseover"]);Ki("onPointerEnter",["pointerout","pointerover"]);Ki("onPointerLeave",["pointerout","pointerover"]);li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));li("onBeforeInput",["compositionend","keypress","textInput","paste"]);li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hs));function wg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,CS(r,e,void 0,t),t.currentTarget=null}function W_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==s&&i.isPropagationStopped())break e;wg(i,c,d),s=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==s&&i.isPropagationStopped())break e;wg(i,c,d),s=u}}}if(xl)throw t=bd,xl=!1,bd=null,t}function ge(t,e){var n=e[$d];n===void 0&&(n=e[$d]=new Set);var r=t+"__bubble";n.has(r)||(H_(e,t,2,!1),n.add(r))}function $u(t,e,n){var r=0;e&&(r|=4),H_(n,t,r,e)}var La="_reactListening"+Math.random().toString(36).slice(2);function Eo(t){if(!t[La]){t[La]=!0,Zy.forEach(function(n){n!=="selectionchange"&&(AI.has(n)||$u(n,!1,t),$u(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[La]||(e[La]=!0,$u("selectionchange",!1,e))}}function H_(t,e,n,r){switch(R_(e)){case 1:var i=BS;break;case 4:i=$S;break;default:i=Zh}n=i.bind(null,e,n,t),i=void 0,!jd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=$r(c),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}c=c.parentNode}}r=r.return}m_(function(){var d=s,f=Qh(n),v=[];e:{var m=q_.get(t);if(m!==void 0){var g=tf,x=t;switch(t){case"keypress":if(rl(n)===0)break e;case"keydown":case"keyup":g=iI;break;case"focusin":x="focus",g=Vu;break;case"focusout":x="blur",g=Vu;break;case"beforeblur":case"afterblur":g=Vu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=HS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=aI;break;case F_:case z_:case B_:g=QS;break;case $_:g=cI;break;case"scroll":g=qS;break;case"wheel":g=dI;break;case"copy":case"cut":case"paste":g=YS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ug}var E=(e&4)!==0,R=!E&&t==="scroll",y=E?m!==null?m+"Capture":null:m;E=[];for(var w=d,I;w!==null;){I=w;var S=I.stateNode;if(I.tag===5&&S!==null&&(I=S,y!==null&&(S=mo(w,y),S!=null&&E.push(To(w,S,I)))),R)break;w=w.return}0<E.length&&(m=new g(m,x,null,n,f),v.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Pd&&(x=n.relatedTarget||n.fromElement)&&($r(x)||x[bn]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=d,x=x?$r(x):null,x!==null&&(R=ci(x),x!==R||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=d),g!==x)){if(E=lg,S="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(E=ug,S="onPointerLeave",y="onPointerEnter",w="pointer"),R=g==null?m:Ri(g),I=x==null?m:Ri(x),m=new E(S,w+"leave",g,n,f),m.target=R,m.relatedTarget=I,S=null,$r(f)===d&&(E=new E(y,w+"enter",x,n,f),E.target=I,E.relatedTarget=R,S=E),R=S,g&&x)t:{for(E=g,y=x,w=0,I=E;I;I=wi(I))w++;for(I=0,S=y;S;S=wi(S))I++;for(;0<w-I;)E=wi(E),w--;for(;0<I-w;)y=wi(y),I--;for(;w--;){if(E===y||y!==null&&E===y.alternate)break t;E=wi(E),y=wi(y)}E=null}else E=null;g!==null&&Eg(v,m,g,E,!1),x!==null&&R!==null&&Eg(v,R,x,E,!0)}}e:{if(m=d?Ri(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var O=yI;else if(fg(m))if(O_)O=TI;else{O=wI;var D=_I}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(O=EI);if(O&&(O=O(t,d))){D_(v,O,n,f);break e}D&&D(t,m,d),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&Id(m,"number",m.value)}switch(D=d?Ri(d):window,t){case"focusin":(fg(D)||D.contentEditable==="true")&&(Ni=D,Vd=d,to=null);break;case"focusout":to=Vd=Ni=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,yg(v,n,f);break;case"selectionchange":if(II)break;case"keydown":case"keyup":yg(v,n,f)}var C;if(rf)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ci?j_(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(k_&&n.locale!=="ko"&&(Ci||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ci&&(C=P_()):(sr=f,ef="value"in sr?sr.value:sr.textContent,Ci=!0)),D=Al(d,_),0<D.length&&(_=new cg(_,t,null,n,f),v.push({event:_,listeners:D}),C?_.data=C:(C=b_(n),C!==null&&(_.data=C)))),(C=fI?pI(t,n):mI(t,n))&&(d=Al(d,"onBeforeInput"),0<d.length&&(f=new cg("onBeforeInput","beforeinput",null,n,f),v.push({event:f,listeners:d}),f.data=C))}W_(v,e)})}function To(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Al(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mo(t,n),s!=null&&r.unshift(To(t,s,i)),s=mo(t,e),s!=null&&r.push(To(t,s,i))),t=t.return}return r}function wi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Eg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=mo(n,s),u!=null&&o.unshift(To(n,u,c))):i||(u=mo(n,s),u!=null&&o.push(To(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var RI=/\r\n?/g,PI=/\u0000|\uFFFD/g;function Tg(t){return(typeof t=="string"?t:""+t).replace(RI,`
`).replace(PI,"")}function Va(t,e,n){if(e=Tg(e),Tg(t)!==e&&n)throw Error(F(425))}function Rl(){}var Ud=null,Fd=null;function zd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bd=typeof setTimeout=="function"?setTimeout:void 0,kI=typeof clearTimeout=="function"?clearTimeout:void 0,xg=typeof Promise=="function"?Promise:void 0,jI=typeof queueMicrotask=="function"?queueMicrotask:typeof xg<"u"?function(t){return xg.resolve(null).then(t).catch(bI)}:Bd;function bI(t){setTimeout(function(){throw t})}function Wu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),yo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);yo(e)}function fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ds=Math.random().toString(36).slice(2),on="__reactFiber$"+ds,xo="__reactProps$"+ds,bn="__reactContainer$"+ds,$d="__reactEvents$"+ds,DI="__reactListeners$"+ds,OI="__reactHandles$"+ds;function $r(t){var e=t[on];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bn]||n[on]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sg(t);t!==null;){if(n=t[on])return n;t=Sg(t)}return e}t=n,n=t.parentNode}return null}function Wo(t){return t=t[on]||t[bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ri(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function gc(t){return t[xo]||null}var qd=[],Pi=-1;function kr(t){return{current:t}}function ye(t){0>Pi||(t.current=qd[Pi],qd[Pi]=null,Pi--)}function pe(t,e){Pi++,qd[Pi]=t.current,t.current=e}var Sr={},at=kr(Sr),Tt=kr(!1),Jr=Sr;function Qi(t,e){var n=t.type.contextTypes;if(!n)return Sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xt(t){return t=t.childContextTypes,t!=null}function Pl(){ye(Tt),ye(at)}function Ig(t,e,n){if(at.current!==Sr)throw Error(F(168));pe(at,e),pe(Tt,n)}function G_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,_S(t)||"Unknown",i));return Se({},n,r)}function kl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sr,Jr=at.current,pe(at,t),pe(Tt,Tt.current),!0}function Cg(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=G_(t,e,Jr),r.__reactInternalMemoizedMergedChildContext=t,ye(Tt),ye(at),pe(at,t)):ye(Tt),pe(Tt,n)}var Sn=null,vc=!1,Hu=!1;function K_(t){Sn===null?Sn=[t]:Sn.push(t)}function LI(t){vc=!0,K_(t)}function jr(){if(!Hu&&Sn!==null){Hu=!0;var t=0,e=ue;try{var n=Sn;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sn=null,vc=!1}catch(i){throw Sn!==null&&(Sn=Sn.slice(t+1)),__(Xh,jr),i}finally{ue=e,Hu=!1}}return null}var ki=[],ji=0,jl=null,bl=0,Lt=[],Vt=0,Zr=null,In=1,Cn="";function Fr(t,e){ki[ji++]=bl,ki[ji++]=jl,jl=t,bl=e}function Q_(t,e,n){Lt[Vt++]=In,Lt[Vt++]=Cn,Lt[Vt++]=Zr,Zr=t;var r=In;t=Cn;var i=32-Xt(r)-1;r&=~(1<<i),n+=1;var s=32-Xt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,In=1<<32-Xt(e)+i|n<<i|r,Cn=s+t}else In=1<<s|n<<i|r,Cn=t}function of(t){t.return!==null&&(Fr(t,1),Q_(t,1,0))}function af(t){for(;t===jl;)jl=ki[--ji],ki[ji]=null,bl=ki[--ji],ki[ji]=null;for(;t===Zr;)Zr=Lt[--Vt],Lt[Vt]=null,Cn=Lt[--Vt],Lt[Vt]=null,In=Lt[--Vt],Lt[Vt]=null}var Pt=null,Nt=null,_e=!1,Qt=null;function X_(t,e){var n=Mt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ng(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Nt=fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zr!==null?{id:In,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,Nt=null,!0):!1;default:return!1}}function Wd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hd(t){if(_e){var e=Nt;if(e){var n=e;if(!Ng(t,e)){if(Wd(t))throw Error(F(418));e=fr(n.nextSibling);var r=Pt;e&&Ng(t,e)?X_(r,n):(t.flags=t.flags&-4097|2,_e=!1,Pt=t)}}else{if(Wd(t))throw Error(F(418));t.flags=t.flags&-4097|2,_e=!1,Pt=t}}}function Ag(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function Ma(t){if(t!==Pt)return!1;if(!_e)return Ag(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zd(t.type,t.memoizedProps)),e&&(e=Nt)){if(Wd(t))throw Y_(),Error(F(418));for(;e;)X_(t,e),e=fr(e.nextSibling)}if(Ag(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nt=fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=Pt?fr(t.stateNode.nextSibling):null;return!0}function Y_(){for(var t=Nt;t;)t=fr(t.nextSibling)}function Xi(){Nt=Pt=null,_e=!1}function lf(t){Qt===null?Qt=[t]:Qt.push(t)}var VI=Bn.ReactCurrentBatchConfig;function Ls(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var c=i.refs;o===null?delete c[s]:c[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Ua(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rg(t){var e=t._init;return e(t._payload)}function J_(t){function e(y,w){if(t){var I=y.deletions;I===null?(y.deletions=[w],y.flags|=16):I.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=vr(y,w),y.index=0,y.sibling=null,y}function s(y,w,I){return y.index=I,t?(I=y.alternate,I!==null?(I=I.index,I<w?(y.flags|=2,w):I):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function c(y,w,I,S){return w===null||w.tag!==6?(w=Zu(I,y.mode,S),w.return=y,w):(w=i(w,I),w.return=y,w)}function u(y,w,I,S){var O=I.type;return O===Ii?f(y,w,I.props.children,S,I.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xn&&Rg(O)===w.type)?(S=i(w,I.props),S.ref=Ls(y,w,I),S.return=y,S):(S=ul(I.type,I.key,I.props,null,y.mode,S),S.ref=Ls(y,w,I),S.return=y,S)}function d(y,w,I,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=ed(I,y.mode,S),w.return=y,w):(w=i(w,I.children||[]),w.return=y,w)}function f(y,w,I,S,O){return w===null||w.tag!==7?(w=Kr(I,y.mode,S,O),w.return=y,w):(w=i(w,I),w.return=y,w)}function v(y,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Zu(""+w,y.mode,I),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Aa:return I=ul(w.type,w.key,w.props,null,y.mode,I),I.ref=Ls(y,null,w),I.return=y,I;case Si:return w=ed(w,y.mode,I),w.return=y,w;case Xn:var S=w._init;return v(y,S(w._payload),I)}if(qs(w)||ks(w))return w=Kr(w,y.mode,I,null),w.return=y,w;Ua(y,w)}return null}function m(y,w,I,S){var O=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:c(y,w,""+I,S);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Aa:return I.key===O?u(y,w,I,S):null;case Si:return I.key===O?d(y,w,I,S):null;case Xn:return O=I._init,m(y,w,O(I._payload),S)}if(qs(I)||ks(I))return O!==null?null:f(y,w,I,S,null);Ua(y,I)}return null}function g(y,w,I,S,O){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(I)||null,c(w,y,""+S,O);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Aa:return y=y.get(S.key===null?I:S.key)||null,u(w,y,S,O);case Si:return y=y.get(S.key===null?I:S.key)||null,d(w,y,S,O);case Xn:var D=S._init;return g(y,w,I,D(S._payload),O)}if(qs(S)||ks(S))return y=y.get(I)||null,f(w,y,S,O,null);Ua(w,S)}return null}function x(y,w,I,S){for(var O=null,D=null,C=w,_=w=0,A=null;C!==null&&_<I.length;_++){C.index>_?(A=C,C=null):A=C.sibling;var P=m(y,C,I[_],S);if(P===null){C===null&&(C=A);break}t&&C&&P.alternate===null&&e(y,C),w=s(P,w,_),D===null?O=P:D.sibling=P,D=P,C=A}if(_===I.length)return n(y,C),_e&&Fr(y,_),O;if(C===null){for(;_<I.length;_++)C=v(y,I[_],S),C!==null&&(w=s(C,w,_),D===null?O=C:D.sibling=C,D=C);return _e&&Fr(y,_),O}for(C=r(y,C);_<I.length;_++)A=g(C,y,_,I[_],S),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?_:A.key),w=s(A,w,_),D===null?O=A:D.sibling=A,D=A);return t&&C.forEach(function(N){return e(y,N)}),_e&&Fr(y,_),O}function E(y,w,I,S){var O=ks(I);if(typeof O!="function")throw Error(F(150));if(I=O.call(I),I==null)throw Error(F(151));for(var D=O=null,C=w,_=w=0,A=null,P=I.next();C!==null&&!P.done;_++,P=I.next()){C.index>_?(A=C,C=null):A=C.sibling;var N=m(y,C,P.value,S);if(N===null){C===null&&(C=A);break}t&&C&&N.alternate===null&&e(y,C),w=s(N,w,_),D===null?O=N:D.sibling=N,D=N,C=A}if(P.done)return n(y,C),_e&&Fr(y,_),O;if(C===null){for(;!P.done;_++,P=I.next())P=v(y,P.value,S),P!==null&&(w=s(P,w,_),D===null?O=P:D.sibling=P,D=P);return _e&&Fr(y,_),O}for(C=r(y,C);!P.done;_++,P=I.next())P=g(C,y,_,P.value,S),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?_:P.key),w=s(P,w,_),D===null?O=P:D.sibling=P,D=P);return t&&C.forEach(function(j){return e(y,j)}),_e&&Fr(y,_),O}function R(y,w,I,S){if(typeof I=="object"&&I!==null&&I.type===Ii&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Aa:e:{for(var O=I.key,D=w;D!==null;){if(D.key===O){if(O=I.type,O===Ii){if(D.tag===7){n(y,D.sibling),w=i(D,I.props.children),w.return=y,y=w;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xn&&Rg(O)===D.type){n(y,D.sibling),w=i(D,I.props),w.ref=Ls(y,D,I),w.return=y,y=w;break e}n(y,D);break}else e(y,D);D=D.sibling}I.type===Ii?(w=Kr(I.props.children,y.mode,S,I.key),w.return=y,y=w):(S=ul(I.type,I.key,I.props,null,y.mode,S),S.ref=Ls(y,w,I),S.return=y,y=S)}return o(y);case Si:e:{for(D=I.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){n(y,w.sibling),w=i(w,I.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=ed(I,y.mode,S),w.return=y,y=w}return o(y);case Xn:return D=I._init,R(y,w,D(I._payload),S)}if(qs(I))return x(y,w,I,S);if(ks(I))return E(y,w,I,S);Ua(y,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(n(y,w.sibling),w=i(w,I),w.return=y,y=w):(n(y,w),w=Zu(I,y.mode,S),w.return=y,y=w),o(y)):n(y,w)}return R}var Yi=J_(!0),Z_=J_(!1),Dl=kr(null),Ol=null,bi=null,cf=null;function uf(){cf=bi=Ol=null}function df(t){var e=Dl.current;ye(Dl),t._currentValue=e}function Gd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zi(t,e){Ol=t,cf=bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Bt(t){var e=t._currentValue;if(cf!==t)if(t={context:t,memoizedValue:e,next:null},bi===null){if(Ol===null)throw Error(F(308));bi=t,Ol.dependencies={lanes:0,firstContext:t}}else bi=bi.next=t;return e}var qr=null;function hf(t){qr===null?qr=[t]:qr.push(t)}function ew(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hf(e)):(n.next=i.next,i.next=n),e.interleaved=n,Dn(t,r)}function Dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yn=!1;function ff(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Dn(t,n)}return i=r.interleaved,i===null?(e.next=e,hf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Dn(t,n)}function il(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yh(t,n)}}function Pg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ll(t,e,n,r){var i=t.updateQueue;Yn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(s!==null){var v=i.baseState;o=0,f=d=u=null,c=s;do{var m=c.lane,g=c.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var x=t,E=c;switch(m=e,g=n,E.tag){case 1:if(x=E.payload,typeof x=="function"){v=x.call(g,v,m);break e}v=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=E.payload,m=typeof x=="function"?x.call(g,v,m):x,m==null)break e;v=Se({},v,m);break e;case 2:Yn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[c]:m.push(c))}else g={eventTime:g,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=g,u=v):f=f.next=g,o|=m;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;m=c,c=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(f===null&&(u=v),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ti|=o,t.lanes=o,t.memoizedState=v}}function kg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var Ho={},cn=kr(Ho),So=kr(Ho),Io=kr(Ho);function Wr(t){if(t===Ho)throw Error(F(174));return t}function pf(t,e){switch(pe(Io,e),pe(So,t),pe(cn,Ho),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nd(e,t)}ye(cn),pe(cn,e)}function Ji(){ye(cn),ye(So),ye(Io)}function nw(t){Wr(Io.current);var e=Wr(cn.current),n=Nd(e,t.type);e!==n&&(pe(So,t),pe(cn,n))}function mf(t){So.current===t&&(ye(cn),ye(So))}var Ee=kr(0);function Vl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gu=[];function gf(){for(var t=0;t<Gu.length;t++)Gu[t]._workInProgressVersionPrimary=null;Gu.length=0}var sl=Bn.ReactCurrentDispatcher,Ku=Bn.ReactCurrentBatchConfig,ei=0,Te=null,Me=null,ze=null,Ml=!1,no=!1,Co=0,MI=0;function tt(){throw Error(F(321))}function vf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jt(t[n],e[n]))return!1;return!0}function yf(t,e,n,r,i,s){if(ei=s,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sl.current=t===null||t.memoizedState===null?BI:$I,t=n(r,i),no){s=0;do{if(no=!1,Co=0,25<=s)throw Error(F(301));s+=1,ze=Me=null,e.updateQueue=null,sl.current=qI,t=n(r,i)}while(no)}if(sl.current=Ul,e=Me!==null&&Me.next!==null,ei=0,ze=Me=Te=null,Ml=!1,e)throw Error(F(300));return t}function _f(){var t=Co!==0;return Co=0,t}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Te.memoizedState=ze=t:ze=ze.next=t,ze}function $t(){if(Me===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=ze===null?Te.memoizedState:ze.next;if(e!==null)ze=e,Me=t;else{if(t===null)throw Error(F(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},ze===null?Te.memoizedState=ze=t:ze=ze.next=t}return ze}function No(t,e){return typeof e=="function"?e(t):e}function Qu(t){var e=$t(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Me,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=o=null,u=null,d=s;do{var f=d.lane;if((ei&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var v={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=v,o=r):u=u.next=v,Te.lanes|=f,ti|=f}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=c,Jt(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Te.lanes|=s,ti|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xu(t){var e=$t(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Jt(s,e.memoizedState)||(Et=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function rw(){}function iw(t,e){var n=Te,r=$t(),i=e(),s=!Jt(r.memoizedState,i);if(s&&(r.memoizedState=i,Et=!0),r=r.queue,wf(aw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,Ao(9,ow.bind(null,n,r,i,e),void 0,null),Be===null)throw Error(F(349));ei&30||sw(n,e,i)}return i}function sw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ow(t,e,n,r){e.value=n,e.getSnapshot=r,lw(e)&&cw(t)}function aw(t,e,n){return n(function(){lw(e)&&cw(t)})}function lw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jt(t,n)}catch{return!0}}function cw(t){var e=Dn(t,1);e!==null&&Yt(e,t,1,-1)}function jg(t){var e=sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},e.queue=t,t=t.dispatch=zI.bind(null,Te,t),[e.memoizedState,t]}function Ao(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uw(){return $t().memoizedState}function ol(t,e,n,r){var i=sn();Te.flags|=t,i.memoizedState=Ao(1|e,n,void 0,r===void 0?null:r)}function yc(t,e,n,r){var i=$t();r=r===void 0?null:r;var s=void 0;if(Me!==null){var o=Me.memoizedState;if(s=o.destroy,r!==null&&vf(r,o.deps)){i.memoizedState=Ao(e,n,s,r);return}}Te.flags|=t,i.memoizedState=Ao(1|e,n,s,r)}function bg(t,e){return ol(8390656,8,t,e)}function wf(t,e){return yc(2048,8,t,e)}function dw(t,e){return yc(4,2,t,e)}function hw(t,e){return yc(4,4,t,e)}function fw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pw(t,e,n){return n=n!=null?n.concat([t]):null,yc(4,4,fw.bind(null,e,t),n)}function Ef(){}function mw(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gw(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vw(t,e,n){return ei&21?(Jt(n,e)||(n=T_(),Te.lanes|=n,ti|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function UI(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=Ku.transition;Ku.transition={};try{t(!1),e()}finally{ue=n,Ku.transition=r}}function yw(){return $t().memoizedState}function FI(t,e,n){var r=gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_w(t))ww(e,n);else if(n=ew(t,e,n,r),n!==null){var i=pt();Yt(n,t,r,i),Ew(n,e,r)}}function zI(t,e,n){var r=gr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_w(t))ww(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,c=s(o,n);if(i.hasEagerState=!0,i.eagerState=c,Jt(c,o)){var u=e.interleaved;u===null?(i.next=i,hf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=ew(t,e,i,r),n!==null&&(i=pt(),Yt(n,t,r,i),Ew(n,e,r))}}function _w(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function ww(t,e){no=Ml=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ew(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yh(t,n)}}var Ul={readContext:Bt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},BI={readContext:Bt,useCallback:function(t,e){return sn().memoizedState=[t,e===void 0?null:e],t},useContext:Bt,useEffect:bg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ol(4194308,4,fw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return ol(4,2,t,e)},useMemo:function(t,e){var n=sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FI.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=sn();return t={current:t},e.memoizedState=t},useState:jg,useDebugValue:Ef,useDeferredValue:function(t){return sn().memoizedState=t},useTransition:function(){var t=jg(!1),e=t[0];return t=UI.bind(null,t[1]),sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,i=sn();if(_e){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Be===null)throw Error(F(349));ei&30||sw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,bg(aw.bind(null,r,s,t),[t]),r.flags|=2048,Ao(9,ow.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=sn(),e=Be.identifierPrefix;if(_e){var n=Cn,r=In;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Co++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=MI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$I={readContext:Bt,useCallback:mw,useContext:Bt,useEffect:wf,useImperativeHandle:pw,useInsertionEffect:dw,useLayoutEffect:hw,useMemo:gw,useReducer:Qu,useRef:uw,useState:function(){return Qu(No)},useDebugValue:Ef,useDeferredValue:function(t){var e=$t();return vw(e,Me.memoizedState,t)},useTransition:function(){var t=Qu(No)[0],e=$t().memoizedState;return[t,e]},useMutableSource:rw,useSyncExternalStore:iw,useId:yw,unstable_isNewReconciler:!1},qI={readContext:Bt,useCallback:mw,useContext:Bt,useEffect:wf,useImperativeHandle:pw,useInsertionEffect:dw,useLayoutEffect:hw,useMemo:gw,useReducer:Xu,useRef:uw,useState:function(){return Xu(No)},useDebugValue:Ef,useDeferredValue:function(t){var e=$t();return Me===null?e.memoizedState=t:vw(e,Me.memoizedState,t)},useTransition:function(){var t=Xu(No)[0],e=$t().memoizedState;return[t,e]},useMutableSource:rw,useSyncExternalStore:iw,useId:yw,unstable_isNewReconciler:!1};function Gt(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Kd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _c={isMounted:function(t){return(t=t._reactInternals)?ci(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),i=gr(t),s=Pn(r,i);s.payload=e,n!=null&&(s.callback=n),e=pr(t,s,i),e!==null&&(Yt(e,t,i,r),il(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),i=gr(t),s=Pn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=pr(t,s,i),e!==null&&(Yt(e,t,i,r),il(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=gr(t),i=Pn(n,r);i.tag=2,e!=null&&(i.callback=e),e=pr(t,i,r),e!==null&&(Yt(e,t,r,n),il(e,t,r))}};function Dg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wo(n,r)||!wo(i,s):!0}function Tw(t,e,n){var r=!1,i=Sr,s=e.contextType;return typeof s=="object"&&s!==null?s=Bt(s):(i=xt(e)?Jr:at.current,r=e.contextTypes,s=(r=r!=null)?Qi(t,i):Sr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_c,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Og(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_c.enqueueReplaceState(e,e.state,null)}function Qd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ff(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bt(s):(s=xt(e)?Jr:at.current,i.context=Qi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_c.enqueueReplaceState(i,i.state,null),Ll(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zi(t,e){try{var n="",r=e;do n+=yS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Yu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WI=typeof WeakMap=="function"?WeakMap:Map;function xw(t,e,n){n=Pn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zl||(zl=!0,oh=r),Xd(t,e)},n}function Sw(t,e,n){n=Pn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xd(t,e),typeof r!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Lg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=sC.bind(null,t,e,n),e.then(t,t))}function Vg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Mg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pn(-1,1),e.tag=2,pr(n,e,1))),n.lanes|=1),t)}var HI=Bn.ReactCurrentOwner,Et=!1;function ft(t,e,n,r){e.child=t===null?Z_(e,null,n,r):Yi(e,t.child,n,r)}function Ug(t,e,n,r,i){n=n.render;var s=e.ref;return zi(e,i),r=yf(t,e,n,r,s,i),n=_f(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,On(t,e,i)):(_e&&n&&of(e),e.flags|=1,ft(t,e,r,i),e.child)}function Fg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Rf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Iw(t,e,s,r,i)):(t=ul(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(o,r)&&t.ref===e.ref)return On(t,e,i)}return e.flags|=1,t=vr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Iw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(wo(s,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,On(t,e,i)}return Yd(t,e,n,r,i)}function Cw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(Oi,Ct),Ct|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(Oi,Ct),Ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,pe(Oi,Ct),Ct|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,pe(Oi,Ct),Ct|=r;return ft(t,e,i,n),e.child}function Nw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yd(t,e,n,r,i){var s=xt(n)?Jr:at.current;return s=Qi(e,s),zi(e,i),n=yf(t,e,n,r,s,i),r=_f(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,On(t,e,i)):(_e&&r&&of(e),e.flags|=1,ft(t,e,n,i),e.child)}function zg(t,e,n,r,i){if(xt(n)){var s=!0;kl(e)}else s=!1;if(zi(e,i),e.stateNode===null)al(t,e),Tw(e,n,r),Qd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Bt(d):(d=xt(n)?Jr:at.current,d=Qi(e,d));var f=n.getDerivedStateFromProps,v=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";v||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Og(e,o,r,d),Yn=!1;var m=e.memoizedState;o.state=m,Ll(e,r,o,i),u=e.memoizedState,c!==r||m!==u||Tt.current||Yn?(typeof f=="function"&&(Kd(e,n,f,r),u=e.memoizedState),(c=Yn||Dg(e,n,c,r,m,u,d))?(v||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,tw(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Gt(e.type,c),o.props=d,v=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Bt(u):(u=xt(n)?Jr:at.current,u=Qi(e,u));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==v||m!==u)&&Og(e,o,r,u),Yn=!1,m=e.memoizedState,o.state=m,Ll(e,r,o,i);var x=e.memoizedState;c!==v||m!==x||Tt.current||Yn?(typeof g=="function"&&(Kd(e,n,g,r),x=e.memoizedState),(d=Yn||Dg(e,n,d,r,m,x,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Jd(t,e,n,r,s,i)}function Jd(t,e,n,r,i,s){Nw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Cg(e,n,!1),On(t,e,s);r=e.stateNode,HI.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Yi(e,t.child,null,s),e.child=Yi(e,null,c,s)):ft(t,e,c,s),e.memoizedState=r.state,i&&Cg(e,n,!0),e.child}function Aw(t){var e=t.stateNode;e.pendingContext?Ig(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ig(t,e.context,!1),pf(t,e.containerInfo)}function Bg(t,e,n,r,i){return Xi(),lf(i),e.flags|=256,ft(t,e,n,r),e.child}var Zd={dehydrated:null,treeContext:null,retryLane:0};function eh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rw(t,e,n){var r=e.pendingProps,i=Ee.current,s=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),pe(Ee,i&1),t===null)return Hd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Tc(o,r,0,null),t=Kr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=eh(n),e.memoizedState=Zd,t):Tf(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return GI(t,e,o,r,c,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=vr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=vr(c,s):(s=Kr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?eh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Zd,r}return s=t.child,t=s.sibling,r=vr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tf(t,e){return e=Tc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fa(t,e,n,r){return r!==null&&lf(r),Yi(e,t.child,null,n),t=Tf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Yu(Error(F(422))),Fa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Tc({mode:"visible",children:r.children},i,0,null),s=Kr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Yi(e,t.child,null,o),e.child.memoizedState=eh(o),e.memoizedState=Zd,s);if(!(e.mode&1))return Fa(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(F(419)),r=Yu(s,r,void 0),Fa(t,e,o,r)}if(c=(o&t.childLanes)!==0,Et||c){if(r=Be,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Dn(t,i),Yt(r,t,i,-1))}return Af(),r=Yu(Error(F(421))),Fa(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=oC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Nt=fr(i.nextSibling),Pt=e,_e=!0,Qt=null,t!==null&&(Lt[Vt++]=In,Lt[Vt++]=Cn,Lt[Vt++]=Zr,In=t.id,Cn=t.overflow,Zr=e),e=Tf(e,r.children),e.flags|=4096,e)}function $g(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gd(t.return,e,n)}function Ju(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Pw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ft(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$g(t,n,e);else if(t.tag===19)$g(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Vl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ju(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Vl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ju(e,!0,n,null,s);break;case"together":Ju(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function al(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function On(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ti|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KI(t,e,n){switch(e.tag){case 3:Aw(e),Xi();break;case 5:nw(e);break;case 1:xt(e.type)&&kl(e);break;case 4:pf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;pe(Dl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?Rw(t,e,n):(pe(Ee,Ee.current&1),t=On(t,e,n),t!==null?t.sibling:null);pe(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Pw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pe(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,Cw(t,e,n)}return On(t,e,n)}var kw,th,jw,bw;kw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};th=function(){};jw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Wr(cn.current);var s=null;switch(n){case"input":i=xd(t,i),r=xd(t,r),s=[];break;case"select":i=Se({},i,{value:void 0}),r=Se({},r,{value:void 0}),s=[];break;case"textarea":i=Cd(t,i),r=Cd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rl)}Ad(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fo.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ge("scroll",t),s||c===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};bw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vs(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function QI(t,e,n){var r=e.pendingProps;switch(af(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(e),null;case 1:return xt(e.type)&&Pl(),nt(e),null;case 3:return r=e.stateNode,Ji(),ye(Tt),ye(at),gf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ma(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qt!==null&&(ch(Qt),Qt=null))),th(t,e),nt(e),null;case 5:mf(e);var i=Wr(Io.current);if(n=e.type,t!==null&&e.stateNode!=null)jw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return nt(e),null}if(t=Wr(cn.current),Ma(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[on]=e,r[xo]=s,t=(e.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(i=0;i<Hs.length;i++)ge(Hs[i],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":Jm(r,s),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ge("invalid",r);break;case"textarea":eg(r,s),ge("invalid",r)}Ad(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&Va(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&Va(r.textContent,c,t),i=["children",""+c]):fo.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ge("scroll",r)}switch(n){case"input":Ra(r),Zm(r,s,!0);break;case"textarea":Ra(r),tg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=a_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[on]=e,t[xo]=r,kw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Rd(n,r),n){case"dialog":ge("cancel",t),ge("close",t),i=r;break;case"iframe":case"object":case"embed":ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<Hs.length;i++)ge(Hs[i],t);i=r;break;case"source":ge("error",t),i=r;break;case"img":case"image":case"link":ge("error",t),ge("load",t),i=r;break;case"details":ge("toggle",t),i=r;break;case"input":Jm(t,r),i=xd(t,r),ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Se({},r,{value:void 0}),ge("invalid",t);break;case"textarea":eg(t,r),i=Cd(t,r),ge("invalid",t);break;default:i=r}Ad(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var u=c[s];s==="style"?u_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&l_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&po(t,u):typeof u=="number"&&po(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ge("scroll",t):u!=null&&Wh(t,s,u,o))}switch(n){case"input":Ra(t),Zm(t,r,!1);break;case"textarea":Ra(t),tg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Vi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Vi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Rl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nt(e),null;case 6:if(t&&e.stateNode!=null)bw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Wr(Io.current),Wr(cn.current),Ma(e)){if(r=e.stateNode,n=e.memoizedProps,r[on]=e,(s=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:Va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Va(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[on]=e,e.stateNode=r}return nt(e),null;case 13:if(ye(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&Nt!==null&&e.mode&1&&!(e.flags&128))Y_(),Xi(),e.flags|=98560,s=!1;else if(s=Ma(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[on]=e}else Xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nt(e),s=!1}else Qt!==null&&(ch(Qt),Qt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Ue===0&&(Ue=3):Af())),e.updateQueue!==null&&(e.flags|=4),nt(e),null);case 4:return Ji(),th(t,e),t===null&&Eo(e.stateNode.containerInfo),nt(e),null;case 10:return df(e.type._context),nt(e),null;case 17:return xt(e.type)&&Pl(),nt(e),null;case 19:if(ye(Ee),s=e.memoizedState,s===null)return nt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Vs(s,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vl(t),o!==null){for(e.flags|=128,Vs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(Ee,Ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&be()>es&&(e.flags|=128,r=!0,Vs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Vl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_e)return nt(e),null}else 2*be()-s.renderingStartTime>es&&n!==1073741824&&(e.flags|=128,r=!0,Vs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=be(),e.sibling=null,n=Ee.current,pe(Ee,r?n&1|2:n&1),e):(nt(e),null);case 22:case 23:return Nf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ct&1073741824&&(nt(e),e.subtreeFlags&6&&(e.flags|=8192)):nt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function XI(t,e){switch(af(e),e.tag){case 1:return xt(e.type)&&Pl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ji(),ye(Tt),ye(at),gf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mf(e),null;case 13:if(ye(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(Ee),null;case 4:return Ji(),null;case 10:return df(e.type._context),null;case 22:case 23:return Nf(),null;case 24:return null;default:return null}}var za=!1,st=!1,YI=typeof WeakSet=="function"?WeakSet:Set,q=null;function Di(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function nh(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var qg=!1;function JI(t,e){if(Ud=Cl,t=M_(),sf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,v=t,m=null;t:for(;;){for(var g;v!==n||i!==0&&v.nodeType!==3||(c=o+i),v!==s||r!==0&&v.nodeType!==3||(u=o+r),v.nodeType===3&&(o+=v.nodeValue.length),(g=v.firstChild)!==null;)m=v,v=g;for(;;){if(v===t)break t;if(m===n&&++d===i&&(c=o),m===s&&++f===r&&(u=o),(g=v.nextSibling)!==null)break;v=m,m=v.parentNode}v=g}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fd={focusedElem:t,selectionRange:n},Cl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,R=x.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?E:Gt(e.type,E),R);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(S){Ne(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return x=qg,qg=!1,x}function ro(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&nh(e,n,s)}i=i.next}while(i!==r)}}function wc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Dw(t){var e=t.alternate;e!==null&&(t.alternate=null,Dw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[on],delete e[xo],delete e[$d],delete e[DI],delete e[OI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ow(t){return t.tag===5||t.tag===3||t.tag===4}function Wg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ow(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ih(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rl));else if(r!==4&&(t=t.child,t!==null))for(ih(t,e,n),t=t.sibling;t!==null;)ih(t,e,n),t=t.sibling}function sh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sh(t,e,n),t=t.sibling;t!==null;)sh(t,e,n),t=t.sibling}var qe=null,Kt=!1;function Kn(t,e,n){for(n=n.child;n!==null;)Lw(t,e,n),n=n.sibling}function Lw(t,e,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(hc,n)}catch{}switch(n.tag){case 5:st||Di(n,e);case 6:var r=qe,i=Kt;qe=null,Kn(t,e,n),qe=r,Kt=i,qe!==null&&(Kt?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Kt?(t=qe,n=n.stateNode,t.nodeType===8?Wu(t.parentNode,n):t.nodeType===1&&Wu(t,n),yo(t)):Wu(qe,n.stateNode));break;case 4:r=qe,i=Kt,qe=n.stateNode.containerInfo,Kt=!0,Kn(t,e,n),qe=r,Kt=i;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&nh(n,e,o),i=i.next}while(i!==r)}Kn(t,e,n);break;case 1:if(!st&&(Di(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ne(n,e,c)}Kn(t,e,n);break;case 21:Kn(t,e,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,Kn(t,e,n),st=r):Kn(t,e,n);break;default:Kn(t,e,n)}}function Hg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YI),e.forEach(function(r){var i=aC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ht(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:qe=c.stateNode,Kt=!1;break e;case 3:qe=c.stateNode.containerInfo,Kt=!0;break e;case 4:qe=c.stateNode.containerInfo,Kt=!0;break e}c=c.return}if(qe===null)throw Error(F(160));Lw(s,o,i),qe=null,Kt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Ne(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Vw(e,t),e=e.sibling}function Vw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(e,t),rn(t),r&4){try{ro(3,t,t.return),wc(3,t)}catch(E){Ne(t,t.return,E)}try{ro(5,t,t.return)}catch(E){Ne(t,t.return,E)}}break;case 1:Ht(e,t),rn(t),r&512&&n!==null&&Di(n,n.return);break;case 5:if(Ht(e,t),rn(t),r&512&&n!==null&&Di(n,n.return),t.flags&32){var i=t.stateNode;try{po(i,"")}catch(E){Ne(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&s_(i,s),Rd(c,o);var d=Rd(c,s);for(o=0;o<u.length;o+=2){var f=u[o],v=u[o+1];f==="style"?u_(i,v):f==="dangerouslySetInnerHTML"?l_(i,v):f==="children"?po(i,v):Wh(i,f,v,d)}switch(c){case"input":Sd(i,s);break;case"textarea":o_(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Vi(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Vi(i,!!s.multiple,s.defaultValue,!0):Vi(i,!!s.multiple,s.multiple?[]:"",!1))}i[xo]=s}catch(E){Ne(t,t.return,E)}}break;case 6:if(Ht(e,t),rn(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){Ne(t,t.return,E)}}break;case 3:if(Ht(e,t),rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yo(e.containerInfo)}catch(E){Ne(t,t.return,E)}break;case 4:Ht(e,t),rn(t);break;case 13:Ht(e,t),rn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(If=be())),r&4&&Hg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(st=(d=st)||f,Ht(e,t),st=d):Ht(e,t),rn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(v=q=f;q!==null;){switch(m=q,g=m.child,m.tag){case 0:case 11:case 14:case 15:ro(4,m,m.return);break;case 1:Di(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(E){Ne(r,n,E)}}break;case 5:Di(m,m.return);break;case 22:if(m.memoizedState!==null){Kg(v);continue}}g!==null?(g.return=m,q=g):Kg(v)}f=f.sibling}e:for(f=null,v=t;;){if(v.tag===5){if(f===null){f=v;try{i=v.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=v.stateNode,u=v.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=c_("display",o))}catch(E){Ne(t,t.return,E)}}}else if(v.tag===6){if(f===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(E){Ne(t,t.return,E)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;f===v&&(f=null),v=v.return}f===v&&(f=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Ht(e,t),rn(t),r&4&&Hg(t);break;case 21:break;default:Ht(e,t),rn(t)}}function rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ow(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(po(i,""),r.flags&=-33);var s=Wg(t);sh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Wg(t);ih(t,c,o);break;default:throw Error(F(161))}}catch(u){Ne(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ZI(t,e,n){q=t,Mw(t)}function Mw(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||za;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||st;c=za;var d=st;if(za=o,(st=u)&&!d)for(q=i;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Qg(i):u!==null?(u.return=o,q=u):Qg(i);for(;s!==null;)q=s,Mw(s),s=s.sibling;q=i,za=c,st=d}Gg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Gg(t)}}function Gg(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:st||wc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!st)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&kg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var v=f.dehydrated;v!==null&&yo(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}st||e.flags&512&&rh(e)}catch(m){Ne(e,e.return,m)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Kg(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Qg(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wc(4,e)}catch(u){Ne(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ne(e,i,u)}}var s=e.return;try{rh(e)}catch(u){Ne(e,s,u)}break;case 5:var o=e.return;try{rh(e)}catch(u){Ne(e,o,u)}}}catch(u){Ne(e,e.return,u)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var eC=Math.ceil,Fl=Bn.ReactCurrentDispatcher,xf=Bn.ReactCurrentOwner,Ut=Bn.ReactCurrentBatchConfig,ae=0,Be=null,Le=null,Ke=0,Ct=0,Oi=kr(0),Ue=0,Ro=null,ti=0,Ec=0,Sf=0,io=null,_t=null,If=0,es=1/0,xn=null,zl=!1,oh=null,mr=null,Ba=!1,or=null,Bl=0,so=0,ah=null,ll=-1,cl=0;function pt(){return ae&6?be():ll!==-1?ll:ll=be()}function gr(t){return t.mode&1?ae&2&&Ke!==0?Ke&-Ke:VI.transition!==null?(cl===0&&(cl=T_()),cl):(t=ue,t!==0||(t=window.event,t=t===void 0?16:R_(t.type)),t):1}function Yt(t,e,n,r){if(50<so)throw so=0,ah=null,Error(F(185));$o(t,n,r),(!(ae&2)||t!==Be)&&(t===Be&&(!(ae&2)&&(Ec|=n),Ue===4&&Zn(t,Ke)),St(t,r),n===1&&ae===0&&!(e.mode&1)&&(es=be()+500,vc&&jr()))}function St(t,e){var n=t.callbackNode;VS(t,e);var r=Il(t,t===Be?Ke:0);if(r===0)n!==null&&ig(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ig(n),e===1)t.tag===0?LI(Xg.bind(null,t)):K_(Xg.bind(null,t)),jI(function(){!(ae&6)&&jr()}),n=null;else{switch(x_(r)){case 1:n=Xh;break;case 4:n=w_;break;case 16:n=Sl;break;case 536870912:n=E_;break;default:n=Sl}n=Hw(n,Uw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Uw(t,e){if(ll=-1,cl=0,ae&6)throw Error(F(327));var n=t.callbackNode;if(Bi()&&t.callbackNode!==n)return null;var r=Il(t,t===Be?Ke:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$l(t,r);else{e=r;var i=ae;ae|=2;var s=zw();(Be!==t||Ke!==e)&&(xn=null,es=be()+500,Gr(t,e));do try{rC();break}catch(c){Fw(t,c)}while(!0);uf(),Fl.current=s,ae=i,Le!==null?e=0:(Be=null,Ke=0,e=Ue)}if(e!==0){if(e===2&&(i=Dd(t),i!==0&&(r=i,e=lh(t,i))),e===1)throw n=Ro,Gr(t,0),Zn(t,r),St(t,be()),n;if(e===6)Zn(t,r);else{if(i=t.current.alternate,!(r&30)&&!tC(i)&&(e=$l(t,r),e===2&&(s=Dd(t),s!==0&&(r=s,e=lh(t,s))),e===1))throw n=Ro,Gr(t,0),Zn(t,r),St(t,be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:zr(t,_t,xn);break;case 3:if(Zn(t,r),(r&130023424)===r&&(e=If+500-be(),10<e)){if(Il(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bd(zr.bind(null,t,_t,xn),e);break}zr(t,_t,xn);break;case 4:if(Zn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Xt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eC(r/1960))-r,10<r){t.timeoutHandle=Bd(zr.bind(null,t,_t,xn),r);break}zr(t,_t,xn);break;case 5:zr(t,_t,xn);break;default:throw Error(F(329))}}}return St(t,be()),t.callbackNode===n?Uw.bind(null,t):null}function lh(t,e){var n=io;return t.current.memoizedState.isDehydrated&&(Gr(t,e).flags|=256),t=$l(t,e),t!==2&&(e=_t,_t=n,e!==null&&ch(e)),t}function ch(t){_t===null?_t=t:_t.push.apply(_t,t)}function tC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zn(t,e){for(e&=~Sf,e&=~Ec,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xt(e),r=1<<n;t[n]=-1,e&=~r}}function Xg(t){if(ae&6)throw Error(F(327));Bi();var e=Il(t,0);if(!(e&1))return St(t,be()),null;var n=$l(t,e);if(t.tag!==0&&n===2){var r=Dd(t);r!==0&&(e=r,n=lh(t,r))}if(n===1)throw n=Ro,Gr(t,0),Zn(t,e),St(t,be()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zr(t,_t,xn),St(t,be()),null}function Cf(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(es=be()+500,vc&&jr())}}function ni(t){or!==null&&or.tag===0&&!(ae&6)&&Bi();var e=ae;ae|=1;var n=Ut.transition,r=ue;try{if(Ut.transition=null,ue=1,t)return t()}finally{ue=r,Ut.transition=n,ae=e,!(ae&6)&&jr()}}function Nf(){Ct=Oi.current,ye(Oi)}function Gr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kI(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(af(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pl();break;case 3:Ji(),ye(Tt),ye(at),gf();break;case 5:mf(r);break;case 4:Ji();break;case 13:ye(Ee);break;case 19:ye(Ee);break;case 10:df(r.type._context);break;case 22:case 23:Nf()}n=n.return}if(Be=t,Le=t=vr(t.current,null),Ke=Ct=e,Ue=0,Ro=null,Sf=Ec=ti=0,_t=io=null,qr!==null){for(e=0;e<qr.length;e++)if(n=qr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}qr=null}return t}function Fw(t,e){do{var n=Le;try{if(uf(),sl.current=Ul,Ml){for(var r=Te.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ml=!1}if(ei=0,ze=Me=Te=null,no=!1,Co=0,xf.current=null,n===null||n.return===null){Ue=1,Ro=e,Le=null;break}e:{var s=t,o=n.return,c=n,u=e;if(e=Ke,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,v=f.tag;if(!(f.mode&1)&&(v===0||v===11||v===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=Vg(o);if(g!==null){g.flags&=-257,Mg(g,o,c,s,e),g.mode&1&&Lg(s,d,e),e=g,u=d;var x=e.updateQueue;if(x===null){var E=new Set;E.add(u),e.updateQueue=E}else x.add(u);break e}else{if(!(e&1)){Lg(s,d,e),Af();break e}u=Error(F(426))}}else if(_e&&c.mode&1){var R=Vg(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Mg(R,o,c,s,e),lf(Zi(u,c));break e}}s=u=Zi(u,c),Ue!==4&&(Ue=2),io===null?io=[s]:io.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=xw(s,u,e);Pg(s,y);break e;case 1:c=u;var w=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(mr===null||!mr.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=Sw(s,c,e);Pg(s,S);break e}}s=s.return}while(s!==null)}$w(n)}catch(O){e=O,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function zw(){var t=Fl.current;return Fl.current=Ul,t===null?Ul:t}function Af(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Be===null||!(ti&268435455)&&!(Ec&268435455)||Zn(Be,Ke)}function $l(t,e){var n=ae;ae|=2;var r=zw();(Be!==t||Ke!==e)&&(xn=null,Gr(t,e));do try{nC();break}catch(i){Fw(t,i)}while(!0);if(uf(),ae=n,Fl.current=r,Le!==null)throw Error(F(261));return Be=null,Ke=0,Ue}function nC(){for(;Le!==null;)Bw(Le)}function rC(){for(;Le!==null&&!AS();)Bw(Le)}function Bw(t){var e=Ww(t.alternate,t,Ct);t.memoizedProps=t.pendingProps,e===null?$w(t):Le=e,xf.current=null}function $w(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XI(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Le=null;return}}else if(n=QI(n,e,Ct),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);Ue===0&&(Ue=5)}function zr(t,e,n){var r=ue,i=Ut.transition;try{Ut.transition=null,ue=1,iC(t,e,n,r)}finally{Ut.transition=i,ue=r}return null}function iC(t,e,n,r){do Bi();while(or!==null);if(ae&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(MS(t,s),t===Be&&(Le=Be=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ba||(Ba=!0,Hw(Sl,function(){return Bi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ut.transition,Ut.transition=null;var o=ue;ue=1;var c=ae;ae|=4,xf.current=null,JI(t,n),Vw(n,t),SI(Fd),Cl=!!Ud,Fd=Ud=null,t.current=n,ZI(n),RS(),ae=c,ue=o,Ut.transition=s}else t.current=n;if(Ba&&(Ba=!1,or=t,Bl=i),s=t.pendingLanes,s===0&&(mr=null),jS(n.stateNode),St(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zl)throw zl=!1,t=oh,oh=null,t;return Bl&1&&t.tag!==0&&Bi(),s=t.pendingLanes,s&1?t===ah?so++:(so=0,ah=t):so=0,jr(),null}function Bi(){if(or!==null){var t=x_(Bl),e=Ut.transition,n=ue;try{if(Ut.transition=null,ue=16>t?16:t,or===null)var r=!1;else{if(t=or,or=null,Bl=0,ae&6)throw Error(F(331));var i=ae;for(ae|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var c=s.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:ro(8,f,s)}var v=f.child;if(v!==null)v.return=f,q=v;else for(;q!==null;){f=q;var m=f.sibling,g=f.return;if(Dw(f),f===d){q=null;break}if(m!==null){m.return=g,q=m;break}q=g}}}var x=s.alternate;if(x!==null){var E=x.child;if(E!==null){x.child=null;do{var R=E.sibling;E.sibling=null,E=R}while(E!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ro(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,q=y;break e}q=s.return}}var w=t.current;for(q=w;q!==null;){o=q;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,q=I;else e:for(o=w;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:wc(9,c)}}catch(O){Ne(c,c.return,O)}if(c===o){q=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,q=S;break e}q=c.return}}if(ae=i,jr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(hc,t)}catch{}r=!0}return r}finally{ue=n,Ut.transition=e}}return!1}function Yg(t,e,n){e=Zi(n,e),e=xw(t,e,1),t=pr(t,e,1),e=pt(),t!==null&&($o(t,1,e),St(t,e))}function Ne(t,e,n){if(t.tag===3)Yg(t,t,n);else for(;e!==null;){if(e.tag===3){Yg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mr===null||!mr.has(r))){t=Zi(n,t),t=Sw(e,t,1),e=pr(e,t,1),t=pt(),e!==null&&($o(e,1,t),St(e,t));break}}e=e.return}}function sC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Be===t&&(Ke&n)===n&&(Ue===4||Ue===3&&(Ke&130023424)===Ke&&500>be()-If?Gr(t,0):Sf|=n),St(t,e)}function qw(t,e){e===0&&(t.mode&1?(e=ja,ja<<=1,!(ja&130023424)&&(ja=4194304)):e=1);var n=pt();t=Dn(t,e),t!==null&&($o(t,e,n),St(t,n))}function oC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qw(t,n)}function aC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),qw(t,n)}var Ww;Ww=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,KI(t,e,n);Et=!!(t.flags&131072)}else Et=!1,_e&&e.flags&1048576&&Q_(e,bl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;al(t,e),t=e.pendingProps;var i=Qi(e,at.current);zi(e,n),i=yf(null,e,r,t,i,n);var s=_f();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(r)?(s=!0,kl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ff(e),i.updater=_c,e.stateNode=i,i._reactInternals=e,Qd(e,r,t,n),e=Jd(null,e,r,!0,s,n)):(e.tag=0,_e&&s&&of(e),ft(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(al(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cC(r),t=Gt(r,t),i){case 0:e=Yd(null,e,r,t,n);break e;case 1:e=zg(null,e,r,t,n);break e;case 11:e=Ug(null,e,r,t,n);break e;case 14:e=Fg(null,e,r,Gt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),Yd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),zg(t,e,r,i,n);case 3:e:{if(Aw(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,tw(t,e),Ll(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Zi(Error(F(423)),e),e=Bg(t,e,r,n,i);break e}else if(r!==i){i=Zi(Error(F(424)),e),e=Bg(t,e,r,n,i);break e}else for(Nt=fr(e.stateNode.containerInfo.firstChild),Pt=e,_e=!0,Qt=null,n=Z_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xi(),r===i){e=On(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return nw(e),t===null&&Hd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zd(r,i)?o=null:s!==null&&zd(r,s)&&(e.flags|=32),Nw(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&Hd(e),null;case 13:return Rw(t,e,n);case 4:return pf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yi(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),Ug(t,e,r,i,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,pe(Dl,r._currentValue),r._currentValue=o,s!==null)if(Jt(s.value,o)){if(s.children===i.children&&!Tt.current){e=On(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Pn(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Gd(s.return,n,e),c.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(F(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Gd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ft(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,zi(e,n),i=Bt(i),r=r(i),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,i=Gt(r,e.pendingProps),i=Gt(r.type,i),Fg(t,e,r,i,n);case 15:return Iw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),al(t,e),e.tag=1,xt(r)?(t=!0,kl(e)):t=!1,zi(e,n),Tw(e,r,i),Qd(e,r,i,n),Jd(null,e,r,!0,t,n);case 19:return Pw(t,e,n);case 22:return Cw(t,e,n)}throw Error(F(156,e.tag))};function Hw(t,e){return __(t,e)}function lC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(t,e,n,r){return new lC(t,e,n,r)}function Rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cC(t){if(typeof t=="function")return Rf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gh)return 11;if(t===Kh)return 14}return 2}function vr(t,e){var n=t.alternate;return n===null?(n=Mt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ul(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Rf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ii:return Kr(n.children,i,s,e);case Hh:o=8,i|=8;break;case _d:return t=Mt(12,n,e,i|2),t.elementType=_d,t.lanes=s,t;case wd:return t=Mt(13,n,e,i),t.elementType=wd,t.lanes=s,t;case Ed:return t=Mt(19,n,e,i),t.elementType=Ed,t.lanes=s,t;case n_:return Tc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case e_:o=10;break e;case t_:o=9;break e;case Gh:o=11;break e;case Kh:o=14;break e;case Xn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Mt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Kr(t,e,n,r){return t=Mt(7,t,r,e),t.lanes=n,t}function Tc(t,e,n,r){return t=Mt(22,t,r,e),t.elementType=n_,t.lanes=n,t.stateNode={isHidden:!1},t}function Zu(t,e,n){return t=Mt(6,t,null,e),t.lanes=n,t}function ed(t,e,n){return e=Mt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Du(0),this.expirationTimes=Du(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Du(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pf(t,e,n,r,i,s,o,c,u){return t=new uC(t,e,n,c,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ff(s),t}function dC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Si,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Gw(t){if(!t)return Sr;t=t._reactInternals;e:{if(ci(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(xt(n))return G_(t,n,e)}return e}function Kw(t,e,n,r,i,s,o,c,u){return t=Pf(n,r,!0,t,i,s,o,c,u),t.context=Gw(null),n=t.current,r=pt(),i=gr(n),s=Pn(r,i),s.callback=e??null,pr(n,s,i),t.current.lanes=i,$o(t,i,r),St(t,r),t}function xc(t,e,n,r){var i=e.current,s=pt(),o=gr(i);return n=Gw(n),e.context===null?e.context=n:e.pendingContext=n,e=Pn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pr(i,e,o),t!==null&&(Yt(t,i,o,s),il(t,i,o)),o}function ql(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kf(t,e){Jg(t,e),(t=t.alternate)&&Jg(t,e)}function hC(){return null}var Qw=typeof reportError=="function"?reportError:function(t){console.error(t)};function jf(t){this._internalRoot=t}Sc.prototype.render=jf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));xc(t,e,null,null)};Sc.prototype.unmount=jf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ni(function(){xc(null,t,null,null)}),e[bn]=null}};function Sc(t){this._internalRoot=t}Sc.prototype.unstable_scheduleHydration=function(t){if(t){var e=C_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jn.length&&e!==0&&e<Jn[n].priority;n++);Jn.splice(n,0,t),n===0&&A_(t)}};function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ic(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zg(){}function fC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=ql(o);s.call(d)}}var o=Kw(e,r,t,0,null,!1,!1,"",Zg);return t._reactRootContainer=o,t[bn]=o.current,Eo(t.nodeType===8?t.parentNode:t),ni(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=ql(u);c.call(d)}}var u=Pf(t,0,!1,null,null,!1,!1,"",Zg);return t._reactRootContainer=u,t[bn]=u.current,Eo(t.nodeType===8?t.parentNode:t),ni(function(){xc(e,u,n,r)}),u}function Cc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var c=i;i=function(){var u=ql(o);c.call(u)}}xc(e,o,t,i)}else o=fC(n,e,t,i,r);return ql(o)}S_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ws(e.pendingLanes);n!==0&&(Yh(e,n|1),St(e,be()),!(ae&6)&&(es=be()+500,jr()))}break;case 13:ni(function(){var r=Dn(t,1);if(r!==null){var i=pt();Yt(r,t,1,i)}}),kf(t,1)}};Jh=function(t){if(t.tag===13){var e=Dn(t,134217728);if(e!==null){var n=pt();Yt(e,t,134217728,n)}kf(t,134217728)}};I_=function(t){if(t.tag===13){var e=gr(t),n=Dn(t,e);if(n!==null){var r=pt();Yt(n,t,e,r)}kf(t,e)}};C_=function(){return ue};N_=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};kd=function(t,e,n){switch(e){case"input":if(Sd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=gc(r);if(!i)throw Error(F(90));i_(r),Sd(r,i)}}}break;case"textarea":o_(t,n);break;case"select":e=n.value,e!=null&&Vi(t,!!n.multiple,e,!1)}};f_=Cf;p_=ni;var pC={usingClientEntryPoint:!1,Events:[Wo,Ri,gc,d_,h_,Cf]},Ms={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mC={bundleType:Ms.bundleType,version:Ms.version,rendererPackageName:Ms.rendererPackageName,rendererConfig:Ms.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=v_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ms.findFiberByHostInstance||hC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$a.isDisabled&&$a.supportsFiber)try{hc=$a.inject(mC),ln=$a}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pC;bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bf(e))throw Error(F(200));return dC(t,e,null,n)};bt.createRoot=function(t,e){if(!bf(t))throw Error(F(299));var n=!1,r="",i=Qw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pf(t,1,!1,null,null,n,!1,r,i),t[bn]=e.current,Eo(t.nodeType===8?t.parentNode:t),new jf(e)};bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=v_(e),t=t===null?null:t.stateNode,t};bt.flushSync=function(t){return ni(t)};bt.hydrate=function(t,e,n){if(!Ic(e))throw Error(F(200));return Cc(null,t,e,!0,n)};bt.hydrateRoot=function(t,e,n){if(!bf(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Qw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Kw(e,null,t,1,n??null,i,!1,s,o),t[bn]=e.current,Eo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Sc(e)};bt.render=function(t,e,n){if(!Ic(e))throw Error(F(200));return Cc(null,t,e,!1,n)};bt.unmountComponentAtNode=function(t){if(!Ic(t))throw Error(F(40));return t._reactRootContainer?(ni(function(){Cc(null,null,t,!1,function(){t._reactRootContainer=null,t[bn]=null})}),!0):!1};bt.unstable_batchedUpdates=Cf;bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ic(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Cc(t,e,n,!1,r)};bt.version="18.3.1-next-f1338f8080-20240426";function Xw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xw)}catch(t){console.error(t)}}Xw(),Xy.exports=bt;var gC=Xy.exports,ev=gC;vd.createRoot=ev.createRoot,vd.hydrateRoot=ev.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Po(){return Po=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Po.apply(this,arguments)}var ar;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ar||(ar={}));const tv="popstate";function vC(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:c="",hash:u=""}=ui(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),uh("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof s=="string"?s:Wl(s))}function r(i,s){Nc(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return _C(e,n,r,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yC(){return Math.random().toString(36).substr(2,8)}function nv(t,e){return{usr:t.state,key:t.key,idx:e}}function uh(t,e,n,r){return n===void 0&&(n=null),Po({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ui(e):e,{state:n,key:e&&e.key||r||yC()})}function Wl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ui(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _C(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,c=ar.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Po({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function v(){c=ar.Pop;let R=f(),y=R==null?null:R-d;d=R,u&&u({action:c,location:E.location,delta:y})}function m(R,y){c=ar.Push;let w=uh(E.location,R,y);n&&n(w,R),d=f()+1;let I=nv(w,d),S=E.createHref(w);try{o.pushState(I,"",S)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(S)}s&&u&&u({action:c,location:E.location,delta:1})}function g(R,y){c=ar.Replace;let w=uh(E.location,R,y);n&&n(w,R),d=f();let I=nv(w,d),S=E.createHref(w);o.replaceState(I,"",S),s&&u&&u({action:c,location:E.location,delta:0})}function x(R){let y=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof R=="string"?R:Wl(R);return w=w.replace(/ $/,"%20"),De(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let E={get action(){return c},get location(){return t(i,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(tv,v),u=R,()=>{i.removeEventListener(tv,v),u=null}},createHref(R){return e(i,R)},createURL:x,encodeLocation(R){let y=x(R);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:g,go(R){return o.go(R)}};return E}var rv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rv||(rv={}));function wC(t,e,n){return n===void 0&&(n="/"),EC(t,e,n)}function EC(t,e,n,r){let i=typeof e=="string"?ui(e):e,s=Df(i.pathname||"/",n);if(s==null)return null;let o=Yw(t);TC(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=DC(s);c=kC(o[u],d)}return c}function Yw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(De(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=yr([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(De(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Yw(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:RC(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,o);else for(let u of Jw(s.path))i(s,o,u)}),e}function Jw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Jw(r.join("/")),c=[];return c.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function TC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const xC=/^:[\w-]+$/,SC=3,IC=2,CC=1,NC=10,AC=-2,iv=t=>t==="*";function RC(t,e){let n=t.split("/"),r=n.length;return n.some(iv)&&(r+=AC),e&&(r+=IC),n.filter(i=>!iv(i)).reduce((i,s)=>i+(xC.test(s)?SC:s===""?CC:NC),r)}function PC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function kC(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",v=jC({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),m=u.route;if(!v)return null;Object.assign(i,v.params),o.push({params:i,pathname:yr([s,v.pathname]),pathnameBase:UC(yr([s,v.pathnameBase])),route:m}),v.pathnameBase!=="/"&&(s=yr([s,v.pathnameBase]))}return o}function jC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,f,v)=>{let{paramName:m,isOptional:g}=f;if(m==="*"){let E=c[v]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const x=c[v];return g&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function bC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Nc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function DC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Df(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const OC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LC=t=>OC.test(t);function VC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ui(t):t,s;if(n)if(LC(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Nc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=sv(n.substring(1),"/"):s=sv(n,e)}else s=e;return{pathname:s,search:FC(r),hash:zC(i)}}function sv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function td(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Of(t,e){let n=MC(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Lf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ui(t):(i=Po({},t),De(!i.pathname||!i.pathname.includes("?"),td("?","pathname","search",i)),De(!i.pathname||!i.pathname.includes("#"),td("#","pathname","hash",i)),De(!i.search||!i.search.includes("#"),td("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,c;if(o==null)c=n;else{let v=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),v-=1;i.pathname=m.join("/")}c=v>=0?e[v]:"/"}let u=VC(i,c),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const yr=t=>t.join("/").replace(/\/\/+/g,"/"),UC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Zw=["post","put","patch","delete"];new Set(Zw);const $C=["get",...Zw];new Set($C);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ko(){return ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ko.apply(this,arguments)}const Vf=b.createContext(null),qC=b.createContext(null),br=b.createContext(null),Ac=b.createContext(null),$n=b.createContext({outlet:null,matches:[],isDataRoute:!1}),eE=b.createContext(null);function WC(t,e){let{relative:n}=e===void 0?{}:e;hs()||De(!1);let{basename:r,navigator:i}=b.useContext(br),{hash:s,pathname:o,search:c}=nE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:yr([r,o])),i.createHref({pathname:u,search:c,hash:s})}function hs(){return b.useContext(Ac)!=null}function Go(){return hs()||De(!1),b.useContext(Ac).location}function tE(t){b.useContext(br).static||b.useLayoutEffect(t)}function Ot(){let{isDataRoute:t}=b.useContext($n);return t?iN():HC()}function HC(){hs()||De(!1);let t=b.useContext(Vf),{basename:e,future:n,navigator:r}=b.useContext(br),{matches:i}=b.useContext($n),{pathname:s}=Go(),o=JSON.stringify(Of(i,n.v7_relativeSplatPath)),c=b.useRef(!1);return tE(()=>{c.current=!0}),b.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let v=Lf(d,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:yr([e,v.pathname])),(f.replace?r.replace:r.push)(v,f.state,f)},[e,r,o,s,t])}function Mf(){let{matches:t}=b.useContext($n),e=t[t.length-1];return e?e.params:{}}function nE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(br),{matches:i}=b.useContext($n),{pathname:s}=Go(),o=JSON.stringify(Of(i,r.v7_relativeSplatPath));return b.useMemo(()=>Lf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function GC(t,e){return KC(t,e)}function KC(t,e,n,r){hs()||De(!1);let{navigator:i}=b.useContext(br),{matches:s}=b.useContext($n),o=s[s.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Go(),f;if(e){var v;let R=typeof e=="string"?ui(e):e;u==="/"||(v=R.pathname)!=null&&v.startsWith(u)||De(!1),f=R}else f=d;let m=f.pathname||"/",g=m;if(u!=="/"){let R=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(R.length).join("/")}let x=wC(t,{pathname:g}),E=ZC(x&&x.map(R=>Object.assign({},R,{params:Object.assign({},c,R.params),pathname:yr([u,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:yr([u,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r);return e&&E?b.createElement(Ac.Provider,{value:{location:ko({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ar.Pop}},E):E}function QC(){let t=rN(),e=BC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const XC=b.createElement(QC,null);class YC extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement($n.Provider,{value:this.props.routeContext},b.createElement(eE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JC(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(Vf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement($n.Provider,{value:e},r)}function ZC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let f=o.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);f>=0||De(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let v=o[f];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=f),v.route.id){let{loaderData:m,errors:g}=n,x=v.route.loader&&m[v.route.id]===void 0&&(!g||g[v.route.id]===void 0);if(v.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,v,m)=>{let g,x=!1,E=null,R=null;n&&(g=c&&v.route.id?c[v.route.id]:void 0,E=v.route.errorElement||XC,u&&(d<0&&m===0?(sN("route-fallback"),x=!0,R=null):d===m&&(x=!0,R=v.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,m+1)),w=()=>{let I;return g?I=E:x?I=R:v.route.Component?I=b.createElement(v.route.Component,null):v.route.element?I=v.route.element:I=f,b.createElement(JC,{match:v,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:I})};return n&&(v.route.ErrorBoundary||v.route.errorElement||m===0)?b.createElement(YC,{location:n.location,revalidation:n.revalidation,component:E,error:g,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var rE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(rE||{}),iE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(iE||{});function eN(t){let e=b.useContext(Vf);return e||De(!1),e}function tN(t){let e=b.useContext(qC);return e||De(!1),e}function nN(t){let e=b.useContext($n);return e||De(!1),e}function sE(t){let e=nN(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function rN(){var t;let e=b.useContext(eE),n=tN(),r=sE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iN(){let{router:t}=eN(rE.UseNavigateStable),e=sE(iE.UseNavigateStable),n=b.useRef(!1);return tE(()=>{n.current=!0}),b.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ko({fromRouteId:e},s)))},[t,e])}const ov={};function sN(t,e,n){ov[t]||(ov[t]=!0)}function oN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function av(t){let{to:e,replace:n,state:r,relative:i}=t;hs()||De(!1);let{future:s,static:o}=b.useContext(br),{matches:c}=b.useContext($n),{pathname:u}=Go(),d=Ot(),f=Lf(e,Of(c,s.v7_relativeSplatPath),u,i==="path"),v=JSON.stringify(f);return b.useEffect(()=>d(JSON.parse(v),{replace:n,state:r,relative:i}),[d,v,i,n,r]),null}function yt(t){De(!1)}function aN(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ar.Pop,navigator:s,static:o=!1,future:c}=t;hs()&&De(!1);let u=e.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:u,navigator:s,static:o,future:ko({v7_relativeSplatPath:!1},c)}),[u,c,s,o]);typeof r=="string"&&(r=ui(r));let{pathname:f="/",search:v="",hash:m="",state:g=null,key:x="default"}=r,E=b.useMemo(()=>{let R=Df(f,u);return R==null?null:{location:{pathname:R,search:v,hash:m,state:g,key:x},navigationType:i}},[u,f,v,m,g,x,i]);return E==null?null:b.createElement(br.Provider,{value:d},b.createElement(Ac.Provider,{children:n,value:E}))}function lv(t){let{children:e,location:n}=t;return GC(dh(e),n)}new Promise(()=>{});function dh(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){n.push.apply(n,dh(r.props.children,s));return}r.type!==yt&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=dh(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hh(){return hh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hh.apply(this,arguments)}function lN(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function cN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uN(t,e){return t.button===0&&(!e||e==="_self")&&!cN(t)}const dN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hN="6";try{window.__reactRouterVersion=hN}catch{}const fN="startTransition",cv=sS[fN];function pN(t){let{basename:e,children:n,future:r,window:i}=t,s=b.useRef();s.current==null&&(s.current=vC({window:i,v5Compat:!0}));let o=s.current,[c,u]=b.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=b.useCallback(v=>{d&&cv?cv(()=>u(v)):u(v)},[u,d]);return b.useLayoutEffect(()=>o.listen(f),[o,f]),b.useEffect(()=>oN(r),[r]),b.createElement(aN,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const mN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uv=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:v}=e,m=lN(e,dN),{basename:g}=b.useContext(br),x,E=!1;if(typeof d=="string"&&gN.test(d)&&(x=d,mN))try{let I=new URL(window.location.href),S=d.startsWith("//")?new URL(I.protocol+d):new URL(d),O=Df(S.pathname,g);S.origin===I.origin&&O!=null?d=O+S.search+S.hash:E=!0}catch{}let R=WC(d,{relative:i}),y=vN(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:v});function w(I){r&&r(I),I.defaultPrevented||y(I)}return b.createElement("a",hh({},m,{href:x||R,onClick:E||s?r:w,ref:n,target:u}))});var dv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dv||(dv={}));var hv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hv||(hv={}));function vN(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:c}=e===void 0?{}:e,u=Ot(),d=Go(),f=nE(t,{relative:o});return b.useCallback(v=>{if(uN(v,n)){v.preventDefault();let m=r!==void 0?r:Wl(d)===Wl(f);u(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:c})}},[d,u,f,r,i,n,t,s,o,c])}const oE="zerosei_cart";function aE(){try{const t=localStorage.getItem(oE);if(t)return JSON.parse(t)}catch(t){console.error("Error loading cart:",t)}return{items:[],total:0}}function Rc(t){try{localStorage.setItem(oE,JSON.stringify(t))}catch(e){console.error("Error saving cart:",e)}}function Pc(t){const e=t.modifications?t.modifications.reduce((n,r)=>n+r.price,0):0;return t.product.price+e}function Uf(t){return t.reduce((e,n)=>{const r=Pc(n);return e+r*n.quantity},0)}function fv(t){return!t||t.length===0?"":t.map(e=>e.id).sort().join("|")}function lE(t,e,n=1,r,i){const s=fv(i),o=t.items.findIndex(d=>{const f=fv(d.modifications);return d.product.id===e.id&&f===s});let c;o>=0?(c=[...t.items],c[o]={...c[o],quantity:c[o].quantity+n,notes:r?c[o].notes?`${c[o].notes}, ${r}`:r:c[o].notes}):c=[...t.items,{product:e,quantity:n,notes:r,modifications:i}];const u={items:c,total:Uf(c)};return Rc(u),u}function cE(t,e){const n=t.items.filter((i,s)=>s!==e),r={items:n,total:Uf(n)};return Rc(r),r}function yN(t,e,n){if(n<=0)return cE(t,e);const r=t.items.map((s,o)=>o===e?{...s,quantity:n}:s),i={items:r,total:Uf(r)};return Rc(i),i}function _N(){const t={items:[],total:0};return Rc(t),t}function wN(t){return t.items.reduce((e,n)=>e+n.quantity,0)}var pv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},EN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},dE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,v=(s&3)<<4|c>>4;let m=(c&15)<<2|d>>6,g=d&63;u||(g=64,o||(m=64)),r.push(n[f],n[v],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||v==null)throw new TN;const m=s<<2|c>>4;if(r.push(m),d!==64){const g=c<<4&240|d>>2;if(r.push(g),v!==64){const x=d<<6&192|v;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xN=function(t){const e=uE(t);return dE.encodeByteArray(e,!0)},Hl=function(t){return xN(t).replace(/\./g,"")},hE=function(t){try{return dE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=()=>SN().__FIREBASE_DEFAULTS__,CN=()=>{if(typeof process>"u"||typeof pv>"u")return;const t=pv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hE(t[1]);return e&&JSON.parse(e)},kc=()=>{try{return IN()||CN()||NN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fE=t=>{var e,n;return(n=(e=kc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ff=t=>{const e=fE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},pE=()=>{var t;return(t=kc())===null||t===void 0?void 0:t.config},mE=t=>{var e;return(e=kc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hl(JSON.stringify(n)),Hl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function PN(){var t;const e=(t=kc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DN(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ON(){return!PN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LN(){try{return typeof indexedDB=="object"}catch{return!1}}function VN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="FirebaseError";class tn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MN,Object.setPrototypeOf(this,tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ko.prototype.create)}}class Ko{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?UN(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new tn(i,c,r)}}function UN(t,e){return t.replace(FN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FN=/\{\$([^}]+)}/g;function zN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(mv(s)&&mv(o)){if(!Gl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function BN(t,e){const n=new $N(t,e);return n.subscribe.bind(n)}class $N{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=nd),i.error===void 0&&(i.error=nd),i.complete===void 0&&(i.complete=nd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t){return t&&t._delegate?t._delegate:t}class Ln{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GN(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HN(t){return t===Br?void 0:t}function GN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const QN={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},XN=ie.INFO,YN={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},JN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=YN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zf{constructor(e){this.name=e,this._logLevel=XN,this._logHandler=JN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const ZN=(t,e)=>e.some(n=>t instanceof n);let gv,vv;function eA(){return gv||(gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tA(){return vv||(vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vE=new WeakMap,fh=new WeakMap,yE=new WeakMap,rd=new WeakMap,Bf=new WeakMap;function nA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_r(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vE.set(n,t)}).catch(()=>{}),Bf.set(e,t),e}function rA(t){if(fh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});fh.set(t,e)}let ph={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iA(t){ph=t(ph)}function sA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(id(this),e,...n);return yE.set(r,e.sort?e.sort():[e]),_r(r)}:tA().includes(t)?function(...e){return t.apply(id(this),e),_r(vE.get(this))}:function(...e){return _r(t.apply(id(this),e))}}function oA(t){return typeof t=="function"?sA(t):(t instanceof IDBTransaction&&rA(t),ZN(t,eA())?new Proxy(t,ph):t)}function _r(t){if(t instanceof IDBRequest)return nA(t);if(rd.has(t))return rd.get(t);const e=oA(t);return e!==t&&(rd.set(t,e),Bf.set(e,t)),e}const id=t=>Bf.get(t);function aA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),c=_r(o);return r&&o.addEventListener("upgradeneeded",u=>{r(_r(o.result),u.oldVersion,u.newVersion,_r(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const lA=["get","getKey","getAll","getAllKeys","count"],cA=["put","add","delete","clear"],sd=new Map;function yv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sd.get(e))return sd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=cA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lA.includes(n)))return;const s=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return sd.set(e,s),s}iA(t=>({...t,get:(e,n,r)=>yv(e,n)||t.get(e,n,r),has:(e,n)=>!!yv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mh="@firebase/app",_v="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn=new zf("@firebase/app"),hA="@firebase/app-compat",fA="@firebase/analytics-compat",pA="@firebase/analytics",mA="@firebase/app-check-compat",gA="@firebase/app-check",vA="@firebase/auth",yA="@firebase/auth-compat",_A="@firebase/database",wA="@firebase/data-connect",EA="@firebase/database-compat",TA="@firebase/functions",xA="@firebase/functions-compat",SA="@firebase/installations",IA="@firebase/installations-compat",CA="@firebase/messaging",NA="@firebase/messaging-compat",AA="@firebase/performance",RA="@firebase/performance-compat",PA="@firebase/remote-config",kA="@firebase/remote-config-compat",jA="@firebase/storage",bA="@firebase/storage-compat",DA="@firebase/firestore",OA="@firebase/vertexai-preview",LA="@firebase/firestore-compat",VA="firebase",MA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="[DEFAULT]",UA={[mh]:"fire-core",[hA]:"fire-core-compat",[pA]:"fire-analytics",[fA]:"fire-analytics-compat",[gA]:"fire-app-check",[mA]:"fire-app-check-compat",[vA]:"fire-auth",[yA]:"fire-auth-compat",[_A]:"fire-rtdb",[wA]:"fire-data-connect",[EA]:"fire-rtdb-compat",[TA]:"fire-fn",[xA]:"fire-fn-compat",[SA]:"fire-iid",[IA]:"fire-iid-compat",[CA]:"fire-fcm",[NA]:"fire-fcm-compat",[AA]:"fire-perf",[RA]:"fire-perf-compat",[PA]:"fire-rc",[kA]:"fire-rc-compat",[jA]:"fire-gcs",[bA]:"fire-gcs-compat",[DA]:"fire-fst",[LA]:"fire-fst-compat",[OA]:"fire-vertex","fire-js":"fire-js",[VA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new Map,FA=new Map,vh=new Map;function wv(t,e){try{t.container.addComponent(e)}catch(n){Vn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ir(t){const e=t.name;if(vh.has(e))return Vn.debug(`There were multiple attempts to register component ${e}.`),!1;vh.set(e,t);for(const n of Kl.values())wv(n,t);for(const n of FA.values())wv(n,t);return!0}function Xo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new Ko("app","Firebase",zA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=MA;function _E(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw wr.create("bad-app-name",{appName:String(i)});if(n||(n=pE()),!n)throw wr.create("no-options");const s=Kl.get(i);if(s){if(Gl(n,s.options)&&Gl(r,s.config))return s;throw wr.create("duplicate-app",{appName:i})}const o=new KN(i);for(const u of vh.values())o.addComponent(u);const c=new BA(n,r,o);return Kl.set(i,c),c}function jc(t=gh){const e=Kl.get(t);if(!e&&t===gh&&pE())return _E();if(!e)throw wr.create("no-app",{appName:t});return e}function Ft(t,e,n){var r;let i=(r=UA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vn.warn(c.join(" "));return}Ir(new Ln(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="firebase-heartbeat-database",qA=1,jo="firebase-heartbeat-store";let od=null;function wE(){return od||(od=aA($A,qA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jo)}catch(n){console.warn(n)}}}}).catch(t=>{throw wr.create("idb-open",{originalErrorMessage:t.message})})),od}async function WA(t){try{const n=(await wE()).transaction(jo),r=await n.objectStore(jo).get(EE(t));return await n.done,r}catch(e){if(e instanceof tn)Vn.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vn.warn(n.message)}}}async function Ev(t,e){try{const r=(await wE()).transaction(jo,"readwrite");await r.objectStore(jo).put(e,EE(t)),await r.done}catch(n){if(n instanceof tn)Vn.warn(n.message);else{const r=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vn.warn(r.message)}}}function EE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=1024,GA=30*24*60*60*1e3;class KA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Tv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=GA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Vn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tv(),{heartbeatsToSend:r,unsentEntries:i}=QA(this._heartbeatsCache.heartbeats),s=Hl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Vn.warn(n),""}}}function Tv(){return new Date().toISOString().substring(0,10)}function QA(t,e=HA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class XA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LN()?VN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xv(t){return Hl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t){Ir(new Ln("platform-logger",e=>new uA(e),"PRIVATE")),Ir(new Ln("heartbeat",e=>new KA(e),"PRIVATE")),Ft(mh,_v,t),Ft(mh,_v,"esm2017"),Ft("fire-js","")}YA("");var JA="firebase",ZA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft(JA,ZA,"app");var Sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,TE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,_){function A(){}A.prototype=_.prototype,C.D=_.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(P,N,j){for(var k=Array(arguments.length-2),re=2;re<arguments.length;re++)k[re-2]=arguments[re];return _.prototype[N].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,_,A){A||(A=0);var P=Array(16);if(typeof _=="string")for(var N=0;16>N;++N)P[N]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(N=0;16>N;++N)P[N]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=C.g[0],A=C.g[1],N=C.g[2];var j=C.g[3],k=_+(j^A&(N^j))+P[0]+3614090360&4294967295;_=A+(k<<7&4294967295|k>>>25),k=j+(N^_&(A^N))+P[1]+3905402710&4294967295,j=_+(k<<12&4294967295|k>>>20),k=N+(A^j&(_^A))+P[2]+606105819&4294967295,N=j+(k<<17&4294967295|k>>>15),k=A+(_^N&(j^_))+P[3]+3250441966&4294967295,A=N+(k<<22&4294967295|k>>>10),k=_+(j^A&(N^j))+P[4]+4118548399&4294967295,_=A+(k<<7&4294967295|k>>>25),k=j+(N^_&(A^N))+P[5]+1200080426&4294967295,j=_+(k<<12&4294967295|k>>>20),k=N+(A^j&(_^A))+P[6]+2821735955&4294967295,N=j+(k<<17&4294967295|k>>>15),k=A+(_^N&(j^_))+P[7]+4249261313&4294967295,A=N+(k<<22&4294967295|k>>>10),k=_+(j^A&(N^j))+P[8]+1770035416&4294967295,_=A+(k<<7&4294967295|k>>>25),k=j+(N^_&(A^N))+P[9]+2336552879&4294967295,j=_+(k<<12&4294967295|k>>>20),k=N+(A^j&(_^A))+P[10]+4294925233&4294967295,N=j+(k<<17&4294967295|k>>>15),k=A+(_^N&(j^_))+P[11]+2304563134&4294967295,A=N+(k<<22&4294967295|k>>>10),k=_+(j^A&(N^j))+P[12]+1804603682&4294967295,_=A+(k<<7&4294967295|k>>>25),k=j+(N^_&(A^N))+P[13]+4254626195&4294967295,j=_+(k<<12&4294967295|k>>>20),k=N+(A^j&(_^A))+P[14]+2792965006&4294967295,N=j+(k<<17&4294967295|k>>>15),k=A+(_^N&(j^_))+P[15]+1236535329&4294967295,A=N+(k<<22&4294967295|k>>>10),k=_+(N^j&(A^N))+P[1]+4129170786&4294967295,_=A+(k<<5&4294967295|k>>>27),k=j+(A^N&(_^A))+P[6]+3225465664&4294967295,j=_+(k<<9&4294967295|k>>>23),k=N+(_^A&(j^_))+P[11]+643717713&4294967295,N=j+(k<<14&4294967295|k>>>18),k=A+(j^_&(N^j))+P[0]+3921069994&4294967295,A=N+(k<<20&4294967295|k>>>12),k=_+(N^j&(A^N))+P[5]+3593408605&4294967295,_=A+(k<<5&4294967295|k>>>27),k=j+(A^N&(_^A))+P[10]+38016083&4294967295,j=_+(k<<9&4294967295|k>>>23),k=N+(_^A&(j^_))+P[15]+3634488961&4294967295,N=j+(k<<14&4294967295|k>>>18),k=A+(j^_&(N^j))+P[4]+3889429448&4294967295,A=N+(k<<20&4294967295|k>>>12),k=_+(N^j&(A^N))+P[9]+568446438&4294967295,_=A+(k<<5&4294967295|k>>>27),k=j+(A^N&(_^A))+P[14]+3275163606&4294967295,j=_+(k<<9&4294967295|k>>>23),k=N+(_^A&(j^_))+P[3]+4107603335&4294967295,N=j+(k<<14&4294967295|k>>>18),k=A+(j^_&(N^j))+P[8]+1163531501&4294967295,A=N+(k<<20&4294967295|k>>>12),k=_+(N^j&(A^N))+P[13]+2850285829&4294967295,_=A+(k<<5&4294967295|k>>>27),k=j+(A^N&(_^A))+P[2]+4243563512&4294967295,j=_+(k<<9&4294967295|k>>>23),k=N+(_^A&(j^_))+P[7]+1735328473&4294967295,N=j+(k<<14&4294967295|k>>>18),k=A+(j^_&(N^j))+P[12]+2368359562&4294967295,A=N+(k<<20&4294967295|k>>>12),k=_+(A^N^j)+P[5]+4294588738&4294967295,_=A+(k<<4&4294967295|k>>>28),k=j+(_^A^N)+P[8]+2272392833&4294967295,j=_+(k<<11&4294967295|k>>>21),k=N+(j^_^A)+P[11]+1839030562&4294967295,N=j+(k<<16&4294967295|k>>>16),k=A+(N^j^_)+P[14]+4259657740&4294967295,A=N+(k<<23&4294967295|k>>>9),k=_+(A^N^j)+P[1]+2763975236&4294967295,_=A+(k<<4&4294967295|k>>>28),k=j+(_^A^N)+P[4]+1272893353&4294967295,j=_+(k<<11&4294967295|k>>>21),k=N+(j^_^A)+P[7]+4139469664&4294967295,N=j+(k<<16&4294967295|k>>>16),k=A+(N^j^_)+P[10]+3200236656&4294967295,A=N+(k<<23&4294967295|k>>>9),k=_+(A^N^j)+P[13]+681279174&4294967295,_=A+(k<<4&4294967295|k>>>28),k=j+(_^A^N)+P[0]+3936430074&4294967295,j=_+(k<<11&4294967295|k>>>21),k=N+(j^_^A)+P[3]+3572445317&4294967295,N=j+(k<<16&4294967295|k>>>16),k=A+(N^j^_)+P[6]+76029189&4294967295,A=N+(k<<23&4294967295|k>>>9),k=_+(A^N^j)+P[9]+3654602809&4294967295,_=A+(k<<4&4294967295|k>>>28),k=j+(_^A^N)+P[12]+3873151461&4294967295,j=_+(k<<11&4294967295|k>>>21),k=N+(j^_^A)+P[15]+530742520&4294967295,N=j+(k<<16&4294967295|k>>>16),k=A+(N^j^_)+P[2]+3299628645&4294967295,A=N+(k<<23&4294967295|k>>>9),k=_+(N^(A|~j))+P[0]+4096336452&4294967295,_=A+(k<<6&4294967295|k>>>26),k=j+(A^(_|~N))+P[7]+1126891415&4294967295,j=_+(k<<10&4294967295|k>>>22),k=N+(_^(j|~A))+P[14]+2878612391&4294967295,N=j+(k<<15&4294967295|k>>>17),k=A+(j^(N|~_))+P[5]+4237533241&4294967295,A=N+(k<<21&4294967295|k>>>11),k=_+(N^(A|~j))+P[12]+1700485571&4294967295,_=A+(k<<6&4294967295|k>>>26),k=j+(A^(_|~N))+P[3]+2399980690&4294967295,j=_+(k<<10&4294967295|k>>>22),k=N+(_^(j|~A))+P[10]+4293915773&4294967295,N=j+(k<<15&4294967295|k>>>17),k=A+(j^(N|~_))+P[1]+2240044497&4294967295,A=N+(k<<21&4294967295|k>>>11),k=_+(N^(A|~j))+P[8]+1873313359&4294967295,_=A+(k<<6&4294967295|k>>>26),k=j+(A^(_|~N))+P[15]+4264355552&4294967295,j=_+(k<<10&4294967295|k>>>22),k=N+(_^(j|~A))+P[6]+2734768916&4294967295,N=j+(k<<15&4294967295|k>>>17),k=A+(j^(N|~_))+P[13]+1309151649&4294967295,A=N+(k<<21&4294967295|k>>>11),k=_+(N^(A|~j))+P[4]+4149444226&4294967295,_=A+(k<<6&4294967295|k>>>26),k=j+(A^(_|~N))+P[11]+3174756917&4294967295,j=_+(k<<10&4294967295|k>>>22),k=N+(_^(j|~A))+P[2]+718787259&4294967295,N=j+(k<<15&4294967295|k>>>17),k=A+(j^(N|~_))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+j&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var A=_-this.blockSize,P=this.B,N=this.h,j=0;j<_;){if(N==0)for(;j<=A;)i(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<_;)if(P[N++]=C.charCodeAt(j++),N==this.blockSize){i(this,P),N=0;break}}else for(;j<_;)if(P[N++]=C[j++],N==this.blockSize){i(this,P),N=0;break}}this.h=N,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var A=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=A&255,A/=256;for(this.u(C),C=Array(16),_=A=0;4>_;++_)for(var P=0;32>P;P+=8)C[A++]=this.g[_]>>>P&255;return C};function s(C,_){var A=c;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=_(C)}function o(C,_){this.h=_;for(var A=[],P=!0,N=C.length-1;0<=N;N--){var j=C[N]|0;P&&j==_||(A[N]=j,P=!1)}this.g=A}var c={};function u(C){return-128<=C&&128>C?s(C,function(_){return new o([_|0],0>_?-1:0)}):new o([C|0],0>C?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return v;if(0>C)return R(d(-C));for(var _=[],A=1,P=0;C>=A;P++)_[P]=C/A|0,A*=4294967296;return new o(_,0)}function f(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return R(f(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(_,8)),P=v,N=0;N<C.length;N+=8){var j=Math.min(8,C.length-N),k=parseInt(C.substring(N,N+j),_);8>j?(j=d(Math.pow(_,j)),P=P.j(j).add(d(k))):(P=P.j(A),P=P.add(d(k)))}return P}var v=u(0),m=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-R(this).m();for(var C=0,_=1,A=0;A<this.g.length;A++){var P=this.i(A);C+=(0<=P?P:4294967296+P)*_,_*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x(this))return"0";if(E(this))return"-"+R(this).toString(C);for(var _=d(Math.pow(C,6)),A=this,P="";;){var N=S(A,_).g;A=y(A,N.j(_));var j=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=N,x(A))return j+P;for(;6>j.length;)j="0"+j;P=j+P}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function x(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function E(C){return C.h==-1}t.l=function(C){return C=y(this,C),E(C)?-1:x(C)?0:1};function R(C){for(var _=C.g.length,A=[],P=0;P<_;P++)A[P]=~C.g[P];return new o(A,~C.h).add(m)}t.abs=function(){return E(this)?R(this):this},t.add=function(C){for(var _=Math.max(this.g.length,C.g.length),A=[],P=0,N=0;N<=_;N++){var j=P+(this.i(N)&65535)+(C.i(N)&65535),k=(j>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);P=k>>>16,j&=65535,k&=65535,A[N]=k<<16|j}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(C,_){return C.add(R(_))}t.j=function(C){if(x(this)||x(C))return v;if(E(this))return E(C)?R(this).j(R(C)):R(R(this).j(C));if(E(C))return R(this.j(R(C)));if(0>this.l(g)&&0>C.l(g))return d(this.m()*C.m());for(var _=this.g.length+C.g.length,A=[],P=0;P<2*_;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<C.g.length;N++){var j=this.i(P)>>>16,k=this.i(P)&65535,re=C.i(N)>>>16,mn=C.i(N)&65535;A[2*P+2*N]+=k*mn,w(A,2*P+2*N),A[2*P+2*N+1]+=j*mn,w(A,2*P+2*N+1),A[2*P+2*N+1]+=k*re,w(A,2*P+2*N+1),A[2*P+2*N+2]+=j*re,w(A,2*P+2*N+2)}for(P=0;P<_;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=_;P<2*_;P++)A[P]=0;return new o(A,0)};function w(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function I(C,_){this.g=C,this.h=_}function S(C,_){if(x(_))throw Error("division by zero");if(x(C))return new I(v,v);if(E(C))return _=S(R(C),_),new I(R(_.g),R(_.h));if(E(_))return _=S(C,R(_)),new I(R(_.g),_.h);if(30<C.g.length){if(E(C)||E(_))throw Error("slowDivide_ only works with positive integers.");for(var A=m,P=_;0>=P.l(C);)A=O(A),P=O(P);var N=D(A,1),j=D(P,1);for(P=D(P,2),A=D(A,2);!x(P);){var k=j.add(P);0>=k.l(C)&&(N=N.add(A),j=k),P=D(P,1),A=D(A,1)}return _=y(C,N.j(_)),new I(N,_)}for(N=v;0<=C.l(_);){for(A=Math.max(1,Math.floor(C.m()/_.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),j=d(A),k=j.j(_);E(k)||0<k.l(C);)A-=P,j=d(A),k=j.j(_);x(j)&&(j=m),N=N.add(j),C=y(C,k)}return new I(N,C)}t.A=function(C){return S(this,C).h},t.and=function(C){for(var _=Math.max(this.g.length,C.g.length),A=[],P=0;P<_;P++)A[P]=this.i(P)&C.i(P);return new o(A,this.h&C.h)},t.or=function(C){for(var _=Math.max(this.g.length,C.g.length),A=[],P=0;P<_;P++)A[P]=this.i(P)|C.i(P);return new o(A,this.h|C.h)},t.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),A=[],P=0;P<_;P++)A[P]=this.i(P)^C.i(P);return new o(A,this.h^C.h)};function O(C){for(var _=C.g.length+1,A=[],P=0;P<_;P++)A[P]=C.i(P)<<1|C.i(P-1)>>>31;return new o(A,C.h)}function D(C,_){var A=_>>5;_%=32;for(var P=C.g.length-A,N=[],j=0;j<P;j++)N[j]=0<_?C.i(j+A)>>>_|C.i(j+A+1)<<32-_:C.i(j+A);return new o(N,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,TE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Qr=o}).apply(typeof Sv<"u"?Sv:typeof self<"u"?self:typeof window<"u"?window:{});var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xE,Gs,SE,dl,yh,IE,CE,NE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof qa=="object"&&qa];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var L=l[T];if(!(L in p))break e;p=p[L]}l=l[l.length-1],T=p[l],h=h(T),h!=T&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var p=0,T=!1,L={next:function(){if(!T&&p<l.length){var V=p++;return{value:h(V,l[V]),done:!1}}return T=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function v(l,h,p){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),l.apply(h,L)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:v,m.apply(null,arguments)}function g(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function x(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(T,L,V){for(var z=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)z[fe-2]=arguments[fe];return h.prototype[L].apply(T,z)}}function E(l){const h=l.length;if(0<h){const p=Array(h);for(let T=0;T<h;T++)p[T]=l[T];return p}return[]}function R(l,h){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(u(T)){const L=l.length||0,V=T.length||0;l.length=L+V;for(let z=0;z<V;z++)l[L+z]=T[z]}else l.push(T)}}class y{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(l){return/^[\s\xa0]*$/.test(l)}function I(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function S(l){return S[" "](l),l}S[" "]=function(){};var O=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function D(l,h,p){for(const T in l)h.call(p,l[T],T,l)}function C(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function _(l){const h={};for(const p in l)h[p]=l[p];return h}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,h){let p,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(p in T)l[p]=T[p];for(let V=0;V<A.length;V++)p=A[V],Object.prototype.hasOwnProperty.call(T,p)&&(l[p]=T[p])}}function N(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function j(l){c.setTimeout(()=>{throw l},0)}function k(){var l=X;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class re{constructor(){this.h=this.g=null}add(h,p){const T=mn.get();T.set(h,p),this.h?this.h.next=T:this.g=T,this.h=T}}var mn=new y(()=>new nn,l=>l.reset());class nn{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let gn,B=!1,X=new re,Z=()=>{const l=c.Promise.resolve(void 0);gn=()=>{l.then(we)}};var we=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(p){j(p)}var h=mn;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var vn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function yn(l,h){if(ke.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(O){e:{try{S(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:_n[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&yn.aa.h.call(this)}}x(yn,ke);var _n={2:"touch",3:"pen",4:"mouse"};yn.prototype.h=function(){yn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var wn="closure_listenable_"+(1e6*Math.random()|0),dx=0;function hx(l,h,p,T,L){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!T,this.ha=L,this.key=++dx,this.da=this.fa=!1}function ca(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ua(l){this.src=l,this.g={},this.h=0}ua.prototype.add=function(l,h,p,T,L){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var z=au(l,h,T,L);return-1<z?(h=l[z],p||(h.fa=!1)):(h=new hx(h,this.src,V,!!T,L),h.fa=p,l.push(h)),h};function ou(l,h){var p=h.type;if(p in l.g){var T=l.g[p],L=Array.prototype.indexOf.call(T,h,void 0),V;(V=0<=L)&&Array.prototype.splice.call(T,L,1),V&&(ca(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function au(l,h,p,T){for(var L=0;L<l.length;++L){var V=l[L];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==T)return L}return-1}var lu="closure_lm_"+(1e6*Math.random()|0),cu={};function Gp(l,h,p,T,L){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Gp(l,h[V],p,T,L);return null}return p=Xp(p),l&&l[wn]?l.K(h,p,d(T)?!!T.capture:!1,L):fx(l,h,p,!1,T,L)}function fx(l,h,p,T,L,V){if(!h)throw Error("Invalid event type");var z=d(L)?!!L.capture:!!L,fe=du(l);if(fe||(l[lu]=fe=new ua(l)),p=fe.add(h,p,T,z,V),p.proxy)return p;if(T=px(),p.proxy=T,T.src=l,T.listener=p,l.addEventListener)vn||(L=z),L===void 0&&(L=!1),l.addEventListener(h.toString(),T,L);else if(l.attachEvent)l.attachEvent(Qp(h.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function px(){function l(p){return h.call(l.src,l.listener,p)}const h=mx;return l}function Kp(l,h,p,T,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)Kp(l,h[V],p,T,L);else T=d(T)?!!T.capture:!!T,p=Xp(p),l&&l[wn]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],p=au(V,p,T,L),-1<p&&(ca(V[p]),Array.prototype.splice.call(V,p,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=du(l))&&(h=l.g[h.toString()],l=-1,h&&(l=au(h,p,T,L)),(p=-1<l?h[l]:null)&&uu(p))}function uu(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[wn])ou(h.i,l);else{var p=l.type,T=l.proxy;h.removeEventListener?h.removeEventListener(p,T,l.capture):h.detachEvent?h.detachEvent(Qp(p),T):h.addListener&&h.removeListener&&h.removeListener(T),(p=du(h))?(ou(p,l),p.h==0&&(p.src=null,h[lu]=null)):ca(l)}}}function Qp(l){return l in cu?cu[l]:cu[l]="on"+l}function mx(l,h){if(l.da)l=!0;else{h=new yn(h,this);var p=l.listener,T=l.ha||l.src;l.fa&&uu(l),l=p.call(T,h)}return l}function du(l){return l=l[lu],l instanceof ua?l:null}var hu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xp(l){return typeof l=="function"?l:(l[hu]||(l[hu]=function(h){return l.handleEvent(h)}),l[hu])}function Je(){he.call(this),this.i=new ua(this),this.M=this,this.F=null}x(Je,he),Je.prototype[wn]=!0,Je.prototype.removeEventListener=function(l,h,p,T){Kp(this,l,h,p,T)};function ut(l,h){var p,T=l.F;if(T)for(p=[];T;T=T.F)p.push(T);if(l=l.M,T=h.type||h,typeof h=="string")h=new ke(h,l);else if(h instanceof ke)h.target=h.target||l;else{var L=h;h=new ke(T,l),P(h,L)}if(L=!0,p)for(var V=p.length-1;0<=V;V--){var z=h.g=p[V];L=da(z,T,!0,h)&&L}if(z=h.g=l,L=da(z,T,!0,h)&&L,L=da(z,T,!1,h)&&L,p)for(V=0;V<p.length;V++)z=h.g=p[V],L=da(z,T,!1,h)&&L}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],T=0;T<p.length;T++)ca(p[T]);delete l.g[h],l.h--}}this.F=null},Je.prototype.K=function(l,h,p,T){return this.i.add(String(l),h,!1,p,T)},Je.prototype.L=function(l,h,p,T){return this.i.add(String(l),h,!0,p,T)};function da(l,h,p,T){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,V=0;V<h.length;++V){var z=h[V];if(z&&!z.da&&z.capture==p){var fe=z.listener,$e=z.ha||z.src;z.fa&&ou(l.i,z),L=fe.call($e,T)!==!1&&L}}return L&&!T.defaultPrevented}function Yp(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Jp(l){l.g=Yp(()=>{l.g=null,l.i&&(l.i=!1,Jp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class gx extends he{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Jp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(l){he.call(this),this.h=l,this.g={}}x(ys,he);var Zp=[];function em(l){D(l.g,function(h,p){this.g.hasOwnProperty(p)&&uu(h)},l),l.g={}}ys.prototype.N=function(){ys.aa.N.call(this),em(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fu=c.JSON.stringify,vx=c.JSON.parse,yx=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function pu(){}pu.prototype.h=null;function tm(l){return l.h||(l.h=l.i())}function nm(){}var _s={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mu(){ke.call(this,"d")}x(mu,ke);function gu(){ke.call(this,"c")}x(gu,ke);var Lr={},rm=null;function ha(){return rm=rm||new Je}Lr.La="serverreachability";function im(l){ke.call(this,Lr.La,l)}x(im,ke);function ws(l){const h=ha();ut(h,new im(h))}Lr.STAT_EVENT="statevent";function sm(l,h){ke.call(this,Lr.STAT_EVENT,l),this.stat=h}x(sm,ke);function dt(l){const h=ha();ut(h,new sm(h,l))}Lr.Ma="timingevent";function om(l,h){ke.call(this,Lr.Ma,l),this.size=h}x(om,ke);function Es(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Ts(){this.g=!0}Ts.prototype.xa=function(){this.g=!1};function _x(l,h,p,T,L,V){l.info(function(){if(l.g)if(V)for(var z="",fe=V.split("&"),$e=0;$e<fe.length;$e++){var le=fe[$e].split("=");if(1<le.length){var Ze=le[0];le=le[1];var et=Ze.split("_");z=2<=et.length&&et[1]=="type"?z+(Ze+"="+le+"&"):z+(Ze+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+h+`
`+p+`
`+z})}function wx(l,h,p,T,L,V,z){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+h+`
`+p+`
`+V+" "+z})}function gi(l,h,p,T){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Tx(l,p)+(T?" "+T:"")})}function Ex(l,h){l.info(function(){return"TIMEOUT: "+h})}Ts.prototype.info=function(){};function Tx(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var T=p[l];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return fu(p)}catch{return h}}var fa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},am={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vu;function pa(){}x(pa,pu),pa.prototype.g=function(){return new XMLHttpRequest},pa.prototype.i=function(){return{}},vu=new pa;function Wn(l,h,p,T){this.j=l,this.i=h,this.l=p,this.R=T||1,this.U=new ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lm}function lm(){this.i=null,this.g="",this.h=!1}var cm={},yu={};function _u(l,h,p){l.L=1,l.v=ya(En(h)),l.m=p,l.P=!0,um(l,null)}function um(l,h){l.F=Date.now(),ma(l),l.A=En(l.v);var p=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Sm(p.i,"t",T),l.C=0,p=l.j.J,l.h=new lm,l.g=Bm(l.j,p?h:null,!l.m),0<l.O&&(l.M=new gx(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,T=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Zp[0]=L.toString()),L=Zp);for(var V=0;V<L.length;V++){var z=Gp(p,L[V],T||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),ws(),_x(l.i,l.u,l.A,l.l,l.R,l.m)}Wn.prototype.ca=function(l){l=l.target;const h=this.M;h&&Tn(l)==3?h.j():this.Y(l)},Wn.prototype.Y=function(l){try{if(l==this.g)e:{const et=Tn(this.g);var h=this.g.Ba();const _i=this.g.Z();if(!(3>et)&&(et!=3||this.g&&(this.h.h||this.g.oa()||km(this.g)))){this.J||et!=4||h==7||(h==8||0>=_i?ws(3):ws(2)),wu(this);var p=this.g.Z();this.X=p;t:if(dm(this)){var T=km(this.g);l="";var L=T.length,V=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),xs(this);var z="";break t}this.h.i=new c.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,l+=this.h.i.decode(T[h],{stream:!(V&&h==L-1)});T.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=p==200,wx(this.i,this.u,this.A,this.l,this.R,et,p),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,$e=this.g;if((fe=$e.g?$e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(fe)){var le=fe;break t}}le=null}if(p=le)gi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eu(this,p);else{this.o=!1,this.s=3,dt(12),Vr(this),xs(this);break e}}if(this.P){p=!0;let Wt;for(;!this.J&&this.C<z.length;)if(Wt=xx(this,z),Wt==yu){et==4&&(this.s=4,dt(14),p=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==cm){this.s=4,dt(15),gi(this.i,this.l,z,"[Invalid Chunk]"),p=!1;break}else gi(this.i,this.l,Wt,null),Eu(this,Wt);if(dm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||z.length!=0||this.h.h||(this.s=1,dt(16),p=!1),this.o=this.o&&p,!p)gi(this.i,this.l,z,"[Invalid Chunked Response]"),Vr(this),xs(this);else if(0<z.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Nu(Ze),Ze.M=!0,dt(11))}}else gi(this.i,this.l,z,null),Eu(this,z);et==4&&Vr(this),this.o&&!this.J&&(et==4?Mm(this.j,this):(this.o=!1,ma(this)))}else Fx(this.g),p==400&&0<z.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Vr(this),xs(this)}}}catch{}finally{}};function dm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function xx(l,h){var p=l.C,T=h.indexOf(`
`,p);return T==-1?yu:(p=Number(h.substring(p,T)),isNaN(p)?cm:(T+=1,T+p>h.length?yu:(h=h.slice(T,T+p),l.C=T+p,h)))}Wn.prototype.cancel=function(){this.J=!0,Vr(this)};function ma(l){l.S=Date.now()+l.I,hm(l,l.I)}function hm(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Es(m(l.ba,l),h)}function wu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Wn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ex(this.i,this.A),this.L!=2&&(ws(),dt(17)),Vr(this),this.s=2,xs(this)):hm(this,this.S-l)};function xs(l){l.j.G==0||l.J||Mm(l.j,l)}function Vr(l){wu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,em(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Eu(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Tu(p.h,l))){if(!l.K&&Tu(p.h,l)&&p.G==3){try{var T=p.Da.g.parse(h)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Sa(p),Ta(p);else break e;Cu(p),dt(18)}}else p.za=L[1],0<p.za-p.T&&37500>L[2]&&p.F&&p.v==0&&!p.C&&(p.C=Es(m(p.Za,p),6e3));if(1>=mm(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ur(p,11)}else if((l.K||p.g==l)&&Sa(p),!w(h))for(L=p.Da.g.parse(h),h=0;h<L.length;h++){let le=L[h];if(p.T=le[0],le=le[1],p.G==2)if(le[0]=="c"){p.K=le[1],p.ia=le[2];const Ze=le[3];Ze!=null&&(p.la=Ze,p.j.info("VER="+p.la));const et=le[4];et!=null&&(p.Aa=et,p.j.info("SVER="+p.Aa));const _i=le[5];_i!=null&&typeof _i=="number"&&0<_i&&(T=1.5*_i,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const Wt=l.g;if(Wt){const Ca=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ca){var V=T.h;V.g||Ca.indexOf("spdy")==-1&&Ca.indexOf("quic")==-1&&Ca.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(xu(V,V.h),V.h=null))}if(T.D){const Au=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Au&&(T.ya=Au,me(T.I,T.D,Au))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var z=l;if(T.qa=zm(T,T.J?T.ia:null,T.W),z.K){gm(T.h,z);var fe=z,$e=T.L;$e&&(fe.I=$e),fe.B&&(wu(fe),ma(fe)),T.g=z}else Lm(T);0<p.i.length&&xa(p)}else le[0]!="stop"&&le[0]!="close"||Ur(p,7);else p.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Ur(p,7):Iu(p):le[0]!="noop"&&p.l&&p.l.ta(le),p.v=0)}}ws(4)}catch{}}var Sx=class{constructor(l,h){this.g=l,this.map=h}};function fm(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function mm(l){return l.h?1:l.g?l.g.size:0}function Tu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function xu(l,h){l.g?l.g.add(h):l.h=h}function gm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}fm.prototype.cancel=function(){if(this.i=vm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function vm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return E(l.i)}function Ix(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,T=0;T<p;T++)h.push(l[T]);return h}h=[],p=0;for(T in l)h[p++]=l[T];return h}function Cx(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const T in l)h[p++]=T;return h}}}function ym(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=Cx(l),T=Ix(l),L=T.length,V=0;V<L;V++)h.call(void 0,T[V],p&&p[V],l)}var _m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nx(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var T=l[p].indexOf("="),L=null;if(0<=T){var V=l[p].substring(0,T);L=l[p].substring(T+1)}else V=l[p];h(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Mr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Mr){this.h=l.h,ga(this,l.j),this.o=l.o,this.g=l.g,va(this,l.s),this.l=l.l;var h=l.i,p=new Cs;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),wm(this,p),this.m=l.m}else l&&(h=String(l).match(_m))?(this.h=!1,ga(this,h[1]||"",!0),this.o=Ss(h[2]||""),this.g=Ss(h[3]||"",!0),va(this,h[4]),this.l=Ss(h[5]||"",!0),wm(this,h[6]||"",!0),this.m=Ss(h[7]||"")):(this.h=!1,this.i=new Cs(null,this.h))}Mr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Is(h,Em,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Is(h,Em,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Is(p,p.charAt(0)=="/"?Px:Rx,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Is(p,jx)),l.join("")};function En(l){return new Mr(l)}function ga(l,h,p){l.j=p?Ss(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function va(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function wm(l,h,p){h instanceof Cs?(l.i=h,bx(l.i,l.h)):(p||(h=Is(h,kx)),l.i=new Cs(h,l.h))}function me(l,h,p){l.i.set(h,p)}function ya(l){return me(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ss(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Is(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,Ax),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ax(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Em=/[#\/\?@]/g,Rx=/[#\?:]/g,Px=/[#\?]/g,kx=/[#\?@]/g,jx=/#/g;function Cs(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Hn(l){l.g||(l.g=new Map,l.h=0,l.i&&Nx(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Cs.prototype,t.add=function(l,h){Hn(this),this.i=null,l=vi(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Tm(l,h){Hn(l),h=vi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function xm(l,h){return Hn(l),h=vi(l,h),l.g.has(h)}t.forEach=function(l,h){Hn(this),this.g.forEach(function(p,T){p.forEach(function(L){l.call(h,L,T,this)},this)},this)},t.na=function(){Hn(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let T=0;T<h.length;T++){const L=l[T];for(let V=0;V<L.length;V++)p.push(h[T])}return p},t.V=function(l){Hn(this);let h=[];if(typeof l=="string")xm(this,l)&&(h=h.concat(this.g.get(vi(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return Hn(this),this.i=null,l=vi(this,l),xm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Sm(l,h,p){Tm(l,h),0<p.length&&(l.i=null,l.g.set(vi(l,h),E(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var T=h[p];const V=encodeURIComponent(String(T)),z=this.V(T);for(T=0;T<z.length;T++){var L=V;z[T]!==""&&(L+="="+encodeURIComponent(String(z[T]))),l.push(L)}}return this.i=l.join("&")};function vi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function bx(l,h){h&&!l.j&&(Hn(l),l.i=null,l.g.forEach(function(p,T){var L=T.toLowerCase();T!=L&&(Tm(this,T),Sm(this,L,p))},l)),l.j=h}function Dx(l,h){const p=new Ts;if(c.Image){const T=new Image;T.onload=g(Gn,p,"TestLoadImage: loaded",!0,h,T),T.onerror=g(Gn,p,"TestLoadImage: error",!1,h,T),T.onabort=g(Gn,p,"TestLoadImage: abort",!1,h,T),T.ontimeout=g(Gn,p,"TestLoadImage: timeout",!1,h,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else h(!1)}function Ox(l,h){const p=new Ts,T=new AbortController,L=setTimeout(()=>{T.abort(),Gn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:T.signal}).then(V=>{clearTimeout(L),V.ok?Gn(p,"TestPingServer: ok",!0,h):Gn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),Gn(p,"TestPingServer: error",!1,h)})}function Gn(l,h,p,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(p)}catch{}}function Lx(){this.g=new yx}function Vx(l,h,p){const T=p||"";try{ym(l,function(L,V){let z=L;d(L)&&(z=fu(L)),h.push(T+V+"="+encodeURIComponent(z))})}catch(L){throw h.push(T+"type="+encodeURIComponent("_badmap")),L}}function _a(l){this.l=l.Ub||null,this.j=l.eb||!1}x(_a,pu),_a.prototype.g=function(){return new wa(this.l,this.j)},_a.prototype.i=function(l){return function(){return l}}({});function wa(l,h){Je.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(wa,Je),t=wa.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,As(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ns(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,As(this)),this.g&&(this.readyState=3,As(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Im(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Im(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ns(this):As(this),this.readyState==3&&Im(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ns(this))},t.Qa=function(l){this.g&&(this.response=l,Ns(this))},t.ga=function(){this.g&&Ns(this)};function Ns(l){l.readyState=4,l.l=null,l.j=null,l.v=null,As(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function As(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Cm(l){let h="";return D(l,function(p,T){h+=T,h+=":",h+=p,h+=`\r
`}),h}function Su(l,h,p){e:{for(T in p){var T=!1;break e}T=!0}T||(p=Cm(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):me(l,h,p))}function Ce(l){Je.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ce,Je);var Mx=/^https?$/i,Ux=["POST","PUT"];t=Ce.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vu.g(),this.v=this.o?tm(this.o):tm(vu),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){Nm(this,V);return}if(l=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)p.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const V of T.keys())p.set(V,T.get(V));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),L=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ux,h,void 0))||T||L||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of p)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pm(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Nm(this,V)}};function Nm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Am(l),Ea(l)}function Am(l){l.A||(l.A=!0,ut(l,"complete"),ut(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ut(this,"complete"),ut(this,"abort"),Ea(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ea(this,!0)),Ce.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rm(this):this.bb())},t.bb=function(){Rm(this)};function Rm(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Tn(l)!=4||l.Z()!=2)){if(l.u&&Tn(l)==4)Yp(l.Ea,0,l);else if(ut(l,"readystatechange"),Tn(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var T;if(T=z===0){var L=String(l.D).match(_m)[1]||null;!L&&c.self&&c.self.location&&(L=c.self.location.protocol.slice(0,-1)),T=!Mx.test(L?L.toLowerCase():"")}p=T}if(p)ut(l,"complete"),ut(l,"success");else{l.m=6;try{var V=2<Tn(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",Am(l)}}finally{Ea(l)}}}}function Ea(l,h){if(l.g){Pm(l);const p=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||ut(l,"ready");try{p.onreadystatechange=T}catch{}}}function Pm(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Tn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),vx(h)}};function km(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Fx(l){const h={};l=(l.g&&2<=Tn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(w(l[T]))continue;var p=N(l[T]);const L=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=h[L]||[];h[L]=V,V.push(p)}C(h,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rs(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function jm(l){this.Aa=0,this.i=[],this.j=new Ts,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rs("baseRetryDelayMs",5e3,l),this.cb=Rs("retryDelaySeedMs",1e4,l),this.Wa=Rs("forwardChannelMaxRetries",2,l),this.wa=Rs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new fm(l&&l.concurrentRequestLimit),this.Da=new Lx,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jm.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,T){dt(0),this.W=l,this.H=h||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=zm(this,null,this.W),xa(this)};function Iu(l){if(bm(l),l.G==3){var h=l.U++,p=En(l.I);if(me(p,"SID",l.K),me(p,"RID",h),me(p,"TYPE","terminate"),Ps(l,p),h=new Wn(l,l.j,h),h.L=2,h.v=ya(En(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=Bm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ma(h)}Fm(l)}function Ta(l){l.g&&(Nu(l),l.g.cancel(),l.g=null)}function bm(l){Ta(l),l.u&&(c.clearTimeout(l.u),l.u=null),Sa(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function xa(l){if(!pm(l.h)&&!l.s){l.s=!0;var h=l.Ga;gn||Z(),B||(gn(),B=!0),X.add(h,l),l.B=0}}function zx(l,h){return mm(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Es(m(l.Ga,l,h),Um(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Wn(this,this.j,l);let V=this.o;if(this.S&&(V?(V=_(V),P(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(h+=T,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Om(this,L,h),p=En(this.I),me(p,"RID",l),me(p,"CVER",22),this.D&&me(p,"X-HTTP-Session-Id",this.D),Ps(this,p),V&&(this.O?h="headers="+encodeURIComponent(String(Cm(V)))+"&"+h:this.m&&Su(p,this.m,V)),xu(this.h,L),this.Ua&&me(p,"TYPE","init"),this.P?(me(p,"$req",h),me(p,"SID","null"),L.T=!0,_u(L,p,null)):_u(L,p,h),this.G=2}}else this.G==3&&(l?Dm(this,l):this.i.length==0||pm(this.h)||Dm(this))};function Dm(l,h){var p;h?p=h.l:p=l.U++;const T=En(l.I);me(T,"SID",l.K),me(T,"RID",p),me(T,"AID",l.T),Ps(l,T),l.m&&l.o&&Su(T,l.m,l.o),p=new Wn(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Om(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),xu(l.h,p),_u(p,T,h)}function Ps(l,h){l.H&&D(l.H,function(p,T){me(h,T,p)}),l.l&&ym({},function(p,T){me(h,T,p)})}function Om(l,h,p){p=Math.min(l.i.length,p);var T=l.l?m(l.l.Na,l.l,l):null;e:{var L=l.i;let V=-1;for(;;){const z=["count="+p];V==-1?0<p?(V=L[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let fe=!0;for(let $e=0;$e<p;$e++){let le=L[$e].g;const Ze=L[$e].map;if(le-=V,0>le)V=Math.max(0,L[$e].g-100),fe=!1;else try{Vx(Ze,z,"req"+le+"_")}catch{T&&T(Ze)}}if(fe){T=z.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,T}function Lm(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;gn||Z(),B||(gn(),B=!0),X.add(h,l),l.v=0}}function Cu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Es(m(l.Fa,l),Um(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Vm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Es(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Ta(this),Vm(this))};function Nu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Vm(l){l.g=new Wn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=En(l.qa);me(h,"RID","rpc"),me(h,"SID",l.K),me(h,"AID",l.T),me(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&me(h,"TO",l.ja),me(h,"TYPE","xmlhttp"),Ps(l,h),l.m&&l.o&&Su(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=ya(En(h)),p.m=null,p.P=!0,um(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Ta(this),Cu(this),dt(19))};function Sa(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Mm(l,h){var p=null;if(l.g==h){Sa(l),Nu(l),l.g=null;var T=2}else if(Tu(l.h,h))p=h.D,gm(l.h,h),T=1;else return;if(l.G!=0){if(h.o)if(T==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var L=l.B;T=ha(),ut(T,new om(T,p)),xa(l)}else Lm(l);else if(L=h.s,L==3||L==0&&0<h.X||!(T==1&&zx(l,h)||T==2&&Cu(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),L){case 1:Ur(l,5);break;case 4:Ur(l,10);break;case 3:Ur(l,6);break;default:Ur(l,2)}}}function Um(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Ur(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),T=l.Xa;const L=!T;T=new Mr(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ga(T,"https"),ya(T),L?Dx(T.toString(),p):Ox(T.toString(),p)}else dt(2);l.G=0,l.l&&l.l.sa(h),Fm(l),bm(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Fm(l){if(l.G=0,l.ka=[],l.l){const h=vm(l.h);(h.length!=0||l.i.length!=0)&&(R(l.ka,h),R(l.ka,l.i),l.h.i.length=0,E(l.i),l.i.length=0),l.l.ra()}}function zm(l,h,p){var T=p instanceof Mr?En(p):new Mr(p);if(T.g!="")h&&(T.g=h+"."+T.g),va(T,T.s);else{var L=c.location;T=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var V=new Mr(null);T&&ga(V,T),h&&(V.g=h),L&&va(V,L),p&&(V.l=p),T=V}return p=l.D,h=l.ya,p&&h&&me(T,p,h),me(T,"VER",l.la),Ps(l,T),T}function Bm(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ce(new _a({eb:p})):new Ce(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $m(){}t=$m.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ia(){}Ia.prototype.g=function(l,h){return new It(l,h)};function It(l,h){Je.call(this),this.g=new jm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!w(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new yi(this)}x(It,Je),It.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){Iu(this.g)},It.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=fu(l),l=p);h.i.push(new Sx(h.Ya++,l)),h.G==3&&xa(h)},It.prototype.N=function(){this.g.l=null,delete this.j,Iu(this.g),delete this.g,It.aa.N.call(this)};function qm(l){mu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}x(qm,mu);function Wm(){gu.call(this),this.status=1}x(Wm,gu);function yi(l){this.g=l}x(yi,$m),yi.prototype.ua=function(){ut(this.g,"a")},yi.prototype.ta=function(l){ut(this.g,new qm(l))},yi.prototype.sa=function(l){ut(this.g,new Wm)},yi.prototype.ra=function(){ut(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,NE=function(){return new Ia},CE=function(){return ha()},IE=Lr,yh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fa.NO_ERROR=0,fa.TIMEOUT=8,fa.HTTP_ERROR=6,dl=fa,am.COMPLETE="complete",SE=am,nm.EventType=_s,_s.OPEN="a",_s.CLOSE="b",_s.ERROR="c",_s.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Gs=nm,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,xE=Ce}).apply(typeof qa<"u"?qa:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new zf("@firebase/firestore");function Us(){return ri.logLevel}function W(t,...e){if(ri.logLevel<=ie.DEBUG){const n=e.map($f);ri.debug(`Firestore (${fs}): ${t}`,...n)}}function Mn(t,...e){if(ri.logLevel<=ie.ERROR){const n=e.map($f);ri.error(`Firestore (${fs}): ${t}`,...n)}}function ts(t,...e){if(ri.logLevel<=ie.WARN){const n=e.map($f);ri.warn(`Firestore (${fs}): ${t}`,...n)}}function $f(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${fs}) INTERNAL ASSERTION FAILED: `+t;throw Mn(e),new Error(e)}function de(t,e){t||Q()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends tn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}}class tR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nR{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new AE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new it(e)}}class rR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){de(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new sR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=aR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function ns(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ee.fromMillis(Date.now())}static fromDate(e){return ee.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ee(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new ee(0,0))}static max(){return new Y(new ee(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return bo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends bo{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const lR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends bo{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return lR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new $(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new $(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(ve.fromString(e))}static fromName(e){return new G(ve.fromString(e).popFirst(5))}static empty(){return new G(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new ve(e.slice()))}}function cR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new ee(n+1,0):new ee(n,r));return new Cr(i,G.empty(),e)}function uR(t){return new Cr(t.readTime,t.key,-1)}class Cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cr(Y.min(),G.empty(),-1)}static max(){return new Cr(Y.max(),G.empty(),-1)}}function dR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==hR)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function pR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}qf.oe=-1;function bc(t){return t==null}function Ql(t){return t===0&&1/t==-1/0}function mR(t){return typeof t=="number"&&Number.isInteger(t)&&!Ql(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||We.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,We.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,We.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wa(this.root,e,this.comparator,!0)}}class Wa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class We{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??We.RED,this.left=i??We.EMPTY,this.right=s??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new We(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return We.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new We(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nv(this.data.getIterator())}getIteratorFrom(e){return new Nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class Nv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new At([])}unionWith(e){let n=new Qe(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new At(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new kE("Invalid base64 string: "+s):s}}(e);return new Ye(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ye(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const gR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(de(!!t),typeof t=="string"){let e=0;const n=gR.exec(t);if(de(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ii(t){return typeof t=="string"?Ye.fromBase64String(t):Ye.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hf(t){const e=t.mapValue.fields.__previous_value__;return Wf(e)?Hf(e):e}function Do(t){const e=Nr(t.mapValue.fields.__local_write_time__.timestampValue);return new ee(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n,r,i,s,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Oo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Oo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha={mapValue:{}};function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wf(t)?4:_R(t)?9007199254740991:yR(t)?10:11:Q()}function pn(t,e){if(t===e)return!0;const n=si(t);if(n!==si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Do(t).isEqual(Do(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Nr(i.timestampValue),c=Nr(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ii(i.bytesValue).isEqual(ii(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return je(i.geoPointValue.latitude)===je(s.geoPointValue.latitude)&&je(i.geoPointValue.longitude)===je(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return je(i.integerValue)===je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=je(i.doubleValue),c=je(s.doubleValue);return o===c?Ql(o)===Ql(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return ns(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Cv(o)!==Cv(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!pn(o[u],c[u])))return!1;return!0}(t,e);default:return Q()}}function Lo(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function rs(t,e){if(t===e)return 0;const n=si(t),r=si(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=je(s.integerValue||s.doubleValue),u=je(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Av(t.timestampValue,e.timestampValue);case 4:return Av(Do(t),Do(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(s,o){const c=ii(s),u=ii(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ce(c[d],u[d]);if(f!==0)return f}return ce(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=ce(je(s.latitude),je(o.latitude));return c!==0?c:ce(je(s.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Rv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,d,f;const v=s.fields||{},m=o.fields||{},g=(c=v.value)===null||c===void 0?void 0:c.arrayValue,x=(u=m.value)===null||u===void 0?void 0:u.arrayValue,E=ce(((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return E!==0?E:Rv(g,x)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ha.mapValue&&o===Ha.mapValue)return 0;if(s===Ha.mapValue)return 1;if(o===Ha.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let v=0;v<u.length&&v<f.length;++v){const m=ce(u[v],f[v]);if(m!==0)return m;const g=rs(c[u[v]],d[f[v]]);if(g!==0)return g}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Q()}}function Av(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Nr(t),r=Nr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function Rv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=rs(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function is(t){return _h(t)}function _h(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=_h(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${_h(n.fields[o])}`;return i+"}"}(t.mapValue):Q()}function Pv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wh(t){return!!t&&"integerValue"in t}function Gf(t){return!!t&&"arrayValue"in t}function kv(t){return!!t&&"nullValue"in t}function jv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hl(t){return!!t&&"mapValue"in t}function yR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function oo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=oo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _R(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.value=e}static empty(){return new wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oo(n)}setAll(e){let n=He.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=oo(o):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());hl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];hl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){hi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wt(oo(this.value))}}function jE(t){const e=[];return hi(t.fields,(n,r)=>{const i=new He([n]);if(hl(r)){const s=jE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new At(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ot(e,0,Y.min(),Y.min(),Y.min(),wt.empty(),0)}static newFoundDocument(e,n,r,i){return new ot(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new ot(e,2,n,Y.min(),Y.min(),wt.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,Y.min(),Y.min(),wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this.position=e,this.inclusive=n}}function bv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=rs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Dv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n="asc"){this.field=e,this.dir=n}}function wR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{}class Ve extends bE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TR(e,n,r):n==="array-contains"?new IR(e,r):n==="in"?new CR(e,r):n==="not-in"?new NR(e,r):n==="array-contains-any"?new AR(e,r):new Ve(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xR(e,r):new SR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(rs(n,this.value)):n!==null&&si(this.value)===si(n)&&this.matchesComparison(rs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zt extends bE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zt(e,n)}matches(e){return DE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function DE(t){return t.op==="and"}function OE(t){return ER(t)&&DE(t)}function ER(t){for(const e of t.filters)if(e instanceof Zt)return!1;return!0}function Eh(t){if(t instanceof Ve)return t.field.canonicalString()+t.op.toString()+is(t.value);if(OE(t))return t.filters.map(e=>Eh(e)).join(",");{const e=t.filters.map(n=>Eh(n)).join(",");return`${t.op}(${e})`}}function LE(t,e){return t instanceof Ve?function(r,i){return i instanceof Ve&&r.op===i.op&&r.field.isEqual(i.field)&&pn(r.value,i.value)}(t,e):t instanceof Zt?function(r,i){return i instanceof Zt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&LE(o,i.filters[c]),!0):!1}(t,e):void Q()}function VE(t){return t instanceof Ve?function(n){return`${n.field.canonicalString()} ${n.op} ${is(n.value)}`}(t):t instanceof Zt?function(n){return n.op.toString()+" {"+n.getFilters().map(VE).join(" ,")+"}"}(t):"Filter"}class TR extends Ve{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class xR extends Ve{constructor(e,n){super(e,"in",n),this.keys=ME("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SR extends Ve{constructor(e,n){super(e,"not-in",n),this.keys=ME("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ME(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class IR extends Ve{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gf(n)&&Lo(n.arrayValue,this.value)}}class CR extends Ve{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lo(this.value.arrayValue,n)}}class NR extends Ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Lo(this.value.arrayValue,n)}}class AR extends Ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}}function Ov(t,e=null,n=[],r=[],i=null,s=null,o=null){return new RR(t,e,n,r,i,s,o)}function Kf(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Eh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>is(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>is(r)).join(",")),e.ue=n}return e.ue}function Qf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dv(t.startAt,e.startAt)&&Dv(t.endAt,e.endAt)}function Th(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function PR(t,e,n,r,i,s,o,c){return new ps(t,e,n,r,i,s,o,c)}function Xf(t){return new ps(t)}function Lv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function UE(t){return t.collectionGroup!==null}function ao(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Qe(He.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Vo(s,r))}),n.has(He.keyField().canonicalString())||e.ce.push(new Vo(He.keyField(),r))}return e.ce}function un(t){const e=J(t);return e.le||(e.le=kR(e,ao(t))),e.le}function kR(t,e){if(t.limitType==="F")return Ov(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Vo(i.field,s)});const n=t.endAt?new Xl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xl(t.startAt.position,t.startAt.inclusive):null;return Ov(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xh(t,e){const n=t.filters.concat([e]);return new ps(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yl(t,e,n){return new ps(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dc(t,e){return Qf(un(t),un(e))&&t.limitType===e.limitType}function FE(t){return`${Kf(un(t))}|lt:${t.limitType}`}function Ei(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>VE(i)).join(", ")}]`),bc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>is(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>is(i)).join(",")),`Target(${r})`}(un(t))}; limitType=${t.limitType})`}function Oc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ao(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const d=bv(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,ao(r),i)||r.endAt&&!function(o,c,u){const d=bv(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,ao(r),i))}(t,e)}function jR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zE(t){return(e,n)=>{let r=!1;for(const i of ao(t)){const s=bR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bR(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,c){const u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?rs(u,d):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return PE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new Ie(G.comparator);function Un(){return DR}const BE=new Ie(G.comparator);function Ks(...t){let e=BE;for(const n of t)e=e.insert(n.key,n);return e}function $E(t){let e=BE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return lo()}function qE(){return lo()}function lo(){return new ms(t=>t.toString(),(t,e)=>t.isEqual(e))}const OR=new Ie(G.comparator),LR=new Qe(G.comparator);function ne(...t){let e=LR;for(const n of t)e=e.add(n);return e}const VR=new Qe(ce);function MR(){return VR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function WE(t){return{integerValue:""+t}}function UR(t,e){return mR(e)?WE(e):Yf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function FR(t,e,n){return t instanceof Mo?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wf(s)&&(s=Hf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Uo?GE(t,e):t instanceof Fo?KE(t,e):function(i,s){const o=HE(i,s),c=Vv(o)+Vv(i.Pe);return wh(o)&&wh(i.Pe)?WE(c):Yf(i.serializer,c)}(t,e)}function zR(t,e,n){return t instanceof Uo?GE(t,e):t instanceof Fo?KE(t,e):n}function HE(t,e){return t instanceof Jl?function(r){return wh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Mo extends Lc{}class Uo extends Lc{constructor(e){super(),this.elements=e}}function GE(t,e){const n=QE(e);for(const r of t.elements)n.some(i=>pn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fo extends Lc{constructor(e){super(),this.elements=e}}function KE(t,e){let n=QE(e);for(const r of t.elements)n=n.filter(i=>!pn(i,r));return{arrayValue:{values:n}}}class Jl extends Lc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Vv(t){return je(t.integerValue||t.doubleValue)}function QE(t){return Gf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n){this.field=e,this.transform=n}}function $R(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Uo&&i instanceof Uo||r instanceof Fo&&i instanceof Fo?ns(r.elements,i.elements,pn):r instanceof Jl&&i instanceof Jl?pn(r.Pe,i.Pe):r instanceof Mo&&i instanceof Mo}(t.transform,e.transform)}class qR{constructor(e,n){this.version=e,this.transformResults=n}}class zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zt}static exists(e){return new zt(void 0,e)}static updateTime(e){return new zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vc{}function XE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jf(t.key,zt.none()):new Zo(t.key,t.data,zt.none());{const n=t.data,r=wt.empty();let i=new Qe(He.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Dr(t.key,r,new At(i.toArray()),zt.none())}}function WR(t,e,n){t instanceof Zo?function(i,s,o){const c=i.value.clone(),u=Uv(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Dr?function(i,s,o){if(!fl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=Uv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(YE(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function co(t,e,n,r){return t instanceof Zo?function(s,o,c,u){if(!fl(s.precondition,o))return c;const d=s.value.clone(),f=Fv(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dr?function(s,o,c,u){if(!fl(s.precondition,o))return c;const d=Fv(s.fieldTransforms,u,o),f=o.data;return f.setAll(YE(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(s,o,c){return fl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function HR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=HE(r.transform,i||null);s!=null&&(n===null&&(n=wt.empty()),n.set(r.field,s))}return n||null}function Mv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ns(r,i,(s,o)=>$R(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zo extends Vc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Dr extends Vc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function YE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Uv(t,e,n){const r=new Map;de(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,zR(o,c,n[i]))}return r}function Fv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,FR(s,o,e))}return r}class Jf extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GR extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&WR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=qE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;const u=XE(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&ns(this.mutations,e.mutations,(n,r)=>Mv(n,r))&&ns(this.baseMutations,e.baseMutations,(n,r)=>Mv(n,r))}}class Zf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length);let i=function(){return OR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Zf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,oe;function YR(t){switch(t){default:return Q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function JE(t){if(t===void 0)return Mn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Oe.OK:return M.OK;case Oe.CANCELLED:return M.CANCELLED;case Oe.UNKNOWN:return M.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return M.INTERNAL;case Oe.UNAVAILABLE:return M.UNAVAILABLE;case Oe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Oe.NOT_FOUND:return M.NOT_FOUND;case Oe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Oe.ABORTED:return M.ABORTED;case Oe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Oe.DATA_LOSS:return M.DATA_LOSS;default:return Q()}}(oe=Oe||(Oe={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new Qr([4294967295,4294967295],0);function zv(t){const e=JR().encode(t),n=new TE;return n.update(e),new Uint8Array(n.digest())}function Bv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qr([n,r],0),new Qr([i,s],0)]}class ep{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qs(`Invalid padding: ${n}`);if(r<0)throw new Qs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Qr.fromNumber(r)));return i.compare(ZR)===1&&(i=new Qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=zv(e),[r,i]=Bv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ep(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=zv(e),[r,i]=Bv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ea.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mc(Y.min(),i,new Ie(ce),Un(),ne())}}class ea{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ea(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class ZE{constructor(e,n){this.targetId=e,this.me=n}}class e0{constructor(e,n,r=Ye.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $v{constructor(){this.fe=0,this.ge=Wv(),this.pe=Ye.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new ea(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Wv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class eP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Un(),this.qe=qv(),this.Qe=new Ie(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Th(s))if(r===0){const o=new G(s.path);this.Ue(n,o,ot.newNoDocument(o,Y.min()))}else de(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,c;try{o=ii(r).toUint8Array()}catch(u){if(u instanceof kE)return ts("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new ep(o,i,s)}catch(u){return ts(u instanceof Qs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const c=this.Je(o);if(c){if(s.current&&Th(c.target)){const u=new G(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ot.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ne();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Mc(e,n,this.Qe,this.ke,r);return this.ke=Un(),this.qe=qv(),this.Qe=new Ie(ce),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new $v,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Qe(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $v),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function qv(){return new Ie(G.comparator)}function Wv(){return new Ie(G.comparator)}const tP={asc:"ASCENDING",desc:"DESCENDING"},nP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rP={and:"AND",or:"OR"};class iP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sh(t,e){return t.useProto3Json||bc(e)?e:{value:e}}function Zl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function t0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sP(t,e){return Zl(t,e.toTimestamp())}function dn(t){return de(!!t),Y.fromTimestamp(function(n){const r=Nr(n);return new ee(r.seconds,r.nanos)}(t))}function tp(t,e){return Ih(t,e).canonicalString()}function Ih(t,e){const n=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function n0(t){const e=ve.fromString(t);return de(a0(e)),e}function Ch(t,e){return tp(t.databaseId,e.path)}function ad(t,e){const n=n0(e);if(n.get(1)!==t.databaseId.projectId)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(i0(n))}function r0(t,e){return tp(t.databaseId,e)}function oP(t){const e=n0(t);return e.length===4?ve.emptyPath():i0(e)}function Nh(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function i0(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Hv(t,e,n){return{name:Ch(t,e),fields:n.value.mapValue.fields}}function aP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(de(f===void 0||typeof f=="string"),Ye.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ye.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?M.UNKNOWN:JE(d.code);return new $(f,d.message||"")}(o);n=new e0(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ad(t,r.document.name),s=dn(r.document.updateTime),o=r.document.createTime?dn(r.document.createTime):Y.min(),c=new wt({mapValue:{fields:r.document.fields}}),u=ot.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new pl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ad(t,r.document),s=r.readTime?dn(r.readTime):Y.min(),o=ot.newNoDocument(i,s),c=r.removedTargetIds||[];n=new pl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ad(t,r.document),s=r.removedTargetIds||[];n=new pl([],s,i,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new XR(i,s),c=r.targetId;n=new ZE(c,o)}}return n}function lP(t,e){let n;if(e instanceof Zo)n={update:Hv(t,e.key,e.value)};else if(e instanceof Jf)n={delete:Ch(t,e.key)};else if(e instanceof Dr)n={update:Hv(t,e.key,e.data),updateMask:vP(e.fieldMask)};else{if(!(e instanceof GR))return Q();n={verify:Ch(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const c=o.transform;if(c instanceof Mo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Uo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Jl)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:sP(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function cP(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?dn(i.updateTime):dn(s);return o.isEqual(Y.min())&&(o=dn(s)),new qR(o,i.transformResults||[])}(n,e))):[]}function uP(t,e){return{documents:[r0(t,e.path)]}}function dP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=r0(t,i);const s=function(d){if(d.length!==0)return o0(Zt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(f=>function(m){return{field:Ti(m.field),direction:pP(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Sh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function hP(t){let e=oP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){de(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(v){const m=s0(v);return m instanceof Zt&&OE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(v){return v.map(m=>function(x){return new Vo(xi(x.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(v){let m;return m=typeof v=="object"?v.value:v,bc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(v){const m=!!v.before,g=v.values||[];return new Xl(g,m)}(n.startAt));let d=null;return n.endAt&&(d=function(v){const m=!v.before,g=v.values||[];return new Xl(g,m)}(n.endAt)),PR(e,i,o,s,c,"F",u,d)}function fP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function s0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xi(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xi(n.unaryFilter.field);return Ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xi(n.unaryFilter.field);return Ve.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xi(n.unaryFilter.field);return Ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Ve.create(xi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zt.create(n.compositeFilter.filters.map(r=>s0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function pP(t){return tP[t]}function mP(t){return nP[t]}function gP(t){return rP[t]}function Ti(t){return{fieldPath:t.canonicalString()}}function xi(t){return He.fromServerFormat(t.fieldPath)}function o0(t){return t instanceof Ve?function(n){if(n.op==="=="){if(jv(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NAN"}};if(kv(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jv(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NAN"}};if(kv(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ti(n.field),op:mP(n.op),value:n.value}}}(t):t instanceof Zt?function(n){const r=n.getFilters().map(i=>o0(i));return r.length===1?r[0]:{compositeFilter:{op:gP(n.op),filters:r}}}(t):Q()}function vP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function a0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n,r,i,s=Y.min(),o=Y.min(),c=Ye.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.ct=e}}function _P(t){const e=hP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.un=new EP}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Cr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class EP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qe(ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ss(0)}static kn(){return new ss(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.changes=new ms(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&co(r.mutation,i,At.empty(),ee.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const i=Hr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ks();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=Un();const o=lo(),c=function(){return lo()}();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Dr)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),co(f.mutation,d,f.mutation.getFieldMask(),ee.now())):o.set(d.key,At.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var v;return c.set(d,new xP(f,(v=o.get(d))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,n){const r=lo();let i=new Ie((o,c)=>o-c),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||At.empty();f=c.applyToLocalView(d,f),r.set(u,f);const v=(i.get(c.batchId)||ne()).add(u);i=i.insert(c.batchId,v)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,v=qE();f.forEach(m=>{if(!s.has(m)){const g=XE(n.get(m),r.get(m));g!==null&&v.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,v))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):UE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Hr());let c=-1,u=s;return o.next(d=>U.forEach(d,(f,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),s.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ne())).next(f=>({batchId:c,changes:$E(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Ks();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ks();return this.indexManager.getCollectionParents(e,s).next(c=>U.forEach(c,u=>{const d=function(v,m){return new ps(m,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((v,m)=>{o=o.insert(v,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ot.newInvalidDocument(f)))});let c=Ks();return o.forEach((u,d)=>{const f=s.get(u);f!==void 0&&co(f.mutation,d,At.empty(),ee.now()),Oc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:dn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:_P(i.bundledQuery),readTime:dn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.overlays=new Ie(G.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Hr(),s=n.length+1,o=new G(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ie((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=Hr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=Hr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return U.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new QR(n,r));let s=this.Ir.get(n);s===void 0&&(s=ne(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.Tr=new Qe(Fe.Er),this.dr=new Qe(Fe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Fe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Fe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new ve([])),r=new Fe(n,e),i=new Fe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new ve([])),r=new Fe(n,e),i=new Fe(n,e+1);let s=ne();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Fe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Qe(Fe.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new KR(s,n,r,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new Fe(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fe(n,0),i=new Fe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const c=this.Dr(o.wr);s.push(c)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(ce);return n.forEach(i=>{const s=new Fe(i,0),o=new Fe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new Fe(new G(s),0);let c=new Qe(ce);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),U.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new Fe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Fe(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.Mr=e,this.docs=function(){return new Ie(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ot.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Un();const o=n.path,c=new G(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||dR(uR(f),r)<=0||(i.has(f.key)||Oc(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PP(this)}getSize(e){return U.resolve(this.size)}}class PP extends TP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.persistence=e,this.Nr=new ms(n=>Kf(n),Qf),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new np,this.targetCount=0,this.kr=ss.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ss(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new qf(0),this.Kr=!1,this.Kr=!0,this.$r=new NP,this.referenceDelegate=e(this),this.Ur=new kP(this),this.indexManager=new wP,this.remoteDocumentCache=function(i){return new RP(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new yP(n),this.Gr=new IP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new AP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new bP(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class bP extends fR{constructor(e){super(),this.currentSequenceNumber=e}}class rp{constructor(e){this.persistence=e,this.Jr=new np,this.Yr=null}static Zr(e){return new rp(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=G.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ne(),i=ne();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ip(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ON()?8:pR(lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new DP;return this.Xi(e,n,o).next(c=>{if(s.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Us()<=ie.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ei(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Us()<=ie.DEBUG&&W("QueryEngine","Query:",Ei(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Us()<=ie.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ei(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(n))):U.resolve())}Yi(e,n){if(Lv(n))return U.resolve(null);let r=un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yl(n,null,"F"),r=un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ne(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,Yl(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return Lv(n)||i.isEqual(Y.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(Us()<=ie.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ei(n)),this.rs(e,o,n,cR(i,-1)).next(c=>c))})}ts(e,n){let r=new Qe(zE(e));return n.forEach((i,s)=>{Oc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Us()<=ie.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ei(n)),this.Ji.getDocumentsMatchingQuery(e,n,Cr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ie(ce),this._s=new ms(s=>Kf(s),Qf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function VP(t,e,n,r){return new LP(t,e,n,r)}async function l0(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let u=ne();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function MP(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const v=d.batch,m=v.keys();let g=U.resolve();return m.forEach(x=>{g=g.next(()=>f.getEntry(u,x)).next(E=>{const R=d.docVersions.get(x);de(R!==null),E.version.compareTo(R)<0&&(v.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),f.addEntry(E)))})}),g.next(()=>c.mutationQueue.removeMutationBatch(u,v))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ne();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function c0(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function UP(t,e){const n=J(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((f,v)=>{const m=i.get(v);if(!m)return;c.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,v).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,v)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(v)!==null?g=g.withResumeToken(Ye.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(f.resumeToken,r)),i=i.insert(v,g),function(E,R,y){return E.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,g,f)&&c.push(n.Ur.updateTargetData(s,g))});let u=Un(),d=ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(FP(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(Y.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(v=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return U.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.os=i,s))}function FP(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Un();return n.forEach((c,u)=>{const d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):W("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function zP(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function BP(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new cr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ah(t,e,n){const r=J(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Jo(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Gv(t,e,n){const r=J(t);let i=Y.min(),s=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const v=J(u),m=v._s.get(f);return m!==void 0?U.resolve(v.os.get(m)):v.Ur.getTargetData(d,f)}(r,o,un(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ne())).next(c=>($P(r,jR(e),c),{documents:c,Ts:s})))}function $P(t,e,n){let r=t.us.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Kv{constructor(){this.activeTargetIds=MR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qP{constructor(){this.so=new Kv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Kv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga=null;function ld(){return Ga===null?Ga=function(){return 268435456+Math.round(2147483648*Math.random())}():Ga++,"0x"+Ga.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt="WebChannelConnection";class KP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const c=ld(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(n,u,d,i).then(f=>(W("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw ts("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,c){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=HP[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=ld();return new Promise((o,c)=>{const u=new xE;u.setWithCredentials(!0),u.listenOnce(SE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case dl.NO_ERROR:const f=u.getResponseJson();W(rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case dl.TIMEOUT:W(rt,`RPC '${e}' ${s} timed out`),c(new $(M.DEADLINE_EXCEEDED,"Request time out"));break;case dl.HTTP_ERROR:const v=u.getStatus();if(W(rt,`RPC '${e}' ${s} failed with status:`,v,"response text:",u.getResponseText()),v>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(R){const y=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(y)>=0?y:M.UNKNOWN}(g.status);c(new $(x,g.message))}else c(new $(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new $(M.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{W(rt,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);W(rt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=ld(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=NE(),c=CE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");W(rt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const v=o.createWebChannel(f,u);let m=!1,g=!1;const x=new GP({Io:R=>{g?W(rt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(W(rt,`Opening RPC '${e}' stream ${i} transport.`),v.open(),m=!0),W(rt,`RPC '${e}' stream ${i} sending:`,R),v.send(R))},To:()=>v.close()}),E=(R,y,w)=>{R.listen(y,I=>{try{w(I)}catch(S){setTimeout(()=>{throw S},0)}})};return E(v,Gs.EventType.OPEN,()=>{g||(W(rt,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),E(v,Gs.EventType.CLOSE,()=>{g||(g=!0,W(rt,`RPC '${e}' stream ${i} transport closed`),x.So())}),E(v,Gs.EventType.ERROR,R=>{g||(g=!0,ts(rt,`RPC '${e}' stream ${i} transport errored:`,R),x.So(new $(M.UNAVAILABLE,"The operation could not be completed")))}),E(v,Gs.EventType.MESSAGE,R=>{var y;if(!g){const w=R.data[0];de(!!w);const I=w,S=I.error||((y=I[0])===null||y===void 0?void 0:y.error);if(S){W(rt,`RPC '${e}' stream ${i} received error:`,S);const O=S.status;let D=function(A){const P=Oe[A];if(P!==void 0)return JE(P)}(O),C=S.message;D===void 0&&(D=M.INTERNAL,C="Unknown error status: "+O+" with message "+S.message),g=!0,x.So(new $(D,C)),v.close()}else W(rt,`RPC '${e}' stream ${i} received:`,w),x.bo(w)}}),E(c,IE.STAT_EVENT,R=>{R.stat===yh.PROXY?W(rt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===yh.NOPROXY&&W(rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function cd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){return new iP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new u0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Mn(n.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new $(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QP extends d0{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=aP(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?dn(o.readTime):Y.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Nh(this.serializer),n.addTarget=function(s,o){let c;const u=o.target;if(c=Th(u)?{documents:uP(s,u)}:{query:dP(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=t0(s,o.resumeToken);const d=Sh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=Zl(s,o.snapshotVersion.toTimestamp());const d=Sh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=fP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Nh(this.serializer),n.removeTarget=e,this.a_(n)}}class XP extends d0{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=cP(e.writeResults,e.commitTime),r=dn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Nh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ih(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Ih(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class JP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Mn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{fi(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=J(u);d.L_.add(4),await ta(d),d.q_.set("Unknown"),d.L_.delete(4),await Fc(d)}(this))})}),this.q_=new JP(r,i)}}async function Fc(t){if(fi(t))for(const e of t.B_)await e(!0)}async function ta(t){for(const e of t.B_)await e(!1)}function h0(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),lp(n)?ap(n):gs(n).r_()&&op(n,e))}function sp(t,e){const n=J(t),r=gs(n);n.N_.delete(e),r.r_()&&f0(n,e),n.N_.size===0&&(r.r_()?r.o_():fi(n)&&n.q_.set("Unknown"))}function op(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gs(t).A_(e)}function f0(t,e){t.Q_.xe(e),gs(t).R_(e)}function ap(t){t.Q_=new eP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),gs(t).start(),t.q_.v_()}function lp(t){return fi(t)&&!gs(t).n_()&&t.N_.size>0}function fi(t){return J(t).L_.size===0}function p0(t){t.Q_=void 0}async function ek(t){t.q_.set("Online")}async function tk(t){t.N_.forEach((e,n)=>{op(t,e)})}async function nk(t,e){p0(t),lp(t)?(t.q_.M_(e),ap(t)):t.q_.set("Unknown")}async function rk(t,e,n){if(t.q_.set("Online"),e instanceof e0&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ec(t,r)}else if(e instanceof pl?t.Q_.Ke(e):e instanceof ZE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Y.min()))try{const r=await c0(t.localStore);n.compareTo(r)>=0&&await function(s,o){const c=s.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(Ye.EMPTY_BYTE_STRING,f.snapshotVersion)),f0(s,u);const v=new cr(f.target,u,d,f.sequenceNumber);op(s,v)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await ec(t,r)}}async function ec(t,e,n){if(!Jo(e))throw e;t.L_.add(1),await ta(t),t.q_.set("Offline"),n||(n=()=>c0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Fc(t)})}function m0(t,e){return e().catch(n=>ec(t,n,e))}async function zc(t){const e=J(t),n=Ar(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ik(e);)try{const i=await zP(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,sk(e,i)}catch(i){await ec(e,i)}g0(e)&&v0(e)}function ik(t){return fi(t)&&t.O_.length<10}function sk(t,e){t.O_.push(e);const n=Ar(t);n.r_()&&n.V_&&n.m_(e.mutations)}function g0(t){return fi(t)&&!Ar(t).n_()&&t.O_.length>0}function v0(t){Ar(t).start()}async function ok(t){Ar(t).p_()}async function ak(t){const e=Ar(t);for(const n of t.O_)e.m_(n.mutations)}async function lk(t,e,n){const r=t.O_.shift(),i=Zf.from(r,e,n);await m0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await zc(t)}async function ck(t,e){e&&Ar(t).V_&&await async function(r,i){if(function(o){return YR(o)&&o!==M.ABORTED}(i.code)){const s=r.O_.shift();Ar(r).s_(),await m0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await zc(r)}}(t,e),g0(t)&&v0(t)}async function Xv(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=fi(n);n.L_.add(3),await ta(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Fc(n)}async function uk(t,e){const n=J(t);e?(n.L_.delete(2),await Fc(n)):e||(n.L_.add(2),await ta(n),n.q_.set("Unknown"))}function gs(t){return t.K_||(t.K_=function(n,r,i){const s=J(n);return s.w_(),new QP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:ek.bind(null,t),Ro:tk.bind(null,t),mo:nk.bind(null,t),d_:rk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),lp(t)?ap(t):t.q_.set("Unknown")):(await t.K_.stop(),p0(t))})),t.K_}function Ar(t){return t.U_||(t.U_=function(n,r,i){const s=J(n);return s.w_(),new XP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ok.bind(null,t),mo:ck.bind(null,t),f_:ak.bind(null,t),g_:lk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await zc(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,c=new cp(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function up(t,e){if(Mn("AsyncQueue",`${e}: ${t}`),Jo(t))return new $(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Ks(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new $i(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $i)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $i;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.W_=new Ie(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class os{constructor(e,n,r,i,s,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new os(e,n,$i.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class hk{constructor(){this.queries=Jv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=J(n),s=i.queries;i.queries=Jv(),s.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new $(M.ABORTED,"Firestore shutting down"))}}function Jv(){return new ms(t=>FE(t),Dc)}async function y0(t,e){const n=J(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new dk,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=up(o,`Initialization of query '${Ei(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&dp(n)}async function _0(t,e){const n=J(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fk(t,e){const n=J(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&dp(n)}function pk(t,e,n){const r=J(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function dp(t){t.Y_.forEach(e=>{e.next()})}var Rh,Zv;(Zv=Rh||(Rh={})).ea="default",Zv.Cache="cache";class w0{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new os(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=os.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.key=e}}class T0{constructor(e){this.key=e}}class mk{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=zE(e),this.Ra=new $i(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Yv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,v)=>{const m=i.get(f),g=Oc(this.query,v)?v:null,x=!!m&&this.mutatedKeys.has(m.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let R=!1;m&&g?m.data.isEqual(g.data)?x!==E&&(r.track({type:3,doc:g}),R=!0):this.ga(m,g)||(r.track({type:2,doc:g}),R=!0,(u&&this.Aa(g,u)>0||d&&this.Aa(g,d)<0)&&(c=!0)):!m&&g?(r.track({type:0,doc:g}),R=!0):m&&!g&&(r.track({type:1,doc:m}),R=!0,(u||d)&&(c=!0)),R&&(g?(o=o.add(g),s=E?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,v)=>function(g,x){const E=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return E(g)-E(x)}(f.type,v.type)||this.Aa(f.doc,v.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new os(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Yv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new T0(r))}),this.da.forEach(r=>{e.has(r)||n.push(new E0(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return os.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vk{constructor(e){this.key=e,this.va=!1}}class yk{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ms(c=>FE(c),Dc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ie(G.comparator),this.Na=new Map,this.La=new np,this.Ba={},this.ka=new Map,this.qa=ss.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function _k(t,e,n=!0){const r=A0(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await x0(r,e,n,!0),i}async function wk(t,e){const n=A0(t);await x0(n,e,!0,!1)}async function x0(t,e,n,r){const i=await BP(t.localStore,un(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await Ek(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&h0(t.remoteStore,i),c}async function Ek(t,e,n,r,i){t.Ka=(v,m,g)=>async function(E,R,y,w){let I=R.view.ma(y);I.ns&&(I=await Gv(E.localStore,R.query,!1).then(({documents:C})=>R.view.ma(C,I)));const S=w&&w.targetChanges.get(R.targetId),O=w&&w.targetMismatches.get(R.targetId)!=null,D=R.view.applyChanges(I,E.isPrimaryClient,S,O);return ty(E,R.targetId,D.wa),D.snapshot}(t,v,m,g);const s=await Gv(t.localStore,e,!0),o=new mk(e,s.Ts),c=o.ma(s.documents),u=ea.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);ty(t,n,d.wa);const f=new gk(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function Tk(t,e,n){const r=J(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Dc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ah(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&sp(r.remoteStore,i.targetId),Ph(r,i.targetId)}).catch(Yo)):(Ph(r,i.targetId),await Ah(r.localStore,i.targetId,!0))}async function xk(t,e){const n=J(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sp(n.remoteStore,r.targetId))}async function Sk(t,e,n){const r=kk(t);try{const i=await function(o,c){const u=J(o),d=ee.now(),f=c.reduce((g,x)=>g.add(x.key),ne());let v,m;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=Un(),E=ne();return u.cs.getEntries(g,f).next(R=>{x=R,x.forEach((y,w)=>{w.isValidDocument()||(E=E.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,x)).next(R=>{v=R;const y=[];for(const w of c){const I=HR(w,v.get(w.key).overlayedDocument);I!=null&&y.push(new Dr(w.key,I,jE(I.value.mapValue),zt.exists(!0)))}return u.mutationQueue.addMutationBatch(g,d,y,c)}).next(R=>{m=R;const y=R.applyToLocalDocumentSet(v,E);return u.documentOverlayCache.saveOverlays(g,R.batchId,y)})}).then(()=>({batchId:m.batchId,changes:$E(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ie(ce)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,n),await na(r,i.changes),await zc(r.remoteStore)}catch(i){const s=up(i,"Failed to persist write");n.reject(s)}}async function S0(t,e){const n=J(t);try{const r=await UP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?de(o.va):i.removedDocuments.size>0&&(de(o.va),o.va=!1))}),await na(n,r,e)}catch(r){await Yo(r)}}function ey(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=J(o);u.onlineState=c;let d=!1;u.queries.forEach((f,v)=>{for(const m of v.j_)m.Z_(c)&&(d=!0)}),d&&dp(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ik(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ie(G.comparator);o=o.insert(s,ot.newNoDocument(s,Y.min()));const c=ne().add(s),u=new Mc(Y.min(),new Map,new Ie(ce),o,c);await S0(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),hp(r)}else await Ah(r.localStore,e,!1).then(()=>Ph(r,e,n)).catch(Yo)}async function Ck(t,e){const n=J(t),r=e.batch.batchId;try{const i=await MP(n.localStore,e);C0(n,r,null),I0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await na(n,i)}catch(i){await Yo(i)}}async function Nk(t,e,n){const r=J(t);try{const i=await function(o,c){const u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(v=>(de(v!==null),f=v.keys(),u.mutationQueue.removeMutationBatch(d,v))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);C0(r,e,n),I0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await na(r,i)}catch(i){await Yo(i)}}function I0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function C0(t,e,n){const r=J(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ph(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||N0(t,r)})}function N0(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),hp(t))}function ty(t,e,n){for(const r of n)r instanceof E0?(t.La.addReference(r.key,e),Ak(t,r)):r instanceof T0?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||N0(t,r.key)):Q()}function Ak(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),hp(t))}function hp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(ve.fromString(e)),r=t.qa.next();t.Na.set(r,new vk(n)),t.Oa=t.Oa.insert(n,r),h0(t.remoteStore,new cr(un(Xf(n.path)),r,"TargetPurposeLimboResolution",qf.oe))}}async function na(t,e,n){const r=J(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const v=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,v?"current":"not-current")}if(d){i.push(d);const v=ip.Wi(u.targetId,d);s.push(v)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,d){const f=J(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>U.forEach(d,m=>U.forEach(m.$i,g=>f.persistence.referenceDelegate.addReference(v,m.targetId,g)).next(()=>U.forEach(m.Ui,g=>f.persistence.referenceDelegate.removeReference(v,m.targetId,g)))))}catch(v){if(!Jo(v))throw v;W("LocalStore","Failed to update sequence numbers: "+v)}for(const v of d){const m=v.targetId;if(!v.fromCache){const g=f.os.get(m),x=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(x);f.os=f.os.insert(m,E)}}}(r.localStore,s))}async function Rk(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await l0(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new $(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await na(n,r.hs)}}function Pk(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let i=ne();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function A0(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=S0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ik.bind(null,e),e.Ca.d_=fk.bind(null,e.eventManager),e.Ca.$a=pk.bind(null,e.eventManager),e}function kk(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ck.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nk.bind(null,e),e}class tc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return VP(this.persistence,new OP,e.initialUser,this.serializer)}Ga(e){return new jP(rp.Zr,this.serializer)}Wa(e){return new qP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tc.provider={build:()=>new tc};class kh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ey(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rk.bind(null,this.syncEngine),await uk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hk}()}createDatastore(e){const n=Uc(e.databaseInfo.databaseId),r=function(s){return new KP(s)}(e.databaseInfo);return function(s,o,c,u){return new YP(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new ZP(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>ey(this.syncEngine,n,0),function(){return Qv.D()?new Qv:new WP}())}createSyncEngine(e,n){return function(i,s,o,c,u,d,f){const v=new yk(i,s,o,c,u,d);return f&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=J(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ta(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}kh.provider={build:()=>new kh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Mn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=it.UNAUTHENTICATED,this.clientId=RE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=up(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ud(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await l0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ny(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bk(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Xv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Xv(e.remoteStore,i)),t._onlineComponents=e}async function bk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await ud(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ts("Error using user provided cache. Falling back to memory cache: "+n),await ud(t,new tc)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await ud(t,new tc);return t._offlineComponents}async function P0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await ny(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await ny(t,new kh))),t._onlineComponents}function Dk(t){return P0(t).then(e=>e.syncEngine)}async function k0(t){const e=await P0(t),n=e.eventManager;return n.onListen=_k.bind(null,e.syncEngine),n.onUnlisten=Tk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xk.bind(null,e.syncEngine),n}function Ok(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const f=new R0({next:m=>{f.Za(),o.enqueueAndForget(()=>_0(s,v));const g=m.docs.has(c);!g&&m.fromCache?d.reject(new $(M.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&u&&u.source==="server"?d.reject(new $(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),v=new w0(Xf(c.path),f,{includeMetadataChanges:!0,_a:!0});return y0(s,v)}(await k0(t),t.asyncQueue,e,n,r)),r.promise}function Lk(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const f=new R0({next:m=>{f.Za(),o.enqueueAndForget(()=>_0(s,v)),m.fromCache&&u.source==="server"?d.reject(new $(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),v=new w0(c,f,{includeMetadataChanges:!0,_a:!0});return y0(s,v)}(await k0(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t,e,n){if(!n)throw new $(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Vk(t,e,n,r){if(e===!0&&r===!0)throw new $(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iy(t){if(!G.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sy(t){if(G.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function en(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bc(t);throw new $(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $c{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eR;switch(r.type){case"firstParty":return new iR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ry.get(n);r&&(W("ComponentProvider","Removing Datastore"),ry.delete(n),r.terminate())}(this),Promise.resolve()}}function Mk(t,e,n,r={}){var i;const s=(t=en(t,$c))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=it.MOCK_USER;else{c=gE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new $(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new it(d)}t._authCredentials=new tR(new AE(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}}class Er extends Or{constructor(e,n,r){super(e,n,Xf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new G(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function xe(t,e,...n){if(t=Ae(t),b0("collection","path",e),t instanceof $c){const r=ve.fromString(e,...n);return sy(r),new Er(t,null,r)}{if(!(t instanceof mt||t instanceof Er))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return sy(r),new Er(t.firestore,null,r)}}function se(t,e,...n){if(t=Ae(t),arguments.length===1&&(e=RE.newId()),b0("doc","path",e),t instanceof $c){const r=ve.fromString(e,...n);return iy(r),new mt(t,null,new G(r))}{if(!(t instanceof mt||t instanceof Er))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return iy(r),new mt(t.firestore,t instanceof Er?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new u0(this,"async_queue_retry"),this.Vu=()=>{const r=cd();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=cd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=cd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Jo(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Mn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=cp.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class pi extends $c{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ay,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ay(e),this._firestoreClient=void 0,await e}}}function Uk(t,e){const n=typeof t=="object"?t:jc(),r=typeof t=="string"?t:"(default)",i=Xo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Ff("firestore");s&&Mk(i,...s)}return i}function fp(t){if(t._terminated)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Fk(t),t._firestoreClient}function Fk(t){var e,n,r;const i=t._freezeSettings(),s=function(c,u,d,f){return new vR(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,j0(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new jk(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this._byteString=e}static fromBase64String(e){try{return new as(Ye.fromBase64String(e))}catch(n){throw new $(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new as(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=/^__.*__$/;class Bk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zo(e,this.data,n,this.fieldTransforms)}}class D0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function O0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class gp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new gp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(O0(this.Cu)&&zk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class $k{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uc(e)}Qu(e,n,r,i=!1){return new gp({Cu:e,methodName:n,qu:r,path:He.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hc(t){const e=t._freezeSettings(),n=Uc(t._databaseId);return new $k(t._databaseId,!!e.ignoreUndefinedProperties,n)}function L0(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);yp("Data must be an object, but it was:",o,r);const c=V0(r,o);let u,d;if(s.merge)u=new At(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const v of s.mergeFields){const m=jh(e,v,n);if(!o.contains(m))throw new $(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);U0(f,m)||f.push(m)}u=new At(f),d=o.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,d=o.fieldTransforms;return new Bk(new wt(c),u,d)}class Gc extends Wc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gc}}class vp extends Wc{_toFieldTransform(e){return new BR(e.path,new Mo)}isEqual(e){return e instanceof vp}}function qk(t,e,n,r){const i=t.Qu(1,e,n);yp("Data must be an object, but it was:",i,r);const s=[],o=wt.empty();hi(r,(u,d)=>{const f=_p(e,u,n);d=Ae(d);const v=i.Nu(f);if(d instanceof Gc)s.push(f);else{const m=ra(d,v);m!=null&&(s.push(f),o.set(f,m))}});const c=new At(s);return new D0(o,c,i.fieldTransforms)}function Wk(t,e,n,r,i,s){const o=t.Qu(1,e,n),c=[jh(e,r,n)],u=[i];if(s.length%2!=0)throw new $(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)c.push(jh(e,s[m])),u.push(s[m+1]);const d=[],f=wt.empty();for(let m=c.length-1;m>=0;--m)if(!U0(d,c[m])){const g=c[m];let x=u[m];x=Ae(x);const E=o.Nu(g);if(x instanceof Gc)d.push(g);else{const R=ra(x,E);R!=null&&(d.push(g),f.set(g,R))}}const v=new At(d);return new D0(f,v,o.fieldTransforms)}function Hk(t,e,n,r=!1){return ra(n,t.Qu(r?4:3,e))}function ra(t,e){if(M0(t=Ae(t)))return yp("Unsupported field value:",e,t),V0(t,e);if(t instanceof Wc)return function(r,i){if(!O0(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const c of r){let u=ra(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ae(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ee.fromDate(r);return{timestampValue:Zl(i.serializer,s)}}if(r instanceof ee){const s=new ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zl(i.serializer,s)}}if(r instanceof pp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof as)return{bytesValue:t0(i.serializer,r._byteString)};if(r instanceof mt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:tp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mp)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Yf(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Bc(r)}`)}(t,e)}function V0(t,e){const n={};return PE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(t,(r,i)=>{const s=ra(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function M0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ee||t instanceof pp||t instanceof as||t instanceof mt||t instanceof Wc||t instanceof mp)}function yp(t,e,n){if(!M0(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Bc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function jh(t,e,n){if((e=Ae(e))instanceof qc)return e._internalPath;if(typeof e=="string")return _p(t,e);throw nc("Field path arguments must be of type string or ",t,!1,void 0,n)}const Gk=new RegExp("[~\\*/\\[\\]]");function _p(t,e,n){if(e.search(Gk)>=0)throw nc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qc(...e.split("."))._internalPath}catch{throw nc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new $(M.INVALID_ARGUMENT,c+t+u)}function U0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Kk extends F0{data(){return super.data()}}function Kc(t,e){return typeof e=="string"?_p(t,e):e instanceof qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wp{}class Ep extends wp{}function jt(t,e,...n){let r=[];e instanceof wp&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Tp).length,c=s.filter(u=>u instanceof Qc).length;if(o>1||o>0&&c>0)throw new $(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qc extends Ep{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qc(e,n,r)}_apply(e){const n=this._parse(e);return z0(e._query,n),new Or(e.firestore,e.converter,xh(e._query,n))}_parse(e){const n=Hc(e.firestore);return function(s,o,c,u,d,f,v){let m;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){cy(v,f);const g=[];for(const x of v)g.push(ly(u,s,x));m={arrayValue:{values:g}}}else m=ly(u,s,v)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||cy(v,f),m=Hk(c,o,v,f==="in"||f==="not-in");return Ve.create(d,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ge(t,e,n){const r=e,i=Kc("where",t);return Qc._create(i,r,n)}class Tp extends wp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Tp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const u of c)z0(o,u),o=xh(o,u)}(e._query,n),new Or(e.firestore,e.converter,xh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xp extends Ep{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xp(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vo(s,o)}(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ps(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Xc(t,e="asc"){const n=e,r=Kc("orderBy",t);return xp._create(r,n)}class Sp extends Ep{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Sp(e,n,r)}_apply(e){return new Or(e.firestore,e.converter,Yl(e._query,this._limit,this._limitType))}}function Xk(t){return Sp._create("limit",t,"F")}function ly(t,e,n){if(typeof(n=Ae(n))=="string"){if(n==="")throw new $(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UE(e)&&n.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!G.isDocumentKey(r))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pv(t,new G(r))}if(n instanceof mt)return Pv(t,n._key);throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bc(n)}.`)}function cy(t,e){if(!Array.isArray(t)||t.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function z0(t,e){const n=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Yk{convertValue(e,n="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>je(o.doubleValue));return new mp(s)}convertGeoPoint(e){return new pp(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Do(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new ee(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);de(a0(r));const i=new Oo(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||Mn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $0 extends F0{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Kc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ml extends $0{data(e={}){return super.data(e)}}class Jk{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ml(this._firestore,this._userDataWriter,r.key,r,new Xs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new ml(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Xs(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const u=new ml(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Xs(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:Zk(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Zk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t){t=en(t,mt);const e=en(t.firestore,pi);return Ok(fp(e),t._key).then(n=>ej(e,t,n))}class q0 extends Yk{constructor(e){super(),this.firestore=e}convertBytes(e){return new as(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function ct(t){t=en(t,Or);const e=en(t.firestore,pi),n=fp(e),r=new q0(e);return Qk(t._query),Lk(n,t._query).then(i=>new Jk(e,r,t,i))}function Rr(t,e,n){t=en(t,mt);const r=en(t.firestore,pi),i=B0(t.converter,e,n);return Yc(r,[L0(Hc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,zt.none())])}function qn(t,e,n,...r){t=en(t,mt);const i=en(t.firestore,pi),s=Hc(i);let o;return o=typeof(e=Ae(e))=="string"||e instanceof qc?Wk(s,"updateDoc",t._key,e,n,r):qk(s,"updateDoc",t._key,e),Yc(i,[o.toMutation(t._key,zt.exists(!0))])}function ia(t){return Yc(en(t.firestore,pi),[new Jf(t._key,zt.none())])}function mi(t,e){const n=en(t.firestore,pi),r=se(t),i=B0(t.converter,e);return Yc(n,[L0(Hc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,zt.exists(!1))]).then(()=>r)}function Yc(t,e){return function(r,i){const s=new kn;return r.asyncQueue.enqueueAndForget(async()=>Sk(await Dk(r),i,s)),s.promise}(fp(t),e)}function ej(t,e,n){const r=n.docs.get(e._key),i=new q0(t);return new $0(t,i,e._key,r,new Xs(n.hasPendingWrites,n.fromCache),e.converter)}function W0(){return new vp("serverTimestamp")}(function(e,n=!0){(function(i){fs=i})(di),Ir(new Ln("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),c=new pi(new nR(r.getProvider("auth-internal")),new oR(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ft(Iv,"4.7.3",e),Ft(Iv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="firebasestorage.googleapis.com",G0="storageBucket",tj=2*60*1e3,nj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe extends tn{constructor(e,n,r=0){super(dd(e),`Firebase Storage: ${n} (${dd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Re;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Re||(Re={}));function dd(t){return"storage/"+t}function Ip(){const t="An unknown error occurred, please check the error payload for server response.";return new Pe(Re.UNKNOWN,t)}function rj(t){return new Pe(Re.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ij(t){return new Pe(Re.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pe(Re.UNAUTHENTICATED,t)}function oj(){return new Pe(Re.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function aj(t){return new Pe(Re.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function lj(){return new Pe(Re.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cj(){return new Pe(Re.CANCELED,"User canceled the upload/download.")}function uj(t){return new Pe(Re.INVALID_URL,"Invalid URL '"+t+"'.")}function dj(t){return new Pe(Re.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hj(){return new Pe(Re.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+G0+"' property when initializing the app?")}function fj(){return new Pe(Re.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pj(){return new Pe(Re.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function mj(t){return new Pe(Re.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function bh(t){return new Pe(Re.INVALID_ARGUMENT,t)}function K0(){return new Pe(Re.APP_DELETED,"The Firebase app was deleted.")}function gj(t){return new Pe(Re.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uo(t,e){return new Pe(Re.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fs(t){throw new Pe(Re.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rt.makeFromUrl(e,n)}catch{return new Rt(e,"")}if(r.path==="")return r;throw dj(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(S){S.path_=decodeURIComponent(S.path)}const f="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${v}/${f}/b/${i}/o${m}`,"i"),x={bucket:1,path:3},E=n===H0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",y=new RegExp(`^https?://${E}/${i}/${R}`,"i"),I=[{regex:c,indices:u,postModify:s},{regex:g,indices:x,postModify:d},{regex:y,indices:{bucket:1,path:2},postModify:d}];for(let S=0;S<I.length;S++){const O=I[S],D=O.regex.exec(e);if(D){const C=D[O.indices.bucket];let _=D[O.indices.path];_||(_=""),r=new Rt(C,_),O.postModify(r);break}}if(r==null)throw uj(e);return r}}class vj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t,e,n){let r=1,i=null,s=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...R){d||(d=!0,e.apply(null,R))}function v(R){i=setTimeout(()=>{i=null,t(g,u())},R)}function m(){s&&clearTimeout(s)}function g(R,...y){if(d){m();return}if(R){m(),f.call(null,R,...y);return}if(u()||o){m(),f.call(null,R,...y);return}r<64&&(r*=2);let I;c===1?(c=2,I=0):I=(r+Math.random())*1e3,v(I)}let x=!1;function E(R){x||(x=!0,m(),!d&&(i!==null?(R||(c=2),clearTimeout(i),v(0)):R||(c=1)))}return v(0),s=setTimeout(()=>{o=!0,E(!0)},n),E}function _j(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(t){return t!==void 0}function Ej(t){return typeof t=="object"&&!Array.isArray(t)}function Cp(t){return typeof t=="string"||t instanceof String}function uy(t){return Np()&&t instanceof Blob}function Np(){return typeof Blob<"u"}function dy(t,e,n,r){if(r<e)throw bh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw bh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Q0(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Xr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xr||(Xr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,n,r,i,s,o,c,u,d,f,v,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=v,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ka(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===Xr.NO_ERROR,u=s.getStatus();if(!c||Tj(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Xr.ABORT;r(!1,new Ka(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Ka(d,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());wj(u)?s(u):s()}catch(u){o(u)}else if(c!==null){const u=Ip();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?K0():cj();o(u)}else{const u=lj();o(u)}};this.canceled_?n(!1,new Ka(!1,null,!0)):this.backoffId_=yj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_j(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ka{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Sj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ij(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Cj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Nj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Aj(t,e,n,r,i,s,o=!0){const c=Q0(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return Cj(d,e),Sj(d,n),Ij(d,s),Nj(d,r),new xj(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Pj(...t){const e=Rj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Np())return new Blob(t);throw new Pe(Re.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function kj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t){if(typeof atob>"u")throw mj("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hd{constructor(e,n){this.data=e,this.contentType=n||null}}function bj(t,e){switch(t){case an.RAW:return new hd(X0(e));case an.BASE64:case an.BASE64URL:return new hd(Y0(t,e));case an.DATA_URL:return new hd(Oj(e),Lj(e))}throw Ip()}function X0(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Dj(t){let e;try{e=decodeURIComponent(t)}catch{throw uo(an.DATA_URL,"Malformed data URL.")}return X0(e)}function Y0(t,e){switch(t){case an.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw uo(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case an.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw uo(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=jj(e)}catch(i){throw i.message.includes("polyfill")?i:uo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class J0{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw uo(an.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Vj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Oj(t){const e=new J0(t);return e.base64?Y0(an.BASE64,e.rest):Dj(e.rest)}function Lj(t){return new J0(t).contentType}function Vj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n){let r=0,i="";uy(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(uy(this.data_)){const r=this.data_,i=kj(r,e,n);return i===null?null:new er(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new er(r,!0)}}static getBlob(...e){if(Np()){const n=e.map(r=>r instanceof er?r.data_:r);return new er(Pj.apply(null,n))}else{const n=e.map(o=>Cp(o)?bj(an.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)i[s++]=o[c]}),new er(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t){let e;try{e=JSON.parse(t)}catch{return null}return Ej(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Uj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function eT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t,e){return e}class ht{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Fj}}let Qa=null;function zj(t){return!Cp(t)||t.length<2?t:eT(t)}function tT(){if(Qa)return Qa;const t=[];t.push(new ht("bucket")),t.push(new ht("generation")),t.push(new ht("metageneration")),t.push(new ht("name","fullPath",!0));function e(s,o){return zj(o)}const n=new ht("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ht("size");return i.xform=r,t.push(i),t.push(new ht("timeCreated")),t.push(new ht("updated")),t.push(new ht("md5Hash",null,!0)),t.push(new ht("cacheControl",null,!0)),t.push(new ht("contentDisposition",null,!0)),t.push(new ht("contentEncoding",null,!0)),t.push(new ht("contentLanguage",null,!0)),t.push(new ht("contentType",null,!0)),t.push(new ht("metadata","customMetadata",!0)),Qa=t,Qa}function Bj(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Rt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function $j(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Bj(r,t),r}function nT(t,e,n){const r=Z0(e);return r===null?null:$j(t,r,n)}function qj(t,e,n,r){const i=Z0(e);if(i===null||!Cp(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const f=t.bucket,v=t.fullPath,m="/b/"+o(f)+"/o/"+o(v),g=Ap(m,n,r),x=Q0({alt:"media",token:d});return g+x})[0]}function Wj(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class rT{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t){if(!t)throw Ip()}function Hj(t,e){function n(r,i){const s=nT(t,i,e);return iT(s!==null),s}return n}function Gj(t,e){function n(r,i){const s=nT(t,i,e);return iT(s!==null),qj(s,i,t.host,t._protocol)}return n}function sT(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=oj():i=sj():n.getStatus()===402?i=ij(t.bucket):n.getStatus()===403?i=aj(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Kj(t){const e=sT(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=rj(t.path)),s.serverResponse=i.serverResponse,s}return n}function Qj(t,e,n){const r=e.fullServerUrl(),i=Ap(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new rT(i,s,Gj(t,n),o);return c.errorHandler=Kj(e),c}function Xj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Yj(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Xj(null,e)),r}function Jj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let I="";for(let S=0;S<2;S++)I=I+Math.random().toString().slice(2);return I}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=Yj(e,r,i),f=Wj(d,n),v="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+u+"--",g=er.getBlob(v,r,m);if(g===null)throw fj();const x={name:d.fullPath},E=Ap(s,t.host,t._protocol),R="POST",y=t.maxUploadRetryTime,w=new rT(E,R,Hj(t,n),y);return w.urlParams=x,w.headers=o,w.body=g.uploadData(),w.errorHandler=sT(e),w}class Zj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Fs("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fs("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fs("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fs("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fs("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class e1 extends Zj{initXhr(){this.xhr_.responseType="text"}}function oT(){return new e1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n){this._service=e,n instanceof Rt?this._location=n:this._location=Rt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new oi(e,n)}get root(){const e=new Rt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eT(this._location.path)}get storage(){return this._service}get parent(){const e=Mj(this._location.path);if(e===null)return null;const n=new Rt(this._location.bucket,e);return new oi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw gj(e)}}function t1(t,e,n){t._throwIfRoot("uploadBytes");const r=Jj(t.storage,t._location,tT(),new er(e,!0),n);return t.storage.makeRequestWithTokens(r,oT).then(i=>({metadata:i,ref:t}))}function n1(t){t._throwIfRoot("getDownloadURL");const e=Qj(t.storage,t._location,tT());return t.storage.makeRequestWithTokens(e,oT).then(n=>{if(n===null)throw pj();return n})}function r1(t,e){const n=Uj(t._location.path,e),r=new Rt(t._location.bucket,n);return new oi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t){return/^[A-Za-z]+:\/\//.test(t)}function s1(t,e){return new oi(t,e)}function aT(t,e){if(t instanceof Rp){const n=t;if(n._bucket==null)throw hj();const r=new oi(n,n._bucket);return e!=null?aT(r,e):r}else return e!==void 0?r1(t,e):t}function o1(t,e){if(e&&i1(e)){if(t instanceof Rp)return s1(t,e);throw bh("To use ref(service, url), the first argument must be a Storage instance.")}else return aT(t,e)}function hy(t,e){const n=e==null?void 0:e[G0];return n==null?null:Rt.makeFromBucketSpec(n,t)}function a1(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:gE(i,t.app.options.projectId))}class Rp{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=H0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tj,this._maxUploadRetryTime=nj,this._requests=new Set,i!=null?this._bucket=Rt.makeFromBucketSpec(i,this._host):this._bucket=hy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rt.makeFromBucketSpec(this._url,e):this._bucket=hy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oi(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new vj(K0());{const o=Aj(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const fy="@firebase/storage",py="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="storage";function Jc(t,e,n){return t=Ae(t),t1(t,e,n)}function Zc(t){return t=Ae(t),n1(t)}function eu(t,e){return t=Ae(t),o1(t,e)}function cT(t=jc(),e){t=Ae(t);const r=Xo(t,lT).getImmediate({identifier:e}),i=Ff("storage");return i&&l1(r,...i),r}function l1(t,e,n,r={}){a1(t,e,n,r)}function c1(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Rp(n,r,i,e,di)}function u1(){Ir(new Ln(lT,c1,"PUBLIC").setMultipleInstances(!0)),Ft(fy,py,""),Ft(fy,py,"esm2017")}u1();function Pp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function uT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d1=uT,dT=new Ko("auth","Firebase",uT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new zf("@firebase/auth");function h1(t,...e){rc.logLevel<=ie.WARN&&rc.warn(`Auth (${di}): ${t}`,...e)}function gl(t,...e){rc.logLevel<=ie.ERROR&&rc.error(`Auth (${di}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw kp(t,...e)}function hn(t,...e){return kp(t,...e)}function hT(t,e,n){const r=Object.assign(Object.assign({},d1()),{[e]:n});return new Ko("auth","Firebase",r).create(e,{appName:t.name})}function Yr(t){return hT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dT.create(t,...e)}function K(t,e,...n){if(!t)throw kp(e,...n)}function Nn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gl(e),new Error(e)}function zn(t,e){t||Nn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function f1(){return my()==="http:"||my()==="https:"}function my(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(f1()||jN()||"connection"in navigator)?navigator.onLine:!0}function m1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.shortDelay=e,this.longDelay=n,zn(n>e,"Short delay should be less than long delay!"),this.isMobile=RN()||bN()}get(){return p1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t,e){zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=new sa(3e4,6e4);function bp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vs(t,e,n,r,i={}){return pT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const c=Qo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},s);return kN()||(d.referrerPolicy="no-referrer"),fT.fetch()(mT(t,t.config.apiHost,n,c),d)})}async function pT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},g1),e);try{const i=new _1(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Xa(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xa(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Xa(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Xa(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw hT(t,f,d);Fn(t,f)}}catch(i){if(i instanceof tn)throw i;Fn(t,"network-request-failed",{message:String(i)})}}async function y1(t,e,n,r,i={}){const s=await vs(t,e,n,r,i);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function mT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?jp(t.config,i):`${t.config.apiScheme}://${i}`}class _1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hn(this.auth,"network-request-failed")),v1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=hn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(t,e){return vs(t,"POST","/v1/accounts:delete",e)}async function gT(t,e){return vs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E1(t,e=!1){const n=Ae(t),r=await n.getIdToken(e),i=Dp(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ho(fd(i.auth_time)),issuedAtTime:ho(fd(i.iat)),expirationTime:ho(fd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function fd(t){return Number(t)*1e3}function Dp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return gl("JWT malformed, contained fewer than 3 sections"),null;try{const i=hE(n);return i?JSON.parse(i):(gl("Failed to decode base64 JWT payload"),null)}catch(i){return gl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function gy(t){const e=Dp(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof tn&&T1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function T1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ho(this.lastLoginAt),this.creationTime=ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(t){var e;const n=t.auth,r=await t.getIdToken(),i=await zo(t,gT(n,{idToken:r}));K(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?vT(s.providerUserInfo):[],c=I1(t.providerData,o),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Oh(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,v)}async function S1(t){const e=Ae(t);await ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I1(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vT(t){return t.map(e=>{var{providerId:n}=e,r=Pp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C1(t,e){const n=await pT(t,{},async()=>{const r=Qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=mT(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",fT.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function N1(t,e){return vs(t,"POST","/v2/accounts:revokeToken",bp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=gy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await C1(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qi;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qi,this.toJSON())}_performRefresh(){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class An{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Pp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new x1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Oh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await zo(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return E1(this,e)}reload(){return S1(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new An(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ic(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Yr(this.auth));const e=await this.getIdToken();return await zo(this,w1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,d,f;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:I,emailVerified:S,isAnonymous:O,providerData:D,stsTokenManager:C}=n;K(I&&C,e,"internal-error");const _=qi.fromJSON(this.name,C);K(typeof I=="string",e,"internal-error"),Qn(v,e.name),Qn(m,e.name),K(typeof S=="boolean",e,"internal-error"),K(typeof O=="boolean",e,"internal-error"),Qn(g,e.name),Qn(x,e.name),Qn(E,e.name),Qn(R,e.name),Qn(y,e.name),Qn(w,e.name);const A=new An({uid:I,auth:e,email:m,emailVerified:S,displayName:v,isAnonymous:O,photoURL:x,phoneNumber:g,tenantId:E,stsTokenManager:_,createdAt:y,lastLoginAt:w});return D&&Array.isArray(D)&&(A.providerData=D.map(P=>Object.assign({},P))),R&&(A._redirectEventId=R),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new qi;i.updateFromServerResponse(n);const s=new An({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ic(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];K(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?vT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new qi;c.updateFromIdToken(r);const u=new An({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Oh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=new Map;function Rn(t){zn(t instanceof Function,"Expected a class definition");let e=vy.get(t);return e?(zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yT.type="NONE";const yy=yT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t,e,n){return`firebase:${t}:${e}:${n}`}class Wi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=vl(this.userKey,i.apiKey,s),this.fullPersistenceKey=vl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?An._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wi(Rn(yy),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Rn(yy);const o=vl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){const v=An._fromJSON(e,f);d!==s&&(c=v),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Wi(s,e,r):(s=u[0],c&&await s._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Wi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_T(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ST(e))return"Blackberry";if(IT(e))return"Webos";if(wT(e))return"Safari";if((e.includes("chrome/")||ET(e))&&!e.includes("edge/"))return"Chrome";if(xT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _T(t=lt()){return/firefox\//i.test(t)}function wT(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ET(t=lt()){return/crios\//i.test(t)}function TT(t=lt()){return/iemobile/i.test(t)}function xT(t=lt()){return/android/i.test(t)}function ST(t=lt()){return/blackberry/i.test(t)}function IT(t=lt()){return/webos/i.test(t)}function Op(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function A1(t=lt()){var e;return Op(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function R1(){return DN()&&document.documentMode===10}function CT(t=lt()){return Op(t)||xT(t)||IT(t)||ST(t)||/windows phone/i.test(t)||TT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t,e=[]){let n;switch(t){case"Browser":n=_y(lt());break;case"Worker":n=`${_y(lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${di}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,c)=>{try{const u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(t,e={}){return vs(t,"GET","/v2/passwordPolicy",bp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=6;class b1{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:j1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wy(this),this.idTokenSubscription=new wy(this),this.beforeStateQueue=new P1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Wi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gT(this,{idToken:e}),r=await An._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(lr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ic(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Yr(this));const n=e?Ae(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await k1(this),n=new b1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ko("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await N1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await Wi.create(this,[Rn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&h1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Lp(t){return Ae(t)}class wy{constructor(e){this.auth=e,this.observer=null,this.addObserver=BN(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function O1(t){Vp=t}function L1(t){return Vp.loadJS(t)}function V1(){return Vp.gapiScript}function M1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t,e){const n=Xo(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Gl(s,e??{}))return i;Fn(i,"already-initialized")}return n.initialize({options:e})}function F1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function z1(t,e,n){const r=Lp(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=AT(e),{host:o,port:c}=B1(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),$1()}function AT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function B1(t){const e=AT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ey(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ey(o)}}}function Ey(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nn("not implemented")}_getIdTokenResponse(e){return Nn("not implemented")}_linkToIdToken(e,n){return Nn("not implemented")}_getReauthenticationResolver(e){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(t,e){return y1(t,"POST","/v1/accounts:signInWithIdp",bp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="http://localhost";class ai extends RT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ai(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Pp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ai(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Hi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hi(e,n)}buildRequest(){const e={requestUri:q1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends PT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends oa{constructor(){super("facebook.com")}static credential(e){return ai._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends oa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ai._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return nr.credential(n,r)}catch{return null}}}nr.GOOGLE_SIGN_IN_METHOD="google.com";nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends oa{constructor(){super("github.com")}static credential(e){return ai._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends oa{constructor(){super("twitter.com")}static credential(e,n){return ai._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await An._fromIdTokenResponse(e,r,i),o=Ty(r);return new ls({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ty(r);return new ls({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ty(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends tn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,sc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new sc(e,n,r,i)}}function kT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sc._fromErrorAndOperation(t,s,e,r):s})}async function W1(t,e,n=!1){const r=await zo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ls._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(t,e,n=!1){const{auth:r}=t;if(lr(r.app))return Promise.reject(Yr(r));const i="reauthenticate";try{const s=await zo(t,kT(r,i,e,t),n);K(s.idToken,r,"internal-error");const o=Dp(s.idToken);K(o,r,"internal-error");const{sub:c}=o;return K(t.uid===c,r,"user-mismatch"),ls._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G1(t,e,n=!1){if(lr(t.app))return Promise.reject(Yr(t));const r="signIn",i=await kT(t,r,e),s=await ls._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function K1(t,e,n,r){return Ae(t).onIdTokenChanged(e,n,r)}function Q1(t,e,n){return Ae(t).beforeAuthStateChanged(e,n)}const oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=1e3,Y1=10;class bT extends jT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);R1()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Y1):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},X1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bT.type="LOCAL";const J1=bT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT extends jT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DT.type="SESSION";const OT=DT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new tu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,s)),u=await Z1(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{const d=Mp("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(v){const m=v;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(m.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return window}function tb(t){fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(){return typeof fn().WorkerGlobalScope<"u"&&typeof fn().importScripts=="function"}async function nb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ib(){return LT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="firebaseLocalStorageDb",sb=1,ac="firebaseLocalStorage",MT="fbase_key";class aa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nu(t,e){return t.transaction([ac],e?"readwrite":"readonly").objectStore(ac)}function ob(){const t=indexedDB.deleteDatabase(VT);return new aa(t).toPromise()}function Lh(){const t=indexedDB.open(VT,sb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ac,{keyPath:MT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ac)?e(r):(r.close(),await ob(),e(await Lh()))})})}async function xy(t,e,n){const r=nu(t,!0).put({[MT]:e,value:n});return new aa(r).toPromise()}async function ab(t,e){const n=nu(t,!1).get(e),r=await new aa(n).toPromise();return r===void 0?null:r.value}function Sy(t,e){const n=nu(t,!0).delete(e);return new aa(n).toPromise()}const lb=800,cb=3;class UT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tu._getInstance(ib()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nb(),!this.activeServiceWorker)return;this.sender=new eb(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lh();return await xy(e,oc,"1"),await Sy(e,oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ab(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=nu(i,!1).getAll();return new aa(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UT.type="LOCAL";const ub=UT;new sa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t,e){return e?Rn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends RT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hb(t){return G1(t.auth,new Up(t),t.bypassAuthState)}function fb(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),H1(n,new Up(t),t.bypassAuthState)}async function pb(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),W1(n,new Up(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hb;case"linkViaPopup":case"linkViaRedirect":return pb;case"reauthViaPopup":case"reauthViaRedirect":return fb;default:Fn(this.auth,"internal-error")}}resolve(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new sa(2e3,1e4);class Li extends FT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Li.currentPopupAction&&Li.currentPopupAction.cancel(),Li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){zn(this.filter.length===1,"Popup operations only handle one event");const e=Mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mb.get())};e()}}Li.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="pendingRedirect",yl=new Map;class vb extends FT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=yl.get(this.auth._key());if(!e){try{const r=await yb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yl.set(this.auth._key(),e)}return this.bypassAuthState||yl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yb(t,e){const n=Eb(e),r=wb(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function _b(t,e){yl.set(t._key(),e)}function wb(t){return Rn(t._redirectPersistence)}function Eb(t){return vl(gb,t.config.apiKey,t.name)}async function Tb(t,e,n=!1){if(lr(t.app))return Promise.reject(Yr(t));const r=Lp(t),i=db(r,e),o=await new vb(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=10*60*1e3;class Sb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ib(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!zT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xb&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iy(e))}saveEventToCache(e){this.cachedEventUids.add(Iy(e)),this.lastProcessedEventTime=Date.now()}}function Iy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ib(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(t,e={}){return vs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ab=/^https?/;async function Rb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Cb(t);for(const n of e)try{if(Pb(n))return}catch{}Fn(t,"unauthorized-domain")}function Pb(t){const e=Dh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Ab.test(n))return!1;if(Nb.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new sa(3e4,6e4);function Cy(){const t=fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jb(t){return new Promise((e,n)=>{var r,i,s;function o(){Cy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cy(),n(hn(t,"network-request-failed"))},timeout:kb.get()})}if(!((i=(r=fn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=fn().gapi)===null||s===void 0)&&s.load)o();else{const c=M1("iframefcb");return fn()[c]=()=>{gapi.load?o():n(hn(t,"network-request-failed"))},L1(`${V1()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw _l=null,e})}let _l=null;function bb(t){return _l=_l||jb(t),_l}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=new sa(5e3,15e3),Ob="__/auth/iframe",Lb="emulator/auth/iframe",Vb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ub(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jp(e,Lb):`https://${t.config.authDomain}/${Ob}`,r={apiKey:e.apiKey,appName:t.name,v:di},i=Mb.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Qo(r).slice(1)}`}async function Fb(t){const e=await bb(t),n=fn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:Ub(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vb,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=hn(t,"network-request-failed"),c=fn().setTimeout(()=>{s(o)},Db.get());function u(){fn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Bb=500,$b=600,qb="_blank",Wb="http://localhost";class Ny{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hb(t,e,n,r=Bb,i=$b){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},zb),{width:r.toString(),height:i.toString(),top:s,left:o}),d=lt().toLowerCase();n&&(c=ET(d)?qb:n),_T(d)&&(e=e||Wb,u.scrollbars="yes");const f=Object.entries(u).reduce((m,[g,x])=>`${m}${g}=${x},`,"");if(A1(d)&&c!=="_self")return Gb(e||"",c),new Ny(null);const v=window.open(e||"",c,f);K(v,t,"popup-blocked");try{v.focus()}catch{}return new Ny(v)}function Gb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="__/auth/handler",Qb="emulator/auth/handler",Xb=encodeURIComponent("fac");async function Ay(t,e,n,r,i,s){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:di,eventId:i};if(e instanceof PT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,v]of Object.entries({}))o[f]=v}if(e instanceof oa){const f=e.getScopes().filter(v=>v!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${Xb}=${encodeURIComponent(u)}`:"";return`${Yb(t)}?${Qo(c).slice(1)}${d}`}function Yb({config:t}){return t.emulator?jp(t,Qb):`https://${t.authDomain}/${Kb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="webStorageSupport";class Jb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OT,this._completeRedirectFn=Tb,this._overrideRedirectResult=_b}async _openPopup(e,n,r,i){var s;zn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ay(e,n,r,Dh(),i);return Hb(e,o,Mp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Ay(e,n,r,Dh(),i);return tb(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(zn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Fb(e),r=new Sb(e);return n.register("authEvent",i=>(K(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pd,{type:pd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[pd];o!==void 0&&n(!!o),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Rb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return CT()||wT()||Op()}}const Zb=Jb;var Ry="@firebase/auth",Py="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nD(t){Ir(new Ln("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NT(t)},d=new D1(r,i,s,u);return F1(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ir(new Ln("auth-internal",e=>{const n=Lp(e.getProvider("auth").getImmediate());return(r=>new eD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ft(Ry,Py,tD(t)),Ft(Ry,Py,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=5*60,iD=mE("authIdTokenMaxAge")||rD;let ky=null;const sD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>iD)return;const i=n==null?void 0:n.token;ky!==i&&(ky=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function oD(t=jc()){const e=Xo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=U1(t,{popupRedirectResolver:Zb,persistence:[ub,J1,OT]}),r=mE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=sD(s.toString());Q1(n,o,()=>o(n.currentUser)),K1(n,c=>o(c))}}const i=fE("auth");return i&&z1(n,`http://${i}`),n}function aD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}O1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=hn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",aD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nD("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="type.googleapis.com/google.protobuf.Int64Value",cD="type.googleapis.com/google.protobuf.UInt64Value";function BT(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Vh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Vh(e));if(typeof t=="function"||typeof t=="object")return BT(t,e=>Vh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function lc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case lD:case cD:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>lc(e)):typeof t=="function"||typeof t=="object"?BT(t,e=>lc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gi extends tn{constructor(e,n,r){super(`${Fp}/${e}`,n||""),this.details=r}}function uD(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function dD(t,e){let n=uD(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!jy[o])return new Gi("internal","internal");n=jy[o],r=o}const c=s.message;typeof c=="string"&&(r=c),i=s.details,i!==void 0&&(i=lc(i))}}catch{}return n==="ok"?null:new Gi(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="us-central1";function fD(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Gi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class pD{constructor(e,n,r,i,s=Mh,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new hD(n,r,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(s);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Mh}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function mD(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function gD(t,e,n){return r=>yD(t,e,r,{})}async function vD(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function yD(t,e,n,r){const i=t._url(e);return _D(t,i,n,r)}async function _D(t,e,n,r){n=Vh(n);const i={data:n},s={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=o.appCheckToken);const c=r.timeout||7e4,u=fD(c),d=await Promise.race([vD(e,i,s,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!d)throw new Gi("cancelled","Firebase Functions instance was deleted.");const f=dD(d.status,d.json);if(f)throw f;if(!d.json)throw new Gi("internal","Response is not valid JSON object.");let v=d.json.data;if(typeof v>"u"&&(v=d.json.result),typeof v>"u")throw new Gi("internal","Response is missing data field.");return{data:lc(v)}}const by="@firebase/functions",Dy="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="auth-internal",ED="app-check-internal",TD="messaging-internal";function xD(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(wD),c=r.getProvider(TD),u=r.getProvider(ED);return new pD(s,o,c,u,i,t)};Ir(new Ln(Fp,n,"PUBLIC").setMultipleInstances(!0)),Ft(by,Dy,e),Ft(by,Dy,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t=jc(),e=Mh){const r=Xo(Ae(t),Fp).getImmediate({identifier:e}),i=Ff("functions");return i&&SD(r,...i),r}function SD(t,e,n){mD(Ae(t),e,n)}function ru(t,e,n){return gD(Ae(t),e)}xD(fetch.bind(self));const ID={apiKey:"AIzaSyDf7bTYBUCJiVj8L-7nKxuWU8ueGdXc1W0",authDomain:"app-zerosei-pizza.firebaseapp.com",projectId:"app-zerosei-pizza",storageBucket:"app-zerosei-pizza.firebasestorage.app",messagingSenderId:"912128427084",appId:"1:912128427084:web:9f99ba64f9bd2c97f520e9"},la=_E(ID),H=Uk(la),zp=cT(la);oD(la);const CD=$T(la);async function qT(){const t=xe(H,"products"),e=jt(t,Ge("available","==",!0));return(await ct(e)).docs.map(r=>{var i,s;return{id:r.id,...r.data(),createdAt:(i=r.data().createdAt)==null?void 0:i.toDate(),updatedAt:(s=r.data().updatedAt)==null?void 0:s.toDate()}})}async function Bp(){const t=xe(H,"products");return(await ct(t)).docs.map(n=>{var r,i;return{id:n.id,...n.data(),createdAt:(r=n.data().createdAt)==null?void 0:r.toDate(),updatedAt:(i=n.data().updatedAt)==null?void 0:i.toDate()}})}async function $p(t){const e=xe(H,"products"),n=jt(e,Ge("category","==",t),Ge("available","==",!0));return(await ct(n)).docs.map(i=>{var s,o;return{id:i.id,...i.data(),createdAt:(s=i.data().createdAt)==null?void 0:s.toDate(),updatedAt:(o=i.data().updatedAt)==null?void 0:o.toDate()}})}async function WT(t){var r,i;const e=se(H,"products",t),n=await qt(e);return n.exists()?{id:n.id,...n.data(),createdAt:(r=n.data().createdAt)==null?void 0:r.toDate(),updatedAt:(i=n.data().updatedAt)==null?void 0:i.toDate()}:null}async function HT(t){const e=xe(H,"products");return(await mi(e,{...t,createdAt:ee.now(),updatedAt:ee.now()})).id}async function GT(t,e){const n=se(H,"products",t);await qn(n,{...e,updatedAt:ee.now()})}async function KT(t){const e=se(H,"products",t);await ia(e)}async function ND(t,e){const n=cT(),r=eu(n,`product_images/${e}/${t.name}`),i=await Jc(r,t);return await Zc(i.ref)}async function AD(t){const e=await qT(),n=t.toLowerCase();return e.filter(r=>{var i,s;return r.name.toLowerCase().includes(n)||((i=r.description)==null?void 0:i.toLowerCase().includes(n))||(((s=r.ingredients)==null?void 0:s.some(o=>o.toLowerCase().includes(n)))??!1)})}async function qp(){const t=xe(H,"categories"),e=jt(t,Xc("order","asc"));return(await ct(e)).docs.map(r=>({id:r.id,...r.data()}))}async function QT(t){const e=xe(H,"categories");return(await mi(e,t)).id}async function XT(t,e){const n=se(H,"categories",t);await qn(n,e)}async function YT(t){const e=se(H,"categories",t);await ia(e)}const Tr=t=>{if(t)return typeof t.toDate=="function"?t.toDate():t instanceof Date?t:new Date(t)};async function RD(t){const e=se(H,"users",t),n=await qt(e);if(!n.exists())return null;const r=n.data();return{id:n.id,...r,createdAt:Tr(r.createdAt),updatedAt:Tr(r.updatedAt)}}async function JT(t){const e=xe(H,"users");return(await mi(e,{...t,createdAt:ee.now(),updatedAt:ee.now()})).id}async function cc(t,e){const n=se(H,"users",t),r={...e,updatedAt:ee.now()};if(e.createdAt){const i=Tr(e.createdAt);i&&(r.createdAt=ee.fromDate(i))}await Rr(n,r,{merge:!0})}async function ZT(t){const e=xe(H,"users"),n=jt(e,Ge("phone","==",t),Xk(1)),r=await ct(n);if(r.empty)return null;const i=r.docs[0],s=i.data();return{id:i.id,...s,createdAt:Tr(s.createdAt),updatedAt:Tr(s.updatedAt)}}async function ex(){const t=xe(H,"users");try{const e=await ct(t);return console.log(`Fetched ${e.size} users`),e.docs.map(n=>{const r=n.data();return{id:n.id,...r,createdAt:Tr(r.createdAt),updatedAt:Tr(r.updatedAt),lastAccess:Tr(r.lastAccess)}})}catch(e){return console.error("Error fetching users:",e),[]}}async function uc(t){const e=xe(H,"orders");return(await mi(e,{...t,createdAt:ee.now(),updatedAt:ee.now()})).id}async function PD(t){var r,i;const e=se(H,"orders",t),n=await qt(e);return n.exists()?{id:n.id,...n.data(),createdAt:(r=n.data().createdAt)==null?void 0:r.toDate(),updatedAt:(i=n.data().updatedAt)==null?void 0:i.toDate()}:null}async function kD(t){const e=xe(H,"orders"),n=jt(e,Ge("userId","==",t),Xc("createdAt","desc"));return(await ct(n)).docs.map(i=>{var s,o;return{id:i.id,...i.data(),createdAt:(s=i.data().createdAt)==null?void 0:s.toDate(),updatedAt:(o=i.data().updatedAt)==null?void 0:o.toDate()}})}async function tx(){const t=xe(H,"orders"),e=jt(t,Xc("createdAt","desc"));return(await ct(e)).docs.map(r=>{var i,s;return{id:r.id,...r.data(),createdAt:(i=r.data().createdAt)==null?void 0:i.toDate(),updatedAt:(s=r.data().updatedAt)==null?void 0:s.toDate()}})}async function nx(t,e){const n=se(H,"orders",t);await qn(n,{status:e,updatedAt:ee.now()})}async function jD(){const t=xe(H,"modifications"),e=jt(t,Ge("available","==",!0));return(await ct(e)).docs.map(r=>({id:r.id,...r.data()}))}async function bD(t){const e=xe(H,"modifications");return(await mi(e,t)).id}async function DD(t,e){const n=se(H,"modifications",t);await qn(n,e)}async function OD(t){const e=se(H,"modifications",t);await ia(e)}async function LD(){const t=xe(H,"promotions"),e=ee.now(),n=jt(t,Ge("active","==",!0),Ge("validFrom","<=",e),Ge("validTo",">=",e));return(await ct(n)).docs.map(i=>{var s,o,c,u;return{id:i.id,...i.data(),validFrom:(s=i.data().validFrom)==null?void 0:s.toDate(),validTo:(o=i.data().validTo)==null?void 0:o.toDate(),createdAt:(c=i.data().createdAt)==null?void 0:c.toDate(),updatedAt:(u=i.data().updatedAt)==null?void 0:u.toDate()}})}async function iu(){const t=xe(H,"promotions"),e=jt(t,Xc("createdAt","desc"));return(await ct(e)).docs.map(r=>{var i,s,o,c;return{id:r.id,...r.data(),validFrom:(i=r.data().validFrom)==null?void 0:i.toDate(),validTo:(s=r.data().validTo)==null?void 0:s.toDate(),createdAt:(o=r.data().createdAt)==null?void 0:o.toDate(),updatedAt:(c=r.data().updatedAt)==null?void 0:c.toDate()}})}async function rx(t){const e=xe(H,"promotions");return(await mi(e,{...t,validFrom:ee.fromDate(t.validFrom),validTo:ee.fromDate(t.validTo),createdAt:ee.now(),updatedAt:ee.now()})).id}async function ix(t,e){const n=se(H,"promotions",t),r={...e,updatedAt:ee.now()};e.validFrom&&(r.validFrom=ee.fromDate(e.validFrom)),e.validTo&&(r.validTo=ee.fromDate(e.validTo)),await qn(n,r)}async function sx(t){const e=se(H,"promotions",t);await ia(e)}const md=Object.freeze(Object.defineProperty({__proto__:null,createCategory:QT,createModification:bD,createOrder:uc,createProduct:HT,createPromotion:rx,createUserProfile:JT,deleteCategory:YT,deleteModification:OD,deleteProduct:KT,deletePromotion:sx,getActivePromotions:LD,getAllCategories:qp,getAllModifications:jD,getAllOrders:tx,getAllProducts:qT,getAllProductsForAdmin:Bp,getAllPromotions:iu,getAllUsers:ex,getOrderById:PD,getOrdersByUser:kD,getProductById:WT,getProductsByCategory:$p,getUserByPhone:ZT,getUserProfile:RD,searchProducts:AD,updateCategory:XT,updateModification:DD,updateOrderStatus:nx,updateProduct:GT,updatePromotion:ix,updateUserProfile:cc,uploadProductImage:ND},Symbol.toStringTag,{value:"Module"}));function VD(){const[t,e]=b.useState(null),[n,r]=b.useState(!1);b.useEffect(()=>{i()},[]);const i=async()=>{try{const u=(await iu()).filter(d=>d.active&&d.showAsPopup&&s(d));if(u.length>0){const d=u[0];JSON.parse(localStorage.getItem("seenPromotions")||"[]").includes(d.id)||(e(d),r(!0))}}catch(c){console.error("Error loading popup promotion:",c)}},s=c=>{const u=new Date;return u>=new Date(c.validFrom)&&u<=new Date(c.validTo)},o=(c=!1)=>{if(c&&t){const u=JSON.parse(localStorage.getItem("seenPromotions")||"[]");u.push(t.id),localStorage.setItem("seenPromotions",JSON.stringify(u))}r(!1)};return!n||!t?null:a.jsx("div",{className:"promotion-popup-overlay",onClick:()=>o(!1),children:a.jsxs("div",{className:"promotion-popup",onClick:c=>c.stopPropagation(),children:[a.jsx("button",{className:"popup-close",onClick:()=>o(!1),children:""}),t.imageUrl&&a.jsx("div",{className:"popup-image",children:a.jsx("img",{src:t.imageUrl,alt:t.title})}),a.jsxs("div",{className:"popup-content",children:[a.jsx("h2",{children:t.title}),a.jsx("p",{children:t.description}),a.jsxs("div",{className:"popup-actions",children:[a.jsx("button",{className:"btn btn-primary",onClick:()=>o(!1),children:"Ho capito!"}),a.jsx("button",{className:"btn btn-text",onClick:()=>o(!0),children:"Non mostrare pi"})]})]})]})})}function MD({children:t,cart:e}){const[n,r]=b.useState(!1),[i,s]=b.useState(""),[o,c]=b.useState(60),u=Ot(),d=wN(e);b.useEffect(()=>{(async()=>{try{const x=se(H,"config","general"),E=await qt(x);E.exists()&&(E.data().logoUrl&&s(E.data().logoUrl),E.data().logoSize&&c(E.data().logoSize))}catch(x){console.error("Error loading logo:",x)}})()},[]);const f=()=>r(!n),v=()=>r(!1),m=[{path:"/",label:"Home",icon:""},{path:"/menu",label:"Men",icon:""},{path:"/news",label:"Novit e Offerte",icon:""},{path:"/fidelity",label:"Fidelity Card",icon:""},{path:"/profile",label:"Profilo",icon:""}];return a.jsxs("div",{className:"layout",children:[a.jsx("header",{className:"header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"menu-btn",onClick:f,"aria-label":"Menu",children:a.jsx("span",{className:"menu-icon",children:""})}),a.jsx(uv,{to:"/",className:"logo",children:i?a.jsx("img",{src:i,alt:"ZeroSei Pizza",className:"logo-image",style:{height:`${o}px`,objectFit:"contain"}}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"logo-text",children:"ZeroSei"}),a.jsx("span",{className:"logo-emoji",children:""})]})}),a.jsxs("button",{className:"cart-btn",onClick:()=>u("/cart"),"aria-label":"Carrello",children:[a.jsx("span",{className:"cart-icon",children:""}),d>0&&a.jsx("span",{className:"cart-badge",children:d})]})]})}),a.jsx("div",{className:`sidebar-overlay ${n?"active":""}`,onClick:v}),a.jsxs("aside",{className:`sidebar ${n?"open":""}`,children:[a.jsxs("div",{className:"sidebar-header",children:[a.jsx("h2",{children:"Menu"}),a.jsx("button",{className:"close-btn",onClick:v,children:""})]}),a.jsx("nav",{className:"sidebar-nav",children:m.map(g=>a.jsxs(uv,{to:g.path,className:"sidebar-link",onClick:v,children:[a.jsx("span",{className:"sidebar-icon",children:g.icon}),a.jsx("span",{children:g.label})]},g.path))}),a.jsx("div",{className:"sidebar-footer",children:a.jsxs("div",{className:"social-links",children:[a.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Instagram"}),a.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Facebook"}),a.jsx("a",{href:"https://zerosei.it",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:" Sito Web"})]})})]}),a.jsx("main",{className:"main-content",children:t}),a.jsx("footer",{className:"footer",children:a.jsx("div",{className:"footer-content",children:a.jsx("p",{children:" 2025 ZeroSei Pizza. Tutti i diritti riservati."})})}),a.jsx(VD,{})]})}const ox="+390456180120";function UD(){return`tel:${ox}`}async function ax(t,e,n){try{if(console.log("Saving phone order..."),!t||t.items.length===0){const r={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Cliente",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"Telefonico",phone:(e==null?void 0:e.phone)||"",email:""},items:[],total:0,status:"pending",source:"phone",notes:"Chiamata telefonica avviata da app"};await uc(r),console.log("Phone call event saved to Firestore")}else{const r=t.items.map(s=>({productId:s.product.id,productName:s.product.name,quantity:s.quantity,price:s.product.price,notes:s.notes,modifications:s.modifications})),i={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Cliente",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"Telefonico",phone:(e==null?void 0:e.phone)||"",email:""},items:r,total:t.total,status:"pending",source:"phone",notes:(n==null?void 0:n.notes)||"Ordine telefonico da app",deliveryAddress:(n==null?void 0:n.deliveryType)==="delivery"&&(n!=null&&n.deliveryAddress)?`${n.deliveryAddress.street}, ${n.deliveryAddress.city} - ${n.deliveryAddress.doorbell}`:null};await uc(i),console.log("Phone order saved to Firestore with cart data")}}catch(r){console.error("Error saving phone order:",r)}window.location.href=UD()}function FD(){return ox.replace(/(\+\d{2})(\d{3})(\d{3})(\d{4})/,"$1 $2 $3 $4")}const zD="393792407433";function BD(t,e,n){let r=` *Nuovo Ordine ZeroSei Pizza*

`;if(e&&(r+=` *Cliente:* ${e.name}
`,r+=` *Telefono:* ${e.phone}

`),n&&(n.deliveryType==="pickup"?(r+=` *Ritiro in Pizzeria*
`,n.pickupTime&&(r+=` *Orario preferito:* ${n.pickupTime}
`),r+=`
`):(r+=` *Consegna a Domicilio*
`,n.deliveryAddress&&(r+=` *Indirizzo:* ${n.deliveryAddress.street}, ${n.deliveryAddress.city}
`,r+=` *Campanello:* ${n.deliveryAddress.doorbell}
`),n.pickupTime&&(r+=` *Orario preferito:* ${n.pickupTime}
`),r+=`
`)),r+=`*Prodotti:*
`,t.items.forEach((i,s)=>{const o=Pc(i);r+=`${s+1}. *${i.product.name}* x${i.quantity}
`,i.modifications&&i.modifications.length>0&&(r+=`    ${i.modifications.map(c=>c.name).join(", ")}
`),r+=`    ${(o*i.quantity).toFixed(2)}
`,i.notes&&(r+=`    Note: ${i.notes}
`)}),r+=`
*Totale: ${t.total.toFixed(2)}*
`,(n==null?void 0:n.deliveryType)==="delivery"&&(r+=`_(escluse eventuali spese di trasporto)_
`),r+=`
`,n){let i="";switch(n.paymentMethod){case"cash":i="Contanti";break;case"pos":i="POS";break;case"satispay":i="Satispay";break}r+=` *Pagamento:* ${i}
`}return n!=null&&n.notes&&(r+=`
 *Note:* ${n.notes}`),r}function $D(t,e,n){const r=BD(t,e,n),i=encodeURIComponent(r);return`https://wa.me/${zD}?text=${i}`}async function Wp(t,e,n){const r=$D(t,e,n);window.open(r,"_blank");try{const i={userId:"guest",userProfile:{firstName:(e==null?void 0:e.name.split(" ")[0])||"Guest",lastName:(e==null?void 0:e.name.split(" ").slice(1).join(" "))||"",phone:(e==null?void 0:e.phone)||"",email:""},items:t.items.map(s=>({productId:s.product.id,productName:s.product.name,quantity:s.quantity,price:Pc(s),notes:s.notes,modifications:s.modifications})),total:t.total,status:"pending",source:"whatsapp",deliveryAddress:n!=null&&n.deliveryAddress?`${n.deliveryAddress.street}, ${n.deliveryAddress.city} (Campanello: ${n.deliveryAddress.doorbell})`:null,notes:(n==null?void 0:n.notes)||null};await uc(i),console.log("Order saved to Firestore")}catch(i){console.error("Error saving order to Firestore:",i)}}const gd={heroTitle:"Benvenuto da ZeroSei ",heroSubtitle:"La migliore pizza napoletana d'asporto della citt",featuresTitle:"Perch scegliere ZeroSei?",features:[{id:"feature1",icon:"",title:"Forno a Legna",description:"Pizza cotta nel tradizionale forno a legna"},{id:"feature2",icon:"",title:"Ingredienti Freschi",description:"Solo ingredienti di prima qualit"},{id:"feature3",icon:"",title:"Servizio Veloce",description:"Pronta in 15-20 minuti"},{id:"feature4",icon:"",title:"Ricetta Napoletana",description:"Autentica tradizione partenopea"}],buttons:[{id:"menu",icon:"",title:"Men",description:"Scopri le nostre pizze",color:"#E74C3C",visible:!0,order:1},{id:"phone",icon:"",title:"Chiama Ora",description:FD(),color:"#27AE60",visible:!0,order:2},{id:"whatsapp",icon:"",title:"Ordina su WhatsApp",description:"Ordine rapido e facile",color:"#25D366",visible:!0,order:3},{id:"fidelity",icon:"",title:"Fidelity Card",description:"I tuoi punti fedelt",color:"#F39C12",visible:!0,order:4}]};function qD(){const t=Ot(),[e,n]=b.useState(gd),[r,i]=b.useState(!0);b.useEffect(()=>{s()},[]);const s=async()=>{try{const f=se(H,"config","home"),v=await qt(f);v.exists()&&n({...gd,...v.data()})}catch(f){console.error("Error loading home config:",f)}i(!1)},o=()=>{const f=aE(),v=localStorage.getItem("user_profile");let m;if(v){const g=JSON.parse(v);m={name:`${g.firstName} ${g.lastName}`,phone:g.phone}}Wp(f,m)},c=()=>{ax()},u=f=>{switch(f){case"menu":t("/menu");break;case"phone":c();break;case"whatsapp":o();break;case"fidelity":t("/fidelity");break;case"news":t("/news");break}};if(r)return a.jsx("div",{className:"home-screen fade-in",children:a.jsx("div",{className:"loading",children:"Caricamento..."})});const d=e.buttons.filter(f=>f.visible).sort((f,v)=>f.order-v.order);return a.jsxs("div",{className:"home-screen fade-in",children:[a.jsx("section",{className:"hero",children:a.jsxs("div",{className:"hero-content",children:[a.jsx("h1",{className:"hero-title",children:e.heroTitle}),a.jsx("p",{className:"hero-subtitle",children:e.heroSubtitle})]})}),a.jsx("section",{className:"cta-section",children:a.jsx("div",{className:"cta-grid",children:d.map(f=>a.jsxs("button",{className:"cta-card",style:{background:`linear-gradient(135deg, ${f.color} 0%, ${f.color}dd 100%)`,borderColor:f.color},onClick:()=>u(f.id),children:[f.imageUrl?a.jsx("img",{src:f.imageUrl,alt:f.title,className:"cta-icon-image"}):a.jsx("span",{className:"cta-icon",children:f.icon}),a.jsx("h3",{children:f.title}),a.jsx("p",{children:f.description})]},f.id))})}),a.jsxs("section",{className:"info-section",children:[a.jsx("h2",{children:e.featuresTitle||"Perch scegliere ZeroSei?"}),a.jsx("div",{className:"features-grid",children:(e.features||gd.features||[]).map(f=>a.jsxs("div",{className:"feature",children:[a.jsx("span",{className:"feature-icon",children:f.icon}),a.jsx("h4",{children:f.title}),a.jsx("p",{children:f.description})]},f.id))})]}),a.jsxs("section",{className:"social-section",children:[a.jsx("h3",{children:"Seguici sui social"}),a.jsxs("div",{className:"social-buttons",children:[a.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"social-btn instagram",children:" Instagram"}),a.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"social-btn facebook",children:" Facebook"}),a.jsx("a",{href:"https://www.zeroseilapizzadasporto.it",target:"_blank",rel:"noopener noreferrer",className:"social-btn website",children:" Sito Web"})]})]})]})}function WD(){const t=Ot(),[e,n]=b.useState([]),[r,i]=b.useState(!0);b.useEffect(()=>{s()},[]);const s=async()=>{try{const u=await qp();n(u)}catch(u){console.error("Error loading categories:",u)}i(!1)},o=u=>{const d=["var(--color-primary)","#9B59B6","var(--color-secondary)","var(--color-accent)","#3498DB","#F1C40F","#E74C3C","#1ABC9C"];return d[u%d.length]},c=u=>({"Pizze Veraci":"pizze-veraci","Pizze Classiche":"pizze-classiche","Le Nostre Proposte":"proposte",Proposte:"proposte",Calzoni:"calzoni",Bevande:"bevande",Birre:"birre"})[u]||u.toLowerCase().replace(/\s+/g,"-");return r?a.jsxs("div",{className:"menu-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Nostro Men"}),a.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Caricamento categorie..."})]}):a.jsxs("div",{className:"menu-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Nostro Men"}),a.jsx("div",{className:"categories-grid",children:e.map((u,d)=>a.jsxs("button",{className:"category-card",onClick:()=>t(`/menu/${c(u.name)}`),style:{"--category-color":o(d)},children:[a.jsx("div",{className:"category-icon",children:u.icon||""}),a.jsxs("div",{className:"category-content",children:[a.jsx("h3",{children:u.name}),a.jsx("p",{children:u.description||""})]}),a.jsx("div",{className:"category-arrow",children:""})]},u.id))})]})}function HD({cart:t,setCart:e}){const{category:n}=Mf(),r=Ot(),[i,s]=b.useState([]),[o,c]=b.useState(""),[u,d]=b.useState(!0);b.useEffect(()=>{f()},[n]);const f=async()=>{d(!0),console.log(" ProductListScreen: Loading products for category:",n);try{if(n){const x=await $p(n);console.log(" ProductListScreen: Products loaded:",x.length,x),s(x)}else console.log(" ProductListScreen: No category specified")}catch(x){console.error(" ProductListScreen: Error loading products:",x)}d(!1)},v=i.filter(x=>{var E,R;return x.name.toLowerCase().includes(o.toLowerCase())||(((E=x.ingredients)==null?void 0:E.some(y=>y.toLowerCase().includes(o.toLowerCase())))??!1)||(((R=x.description)==null?void 0:R.toLowerCase().includes(o.toLowerCase()))??!1)}).sort((x,E)=>E.price-x.price),m=x=>{switch(x){case"pizze-veraci":return"Pizze Veraci";case"pizze-classiche":return"Pizze Classiche";case"proposte":return"Le Nostre Proposte";case"calzoni":return"Calzoni";case"bevande":return"Bevande";case"birre":return"Birre";default:return"Prodotti"}},g=(x,E)=>{x.stopPropagation();const R=lE(t,E,1);e(R)};return a.jsxs("div",{className:"product-list-screen fade-in",children:[a.jsxs("div",{className:"list-header",children:[a.jsx("button",{className:"back-btn",onClick:()=>r("/menu"),children:" Indietro"}),a.jsx("h1",{children:m(n)})]}),a.jsxs("div",{className:"search-bar",children:[a.jsx("span",{className:"search-icon",children:""}),a.jsx("input",{type:"text",placeholder:"Cerca pizze o ingredienti...",value:o,onChange:x=>c(x.target.value)})]}),u?a.jsx("div",{className:"loading",children:"Caricamento..."}):a.jsxs("div",{className:"products-grid",children:[v.map(x=>{var R,y,w;const E=((R=x.imageUrl)!=null&&R.startsWith("http")?x.imageUrl:null)||((y=x.image)!=null&&y.startsWith("http")?x.image:null)||x.imageUrl||x.image;return a.jsxs("div",{className:"product-card",onClick:()=>r(`/product/${x.id}`),children:[E&&a.jsx("div",{className:"product-list-image-container",children:a.jsx("img",{src:E,alt:x.name,className:"product-list-image",onError:I=>I.currentTarget.style.display="none"})}),a.jsxs("div",{className:"product-info",children:[a.jsx("h3",{children:x.name}),a.jsx("p",{className:"ingredients",children:x.description||((w=x.ingredients)==null?void 0:w.join(", "))||""}),a.jsxs("p",{className:"price",children:["",x.price.toFixed(2)]})]}),a.jsx("button",{className:"add-btn",onClick:I=>g(I,x),children:"+"})]},x.id)}),v.length===0&&a.jsx("div",{className:"no-results",children:a.jsx("p",{children:"Nessun prodotto trovato."})})]})]})}const su="modifications";async function lx(){try{const t=await ct(xe(H,su)),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e}catch(t){return console.error("Error loading modifications:",t),[]}}async function GD(t){try{console.log("Saving modification:",t);const e=se(H,su,t.id),n={name:t.name,price:t.price,type:t.type,available:t.available,category:t.category};console.log("Data to save:",n),await Rr(e,n),console.log("Modification saved successfully")}catch(e){throw console.error("Error saving modification:",e),e}}async function KD(t){try{await ia(se(H,su,t))}catch(e){throw console.error("Error deleting modification:",e),e}}async function QD(t,e){try{const n=se(H,su,t);await qn(n,{available:e})}catch(n){throw console.error("Error updating modification availability:",n),n}}function XD({cart:t,setCart:e}){var P;const{id:n}=Mf(),r=Ot(),[i,s]=b.useState(null),[o,c]=b.useState(1),[u,d]=b.useState(""),[f,v]=b.useState([]),[m,g]=b.useState([]),[x,E]=b.useState(!0);b.useEffect(()=>{y(),R()},[n]);const R=async()=>{const N=await lx();g(N)},y=async()=>{if(n){try{const N=await WT(n);s(N)}catch(N){console.error("Error loading product:",N)}E(!1)}},w=N=>{const j=o+N;j>=1&&c(j)},I=N=>{v(j=>j.find(re=>re.id===N.id)?j.filter(re=>re.id!==N.id):[...j,N])},S=()=>f.reduce((N,j)=>N+j.price,0),O=()=>i?(i.price+S())*o:0,D=()=>{if(i){const N=lE(t,i,o,u,f);e(N),r(-1)}},C=()=>{if(i){const N={items:[{product:i,quantity:o,notes:u,modifications:f}],total:O()},j=localStorage.getItem("user_profile");let k;if(j){const re=JSON.parse(j);k={name:`${re.firstName} ${re.lastName}`,phone:re.phone}}Wp(N,k)}};if(x)return a.jsx("div",{className:"loading",children:"Caricamento..."});if(!i)return a.jsx("div",{className:"error",children:"Prodotto non trovato"});const A=i.imageUrl&&i.imageUrl.startsWith("http")?i.imageUrl:i.image&&i.image.startsWith("http")?i.image:i.imageUrl||i.image;return a.jsxs("div",{className:"product-detail-screen fade-in",children:[a.jsx("button",{className:"back-btn-floating",onClick:()=>r(-1),children:""}),a.jsxs("div",{className:"product-image-container",children:[A?a.jsx("img",{src:A,alt:i.name,className:"product-image",onError:N=>{var j;console.error("Error loading image:",A),N.currentTarget.style.display="none",(j=N.currentTarget.nextElementSibling)==null||j.classList.remove("hidden")}}):a.jsx("div",{className:"product-image-placeholder",children:""}),a.jsx("div",{className:"product-image-placeholder hidden",children:""})]}),a.jsxs("div",{className:"product-details-content",children:[a.jsxs("div",{className:"product-header",children:[a.jsx("h1",{children:i.name}),a.jsxs("span",{className:"product-price",children:["",i.price.toFixed(2)]})]}),a.jsx("p",{className:"product-ingredients",children:i.description||((P=i.ingredients)==null?void 0:P.join(", "))||"Nessuna descrizione disponibile"}),!i.category.includes("bevande")&&!i.category.includes("birre")&&a.jsxs("div",{className:"modifications-section",children:[a.jsx("h3",{children:"Aggiungi ingredienti"}),["Formaggi","Salumi","Verdure","Altro"].map(N=>{const j=m.filter(k=>k.category===N&&k.available);return j.length===0?null:a.jsxs("div",{className:"modification-category",children:[a.jsx("h4",{children:N}),a.jsx("div",{className:"modification-grid",children:j.map(k=>a.jsxs("button",{className:`modification-btn ${f.find(re=>re.id===k.id)?"selected":""}`,onClick:()=>I(k),children:[a.jsx("span",{className:"mod-name",children:k.name}),a.jsxs("span",{className:"mod-price",children:["+",k.price.toFixed(2)]})]},k.id))})]},N)})]}),a.jsxs("div",{className:"notes-section",children:[a.jsx("label",{htmlFor:"notes",children:"Note per la cucina"}),a.jsx("textarea",{id:"notes",placeholder:"Es: Ben cotta, no basilico...",value:u,onChange:N=>d(N.target.value),rows:3})]}),a.jsxs("div",{className:"quantity-selector",children:[a.jsx("button",{className:"qty-btn",onClick:()=>w(-1),disabled:o<=1,children:"-"}),a.jsx("span",{className:"qty-value",children:o}),a.jsx("button",{className:"qty-btn",onClick:()=>w(1),children:"+"})]}),a.jsxs("div",{className:"action-buttons",children:[a.jsxs("button",{className:"btn btn-primary add-to-cart-btn",onClick:D,children:["Aggiungi al carrello - ",O().toFixed(2)]}),a.jsx("button",{className:"btn btn-whatsapp order-now-btn",onClick:C,children:"Ordina subito su WhatsApp"})]})]})]})}function YD({cart:t,setCart:e,userProfile:n}){const r=Ot(),[i,s]=b.useState(""),[o,c]=b.useState(""),[u,d]=b.useState("pickup"),[f,v]=b.useState(""),[m,g]=b.useState(""),[x,E]=b.useState(""),[R,y]=b.useState(""),[w,I]=b.useState("cash"),[S,O]=b.useState(""),D=(N,j)=>{const k=yN(t,N,j);e(k)},C=N=>{const j=cE(t,N);e(j)},_=()=>{if(window.confirm("Sei sicuro di voler svuotare il carrello?")){const N=_N();e(N)}},A=()=>{console.log("WhatsApp order button clicked");let N;if(n)N={name:`${n.firstName} ${n.lastName}`,phone:n.phone};else if(i&&o)N={name:i,phone:o};else{alert("Per favore inserisci il tuo nome e numero di telefono o accedi al profilo.");return}if(u==="delivery"){if(!m||!x||!R){alert("Per favore compila tutti i campi dell'indirizzo di consegna.");return}if(!f){alert("Per favore seleziona un orario di consegna.");return}}const j={deliveryType:u,pickupTime:f,deliveryAddress:u==="delivery"?{street:m,city:x,doorbell:R}:void 0,paymentMethod:w,notes:S};console.log("Opening WhatsApp with:",{cart:t,userInfo:N,orderDetails:j}),Wp(t,N,j)},P=()=>{console.log("Phone call button clicked");let N;n?N={name:`${n.firstName} ${n.lastName}`,phone:n.phone}:i&&o&&(N={name:i,phone:o});const j={deliveryType:u,pickupTime:f,deliveryAddress:u==="delivery"?{street:m,city:x,doorbell:R}:void 0,paymentMethod:w,notes:S};console.log("Calling pizzeria with:",{cart:t,userInfo:N,orderDetails:j}),ax(t,N,j)};return t.items.length===0?a.jsx("div",{className:"cart-screen empty fade-in",children:a.jsxs("div",{className:"empty-state",children:[a.jsx("span",{className:"empty-icon",children:""}),a.jsx("h2",{children:"Il tuo carrello  vuoto"}),a.jsx("p",{children:"Aggiungi qualche pizza deliziosa!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>r("/menu"),children:"Vai al Men"})]})}):a.jsxs("div",{className:"cart-screen fade-in",children:[a.jsxs("div",{className:"cart-header",children:[a.jsx("h1",{children:"Il tuo Ordine"}),a.jsx("button",{className:"clear-btn",onClick:_,children:"Svuota"})]}),a.jsx("div",{className:"cart-items",children:t.items.map((N,j)=>{const k=Pc(N);return a.jsxs("div",{className:"cart-item",children:[a.jsxs("div",{className:"item-info",children:[a.jsx("h3",{children:N.product.name}),a.jsxs("p",{className:"item-price",children:["",k.toFixed(2)," cad."]}),N.modifications&&N.modifications.length>0&&a.jsx("div",{className:"item-modifications",children:N.modifications.map(re=>a.jsxs("span",{className:"mod-tag",children:["+ ",re.name]},re.id))}),N.notes&&a.jsxs("p",{className:"item-notes",children:[" ",N.notes]})]}),a.jsxs("div",{className:"item-actions",children:[a.jsxs("div",{className:"qty-control",children:[a.jsx("button",{onClick:()=>D(j,N.quantity-1),children:"-"}),a.jsx("span",{children:N.quantity}),a.jsx("button",{onClick:()=>D(j,N.quantity+1),children:"+"})]}),a.jsxs("div",{className:"item-total",children:["",(k*N.quantity).toFixed(2)]}),a.jsx("button",{className:"remove-btn",onClick:()=>C(j),children:""})]})]},`${N.product.id}-${j}`)})}),a.jsx("div",{className:"cart-summary",children:a.jsxs("div",{className:"summary-row total",children:[a.jsx("span",{children:"Totale"}),a.jsxs("span",{children:["",t.total.toFixed(2)]})]})}),a.jsxs("div",{className:"quick-order-section",children:[a.jsxs("p",{className:"quick-order-hint",children:[" ",a.jsx("strong",{children:"Ordine veloce?"})," Chiama direttamente!"]}),a.jsxs("button",{className:"btn btn-secondary full-width",onClick:P,children:[a.jsx("span",{className:"icon",children:""})," Chiama Ora - 045 618 0120"]})]}),a.jsxs("div",{className:"whatsapp-order-section",children:[a.jsx("h3",{children:"Ordina su WhatsApp"}),a.jsx("p",{className:"section-hint",children:"Compila i dettagli per ricevere il riepilogo completo"}),!n&&a.jsxs("div",{className:"guest-info-inline",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"guestName",children:"Nome e Cognome *"}),a.jsx("input",{type:"text",id:"guestName",className:"input",placeholder:"Nome e Cognome",value:i,onChange:N=>s(N.target.value)})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"guestPhone",children:"Telefono *"}),a.jsx("input",{type:"tel",id:"guestPhone",className:"input",placeholder:"Numero di Telefono",value:o,onChange:N=>c(N.target.value)})]})]}),a.jsxs("div",{className:"delivery-options-wrapper",children:[a.jsx("label",{className:"section-label",children:"Modalit di Ritiro *"}),a.jsxs("div",{className:"delivery-options",children:[a.jsxs("button",{className:`delivery-option ${u==="pickup"?"active":""}`,onClick:()=>d("pickup"),children:[a.jsx("span",{className:"option-icon",children:""}),a.jsx("span",{className:"option-label",children:"Ritiro in Pizzeria"})]}),a.jsxs("button",{className:`delivery-option ${u==="delivery"?"active":""}`,onClick:()=>d("delivery"),children:[a.jsx("span",{className:"option-icon",children:""}),a.jsx("span",{className:"option-label",children:"Consegna a Domicilio"})]})]}),u==="pickup"&&a.jsxs("div",{className:"pickup-details",children:[a.jsx("label",{htmlFor:"pickupTime",children:"Orario Preferito (opzionale)"}),a.jsx("input",{type:"time",id:"pickupTime",className:"input",value:f,onChange:N=>v(N.target.value)})]}),u==="delivery"&&a.jsxs("div",{className:"delivery-details",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"street",children:"Via e Numero Civico *"}),a.jsx("input",{type:"text",id:"street",className:"input",placeholder:"Es: Via Roma, 123",value:m,onChange:N=>g(N.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"city",children:"Paese/Citt *"}),a.jsx("input",{type:"text",id:"city",className:"input",placeholder:"Es: Verona",value:x,onChange:N=>E(N.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"doorbell",children:"Nome sul Campanello *"}),a.jsx("input",{type:"text",id:"doorbell",className:"input",placeholder:"Nome e Cognome",value:R,onChange:N=>y(N.target.value),required:!0})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"deliveryTime",children:"Orario di Consegna *"}),a.jsx("input",{type:"time",id:"deliveryTime",className:"input",value:f,onChange:N=>v(N.target.value),required:!0})]}),a.jsx("label",{className:"section-label",children:"Metodo di Pagamento *"}),a.jsxs("div",{className:"payment-options",children:[a.jsx("button",{className:`payment-option ${w==="cash"?"active":""}`,onClick:()=>I("cash"),children:" Contanti"}),a.jsx("button",{className:`payment-option ${w==="pos"?"active":""}`,onClick:()=>I("pos"),children:" POS"}),a.jsx("button",{className:`payment-option ${w==="satispay"?"active":""}`,onClick:()=>I("satispay"),children:" Satispay"})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"orderNotes",children:"Note Aggiuntive (opzionale)"}),a.jsx("textarea",{id:"orderNotes",className:"input",placeholder:"Es: Suonare al citofono, non al campanello...",value:S,onChange:N=>O(N.target.value),rows:2})]})]}),a.jsxs("button",{className:"btn btn-whatsapp full-width",onClick:A,children:[a.jsx("span",{className:"icon",children:""})," Invia Ordine su WhatsApp"]}),!n&&a.jsxs("p",{className:"profile-hint",children:[" ",a.jsx("span",{onClick:()=>r("/profile"),className:"link",children:"Crea un profilo"})," per salvare i tuoi dati"]})]})]})}function JD({userProfile:t,setUserProfile:e}){const[n,r]=b.useState({firstName:"",lastName:"",phone:"",email:""}),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(!1),[f,v]=b.useState(null);b.useEffect(()=>{t?r({firstName:t.firstName,lastName:t.lastName,phone:t.phone,email:t.email}):s(!0)},[t]);const m=E=>{const{name:R,value:y}=E.target;r(w=>({...w,[R]:y}))},g=async()=>{if(t){d(!0),v(null);try{console.log("Invoking searchAndSyncFidelityPoints...");const R=await ru(CD,"searchAndSyncFidelityPoints")({email:t.email,firstName:t.firstName,lastName:t.lastName,phone:t.phone});console.log("Sync result:",R.data);const y=R.data;if(y.success){const w=se(H,"users",t.id);await qn(w,{cassaCloudId:y.customerId,loyaltyPoints:y.points,loyaltyPointsLastSync:new Date().toISOString()}),e&&e({...t,cassaCloudId:y.customerId,loyaltyPoints:y.points,loyaltyPointsLastSync:new Date().toISOString()}),c({type:"success",text:`Fidelity Card collegata! Punti: ${y.points}`})}else v(y.message||"Errore durante la ricerca"),y.code==="CUSTOMER_NOT_FOUND"&&c({type:"error",text:"Nessuna Fidelity Card trovata. Chiedi in cassa!"})}catch(E){console.error("Sync error:",E),v("Errore di connessione. Riprova pi tardi."),c({type:"error",text:"Errore di connessione durante la sincronizzazione."})}finally{d(!1)}}},x=async E=>{if(E.preventDefault(),!n.firstName||!n.lastName||!n.phone){c({type:"error",text:"Per favore compila tutti i campi obbligatori."});return}try{const R={id:(t==null?void 0:t.id)||"",firstName:n.firstName,lastName:n.lastName,phone:n.phone,email:n.email,loyaltyPoints:(t==null?void 0:t.loyaltyPoints)||0,createdAt:t!=null&&t.createdAt?new Date(t.createdAt):new Date,updatedAt:new Date};if(t!=null&&t.id){const{id:y,...w}=R;await cc(t.id,w)}else{const y=await ZT(n.phone);if(y){R.id=y.id,R.loyaltyPoints=y.loyaltyPoints,R.createdAt=y.createdAt;const{id:w,...I}=R;await cc(y.id,I)}else{const{id:w,...I}=R,S=await JT(I);R.id=S}}localStorage.setItem("user_profile",JSON.stringify(R)),e(R),s(!1),c({type:"success",text:"Profilo salvato con successo!"})}catch(R){console.error("Error saving profile:",R),c({type:"error",text:`Errore: ${R.message||"Errore sconosciuto"}. Codice: ${R.code||"N/A"}`})}setTimeout(()=>c(null),3e3)};return a.jsxs("div",{className:"profile-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Il Tuo Profilo"}),o&&a.jsx("div",{className:`message ${o.type}`,children:o.text}),a.jsxs("div",{className:"profile-card",children:[a.jsxs("div",{className:"profile-header",children:[a.jsx("div",{className:"avatar-circle",children:n.firstName?n.firstName[0].toUpperCase():""}),!i&&a.jsxs("div",{className:"profile-summary",children:[a.jsxs("h2",{children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]}),a.jsx("p",{children:t==null?void 0:t.phone})]})]}),a.jsxs("form",{onSubmit:x,className:"profile-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"firstName",children:"Nome *"}),a.jsx("input",{type:"text",id:"firstName",name:"firstName",value:n.firstName,onChange:m,disabled:!i,placeholder:"Il tuo nome",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"lastName",children:"Cognome *"}),a.jsx("input",{type:"text",id:"lastName",name:"lastName",value:n.lastName,onChange:m,disabled:!i,placeholder:"Il tuo cognome",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"phone",children:"Telefono *"}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:m,disabled:!i,placeholder:"Il tuo numero di cellulare",className:"input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:m,disabled:!i,placeholder:"La tua email (opzionale)",className:"input"})]}),a.jsx("div",{className:"form-actions",children:i?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>s(!1),disabled:!t,children:"Annulla"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Salva Profilo"})]}):a.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>s(!0),children:"Modifica Dati"})})]})]}),t&&!i&&a.jsxs("div",{className:"profile-card",children:[a.jsx("h3",{children:" Fidelity Card ZeroSei"}),t.cassaCloudId?a.jsxs("div",{className:"fidelity-info",children:[a.jsxs("div",{className:"points-display",children:[a.jsx("span",{className:"points-label",children:"I tuoi Punti:"}),a.jsx("span",{className:"points-value",children:t.loyaltyPoints||0})]}),a.jsx("p",{className:"last-sync",style:{fontSize:"0.8rem",color:"#666",marginTop:"5px"},children:t.loyaltyPointsLastSync?`Aggiornato: ${new Date(t.loyaltyPointsLastSync).toLocaleString("it-IT")}`:""}),a.jsx("button",{onClick:g,disabled:u,className:"btn btn-secondary",style:{marginTop:"10px",width:"100%"},children:u?" Sincronizzazione...":" Aggiorna Punti"})]}):a.jsxs("div",{className:"fidelity-connect",children:[a.jsx("p",{children:"Per collegare la tua Fidelity Card e vedere i punti, comunica alla pizzeria l'email usata nel tuo profilo app. Una volta inserita nel gestionale, premi il pulsante qui sotto."}),a.jsx("button",{onClick:g,disabled:u,className:"btn btn-primary",style:{marginTop:"10px",width:"100%"},children:u?" Ricerca in corso...":" Collega Fidelity Card"}),f&&a.jsx("p",{className:"error-text",style:{color:"red",marginTop:"10px",fontSize:"0.9rem"},children:f})]})]}),a.jsxs("div",{className:"info-box",children:[a.jsx("h3",{children:" Perch serve il profilo?"}),a.jsx("p",{children:"I tuoi dati servono solo per pre-compilare i messaggi WhatsApp per gli ordini e per associare la tua Fidelity Card. Non vengono inviati a server esterni se non quando invii un ordine o usi la Fidelity Card."})]})]})}function ZD(){const t=Ot(),[e,n]=b.useState([]),[r,i]=b.useState(!0);b.useEffect(()=>{s()},[]);const s=async()=>{try{const d=(await iu()).filter(f=>f.active);n(d)}catch(u){console.error("Error loading promotions:",u)}i(!1)},o=u=>new Date(u).toLocaleDateString("it-IT",{day:"numeric",month:"short",year:"numeric"}),c=u=>{const d=new Date;return d>=new Date(u.validFrom)&&d<=new Date(u.validTo)};return r?a.jsxs("div",{className:"news-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Novit e Offerte"}),a.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Caricamento offerte..."})]}):a.jsxs("div",{className:"news-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Novit e Offerte"}),e.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:[a.jsx("p",{children:"Nessuna offerta disponibile al momento."}),a.jsx("p",{style:{fontSize:"0.9rem",marginTop:"8px"},children:"Torna presto per scoprire le nostre promozioni!"})]}):a.jsx("div",{className:"news-grid",children:e.map(u=>a.jsxs("div",{className:"news-card clickable",onClick:()=>t(`/offer/${u.id}`),children:[u.imageUrl?a.jsx("img",{src:u.imageUrl,alt:u.title,className:"news-image"}):a.jsx("div",{className:"news-icon",children:""}),a.jsxs("div",{className:"news-content",children:[a.jsxs("span",{className:"news-date",children:[o(u.validFrom)," - ",o(u.validTo)]}),!c(u)&&a.jsx("span",{className:"news-badge expired",children:"Scaduta"}),a.jsx("h3",{children:u.title}),a.jsx("p",{children:u.description})]})]},u.id))})]})}function eO({userProfile:t}){const{id:e}=Mf(),n=Ot(),[r,i]=b.useState(null),[s,o]=b.useState(!0),[c,u]=b.useState(!1),[d,f]=b.useState(null),[v,m]=b.useState(null),[g,x]=b.useState(null),[E,R]=b.useState(!1);b.useEffect(()=>{y()},[e,t]),b.useEffect(()=>{(async()=>{if(t){console.log("[DEBUG] Controllo limite giornaliero per user:",t.id);const A=await I(t.id);console.log("[DEBUG] Limite raggiunto?",A),R(A)}else console.log("[DEBUG] userProfile non disponibile, skip controllo")})()},[t]);const y=async()=>{var _,A,P,N;if(e){try{const j=se(H,"promotions",e),k=await qt(j);if(k.exists()){const re=k.data(),mn={id:k.id,title:re.title,description:re.description,imageUrl:re.imageUrl,validFrom:((_=re.validFrom)==null?void 0:_.toDate())||new Date,validTo:((A=re.validTo)==null?void 0:A.toDate())||new Date,active:re.active,showAsPopup:re.showAsPopup,createdAt:((P=re.createdAt)==null?void 0:P.toDate())||new Date,updatedAt:((N=re.updatedAt)==null?void 0:N.toDate())||new Date};if(i(mn),t){const nn=await w(t.id,k.id);nn&&(m(nn),nn.status==="active"&&f(nn.code))}}else x("Offerta non trovata")}catch(j){console.error("Error loading offer:",j),x("Errore nel caricamento dell'offerta")}o(!1)}},w=async(_,A)=>{try{const P=xe(H,"GeneratedCoupons"),N=jt(P,Ge("userId","==",_),Ge("offerId","==",A)),j=await ct(N);return j.size>0?{...j.docs[0].data(),id:j.docs[0].id}:null}catch(P){return console.error("Error checking offer activation:",P),null}},I=async _=>{try{const A=new Date;A.setHours(0,0,0,0),console.log("[DEBUG] checkDailyGlobalLimit - Controllo coupon creati oggi per user:",_),console.log("[DEBUG] Data oggi (00:00):",A);const P=xe(H,"GeneratedCoupons"),N=jt(P,Ge("userId","==",_),Ge("createdAt",">=",A)),j=await ct(N);return console.log("[DEBUG] Coupon trovati oggi:",j.size),j.size>0}catch(A){return console.error("Error checking daily global limit:",A),!1}},S=()=>{const _="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let A="";for(let P=0;P<6;P++)A+=_.charAt(Math.floor(Math.random()*_.length));return A},O=async()=>{if(!t){x("Devi essere loggato per attivare un'offerta");return}if(r){u(!0),x(null);try{const _=await w(t.id,r.id);if(_){_.status==="active"?(f(_.code),m(_)):(x("Hai gi utilizzato questa offerta."),m(_)),u(!1);return}if(await I(t.id)){x(" Puoi attivare solo un'offerta al giorno. Torna domani!"),u(!1);return}const P=S(),N={userId:t.id,offerId:r.id,offerTitle:r.title,code:P,status:"active",createdAt:W0()};await mi(xe(H,"GeneratedCoupons"),N),f(P),m({...N,code:P})}catch(_){console.error("Error activating offer:",_),x("Errore nell'attivazione dell'offerta. Riprova.")}u(!1)}},D=_=>new Date(_).toLocaleDateString("it-IT",{day:"numeric",month:"long",year:"numeric"});if(!t)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsxs("div",{className:"login-prompt",children:[a.jsx("span",{className:"lock-icon",children:""}),a.jsx("h2",{children:"Accedi per attivare le offerte"}),a.jsx("p",{children:"Crea un profilo per ricevere codici sconto esclusivi!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>n("/profile"),children:"Crea Profilo"})]})});if(s)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsx("div",{style:{textAlign:"center",padding:"40px"},children:"Caricamento..."})});if(g&&!r)return a.jsx("div",{className:"offer-detail-screen fade-in",children:a.jsxs("div",{className:"error-message",children:[a.jsx("p",{children:g}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/news"),children:"Torna alle offerte"})]})});if(!r)return null;const C=new Date>=new Date(r.validFrom)&&new Date<=new Date(r.validTo);return a.jsxs("div",{className:"offer-detail-screen fade-in",children:[a.jsx("button",{className:"back-button",onClick:()=>n("/news"),children:" Torna alle offerte"}),a.jsxs("div",{className:"offer-detail-card",children:[r.imageUrl&&a.jsx("img",{src:r.imageUrl,alt:r.title,className:"offer-detail-image"}),a.jsxs("div",{className:"offer-detail-content",children:[a.jsx("h1",{className:"offer-title",children:r.title}),a.jsxs("div",{className:"offer-validity",children:[a.jsx("span",{className:`validity-badge ${C?"valid":"expired"}`,children:C?" Offerta Valida":" Offerta Scaduta"}),a.jsxs("p",{className:"validity-dates",children:["Dal ",D(r.validFrom)," al ",D(r.validTo)]})]}),a.jsx("p",{className:"offer-description",children:r.description}),v&&v.status==="redeemed"&&a.jsxs("div",{className:"alert alert-warning",children:[a.jsx("strong",{children:" Offerta gi utilizzata"}),a.jsx("p",{children:"Hai gi riscattato questa offerta. Non puoi riattivarla."})]}),d&&(!v||v.status==="active")&&a.jsx("div",{className:"coupon-generated",children:a.jsxs("div",{className:"coupon-box",children:[a.jsx("h2",{children:" Offerta Attivata!"}),a.jsxs("div",{className:"coupon-code",children:[a.jsx("span",{className:"code-label",children:"Il tuo codice :"}),a.jsx("span",{className:"code-value",children:d})]}),a.jsxs("p",{className:"coupon-instructions",children:[" ",a.jsx("strong",{children:"Mostra questo codice in cassa"})," per ricevere lo sconto"]})]})}),!v&&C&&a.jsxs("div",{className:"activation-section",children:[E&&a.jsxs("div",{className:"alert alert-error",children:[" ",a.jsx("strong",{children:"Limite raggiunto!"}),a.jsx("br",{}),"Hai gi attivato un'offerta oggi. Torna domani per attivarne un'altra!"]}),g&&!E&&a.jsx("div",{className:"alert alert-error",children:g}),a.jsx("button",{className:"btn btn-primary btn-large",onClick:O,disabled:c||E,children:c?"Attivazione in corso...":" ATTIVA QUESTA OFFERTA"}),!E&&a.jsx("p",{className:"help-text",children:"Attiva l'offerta per ricevere il tuo codice sconto personale"})]}),!C&&a.jsx("div",{className:"alert alert-warning",children:"Questa offerta non  pi valida"})]})]})]})}const tO="modulepreload",nO=function(t){return"/app-zerosei-pizza/"+t},Oy={},wl=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=nO(u),u in Oy)return;Oy[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":tO,d||(v.as="script"),v.crossOrigin="",v.href=u,c&&v.setAttribute("nonce",c),document.head.appendChild(v),d)return new Promise((m,g)=>{v.addEventListener("load",m),v.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},Hp=$T(la);let Ya=null,Ly=0;async function rO(){try{if(Ya&&Date.now()<Ly)return Ya;const n=(await ru(Hp,"getAccessToken")({})).data;if(n.success)return Ya=n.accessToken,Ly=Date.now()+(n.expiresIn-600)*1e3,Ya;throw new Error("Risposta API non valida (success=false)")}catch(t){throw console.error("Error getting access token via Cloud Function:",t),new Error(t.message||"Errore sconosciuto nel recupero del token")}}async function cx(t){try{const e=await rO();if(!e)return console.warn("Could not obtain access token"),{customerId:t,points:0,tier:"Member",lastUpdated:new Date};const i=(await ru(Hp,"getLoyaltyPoints")({accessToken:e,customerId:t})).data;return i.success?{customerId:i.customerId,points:i.points,tier:i.tier,lastUpdated:new Date(i.lastUpdated)}:{customerId:t,points:0,tier:"Member",lastUpdated:new Date}}catch(e){return console.error("Error fetching loyalty points via Cloud Function:",e),{customerId:t,points:0,tier:"Member",lastUpdated:new Date}}}async function iO(t){if(t.cassaCloudId)return t.cassaCloudId;try{const r=(await ru(Hp,"searchAndSyncFidelityPoints")({email:t.email,firstName:t.firstName,lastName:t.lastName,phone:t.phone})).data;return r.success&&r.customerId?(console.log("[linkCustomerProfile] Found customer:",r.customerId,"with",r.points,"points"),r.customerId):(console.log("[linkCustomerProfile] Customer not found in Cassa in Cloud"),null)}catch(e){return console.error("[linkCustomerProfile] Error:",e),null}}const sO=Object.freeze(Object.defineProperty({__proto__:null,getLoyaltyPoints:cx,linkCustomerProfile:iO},Symbol.toStringTag,{value:"Module"}));function oO({userProfile:t}){const e=Ot(),[n,r]=b.useState(null),[i,s]=b.useState([]),[o,c]=b.useState(!1),[u,d]=b.useState(!0);b.useEffect(()=>{f()},[]),b.useEffect(()=>{t&&(c(!0),(async()=>{let m=t.cassaCloudId;if(console.log("Initial customerId from profile:",m),!m)try{console.log("Searching for customer profile with:",t.email,t.phone);const{linkCustomerProfile:g}=await wl(async()=>{const{linkCustomerProfile:E}=await Promise.resolve().then(()=>sO);return{linkCustomerProfile:E}},void 0),x=await g(t);if(console.log("Search result foundId:",x),x)if(m=x,t.id)try{const E=se(H,"users",t.id);await qn(E,{cassaCloudId:x,loyaltyPointsLastSync:new Date().toISOString()}),console.log(" Saved Cassa in Cloud ID to Firestore:",m)}catch(E){console.error(" Error saving cassaCloudId to Firestore:",E)}else console.warn(" User profile not saved yet, skipping cassaCloudId save");else console.warn("Customer not found in Cassa in Cloud")}catch(g){console.error("Error linking profile:",g)}m?(console.log("Fetching points for customerId:",m),cx(m).then(g=>{console.log("Loyalty data received:",g),r(g),c(!1)})):(console.log("No customerId available, skipping points fetch"),c(!1))})())},[t]);const f=async()=>{d(!0);try{const v=se(H,"config","rewards"),m=await qt(v);if(m.exists()){const x=(m.data().rewards||[]).filter(E=>E.available);s(x)}else s([])}catch(v){console.error("Error loading rewards:",v),s([])}d(!1)};return t?a.jsxs("div",{className:"fidelity-screen fade-in",children:[a.jsx("h1",{className:"screen-title",children:"Fidelity Card"}),a.jsx("div",{className:"card-container",children:a.jsx("div",{className:"digital-card",children:a.jsxs("div",{className:"card-front",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("span",{className:"card-logo",children:"ZeroSei "}),a.jsx("span",{className:"card-tier",children:(n==null?void 0:n.tier)||"Member"})]}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"points-display",children:[a.jsx("span",{className:"points-value",children:o?a.jsx("div",{className:"spinner","aria-label":"Caricamento punti"}):(n==null?void 0:n.points)||0}),a.jsx("span",{className:"points-label",children:"Punti"})]})}),a.jsxs("div",{className:"card-footer",children:[a.jsxs("span",{className:"card-holder",children:[t.firstName," ",t.lastName]}),a.jsxs("span",{className:"card-id",children:["ID: ",t.phone]})]})]})})}),a.jsxs("div",{className:"rewards-section",children:[a.jsx("h2",{children:"Premi Disponibili"}),u?a.jsx("div",{className:"loading-rewards",children:"Caricamento premi..."}):i.length===0?a.jsx("div",{className:"no-rewards",children:a.jsx("p",{children:"Nessun premio disponibile al momento."})}):a.jsx("div",{className:"rewards-list",children:i.map(v=>a.jsxs("div",{className:"reward-item",children:[a.jsx("div",{className:"reward-icon",children:v.imageUrl||""}),a.jsxs("div",{className:"reward-info",children:[a.jsx("h3",{children:v.name}),a.jsx("p",{children:v.description}),a.jsxs("p",{className:"reward-points-required",children:[v.pointsRequired," Punti"]})]})]},v.id))})]}),a.jsx("div",{className:"info-box mt-xl",children:a.jsx("p",{children:"I punti vengono aggiornati automaticamente dopo ogni acquisto in cassa."})})]}):a.jsx("div",{className:"fidelity-screen fade-in",children:a.jsxs("div",{className:"login-prompt",children:[a.jsx("span",{className:"lock-icon",children:""}),a.jsx("h2",{children:"Accedi per vedere la tua Fidelity Card"}),a.jsx("p",{children:"Crea un profilo per accumulare punti e ricevere premi!"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>e("/profile"),children:"Crea Profilo"})]})})}const aO="zerosei2024";function lO({onLogin:t}){const[e,n]=b.useState(""),[r,i]=b.useState(""),s=Ot(),o=c=>{c.preventDefault(),e===aO?(localStorage.setItem("admin_authenticated","true"),t(),s("/admin/dashboard")):(i("Password non corretta"),n(""))};return a.jsx("div",{className:"admin-login-screen",children:a.jsxs("div",{className:"admin-login-container",children:[a.jsxs("div",{className:"admin-login-header",children:[a.jsx("h1",{children:" ZeroSei Pizza"}),a.jsx("h2",{children:"Pannello Amministratore"})]}),a.jsxs("form",{onSubmit:o,className:"admin-login-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:e,onChange:c=>{n(c.target.value),i("")},placeholder:"Inserisci la password admin",autoFocus:!0})]}),r&&a.jsx("div",{className:"error-message",children:r}),a.jsx("button",{type:"submit",className:"btn-login",children:"Accedi"})]}),a.jsx("button",{className:"btn-back",onClick:()=>s("/"),children:" Torna al sito"})]})})}function cO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(""),[f,v]=b.useState(!1),[m,g]=b.useState({name:"",description:"",price:0,category:"pizze-veraci",image:"/placeholder-pizza.jpg",available:!0});b.useEffect(()=>{x()},[]);const x=async()=>{r(!0);try{const D=await Bp();e(D)}catch(D){console.error("Error loading products:",D),alert("Errore nel caricamento dei prodotti")}r(!1)},E=async D=>{D.preventDefault();try{const C={...m,imageUrl:m.image};o?(await GT(o.id,C),alert("Prodotto aggiornato con successo!")):(await HT(C),alert("Prodotto creato con successo!")),I(),x()}catch(C){console.error("Error saving product:",C),alert("Errore nel salvataggio del prodotto")}},R=D=>{c(D),g({name:D.name,description:D.description||"",price:D.price,category:D.category,image:D.image||"/placeholder-pizza.jpg",available:D.available}),s(!0)},y=async D=>{if(confirm(`Sei sicuro di voler eliminare "${D.name}"?`))try{await KT(D.id),alert("Prodotto eliminato con successo!"),x()}catch(C){console.error("Error deleting product:",C),alert("Errore nell'eliminazione del prodotto")}},w=async D=>{var _;const C=(_=D.target.files)==null?void 0:_[0];if(C){v(!0);try{const A=eu(zp,`products/${Date.now()}_${C.name}`);await Jc(A,C);const P=await Zc(A);g(N=>({...N,image:P}))}catch(A){console.error("Error uploading image:",A),alert("Errore durante il caricamento dell'immagine")}finally{v(!1)}}},I=()=>{g({name:"",description:"",price:0,category:"pizze-veraci",image:"/placeholder-pizza.jpg",available:!0}),c(null),s(!1)},S=t.filter(D=>{var C;return D.name.toLowerCase().includes(u.toLowerCase())||((C=D.description)==null?void 0:C.toLowerCase().includes(u.toLowerCase()))}),O=D=>({"pizze-veraci":"Pizze Veraci","pizze-classiche":"Pizze Classiche",proposte:"Le Nostre Proposte",calzoni:"Calzoni",bevande:"Bevande",birre:"Birre"})[D];return n?a.jsx("div",{className:"loading",children:"Caricamento prodotti..."}):a.jsxs("div",{className:"product-management",children:[a.jsxs("div",{className:"pm-header",children:[a.jsx("h2",{children:"Gestione Prodotti"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>s(!i),children:i?" Chiudi":"+ Nuovo Prodotto"})]}),i&&a.jsxs("div",{className:"product-form-container",children:[a.jsx("h3",{children:o?"Modifica Prodotto":"Nuovo Prodotto"}),a.jsxs("form",{onSubmit:E,className:"product-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:m.name,onChange:D=>g({...m,name:D.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Prezzo () *"}),a.jsx("input",{type:"number",step:"0.01",value:m.price,onChange:D=>g({...m,price:parseFloat(D.target.value)}),required:!0})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("textarea",{value:m.description,onChange:D=>g({...m,description:D.target.value}),rows:3})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Categoria *"}),a.jsxs("select",{value:m.category,onChange:D=>g({...m,category:D.target.value}),required:!0,children:[a.jsx("option",{value:"pizze-veraci",children:"Pizze Veraci"}),a.jsx("option",{value:"pizze-classiche",children:"Pizze Classiche"}),a.jsx("option",{value:"proposte",children:"Le Nostre Proposte"}),a.jsx("option",{value:"calzoni",children:"Calzoni"}),a.jsx("option",{value:"bevande",children:"Bevande"}),a.jsx("option",{value:"birre",children:"Birre"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Immagine prodotto"}),a.jsxs("div",{className:"image-upload-container",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:w,disabled:f,className:"file-input"}),f&&a.jsx("span",{className:"upload-status",children:"Caricamento in corso..."}),m.image&&m.image!=="/placeholder-pizza.jpg"&&a.jsx("div",{className:"image-preview",children:a.jsx("img",{src:m.image,alt:"Anteprima",style:{height:"50px",objectFit:"cover",marginTop:"10px",borderRadius:"4px"}})})]}),a.jsx("input",{type:"text",placeholder:"O incolla URL immagine",value:m.image,onChange:D=>g({...m,image:D.target.value}),style:{marginTop:"10px"}})]})]}),a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:m.available,onChange:D=>g({...m,available:D.target.checked})})," ","Disponibile"]})}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:f,children:[o?"Aggiorna":"Crea"," Prodotto"]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:I,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"pm-search",children:[a.jsx("input",{type:"text",placeholder:"Cerca prodotti...",value:u,onChange:D=>d(D.target.value)}),a.jsxs("span",{className:"product-count",children:[S.length," prodotti"]})]}),a.jsxs("div",{className:"products-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Nome"}),a.jsx("th",{children:"Categoria"}),a.jsx("th",{children:"Prezzo"}),a.jsx("th",{children:"Stato"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:S.map(D=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("strong",{children:D.name}),D.description&&a.jsx("div",{className:"product-desc",children:D.description})]}),a.jsx("td",{children:a.jsx("span",{className:"category-badge",children:O(D.category)})}),a.jsxs("td",{className:"price-cell",children:["",D.price.toFixed(2)]}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${D.available?"available":"unavailable"}`,children:D.available?"Disponibile":"Non disponibile"})}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>R(D),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>y(D),title:"Elimina",children:""})]})]},D.id))})]}),S.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun prodotto trovato"})})]})]})}function uO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState({name:"",description:"",icon:"",order:0,imageUrl:""});b.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const E=await qp();e(E)}catch(E){console.error("Error loading categories:",E),alert("Errore nel caricamento delle categorie")}r(!1)},v=async E=>{E.preventDefault();try{o?(await XT(o.id,u),alert("Categoria aggiornata con successo!")):(await QT(u),alert("Categoria creata con successo!")),x(),f()}catch(R){console.error("Error saving category:",R),alert("Errore nel salvataggio della categoria")}},m=E=>{c(E),d({name:E.name,description:E.description||"",icon:E.icon||"",order:E.order,imageUrl:E.imageUrl||""}),s(!0)},g=async E=>{if(confirm(`Sei sicuro di voler eliminare la categoria "${E.name}"?`))try{await YT(E.id),alert("Categoria eliminata con successo!"),f()}catch(R){console.error("Error deleting category:",R),alert("Errore nell'eliminazione della categoria")}},x=()=>{d({name:"",description:"",icon:"",order:0,imageUrl:""}),c(null),s(!1)};return n?a.jsx("div",{className:"loading",children:"Caricamento categorie..."}):a.jsxs("div",{className:"category-management",children:[a.jsxs("div",{className:"cm-header",children:[a.jsx("h2",{children:"Gestione Categorie"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>s(!i),children:i?" Chiudi":"+ Nuova Categoria"})]}),i&&a.jsxs("div",{className:"category-form-container",children:[a.jsx("h3",{children:o?"Modifica Categoria":"Nuova Categoria"}),a.jsxs("form",{onSubmit:v,className:"category-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:u.name,onChange:E=>d({...u,name:E.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Ordine *"}),a.jsx("input",{type:"number",value:u.order,onChange:E=>d({...u,order:parseInt(E.target.value)}),required:!0}),a.jsx("small",{style:{color:"#666",fontSize:"0.85rem"},children:"Ordine di visualizzazione nel menu"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("textarea",{value:u.description,onChange:E=>d({...u,description:E.target.value}),rows:3})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",placeholder:"es. ",value:u.icon,onChange:E=>d({...u,icon:E.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"URL Immagine"}),a.jsx("input",{type:"text",placeholder:"URL dell'immagine della categoria",value:u.imageUrl,onChange:E=>d({...u,imageUrl:E.target.value})})]})]}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[o?"Aggiorna":"Crea"," Categoria"]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:x,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"categories-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Ordine"}),a.jsx("th",{children:"Nome"}),a.jsx("th",{children:"Descrizione"}),a.jsx("th",{children:"Icona"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:t.map(E=>a.jsxs("tr",{children:[a.jsx("td",{className:"order-cell",children:E.order}),a.jsx("td",{children:a.jsx("strong",{children:E.name})}),a.jsx("td",{children:a.jsx("div",{className:"category-desc",children:E.description||"-"})}),a.jsx("td",{className:"icon-cell",children:E.icon||"-"}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>m(E),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>g(E),title:"Elimina",children:""})]})]},E.id))})]}),t.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessuna categoria trovata"})})]})]})}function dO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState({title:"",description:"",imageUrl:"",validFrom:new Date,validTo:new Date(Date.now()+7*24*60*60*1e3),active:!0,showAsPopup:!1});b.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const y=await iu();e(y)}catch(y){console.error("Error loading promotions:",y),alert("Errore nel caricamento delle promozioni")}r(!1)},v=async y=>{y.preventDefault();try{o?(await ix(o.id,u),alert("Promozione aggiornata con successo!")):(await rx(u),alert("Promozione creata con successo!")),x(),f()}catch(w){console.error("Error saving promotion:",w),alert("Errore nel salvataggio della promozione")}},m=y=>{c(y),d({title:y.title,description:y.description,imageUrl:y.imageUrl||"",validFrom:y.validFrom,validTo:y.validTo,active:y.active,showAsPopup:y.showAsPopup||!1}),s(!0)},g=async y=>{if(confirm(`Sei sicuro di voler eliminare "${y.title}"?`))try{await sx(y.id),alert("Promozione eliminata con successo!"),f()}catch(w){console.error("Error deleting promotion:",w),alert("Errore nell'eliminazione della promozione")}},x=()=>{d({title:"",description:"",imageUrl:"",validFrom:new Date,validTo:new Date(Date.now()+7*24*60*60*1e3),active:!0,showAsPopup:!1}),c(null),s(!1)},E=y=>new Date(y).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"}),R=y=>{const w=new Date(y),I=w.getFullYear(),S=String(w.getMonth()+1).padStart(2,"0"),O=String(w.getDate()).padStart(2,"0");return`${I}-${S}-${O}`};return n?a.jsx("div",{className:"loading",children:"Caricamento promozioni..."}):a.jsxs("div",{className:"promotion-management",children:[a.jsxs("div",{className:"pm-header",children:[a.jsx("h2",{children:"Gestione Promozioni e News"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>s(!i),children:i?" Chiudi":"+ Nuova Promozione"})]}),i&&a.jsxs("div",{className:"promotion-form-container",children:[a.jsx("h3",{children:o?"Modifica Promozione":"Nuova Promozione"}),a.jsxs("form",{onSubmit:v,className:"promotion-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Titolo *"}),a.jsx("input",{type:"text",value:u.title,onChange:y=>d({...u,title:y.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Descrizione *"}),a.jsx("textarea",{value:u.description,onChange:y=>d({...u,description:y.target.value}),rows:4,required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"URL Immagine"}),a.jsx("input",{type:"text",placeholder:"URL dell'immagine della promozione",value:u.imageUrl,onChange:y=>d({...u,imageUrl:y.target.value})})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Valida dal *"}),a.jsx("input",{type:"date",value:R(u.validFrom),onChange:y=>d({...u,validFrom:new Date(y.target.value)}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Valida fino al *"}),a.jsx("input",{type:"date",value:R(u.validTo),onChange:y=>d({...u,validTo:new Date(y.target.value)}),required:!0})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:u.active,onChange:y=>d({...u,active:y.target.checked})})," ","Attiva"]})}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:u.showAsPopup,onChange:y=>d({...u,showAsPopup:y.target.checked})})," ","Mostra come Popup"]}),a.jsx("small",{style:{color:"#666",fontSize:"0.85rem",marginTop:"4px"},children:"La promozione apparir come popup all'apertura dell'app"})]})]}),a.jsxs("div",{className:"form-actions",children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[o?"Aggiorna":"Crea"," Promozione"]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:x,children:"Annulla"})]})]})]}),a.jsxs("div",{className:"promotions-table",children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Titolo"}),a.jsx("th",{children:"Periodo"}),a.jsx("th",{children:"Stato"}),a.jsx("th",{children:"Azioni"})]})}),a.jsx("tbody",{children:t.map(y=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("strong",{children:y.title}),a.jsx("div",{className:"promotion-desc",children:y.description})]}),a.jsx("td",{children:a.jsxs("div",{className:"date-range",children:[E(y.validFrom)," - ",E(y.validTo)]})}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${y.active?"active":"inactive"}`,children:y.active?"Attiva":"Non attiva"})}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-icon btn-edit",onClick:()=>m(y),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon btn-delete",onClick:()=>g(y),title:"Elimina",children:""})]})]},y.id))})]}),t.length===0&&a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessuna promozione trovata"})})]})]})}function Vy(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState("all"),[o,c]=b.useState(null);b.useEffect(()=>{u()},[]);const u=async()=>{r(!0);try{const y=await tx();e(y)}catch(y){console.error("Error loading orders:",y),alert("Errore nel caricamento degli ordini")}r(!1)},d=async(y,w)=>{try{await nx(y,w),e(t.map(I=>I.id===y?{...I,status:w}:I)),o&&o.id===y&&c({...o,status:w})}catch(I){console.error("Error updating order status:",I),alert("Errore nell'aggiornamento dello stato")}},f=y=>{switch(y){case"pending":return"In Attesa";case"confirmed":return"Confermato";case"preparing":return"In Preparazione";case"ready":return"Pronto";case"delivered":return"Consegnato";case"cancelled":return"Annullato";default:return y}},v=y=>{switch(y){case"pending":return"#ff9800";case"confirmed":return"#2196f3";case"preparing":return"#9c27b0";case"ready":return"#009688";case"delivered":return"#4caf50";case"cancelled":return"#f44336";default:return"#9e9e9e"}},m=y=>{switch(y){case"whatsapp":return"";case"phone":return"";case"web":return"";default:return""}},g=i==="all"?t:t.filter(y=>y.status===i),x=new Date;x.setHours(0,0,0,0);const E=t.filter(y=>{const w=new Date(y.createdAt);return w.setHours(0,0,0,0),w.getTime()===x.getTime()}),R={totalToday:E.length,whatsappToday:E.filter(y=>y.source==="whatsapp").length,phoneToday:E.filter(y=>y.source==="phone").length,revenueToday:E.reduce((y,w)=>y+(w.total||0),0)};return n?a.jsx("div",{className:"loading",children:"Caricamento ordini..."}):a.jsxs("div",{className:"order-management",children:[a.jsxs("div",{className:"om-header",children:[a.jsx("h2",{children:"Gestione Ordini"}),a.jsx("button",{className:"btn btn-outline",onClick:u,children:" Aggiorna"})]}),a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Ordini Oggi"}),a.jsx("p",{className:"stat-value",children:R.totalToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"WhatsApp"}),a.jsx("p",{className:"stat-value",children:R.whatsappToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Telefono"}),a.jsx("p",{className:"stat-value",children:R.phoneToday})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:"Incasso Oggi"}),a.jsxs("p",{className:"stat-value",children:["",R.revenueToday.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"om-content",children:[a.jsxs("div",{className:"orders-list-container",children:[a.jsx("div",{className:"filters",children:a.jsxs("select",{value:i,onChange:y=>s(y.target.value),className:"status-filter",children:[a.jsx("option",{value:"all",children:"Tutti gli stati"}),a.jsx("option",{value:"pending",children:"In Attesa"}),a.jsx("option",{value:"confirmed",children:"Confermati"}),a.jsx("option",{value:"preparing",children:"In Preparazione"}),a.jsx("option",{value:"ready",children:"Pronti"}),a.jsx("option",{value:"delivered",children:"Consegnati"}),a.jsx("option",{value:"cancelled",children:"Annullati"})]})}),a.jsx("div",{className:"orders-list",children:g.length===0?a.jsx("div",{className:"empty-state",children:"Nessun ordine trovato"}):g.map(y=>a.jsxs("div",{className:`order-card ${(o==null?void 0:o.id)===y.id?"selected":""}`,onClick:()=>c(y),children:[a.jsxs("div",{className:"order-card-header",children:[a.jsx("span",{className:"order-source",title:y.source,children:m(y.source)}),a.jsx("span",{className:"order-date",children:new Date(y.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),a.jsx("span",{className:"order-status-badge",style:{backgroundColor:v(y.status)},children:f(y.status)})]}),a.jsxs("div",{className:"order-card-body",children:[a.jsxs("h4",{children:[y.userProfile.firstName," ",y.userProfile.lastName]}),a.jsxs("p",{className:"order-total",children:["",y.total.toFixed(2)]})]})]},y.id))})]}),o?a.jsxs("div",{className:"order-details-panel",children:[a.jsxs("div",{className:"od-header",children:[a.jsx("h3",{children:"Dettaglio Ordine"}),a.jsx("button",{className:"close-details",onClick:()=>c(null),children:""})]}),a.jsxs("div",{className:"od-content",children:[a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Cliente"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Nome:"})," ",o.userProfile.firstName," ",o.userProfile.lastName]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Telefono:"})," ",o.userProfile.phone]}),o.deliveryAddress&&a.jsxs("p",{children:[a.jsx("strong",{children:"Indirizzo:"})," ",o.deliveryAddress]})]}),a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Prodotti"}),a.jsx("ul",{className:"od-items",children:o.items.map((y,w)=>a.jsxs("li",{children:[a.jsxs("div",{className:"od-item-main",children:[a.jsxs("span",{children:[y.quantity,"x ",y.productName]}),a.jsxs("span",{children:["",(y.price*y.quantity).toFixed(2)]})]}),y.modifications&&y.modifications.length>0&&a.jsx("div",{className:"od-item-mods",children:y.modifications.map(I=>`+ ${I.name}`).join(", ")}),y.notes&&a.jsxs("div",{className:"od-item-notes",children:[" ",y.notes]})]},w))}),a.jsxs("div",{className:"od-total",children:[a.jsx("span",{children:"Totale"}),a.jsxs("span",{children:["",o.total.toFixed(2)]})]})]}),o.notes&&a.jsxs("div",{className:"od-section",children:[a.jsx("h4",{children:"Note Ordine"}),a.jsx("p",{children:o.notes})]}),a.jsxs("div",{className:"od-actions",children:[a.jsx("h4",{children:"Aggiorna Stato"}),a.jsxs("div",{className:"status-buttons",children:[a.jsx("button",{className:`btn-status ${o.status==="confirmed"?"active":""}`,onClick:()=>d(o.id,"confirmed"),style:{borderColor:"#2196f3",color:"#2196f3"},children:"Conferma"}),a.jsx("button",{className:`btn-status ${o.status==="preparing"?"active":""}`,onClick:()=>d(o.id,"preparing"),style:{borderColor:"#9c27b0",color:"#9c27b0"},children:"In Prep."}),a.jsx("button",{className:`btn-status ${o.status==="ready"?"active":""}`,onClick:()=>d(o.id,"ready"),style:{borderColor:"#009688",color:"#009688"},children:"Pronto"}),a.jsx("button",{className:`btn-status ${o.status==="delivered"?"active":""}`,onClick:()=>d(o.id,"delivered"),style:{borderColor:"#4caf50",color:"#4caf50"},children:"Consegnato"}),a.jsx("button",{className:`btn-status ${o.status==="cancelled"?"active":""}`,onClick:()=>d(o.id,"cancelled"),style:{borderColor:"#f44336",color:"#f44336"},children:"Annulla"})]})]})]})]}):a.jsx("div",{className:"order-details-placeholder",children:a.jsx("p",{children:"Seleziona un ordine per visualizzare i dettagli"})})]})]})}function hO(){return a.jsxs("div",{className:"cassa-cloud-settings",children:[a.jsx("h2",{children:" Configurazione Cassa in Cloud"}),a.jsxs("div",{className:"info-section",style:{padding:"20px",backgroundColor:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107"},children:[a.jsx("h3",{children:" Configurazione Spostata nel Backend"}),a.jsx("p",{children:"Per motivi di sicurezza, l'API Key di Cassa in Cloud non viene pi configurata nel frontend dell'app."}),a.jsx("p",{style:{marginTop:"15px"},children:a.jsx("strong",{children:"La configurazione  ora gestita tramite Firebase Functions:"})}),a.jsxs("ol",{style:{marginTop:"10px",marginLeft:"20px"},children:[a.jsx("li",{children:"Apri il terminale nella cartella del progetto"}),a.jsxs("li",{children:["Esegui il comando:",a.jsx("code",{style:{display:"block",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px",marginTop:"5px",fontFamily:"monospace"},children:'firebase functions:config:set cassanova.api_key="TUA_API_KEY"'})]}),a.jsxs("li",{children:["Deploy delle functions:",a.jsx("code",{style:{display:"block",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px",marginTop:"5px",fontFamily:"monospace"},children:"firebase deploy --only functions"})]})]}),a.jsx("p",{style:{marginTop:"15px",fontSize:"0.9em",color:"#666"},children:" Questa modifica garantisce che l'API Key non sia mai esposta al codice frontend e quindi non sia visibile agli utenti."})]}),a.jsxs("div",{className:"api-info",style:{marginTop:"20px"},children:[a.jsx("h3",{children:" Informazioni Tecniche"}),a.jsxs("div",{className:"info-grid",children:[a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"Program ID ZeroSei 24/25:"}),a.jsx("code",{children:"3159"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"URL Base API:"}),a.jsx("code",{children:"https://api.cassanova.com"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("strong",{children:"API Version:"}),a.jsx("code",{children:"2.0.0"})]})]})]})]})}const zs={colorPrimary:"#E74C3C",colorPrimaryDark:"#C0392B",colorPrimaryLight:"#EC7063",colorSecondary:"#27AE60",colorSecondaryDark:"#229954",colorSecondaryLight:"#58D68D",colorAccent:"#F39C12",colorAccentDark:"#D68910",colorBg:"#FFFFFF",colorBgSecondary:"#F8F9FA",colorBgTertiary:"#ECF0F1",colorText:"#2C3E50",colorTextSecondary:"#7F8C8D",colorTextLight:"#95A5A6",colorBorder:"#E0E0E0",fontSizeBase:"1rem",fontSizeSm:"0.875rem",fontSizeLg:"1.125rem",fontSizeXl:"1.25rem",fontSize2xl:"1.5rem",fontSize3xl:"2rem",fontSize4xl:"2.5rem",spacingSm:"0.5rem",spacingMd:"1rem",spacingLg:"1.5rem",spacingXl:"2rem",spacing2xl:"3rem",radiusSm:"0.25rem",radiusMd:"0.5rem",radiusLg:"1rem",radiusXl:"1.5rem",iconOrders:"",iconProducts:"",iconIngredients:"",iconCategories:"",iconPromotions:"",iconCustomers:"",iconSettings:"",statusBarColor:"#000000",statusBarStyle:"black"};function fO(){const[t,e]=b.useState(zs),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState("colors");b.useEffect(()=>{u()},[]),b.useEffect(()=>{d(t)},[t]);const u=async()=>{r(!0);try{const g=se(H,"config","theme"),x=await qt(g);if(x.exists()){const E={...zs,...x.data()};e(E),d(E)}}catch(g){console.error("Error loading theme:",g)}r(!1)},d=g=>{const x=document.documentElement;x.style.setProperty("--color-primary",g.colorPrimary),x.style.setProperty("--color-primary-dark",g.colorPrimaryDark),x.style.setProperty("--color-primary-light",g.colorPrimaryLight),x.style.setProperty("--color-secondary",g.colorSecondary),x.style.setProperty("--color-secondary-dark",g.colorSecondaryDark),x.style.setProperty("--color-secondary-light",g.colorSecondaryLight),x.style.setProperty("--color-accent",g.colorAccent),x.style.setProperty("--color-accent-dark",g.colorAccentDark),x.style.setProperty("--color-bg",g.colorBg),x.style.setProperty("--color-bg-secondary",g.colorBgSecondary),x.style.setProperty("--color-bg-tertiary",g.colorBgTertiary),x.style.setProperty("--color-text",g.colorText),x.style.setProperty("--color-text-secondary",g.colorTextSecondary),x.style.setProperty("--color-text-light",g.colorTextLight),x.style.setProperty("--color-border",g.colorBorder),x.style.setProperty("--font-size-base",g.fontSizeBase),x.style.setProperty("--font-size-sm",g.fontSizeSm),x.style.setProperty("--font-size-lg",g.fontSizeLg),x.style.setProperty("--font-size-xl",g.fontSizeXl),x.style.setProperty("--font-size-2xl",g.fontSize2xl),x.style.setProperty("--font-size-3xl",g.fontSize3xl),x.style.setProperty("--font-size-4xl",g.fontSize4xl),x.style.setProperty("--spacing-sm",g.spacingSm),x.style.setProperty("--spacing-md",g.spacingMd),x.style.setProperty("--spacing-lg",g.spacingLg),x.style.setProperty("--spacing-xl",g.spacingXl),x.style.setProperty("--spacing-2xl",g.spacing2xl),x.style.setProperty("--radius-sm",g.radiusSm),x.style.setProperty("--radius-md",g.radiusMd),x.style.setProperty("--radius-lg",g.radiusLg),x.style.setProperty("--radius-xl",g.radiusXl)},f=async()=>{s(!0);try{await Rr(se(H,"config","theme"),{...t,updatedAt:new Date}),alert("Tema salvato con successo! ")}catch(g){console.error("Error saving theme:",g),alert("Errore nel salvataggio del tema")}s(!1)},v=async()=>{if(confirm("Sei sicuro di voler ripristinare il tema predefinito?")){e(zs),d(zs);try{await Rr(se(H,"config","theme"),{...zs,updatedAt:new Date}),alert("Tema ripristinato! ")}catch(g){console.error("Error resetting theme:",g)}}},m=(g,x)=>{e(E=>({...E,[g]:x}))};return n?a.jsx("div",{className:"loading",children:"Caricamento tema..."}):a.jsxs("div",{className:"theme-customizer",children:[a.jsxs("div",{className:"theme-header",children:[a.jsx("h2",{children:" Personalizzazione Tema"}),a.jsx("p",{className:"theme-description",children:"Personalizza tutti gli aspetti estetici dell'applicazione"})]}),a.jsxs("div",{className:"theme-tabs",children:[a.jsx("button",{className:`theme-tab ${o==="colors"?"active":""}`,onClick:()=>c("colors"),children:" Colori"}),a.jsx("button",{className:`theme-tab ${o==="typography"?"active":""}`,onClick:()=>c("typography"),children:" Tipografia"}),a.jsx("button",{className:`theme-tab ${o==="spacing"?"active":""}`,onClick:()=>c("spacing"),children:" Spaziature"}),a.jsx("button",{className:`theme-tab ${o==="radius"?"active":""}`,onClick:()=>c("radius"),children:" Arrotondamenti"}),a.jsx("button",{className:`theme-tab ${o==="icons"?"active":""}`,onClick:()=>c("icons"),children:" Icone Admin"})]}),a.jsxs("div",{className:"theme-content",children:[o==="colors"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Colori Primari"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Primario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimary,onChange:g=>m("colorPrimary",g.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimary,onChange:g=>m("colorPrimary",g.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Primario Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimaryDark,onChange:g=>m("colorPrimaryDark",g.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimaryDark,onChange:g=>m("colorPrimaryDark",g.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Primario Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorPrimaryLight,onChange:g=>m("colorPrimaryLight",g.target.value)}),a.jsx("input",{type:"text",value:t.colorPrimaryLight,onChange:g=>m("colorPrimaryLight",g.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Secondari"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondary,onChange:g=>m("colorSecondary",g.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondary,onChange:g=>m("colorSecondary",g.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Secondario Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondaryDark,onChange:g=>m("colorSecondaryDark",g.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondaryDark,onChange:g=>m("colorSecondaryDark",g.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Secondario Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorSecondaryLight,onChange:g=>m("colorSecondaryLight",g.target.value)}),a.jsx("input",{type:"text",value:t.colorSecondaryLight,onChange:g=>m("colorSecondaryLight",g.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Accent"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Accent"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorAccent,onChange:g=>m("colorAccent",g.target.value)}),a.jsx("input",{type:"text",value:t.colorAccent,onChange:g=>m("colorAccent",g.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Accent Scuro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorAccentDark,onChange:g=>m("colorAccentDark",g.target.value)}),a.jsx("input",{type:"text",value:t.colorAccentDark,onChange:g=>m("colorAccentDark",g.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Sfondo"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Principale"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBg,onChange:g=>m("colorBg",g.target.value)}),a.jsx("input",{type:"text",value:t.colorBg,onChange:g=>m("colorBg",g.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBgSecondary,onChange:g=>m("colorBgSecondary",g.target.value)}),a.jsx("input",{type:"text",value:t.colorBgSecondary,onChange:g=>m("colorBgSecondary",g.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Sfondo Terziario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBgTertiary,onChange:g=>m("colorBgTertiary",g.target.value)}),a.jsx("input",{type:"text",value:t.colorBgTertiary,onChange:g=>m("colorBgTertiary",g.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Colori Testo"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Principale"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorText,onChange:g=>m("colorText",g.target.value)}),a.jsx("input",{type:"text",value:t.colorText,onChange:g=>m("colorText",g.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Secondario"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorTextSecondary,onChange:g=>m("colorTextSecondary",g.target.value)}),a.jsx("input",{type:"text",value:t.colorTextSecondary,onChange:g=>m("colorTextSecondary",g.target.value),className:"color-text-input"})]})]}),a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Testo Chiaro"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorTextLight,onChange:g=>m("colorTextLight",g.target.value)}),a.jsx("input",{type:"text",value:t.colorTextLight,onChange:g=>m("colorTextLight",g.target.value),className:"color-text-input"})]})]})]}),a.jsx("h3",{children:"Altri Colori"}),a.jsx("div",{className:"color-grid",children:a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Bordi"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.colorBorder,onChange:g=>m("colorBorder",g.target.value)}),a.jsx("input",{type:"text",value:t.colorBorder,onChange:g=>m("colorBorder",g.target.value),className:"color-text-input"})]})]})}),a.jsx("h3",{children:" Status Bar Mobile"}),a.jsxs("div",{className:"color-grid",children:[a.jsxs("div",{className:"color-input-group",children:[a.jsx("label",{children:"Colore Status Bar"}),a.jsxs("div",{className:"color-input-wrapper",children:[a.jsx("input",{type:"color",value:t.statusBarColor||"#000000",onChange:g=>m("statusBarColor",g.target.value)}),a.jsx("input",{type:"text",value:t.statusBarColor||"#000000",onChange:g=>m("statusBarColor",g.target.value),className:"color-text-input"})]}),a.jsx("p",{className:"hint",children:" Colore della barra superiore del telefono"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Stile Status Bar iOS"}),a.jsxs("select",{value:t.statusBarStyle||"black",onChange:g=>m("statusBarStyle",g.target.value),className:"select-input",children:[a.jsx("option",{value:"default",children:"Default (bianco)"}),a.jsx("option",{value:"black",children:"Black (nero)"}),a.jsx("option",{value:"black-translucent",children:"Black Translucent"})]}),a.jsx("p",{className:"hint",children:" Stile per iPhone/iPad"})]})]})]}),o==="typography"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Dimensioni Font"}),a.jsxs("div",{className:"typography-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Base (16px default)"}),a.jsx("input",{type:"text",value:t.fontSizeBase,onChange:g=>m("fontSizeBase",g.target.value),placeholder:"1rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Small"}),a.jsx("input",{type:"text",value:t.fontSizeSm,onChange:g=>m("fontSizeSm",g.target.value),placeholder:"0.875rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font Large"}),a.jsx("input",{type:"text",value:t.fontSizeLg,onChange:g=>m("fontSizeLg",g.target.value),placeholder:"1.125rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font XL"}),a.jsx("input",{type:"text",value:t.fontSizeXl,onChange:g=>m("fontSizeXl",g.target.value),placeholder:"1.25rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 2XL"}),a.jsx("input",{type:"text",value:t.fontSize2xl,onChange:g=>m("fontSize2xl",g.target.value),placeholder:"1.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 3XL"}),a.jsx("input",{type:"text",value:t.fontSize3xl,onChange:g=>m("fontSize3xl",g.target.value),placeholder:"2rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Font 4XL"}),a.jsx("input",{type:"text",value:t.fontSize4xl,onChange:g=>m("fontSize4xl",g.target.value),placeholder:"2.5rem"})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 1rem, 1.5rem) o px (es: 16px, 24px)"})]}),o==="spacing"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Spaziature"}),a.jsxs("div",{className:"spacing-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Small"}),a.jsx("input",{type:"text",value:t.spacingSm,onChange:g=>m("spacingSm",g.target.value),placeholder:"0.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Medium"}),a.jsx("input",{type:"text",value:t.spacingMd,onChange:g=>m("spacingMd",g.target.value),placeholder:"1rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing Large"}),a.jsx("input",{type:"text",value:t.spacingLg,onChange:g=>m("spacingLg",g.target.value),placeholder:"1.5rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing XL"}),a.jsx("input",{type:"text",value:t.spacingXl,onChange:g=>m("spacingXl",g.target.value),placeholder:"2rem"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Spacing 2XL"}),a.jsx("input",{type:"text",value:t.spacing2xl,onChange:g=>m("spacing2xl",g.target.value),placeholder:"3rem"})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 1rem, 2rem) o px (es: 16px, 32px)"})]}),o==="radius"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Arrotondamenti Bordi"}),a.jsxs("div",{className:"radius-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Small"}),a.jsx("input",{type:"text",value:t.radiusSm,onChange:g=>m("radiusSm",g.target.value),placeholder:"0.25rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusSm}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Medium"}),a.jsx("input",{type:"text",value:t.radiusMd,onChange:g=>m("radiusMd",g.target.value),placeholder:"0.5rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusMd}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius Large"}),a.jsx("input",{type:"text",value:t.radiusLg,onChange:g=>m("radiusLg",g.target.value),placeholder:"1rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusLg}})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Radius XL"}),a.jsx("input",{type:"text",value:t.radiusXl,onChange:g=>m("radiusXl",g.target.value),placeholder:"1.5rem"}),a.jsx("div",{className:"radius-preview",style:{borderRadius:t.radiusXl}})]})]}),a.jsx("p",{className:"hint",children:" Usa unit rem (es: 0.5rem, 1rem) o px (es: 8px, 16px)"})]}),o==="icons"&&a.jsxs("div",{className:"theme-section",children:[a.jsx("h3",{children:"Icone Sidebar Admin"}),a.jsxs("div",{className:"icons-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Ordini"}),a.jsx("input",{type:"text",value:t.iconOrders,onChange:g=>m("iconOrders",g.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconOrders})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Prodotti"}),a.jsx("input",{type:"text",value:t.iconProducts,onChange:g=>m("iconProducts",g.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconProducts})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Ingredienti"}),a.jsx("input",{type:"text",value:t.iconIngredients,onChange:g=>m("iconIngredients",g.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconIngredients})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Categorie"}),a.jsx("input",{type:"text",value:t.iconCategories,onChange:g=>m("iconCategories",g.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconCategories})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Promozioni"}),a.jsx("input",{type:"text",value:t.iconPromotions,onChange:g=>m("iconPromotions",g.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconPromotions})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Clienti"}),a.jsx("input",{type:"text",value:t.iconCustomers,onChange:g=>m("iconCustomers",g.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconCustomers})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Icona Impostazioni"}),a.jsx("input",{type:"text",value:t.iconSettings,onChange:g=>m("iconSettings",g.target.value),placeholder:"",maxLength:2}),a.jsx("span",{className:"icon-preview",children:t.iconSettings})]})]}),a.jsx("p",{className:"hint",children:" Usa emoji o caratteri speciali (max 2 caratteri)"})]})]}),a.jsxs("div",{className:"theme-actions",children:[a.jsx("button",{className:"btn-reset",onClick:v,disabled:i,children:" Ripristina Default"}),a.jsx("button",{className:"btn-save",onClick:f,disabled:i,children:i?" Salvataggio...":" Salva Modifiche"})]})]})}const Bs={heroTitle:"Benvenuto da ZeroSei ",heroSubtitle:"La migliore pizza napoletana d'asporto della citt",featuresTitle:"Perch scegliere ZeroSei?",features:[{id:"feature1",icon:"",title:"Forno a Legna",description:"Pizza cotta nel tradizionale forno a legna"},{id:"feature2",icon:"",title:"Ingredienti Freschi",description:"Solo ingredienti di prima qualit"},{id:"feature3",icon:"",title:"Servizio Veloce",description:"Pronta in 15-20 minuti"},{id:"feature4",icon:"",title:"Ricetta Napoletana",description:"Autentica tradizione partenopea"}],buttons:[{id:"menu",icon:"",title:"Men",description:"Scopri le nostre pizze",color:"#E74C3C",visible:!0,order:1},{id:"phone",icon:"",title:"Chiama Ora",description:"Contattaci telefonicamente",color:"#27AE60",visible:!0,order:2},{id:"whatsapp",icon:"",title:"Ordina su WhatsApp",description:"Ordine rapido e facile",color:"#25D366",visible:!0,order:3},{id:"fidelity",icon:"",title:"Fidelity Card",description:"I tuoi punti fedelt",color:"#F39C12",visible:!0,order:4},{id:"news",icon:"",title:"Novit e Offerte",description:"Scopri le ultime promozioni",color:"#9B59B6",visible:!0,order:5}]};function pO(){const[t,e]=b.useState(Bs),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null);b.useEffect(()=>{u()},[]);const u=async()=>{var S;r(!0);try{const O=se(H,"config","home"),D=await qt(O);if(D.exists()){const C=D.data(),_=new Set(((S=C.buttons)==null?void 0:S.map(N=>N.id))||[]),A=Bs.buttons.filter(N=>!_.has(N.id)),P=[...C.buttons||[],...A];e({...Bs,...C,buttons:P})}}catch(O){console.error("Error loading home config:",O)}r(!1)},d=async()=>{s(!0);try{const S=t.buttons.map(O=>{const D={...O};return Object.keys(D).forEach(C=>{D[C]===void 0&&delete D[C]}),D});await Rr(se(H,"config","home"),{heroTitle:t.heroTitle,heroSubtitle:t.heroSubtitle,featuresTitle:t.featuresTitle,features:t.features,buttons:S,updatedAt:new Date}),alert(" Modifiche salvate con successo!")}catch(S){console.error("Error saving config:",S),alert(" Errore nel salvataggio")}s(!1)},f=async()=>{if(confirm("Sei sicuro di voler ripristinare le impostazioni predefinite?")){e(Bs);try{await Rr(se(H,"config","home"),{...Bs,updatedAt:new Date}),alert(" Impostazioni ripristinate!")}catch(S){console.error("Error resetting:",S)}}},v=S=>{e(O=>({...O,heroTitle:S}))},m=S=>{e(O=>({...O,heroSubtitle:S}))},g=S=>{e(O=>({...O,featuresTitle:S}))},x=(S,O,D)=>{e(C=>({...C,features:(C.features||[]).map(_=>_.id===S?{..._,[O]:D}:_)}))},E=(S,O,D)=>{e(C=>({...C,buttons:C.buttons.map(_=>_.id===S?{..._,[O]:D}:_)}))},R=S=>{e(O=>({...O,buttons:O.buttons.map(D=>D.id===S?{...D,visible:!D.visible}:D)}))},y=(S,O)=>{const D=[...t.buttons],C=D.findIndex(_=>_.id===S);O==="up"&&C>0?[D[C],D[C-1]]=[D[C-1],D[C]]:O==="down"&&C<D.length-1&&([D[C],D[C+1]]=[D[C+1],D[C]]),D.forEach((_,A)=>{_.order=A+1}),e(_=>({..._,buttons:D}))},w=async(S,O)=>{var C;const D=(C=O.target.files)==null?void 0:C[0];if(D){c(S);try{const _=eu(zp,`home-buttons/${S}_${Date.now()}_${D.name}`);await Jc(_,D);const A=await Zc(_);E(S,"imageUrl",A),alert(" Immagine caricata con successo!")}catch(_){console.error("Error uploading image:",_),alert(" Errore nel caricamento dell'immagine")}c(null)}},I=S=>{confirm("Vuoi rimuovere l'immagine e tornare all'icona emoji?")&&E(S,"imageUrl",void 0)};return n?a.jsx("div",{className:"loading",children:"Caricamento..."}):a.jsxs("div",{className:"home-customizer",children:[a.jsxs("div",{className:"customizer-header",children:[a.jsx("h2",{children:" Personalizza Pagina Home"}),a.jsx("p",{className:"customizer-description",children:"Modifica testi, colori e visibilit dei bottoni della home page"})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:" Testi Principali"}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo Principale"}),a.jsx("input",{type:"text",value:t.heroTitle,onChange:S=>v(S.target.value),placeholder:"Benvenuto da ZeroSei "})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Sottotitolo"}),a.jsx("input",{type:"text",value:t.heroSubtitle,onChange:S=>m(S.target.value),placeholder:"La migliore pizza napoletana..."})]})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:" Bottoni Home"}),a.jsx("p",{className:"section-hint",children:"Personalizza i bottoni della home page. Puoi modificare testi, colori, icone e decidere quali mostrare."}),a.jsx("div",{className:"buttons-list",children:t.buttons.map((S,O)=>a.jsxs("div",{className:`button-card ${S.visible?"":"disabled"}`,children:[a.jsxs("div",{className:"button-card-header",children:[a.jsxs("div",{className:"button-preview",style:{backgroundColor:S.color},children:[S.imageUrl?a.jsx("img",{src:S.imageUrl,alt:S.title,className:"preview-image"}):a.jsx("span",{className:"preview-icon",children:S.icon}),a.jsxs("div",{className:"preview-text",children:[a.jsx("strong",{children:S.title}),a.jsx("small",{children:S.description})]})]}),a.jsxs("div",{className:"button-controls",children:[a.jsx("button",{className:"control-btn",onClick:()=>y(S.id,"up"),disabled:O===0,title:"Sposta su",children:""}),a.jsx("button",{className:"control-btn",onClick:()=>y(S.id,"down"),disabled:O===t.buttons.length-1,title:"Sposta gi",children:""}),a.jsx("button",{className:`control-btn ${S.visible?"visible":"hidden"}`,onClick:()=>R(S.id),title:S.visible?"Nascondi":"Mostra",children:S.visible?"":""})]})]}),a.jsxs("div",{className:"button-card-body",children:[a.jsxs("div",{className:"input-row",children:[a.jsxs("div",{className:"input-group small",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",value:S.icon,onChange:D=>E(S.id,"icon",D.target.value),maxLength:2})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo"}),a.jsx("input",{type:"text",value:S.title,onChange:D=>E(S.id,"title",D.target.value)})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:S.description,onChange:D=>E(S.id,"description",D.target.value)})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Immagine Personalizzata"}),S.imageUrl?a.jsxs("div",{className:"image-preview-container",children:[a.jsx("img",{src:S.imageUrl,alt:S.title,className:"uploaded-image-preview"}),a.jsx("button",{type:"button",className:"btn-remove-image",onClick:()=>I(S.id),children:" Rimuovi Immagine"})]}):a.jsxs("label",{className:"upload-image-btn",children:[o===S.id?" Caricamento...":" Carica Immagine",a.jsx("input",{type:"file",accept:"image/*",onChange:D=>w(S.id,D),disabled:o===S.id,hidden:!0})]}),a.jsx("small",{className:"hint-text",children:S.imageUrl?"L'immagine sostituisce l'icona emoji":"Carica un'immagine per sostituire l'emoji"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Colore"}),a.jsxs("div",{className:"color-picker-group",children:[a.jsx("input",{type:"color",value:S.color,onChange:D=>E(S.id,"color",D.target.value)}),a.jsx("input",{type:"text",value:S.color,onChange:D=>E(S.id,"color",D.target.value),className:"color-text"}),a.jsxs("div",{className:"color-presets",children:[a.jsx("button",{className:"preset-color",style:{backgroundColor:"#E74C3C"},onClick:()=>E(S.id,"color","#E74C3C"),title:"Rosso"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#27AE60"},onClick:()=>E(S.id,"color","#27AE60"),title:"Verde"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#25D366"},onClick:()=>E(S.id,"color","#25D366"),title:"WhatsApp"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#F39C12"},onClick:()=>E(S.id,"color","#F39C12"),title:"Arancione"}),a.jsx("button",{className:"preset-color",style:{backgroundColor:"#3498DB"},onClick:()=>E(S.id,"color","#3498DB"),title:"Blu"})]})]})]})]})]},S.id))})]}),a.jsxs("div",{className:"customizer-section",children:[a.jsx("h3",{children:' Sezione "Perch scegliere ZeroSei"'}),a.jsx("p",{className:"section-hint",children:"Personalizza il titolo e le 4 card che mostrano i punti di forza della pizzeria."}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo Sezione"}),a.jsx("input",{type:"text",value:t.featuresTitle||"",onChange:S=>g(S.target.value),placeholder:"Perch scegliere ZeroSei?"})]}),a.jsx("div",{className:"features-list",children:(t.features||[]).map(S=>a.jsxs("div",{className:"feature-card-edit",children:[a.jsxs("div",{className:"input-row",children:[a.jsxs("div",{className:"input-group small",children:[a.jsx("label",{children:"Icona"}),a.jsx("input",{type:"text",value:S.icon,onChange:O=>x(S.id,"icon",O.target.value),maxLength:2})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Titolo"}),a.jsx("input",{type:"text",value:S.title,onChange:O=>x(S.id,"title",O.target.value)})]})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:S.description,onChange:O=>x(S.id,"description",O.target.value)})]})]},S.id))})]}),a.jsxs("div",{className:"customizer-actions",children:[a.jsx("button",{className:"btn-reset",onClick:f,disabled:i,children:" Ripristina Default"}),a.jsx("button",{className:"btn-save",onClick:d,disabled:i,children:i?" Salvataggio...":" Salva Modifiche"})]})]})}function mO(){const[t,e]=b.useState("general"),[n,r]=b.useState(""),[i,s]=b.useState(60),[o,c]=b.useState(!1),[u,d]=b.useState(!0);b.useEffect(()=>{v()},[]),b.useEffect(()=>{n&&f(n)},[n]);const f=E=>{let R=document.querySelector("link[rel='icon']");R||(R=document.createElement("link"),R.rel="icon",document.head.appendChild(R)),R.href=E;let y=document.querySelector("link[rel='apple-touch-icon']");y||(y=document.createElement("link"),y.rel="apple-touch-icon",document.head.appendChild(y)),y.href=E},v=async()=>{d(!0);try{const E=se(H,"config","general"),R=await qt(E);R.exists()&&(r(R.data().logoUrl||""),s(R.data().logoSize||60))}catch(E){console.error("Error loading settings:",E)}d(!1)},m=async E=>{var y;const R=(y=E.target.files)==null?void 0:y[0];if(R){c(!0);try{const w=eu(zp,`config/logo_${Date.now()}_${R.name}`);await Jc(w,R);const I=await Zc(w);r(I),f(I),await g(I,i)}catch(w){console.error("Error uploading image:",w),alert("Errore durante il caricamento dell'immagine")}c(!1)}},g=async(E,R)=>{try{await Rr(se(H,"config","general"),{logoUrl:E,logoSize:R,updatedAt:new Date}),alert(" Impostazioni salvate!")}catch(y){console.error("Error saving settings:",y),alert(" Errore nel salvataggio")}},x=async E=>{s(E),n&&await g(n,E)};return u?a.jsx("div",{className:"settings-container",children:a.jsx("div",{className:"loading",children:"Caricamento..."})}):a.jsxs("div",{className:"settings-container",children:[a.jsx("h2",{className:"settings-title",children:" Impostazioni"}),a.jsxs("div",{className:"settings-tabs",children:[a.jsx("button",{className:`settings-tab ${t==="general"?"active":""}`,onClick:()=>e("general"),children:" Generale"}),a.jsx("button",{className:`settings-tab ${t==="home"?"active":""}`,onClick:()=>e("home"),children:" Pagina Home"}),a.jsx("button",{className:`settings-tab ${t==="theme"?"active":""}`,onClick:()=>e("theme"),children:" Tema Globale"})]}),a.jsxs("div",{className:"settings-tab-content",children:[t==="general"&&a.jsxs("div",{className:"tab-panel",children:[a.jsxs("div",{className:"settings-section",children:[a.jsx("h3",{children:" Logo Pizzeria"}),a.jsxs("div",{className:"logo-upload-container",children:[n&&a.jsx("div",{className:"logo-preview",children:a.jsx("img",{src:n,alt:"Logo",style:{height:`${i}px`}})}),a.jsxs("label",{className:"upload-button",children:[o?" Caricamento...":" Carica Logo",a.jsx("input",{type:"file",accept:"image/*",onChange:m,disabled:o,hidden:!0})]})]}),n&&a.jsxs("div",{className:"logo-size-control",children:[a.jsxs("label",{children:["Dimensione Logo: ",i,"px"]}),a.jsx("input",{type:"range",min:"30",max:"150",value:i,onChange:E=>x(Number(E.target.value))})]})]}),a.jsx(hO,{})]}),t==="home"&&a.jsx("div",{className:"tab-panel",children:a.jsx(pO,{})}),t==="theme"&&a.jsx("div",{className:"tab-panel",children:a.jsx(fO,{})})]})]})}function gO(){const[t,e]=b.useState([]),[n,r]=b.useState(null),[i,s]=b.useState(!1),[o,c]=b.useState(!0),[u,d]=b.useState({name:"",price:0,type:"add",available:!0,category:"Altro"});b.useEffect(()=>{f()},[]);const f=async()=>{c(!0);const y=await lx();e(y),c(!1)},v=y=>{r(y),d(y),s(!1)},m=()=>{s(!0),r(null),d({id:`m${Date.now()}`,name:"",price:0,type:"add",available:!0,category:"Altro"})},g=async()=>{if(!u.name||u.price===void 0){alert("Compila tutti i campi obbligatori");return}const y={id:u.id||`m${Date.now()}`,name:u.name,price:u.price,type:u.type||"add",available:u.available??!0,category:u.category||"Altro"};try{await GD(y),await f(),alert("Ingrediente salvato con successo!"),E()}catch(w){console.error("Error saving modification:",w),alert("Errore nel salvare l'ingrediente")}},x=async y=>{if(confirm("Sei sicuro di voler eliminare questo ingrediente?"))try{await KD(y),await f(),alert("Ingrediente eliminato con successo!")}catch(w){console.error("Error deleting modification:",w),alert("Errore nell'eliminare l'ingrediente")}},E=()=>{r(null),s(!1),d({name:"",price:0,type:"add",available:!0,category:"Altro"})},R=async y=>{const w=t.find(I=>I.id===y);if(w)try{await QD(y,!w.available),await f()}catch(I){console.error("Error toggling availability:",I),alert("Errore nell'aggiornare la disponibilit")}};return o?a.jsx("div",{className:"modification-management",children:a.jsx("p",{children:"Caricamento..."})}):a.jsxs("div",{className:"modification-management",children:[a.jsxs("div",{className:"management-header",children:[a.jsx("h2",{children:"Gestione Ingredienti Extra"}),a.jsx("button",{className:"btn btn-primary",onClick:m,children:"+ Aggiungi Ingrediente"})]}),(i||n)&&a.jsxs("div",{className:"modification-form",children:[a.jsx("h3",{children:i?"Nuovo Ingrediente":"Modifica Ingrediente"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome *"}),a.jsx("input",{type:"text",value:u.name,onChange:y=>d({...u,name:y.target.value}),placeholder:"Es: Mozzarella di Bufala"})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Prezzo () *"}),a.jsx("input",{type:"number",step:"0.50",min:"0",value:u.price,onChange:y=>d({...u,price:parseFloat(y.target.value)})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Categoria *"}),a.jsxs("select",{value:u.category,onChange:y=>d({...u,category:y.target.value}),children:[a.jsx("option",{value:"Formaggi",children:"Formaggi"}),a.jsx("option",{value:"Salumi",children:"Salumi"}),a.jsx("option",{value:"Verdure",children:"Verdure"}),a.jsx("option",{value:"Altro",children:"Altro"})]})]})]}),a.jsx("div",{className:"form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:u.available,onChange:y=>d({...u,available:y.target.checked})}),"Disponibile"]})}),a.jsxs("div",{className:"form-actions",children:[a.jsx("button",{className:"btn btn-secondary",onClick:E,children:"Annulla"}),a.jsx("button",{className:"btn btn-primary",onClick:g,children:"Salva"})]})]}),a.jsx("div",{className:"modifications-list",children:["Formaggi","Salumi","Verdure","Altro"].map(y=>{const w=t.filter(I=>I.category===y);return w.length===0?null:a.jsxs("div",{className:"category-section",children:[a.jsx("h3",{children:y}),a.jsx("div",{className:"modifications-grid",children:w.map(I=>a.jsxs("div",{className:`modification-card ${I.available?"":"unavailable"}`,children:[a.jsxs("div",{className:"mod-info",children:[a.jsx("h4",{children:I.name}),a.jsxs("p",{className:"mod-price",children:["",I.price.toFixed(2)]}),a.jsx("span",{className:`availability-badge ${I.available?"available":"unavailable"}`,children:I.available?"Disponibile":"Non disponibile"})]}),a.jsxs("div",{className:"mod-actions",children:[a.jsx("button",{className:"btn-icon",onClick:()=>R(I.id),title:I.available?"Disabilita":"Abilita",children:I.available?"":""}),a.jsx("button",{className:"btn-icon",onClick:()=>v(I),title:"Modifica",children:""}),a.jsx("button",{className:"btn-icon delete",onClick:()=>x(I.id),title:"Elimina",children:""})]})]},I.id))})]},y)})})]})}function vO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState("");b.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await ex();e(d)}catch(d){console.error("Error loading customers:",d),alert("Errore nel caricamento dei clienti")}finally{r(!1)}},c=t.filter(d=>{var E,R,y;const f=i.toLowerCase(),v=((E=d.firstName)==null?void 0:E.toLowerCase())||"",m=((R=d.lastName)==null?void 0:R.toLowerCase())||"",g=d.phone||"",x=((y=d.email)==null?void 0:y.toLowerCase())||"";return v.includes(f)||m.includes(f)||g.includes(i)||x.includes(f)}),u=t.reduce((d,f)=>d+(f.loyaltyPoints||0),0);return n?a.jsx("div",{className:"customer-management",children:a.jsxs("div",{className:"loading-state",children:[a.jsx("span",{className:"loading-spinner",children:""}),a.jsx("p",{children:"Caricamento clienti..."})]})}):a.jsxs("div",{className:"customer-management fade-in",children:[a.jsxs("div",{className:"customer-header",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[a.jsx("h2",{children:"Gestione Clienti"}),a.jsx("button",{onClick:o,className:"btn-icon",title:"Ricarica lista",children:""})]}),a.jsxs("div",{className:"customer-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-value",children:t.length}),a.jsx("span",{className:"stat-label",children:"Clienti Totali"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-value",children:u}),a.jsx("span",{className:"stat-label",children:"Punti Emessi"})]})]})]}),a.jsx("div",{className:"search-bar",children:a.jsx("input",{type:"text",placeholder:"Cerca per nome, telefono o email...",value:i,onChange:d=>s(d.target.value),className:"search-input"})}),a.jsx("div",{className:"customers-table-container",children:c.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun cliente trovato."})}):a.jsxs("table",{className:"customers-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Cliente"}),a.jsx("th",{children:"Contatti"}),a.jsx("th",{children:"Punti Fedelt"}),a.jsx("th",{children:"Registrato il"}),a.jsx("th",{children:"Ultimo Accesso"})]})}),a.jsx("tbody",{children:c.map(d=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"customer-name",children:[d.firstName," ",d.lastName]})}),a.jsxs("td",{children:[a.jsxs("div",{className:"customer-phone",children:[" ",d.phone]}),a.jsxs("div",{className:"customer-email",children:[" ",d.email]})]}),a.jsx("td",{children:a.jsxs("span",{className:"loyalty-points",children:[" ",d.loyaltyPoints||0]})}),a.jsx("td",{children:a.jsx("span",{className:"registration-date",children:d.createdAt?new Date(d.createdAt).toLocaleDateString("it-IT"):"-"})}),a.jsx("td",{children:a.jsx("span",{className:"registration-date",children:d.lastAccess?new Date(d.lastAccess).toLocaleDateString("it-IT")+" "+new Date(d.lastAccess).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}):"-"})})]},d.id))})]})})]})}const Ja=[{id:"reward1",name:"Bibita in omaggio",description:"Una bibita a scelta",pointsRequired:100,imageUrl:"",available:!0},{id:"reward2",name:"Pizza Margherita",description:"Pizza Margherita omaggio",pointsRequired:200,imageUrl:"",available:!0},{id:"reward3",name:"Dolce a scelta",description:"Un dolce della casa",pointsRequired:150,imageUrl:"",available:!0}];function yO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState({name:"",description:"",pointsRequired:100,imageUrl:""});b.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const S=se(H,"config","rewards"),O=await qt(S);if(O.exists()){const D=O.data();e(D.rewards||Ja)}else e(Ja),await v(Ja)}catch(S){console.error("Error loading rewards:",S),e(Ja)}r(!1)},v=async S=>{s(!0);try{await Rr(se(H,"config","rewards"),{rewards:S,updatedAt:new Date}),e(S),alert(" Premi salvati con successo!")}catch(O){console.error("Error saving rewards:",O),alert(" Errore nel salvataggio")}s(!1)},m=()=>{if(!u.name||u.pointsRequired<=0){alert("Inserisci nome e punti validi");return}const S={id:`reward_${Date.now()}`,name:u.name,description:u.description,pointsRequired:u.pointsRequired,imageUrl:u.imageUrl,available:!0};v([...t,S]),I()},g=()=>{if(!o||!u.name||u.pointsRequired<=0){alert("Inserisci dati validi");return}const S=t.map(O=>O.id===o?{...O,...u}:O);v(S),I()},x=S=>{c(S.id),d({name:S.name,description:S.description,pointsRequired:S.pointsRequired,imageUrl:S.imageUrl||""})},E=S=>{if(confirm("Sei sicuro di voler eliminare questo premio?")){const O=t.filter(D=>D.id!==S);v(O)}},R=S=>{const O=t.map(D=>D.id===S?{...D,available:!D.available}:D);v(O)},y=S=>{if(S===0)return;const O=[...t];[O[S],O[S-1]]=[O[S-1],O[S]],v(O)},w=S=>{if(S===t.length-1)return;const O=[...t];[O[S],O[S+1]]=[O[S+1],O[S]],v(O)},I=()=>{c(null),d({name:"",description:"",pointsRequired:100,imageUrl:""})};return n?a.jsx("div",{className:"rewards-management",children:a.jsx("div",{className:"loading",children:"Caricamento..."})}):a.jsxs("div",{className:"rewards-management",children:[a.jsxs("div",{className:"rewards-header",children:[a.jsx("h2",{children:" Gestione Premi Fidelity"}),a.jsx("p",{className:"rewards-description",children:"Configura i premi che i clienti possono visualizzare nella loro Fidelity Card"})]}),a.jsxs("div",{className:"rewards-form",children:[a.jsx("h3",{children:o?"Modifica Premio":"Nuovo Premio"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Icona (Emoji)"}),a.jsx("input",{type:"text",value:u.imageUrl,onChange:S=>d({...u,imageUrl:S.target.value}),placeholder:"",maxLength:2})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome Premio *"}),a.jsx("input",{type:"text",value:u.name,onChange:S=>d({...u,name:S.target.value}),placeholder:"Es: Bibita in omaggio"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Punti Richiesti *"}),a.jsx("input",{type:"number",value:u.pointsRequired,onChange:S=>d({...u,pointsRequired:Number(S.target.value)}),min:"1"})]}),a.jsxs("div",{className:"form-group full-width",children:[a.jsx("label",{children:"Descrizione"}),a.jsx("input",{type:"text",value:u.description,onChange:S=>d({...u,description:S.target.value}),placeholder:"Descrizione breve del premio"})]})]}),a.jsx("div",{className:"form-actions",children:o?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:g,className:"btn btn-primary",disabled:i,children:" Aggiorna"}),a.jsx("button",{onClick:I,className:"btn btn-outline",children:" Annulla"})]}):a.jsx("button",{onClick:m,className:"btn btn-primary",disabled:i,children:" Aggiungi Premio"})})]}),a.jsxs("div",{className:"rewards-list",children:[a.jsxs("h3",{children:["Premi Configurati (",t.length,")"]}),t.length===0?a.jsx("div",{className:"empty-state",children:a.jsx("p",{children:"Nessun premio configurato. Aggiungi il primo premio!"})}):a.jsx("div",{className:"rewards-grid",children:t.map((S,O)=>a.jsxs("div",{className:`reward-card ${S.available?"":"inactive"}`,children:[a.jsx("div",{className:"reward-icon-large",children:S.imageUrl}),a.jsxs("div",{className:"reward-content",children:[a.jsx("h4",{children:S.name}),a.jsx("p",{className:"reward-desc",children:S.description}),a.jsxs("p",{className:"reward-points",children:[S.pointsRequired," Punti"]}),a.jsx("span",{className:`reward-status ${S.available?"active":"inactive"}`,children:S.available?" Attivo":" Disattivato"})]}),a.jsxs("div",{className:"reward-actions",children:[a.jsx("button",{onClick:()=>y(O),disabled:O===0,className:"btn-icon",title:"Sposta su",children:""}),a.jsx("button",{onClick:()=>w(O),disabled:O===t.length-1,className:"btn-icon",title:"Sposta gi",children:""}),a.jsx("button",{onClick:()=>R(S.id),className:"btn-icon",title:S.available?"Disattiva":"Attiva",children:S.available?"":""}),a.jsx("button",{onClick:()=>x(S),className:"btn-icon",title:"Modifica",children:""}),a.jsx("button",{onClick:()=>E(S.id),className:"btn-icon btn-danger",title:"Elimina",children:""})]})]},S.id))})]})]})}function _O(){const[t,e]=b.useState(""),[n,r]=b.useState(!1),[i,s]=b.useState(null),o=async()=>{var u;if(!t.trim()){s({type:"error",text:" Inserisci un codice"});return}r(!0),s(null);try{const d=t.trim().toUpperCase(),f=xe(H,"GeneratedCoupons"),v=jt(f,Ge("code","==",d)),m=await ct(v);if(m.empty){s({type:"error",text:" Codice Inesistente",details:`Il codice "${d}" non  stato trovato nel sistema.`}),r(!1);return}const g=m.docs[0],x=g.data();if(x.status==="redeemed"){const E=(u=x.redeemedAt)==null?void 0:u.toDate(),R=E?E.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Data sconosciuta";s({type:"warning",text:" ATTENZIONE: Codice gi utilizzato in precedenza!",details:`Questo codice  stato gi riscattato il ${R}`}),r(!1);return}try{const E=new Date;E.setHours(0,0,0,0);const R=jt(xe(H,"GeneratedCoupons"),Ge("userId","==",x.userId),Ge("status","==","redeemed"),Ge("redeemedAt",">=",E));if(!(await ct(R)).empty){s({type:"error",text:" LIMIT RAGGIUNTO",details:"Questo cliente ha gi utilizzato una promozione oggi. Limite di 1 al giorno."}),r(!1);return}}catch(E){console.error("Error checking daily limit:",E)}await qn(se(H,"GeneratedCoupons",g.id),{status:"redeemed",redeemedAt:W0()}),s({type:"success",text:" CODICE VALIDO!",details:`Sconto Autorizzato per: ${x.offerTitle}`}),setTimeout(()=>{e(""),s(null)},3e3)}catch(d){console.error("Error validating coupon:",d),s({type:"error",text:" Errore nella validazione",details:"Si  verificato un errore. Riprova."})}r(!1)},c=u=>{u.key==="Enter"&&o()};return a.jsxs("div",{className:"coupon-validation",children:[a.jsxs("div",{className:"validation-header",children:[a.jsx("h2",{children:" Convalida Coupon"}),a.jsx("p",{className:"header-description",children:"Inserisci il codice cliente per verificare e convalidare lo sconto"})]}),a.jsxs("div",{className:"validation-form",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"coupon-code",children:"Codice Cliente"}),a.jsx("input",{id:"coupon-code",type:"text",value:t,onChange:u=>e(u.target.value),onKeyPress:c,placeholder:"es: ABC123",className:"code-input",maxLength:6,disabled:n,autoFocus:!0})]}),a.jsx("button",{className:"btn btn-primary btn-validate",onClick:o,disabled:n||!t.trim(),children:n?"Convalida in corso...":"CONVALIDA CODICE"})]}),i&&a.jsxs("div",{className:`validation-message ${i.type}`,children:[a.jsx("div",{className:"message-text",children:i.text}),i.details&&a.jsx("div",{className:"message-details",children:i.details})]}),a.jsxs("div",{className:"help-section",children:[a.jsx("h3",{children:" Come funziona"}),a.jsxs("ol",{children:[a.jsx("li",{children:"Il cliente mostra il codice da 6 caratteri"}),a.jsx("li",{children:"Inserisci il codice nel campo sopra"}),a.jsx("li",{children:'Click su "CONVALIDA CODICE"'}),a.jsx("li",{children:"Se il codice  valido, autorizza lo sconto"})]})]})]})}function ux(){const[t,e]=b.useState(null),[n,r]=b.useState(!0);b.useEffect(()=>{i()},[]);const i=async()=>{try{const o=se(H,"config","theme"),c=await qt(o);if(c.exists()){const u=c.data();e(u),s(u)}}catch(o){console.error("Error loading theme:",o)}finally{r(!1)}},s=o=>{const c=document.documentElement;Object.entries(o).forEach(([u,d])=>{if(u.startsWith("color")){const f="--"+u.replace(/([A-Z])/g,"-$1").toLowerCase();c.style.setProperty(f,d)}else if(u.startsWith("fontSize")){const f="--font-size-"+u.replace("fontSize","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}else if(u.startsWith("spacing")){const f="--spacing-"+u.replace("spacing","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}else if(u.startsWith("radius")){const f="--radius-"+u.replace("radius","").replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");c.style.setProperty(f,d)}})};return{theme:t,loading:n,reload:i}}function wO({onLogout:t}){const e=Ot(),[n,r]=b.useState("orders"),{theme:i}=ux(),s=()=>{t(),e("/admin/login")},o=()=>{switch(n){case"orders":return a.jsx(Vy,{});case"products":return a.jsx(cO,{});case"modifications":return a.jsx(gO,{});case"categories":return a.jsx(uO,{});case"promotions":return a.jsx(dO,{});case"fidelity":return a.jsx(yO,{});case"coupon-validation":return a.jsx(_O,{});case"settings":return a.jsx(mO,{});case"customers":return a.jsx(vO,{});default:return a.jsx(Vy,{})}};return a.jsxs("div",{className:"admin-dashboard",children:[a.jsxs("div",{className:"admin-sidebar",children:[a.jsx("div",{className:"admin-logo",children:a.jsx("h2",{children:"ZeroSei Admin"})}),a.jsxs("nav",{className:"admin-nav",children:[a.jsxs("button",{className:`nav-item ${n==="orders"?"active":""}`,onClick:()=>r("orders"),children:[(i==null?void 0:i.iconOrders)||""," Ordini"]}),a.jsxs("button",{className:`nav-item ${n==="products"?"active":""}`,onClick:()=>r("products"),children:[(i==null?void 0:i.iconProducts)||""," Prodotti"]}),a.jsxs("button",{className:`nav-item ${n==="modifications"?"active":""}`,onClick:()=>r("modifications"),children:[(i==null?void 0:i.iconIngredients)||""," Ingredienti"]}),a.jsxs("button",{className:`nav-item ${n==="categories"?"active":""}`,onClick:()=>r("categories"),children:[(i==null?void 0:i.iconCategories)||""," Categorie"]}),a.jsxs("button",{className:`nav-item ${n==="promotions"?"active":""}`,onClick:()=>r("promotions"),children:[(i==null?void 0:i.iconPromotions)||""," Promozioni"]}),a.jsx("button",{className:`nav-item ${n==="fidelity"?"active":""}`,onClick:()=>r("fidelity"),children:" Premi Fidelity"}),a.jsx("button",{className:`nav-item ${n==="coupon-validation"?"active":""}`,onClick:()=>r("coupon-validation"),children:" Convalida Coupon"}),a.jsxs("button",{className:`nav-item ${n==="customers"?"active":""}`,onClick:()=>r("customers"),children:[(i==null?void 0:i.iconCustomers)||""," Clienti"]}),a.jsxs("button",{className:`nav-item ${n==="settings"?"active":""}`,onClick:()=>r("settings"),children:[(i==null?void 0:i.iconSettings)||""," Impostazioni"]})]}),a.jsx("div",{className:"admin-footer",children:a.jsx("button",{className:"btn-logout",onClick:s,children:" Logout"})})]}),a.jsx("div",{className:"admin-content",children:o()})]})}function EO(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(null),[o,c]=b.useState([]),[u,d]=b.useState("3999999999"),[f,v]=b.useState([]);b.useEffect(()=>{m()},[]);const m=async()=>{try{console.log(" Loading all products...");const E=await Bp();console.log(" Products loaded:",E.length),console.log(" Products:",E),e(E),console.log(" Testing category query for pizze-classiche...");const R=await $p("pizze-classiche");console.log(" Category products loaded:",R.length),console.log(" Category products:",R),c(R)}catch(E){console.error(" Error loading products:",E),s(E.message||"Unknown error")}r(!1)};if(n)return a.jsx("div",{style:{padding:20},children:"Loading debug data..."});if(i)return a.jsxs("div",{style:{padding:20,color:"red"},children:["Error: ",i]});const g=E=>{console.log(`[DIAG] ${E}`),v(R=>[...R,`${new Date().toISOString().split("T")[1]} - ${E}`])},x=async()=>{v([]),g(" Starting Profile Save Diagnostic...");try{const E={firstName:"Test",lastName:"User",phone:u,email:"test@example.com"};g(` Form Data: ${JSON.stringify(E)}`),g("Searching user by phone...");const R=await wl(()=>Promise.resolve().then(()=>md),void 0).then(y=>y.getUserByPhone(E.phone));if(R){g(` Found existing user: ${R.id}`),g(`Existing Data: ${JSON.stringify(R)}`);const y={id:R.id,firstName:E.firstName,lastName:E.lastName,phone:E.phone,email:E.email,loyaltyPoints:R.loyaltyPoints||0,createdAt:R.createdAt,updatedAt:new Date};g(` Preparing UPDATE for ID: ${R.id}`);const{id:w,...I}=y;g(`Sanitized Payload (no ID): ${JSON.stringify(I)}`),await wl(()=>Promise.resolve().then(()=>md),void 0).then(S=>S.updateUserProfile(R.id,I)),g(" Update SUCCESS")}else{g(" User not found. Creating NEW...");const y={id:"",firstName:E.firstName,lastName:E.lastName,phone:E.phone,email:E.email,loyaltyPoints:0,createdAt:new Date,updatedAt:new Date};g(" Preparing CREATE");const{id:w,...I}=y;g(`Sanitized Payload (no ID): ${JSON.stringify(I)}`);const{createUserProfile:S}=await wl(async()=>{const{createUserProfile:D}=await Promise.resolve().then(()=>md);return{createUserProfile:D}},void 0),O=await S(I);g(` Create SUCCESS. New ID: ${O}`)}}catch(E){g(` ERROR: ${E.message}`),g(`Stack: ${E.stack}`)}};return n?a.jsx("div",{style:{padding:20},children:"Loading debug data..."}):i?a.jsxs("div",{style:{padding:20,color:"red"},children:["Error: ",i]}):a.jsxs("div",{style:{padding:20,fontFamily:"monospace",maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h1",{children:"Debug Products & Profiles"}),a.jsxs("div",{style:{border:"2px solid #333",padding:20,margin:"20px 0",borderRadius:8,background:"#f5f5f5"},children:[a.jsx("h2",{children:" Profile Save Diagnostic"}),a.jsxs("div",{style:{marginBottom:10},children:[a.jsx("label",{children:"Test Phone: "}),a.jsx("input",{value:u,onChange:E=>d(E.target.value),style:{padding:5}})]}),a.jsx("button",{onClick:x,style:{background:"#007bff",color:"white",padding:"10px 20px",border:"none",borderRadius:4,cursor:"pointer"},children:"RUN DIAGNOSTIC"}),a.jsx("div",{style:{marginTop:20,background:"#1e1e1e",color:"#0f0",padding:15,borderRadius:4,minHeight:200,whiteSpace:"pre-wrap"},children:f.length===0?"// Ready to run...":f.join(`
`)})]}),a.jsxs("h2",{children:["All Products: ",t.length]}),a.jsxs("h2",{children:["Pizze Classiche: ",o.length]}),a.jsx("h3",{children:"Category Test Results:"}),a.jsx("pre",{style:{background:"#eee",padding:10},children:JSON.stringify(o,null,2)})]})}function TO(){const[t,e]=b.useState({items:[],total:0}),[n,r]=b.useState(null),[i,s]=b.useState(!1);ux(),b.useEffect(()=>{console.log("App Version: v1.0.6 - Fidelity Instructions");const u=aE();e(u);const d=localStorage.getItem("user_profile");if(d){const v=JSON.parse(d);r(v),v.id&&!v.id.startsWith("temp_")&&cc(v.id,{lastAccess:new Date}).catch(m=>console.error("Error updating last access:",m))}const f=localStorage.getItem("admin_authenticated");s(f==="true")},[]);const o=()=>{s(!0)},c=()=>{localStorage.removeItem("admin_authenticated"),s(!1)};return a.jsx(pN,{children:a.jsxs(lv,{children:[a.jsx(yt,{path:"/admin/login",element:i?a.jsx(av,{to:"/admin/dashboard",replace:!0}):a.jsx(lO,{onLogin:o})}),a.jsx(yt,{path:"/admin/*",element:i?a.jsx(wO,{onLogout:c}):a.jsx(av,{to:"/admin/login",replace:!0})}),a.jsx(yt,{path:"*",element:a.jsx(MD,{cart:t,userProfile:n,children:a.jsxs(lv,{children:[a.jsx(yt,{path:"/",element:a.jsx(qD,{})}),a.jsx(yt,{path:"/menu",element:a.jsx(WD,{})}),a.jsx(yt,{path:"/menu/:category",element:a.jsx(HD,{cart:t,setCart:e})}),a.jsx(yt,{path:"/product/:id",element:a.jsx(XD,{cart:t,setCart:e})}),a.jsx(yt,{path:"/cart",element:a.jsx(YD,{cart:t,setCart:e,userProfile:n})}),a.jsx(yt,{path:"/profile",element:a.jsx(JD,{userProfile:n,setUserProfile:r})}),a.jsx(yt,{path:"/news",element:a.jsx(ZD,{})}),a.jsx(yt,{path:"/offer/:id",element:a.jsx(eO,{userProfile:n})}),a.jsx(yt,{path:"/fidelity",element:a.jsx(oO,{userProfile:n})}),a.jsx(yt,{path:"/debug",element:a.jsx(EO,{})})]})})})]})})}class xO extends b.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){console.error("Uncaught error:",e,n),this.setState({errorInfo:n})}render(){var e;return this.state.hasError?a.jsxs("div",{style:{padding:20,backgroundColor:"#ffebee",color:"#c62828",height:"100vh",overflow:"auto"},children:[a.jsx("h1",{children:"Si  verificato un errore"}),a.jsx("p",{children:"Per favore invia uno screenshot di questa schermata allo sviluppatore."}),a.jsxs("div",{style:{backgroundColor:"white",padding:15,borderRadius:5,border:"1px solid #ffcdd2",marginTop:10},children:[a.jsx("h3",{style:{marginTop:0},children:"Errore:"}),a.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"monospace"},children:(e=this.state.error)==null?void 0:e.toString()})]}),this.state.errorInfo&&a.jsxs("div",{style:{backgroundColor:"white",padding:15,borderRadius:5,border:"1px solid #ffcdd2",marginTop:10},children:[a.jsx("h3",{style:{marginTop:0},children:"Dettagli Tecnici (Stack Trace):"}),a.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"0.8em"},children:this.state.errorInfo.componentStack})]}),a.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:20,padding:"10px 20px",backgroundColor:"#c62828",color:"white",border:"none",borderRadius:5,fontSize:"1em"},children:"Riprova (Ricarica App)"})]}):this.props.children}}vd.createRoot(document.getElementById("root")).render(a.jsx(Ky.StrictMode,{children:a.jsx(xO,{children:a.jsx(TO,{})})}));
